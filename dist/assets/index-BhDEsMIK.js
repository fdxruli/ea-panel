const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MapPicker-CfXYrTRz.js","assets/MapPicker-DRlTQCTs.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function Wl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Q2(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var a=!1;try{a=this instanceof i}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var a=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:function(){return n[i]}})}),t}var wf={exports:{}},ul={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function Z2(){if(t0)return ul;t0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:n,type:i,key:l,ref:a!==void 0?a:null,props:o}}return ul.Fragment=e,ul.jsx=t,ul.jsxs=t,ul}var n0;function J2(){return n0||(n0=1,wf.exports=Z2()),wf.exports}var d=J2(),Sf={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0;function eS(){if(s0)return Re;s0=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function _(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,j={};function w(L,X,J){this.props=L,this.context=X,this.refs=j,this.updater=J||y}w.prototype.isReactComponent={},w.prototype.setState=function(L,X){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,X,"setState")},w.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function S(){}S.prototype=w.prototype;function C(L,X,J){this.props=L,this.context=X,this.refs=j,this.updater=J||y}var T=C.prototype=new S;T.constructor=C,x(T,w.prototype),T.isPureReactComponent=!0;var B=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function $(L,X,J,ee,ne,W){return J=W.ref,{$$typeof:n,type:L,key:X,ref:J!==void 0?J:null,props:W}}function R(L,X){return $(L.type,X,void 0,void 0,void 0,L.props)}function N(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function z(L){var X={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(J){return X[J]})}var I=/\/+/g;function U(L,X){return typeof L=="object"&&L!==null&&L.key!=null?z(""+L.key):X.toString(36)}function q(){}function H(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(q,q):(L.status="pending",L.then(function(X){L.status==="pending"&&(L.status="fulfilled",L.value=X)},function(X){L.status==="pending"&&(L.status="rejected",L.reason=X)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function G(L,X,J,ee,ne){var W=typeof L;(W==="undefined"||W==="boolean")&&(L=null);var oe=!1;if(L===null)oe=!0;else switch(W){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(L.$$typeof){case n:case e:oe=!0;break;case p:return oe=L._init,G(oe(L._payload),X,J,ee,ne)}}if(oe)return ne=ne(L),oe=ee===""?"."+U(L,0):ee,B(ne)?(J="",oe!=null&&(J=oe.replace(I,"$&/")+"/"),G(ne,X,J,"",function(be){return be})):ne!=null&&(N(ne)&&(ne=R(ne,J+(ne.key==null||L&&L.key===ne.key?"":(""+ne.key).replace(I,"$&/")+"/")+oe)),X.push(ne)),1;oe=0;var _e=ee===""?".":ee+":";if(B(L))for(var he=0;he<L.length;he++)ee=L[he],W=_e+U(ee,he),oe+=G(ee,X,J,W,ne);else if(he=_(L),typeof he=="function")for(L=he.call(L),he=0;!(ee=L.next()).done;)ee=ee.value,W=_e+U(ee,he++),oe+=G(ee,X,J,W,ne);else if(W==="object"){if(typeof L.then=="function")return G(H(L),X,J,ee,ne);throw X=String(L),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return oe}function E(L,X,J){if(L==null)return L;var ee=[],ne=0;return G(L,ee,"","",function(W){return X.call(J,W,ne++)}),ee}function O(L){if(L._status===-1){var X=L._result;X=X(),X.then(function(J){(L._status===0||L._status===-1)&&(L._status=1,L._result=J)},function(J){(L._status===0||L._status===-1)&&(L._status=2,L._result=J)}),L._status===-1&&(L._status=0,L._result=X)}if(L._status===1)return L._result.default;throw L._result}var F=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Y(){}return Re.Children={map:E,forEach:function(L,X,J){E(L,function(){X.apply(this,arguments)},J)},count:function(L){var X=0;return E(L,function(){X++}),X},toArray:function(L){return E(L,function(X){return X})||[]},only:function(L){if(!N(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Re.Component=w,Re.Fragment=t,Re.Profiler=a,Re.PureComponent=C,Re.StrictMode=i,Re.Suspense=h,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Re.__COMPILER_RUNTIME={__proto__:null,c:function(L){return D.H.useMemoCache(L)}},Re.cache=function(L){return function(){return L.apply(null,arguments)}},Re.cloneElement=function(L,X,J){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ee=x({},L.props),ne=L.key,W=void 0;if(X!=null)for(oe in X.ref!==void 0&&(W=void 0),X.key!==void 0&&(ne=""+X.key),X)!M.call(X,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&X.ref===void 0||(ee[oe]=X[oe]);var oe=arguments.length-2;if(oe===1)ee.children=J;else if(1<oe){for(var _e=Array(oe),he=0;he<oe;he++)_e[he]=arguments[he+2];ee.children=_e}return $(L.type,ne,void 0,void 0,W,ee)},Re.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Re.createElement=function(L,X,J){var ee,ne={},W=null;if(X!=null)for(ee in X.key!==void 0&&(W=""+X.key),X)M.call(X,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(ne[ee]=X[ee]);var oe=arguments.length-2;if(oe===1)ne.children=J;else if(1<oe){for(var _e=Array(oe),he=0;he<oe;he++)_e[he]=arguments[he+2];ne.children=_e}if(L&&L.defaultProps)for(ee in oe=L.defaultProps,oe)ne[ee]===void 0&&(ne[ee]=oe[ee]);return $(L,W,void 0,void 0,null,ne)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(L){return{$$typeof:u,render:L}},Re.isValidElement=N,Re.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:O}},Re.memo=function(L,X){return{$$typeof:m,type:L,compare:X===void 0?null:X}},Re.startTransition=function(L){var X=D.T,J={};D.T=J;try{var ee=L(),ne=D.S;ne!==null&&ne(J,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(Y,F)}catch(W){F(W)}finally{D.T=X}},Re.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Re.use=function(L){return D.H.use(L)},Re.useActionState=function(L,X,J){return D.H.useActionState(L,X,J)},Re.useCallback=function(L,X){return D.H.useCallback(L,X)},Re.useContext=function(L){return D.H.useContext(L)},Re.useDebugValue=function(){},Re.useDeferredValue=function(L,X){return D.H.useDeferredValue(L,X)},Re.useEffect=function(L,X,J){var ee=D.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(L,X)},Re.useId=function(){return D.H.useId()},Re.useImperativeHandle=function(L,X,J){return D.H.useImperativeHandle(L,X,J)},Re.useInsertionEffect=function(L,X){return D.H.useInsertionEffect(L,X)},Re.useLayoutEffect=function(L,X){return D.H.useLayoutEffect(L,X)},Re.useMemo=function(L,X){return D.H.useMemo(L,X)},Re.useOptimistic=function(L,X){return D.H.useOptimistic(L,X)},Re.useReducer=function(L,X,J){return D.H.useReducer(L,X,J)},Re.useRef=function(L){return D.H.useRef(L)},Re.useState=function(L){return D.H.useState(L)},Re.useSyncExternalStore=function(L,X,J){return D.H.useSyncExternalStore(L,X,J)},Re.useTransition=function(){return D.H.useTransition()},Re.version="19.1.1",Re}var i0;function zm(){return i0||(i0=1,Sf.exports=eS()),Sf.exports}var A=zm();const Xe=Wl(A);var Cf={exports:{}},dl={},jf={exports:{}},Ef={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0;function tS(){return a0||(a0=1,(function(n){function e(E,O){var F=E.length;E.push(O);e:for(;0<F;){var Y=F-1>>>1,L=E[Y];if(0<a(L,O))E[Y]=O,E[F]=L,F=Y;else break e}}function t(E){return E.length===0?null:E[0]}function i(E){if(E.length===0)return null;var O=E[0],F=E.pop();if(F!==O){E[0]=F;e:for(var Y=0,L=E.length,X=L>>>1;Y<X;){var J=2*(Y+1)-1,ee=E[J],ne=J+1,W=E[ne];if(0>a(ee,F))ne<L&&0>a(W,ee)?(E[Y]=W,E[ne]=F,Y=ne):(E[Y]=ee,E[J]=F,Y=J);else if(ne<L&&0>a(W,F))E[Y]=W,E[ne]=F,Y=ne;else break e}}return O}function a(E,O){var F=E.sortIndex-O.sortIndex;return F!==0?F:E.id-O.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var h=[],m=[],p=1,g=null,_=3,y=!1,x=!1,j=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function B(E){for(var O=t(m);O!==null;){if(O.callback===null)i(m);else if(O.startTime<=E)i(m),O.sortIndex=O.expirationTime,e(h,O);else break;O=t(m)}}function D(E){if(j=!1,B(E),!x)if(t(h)!==null)x=!0,M||(M=!0,U());else{var O=t(m);O!==null&&G(D,O.startTime-E)}}var M=!1,$=-1,R=5,N=-1;function z(){return w?!0:!(n.unstable_now()-N<R)}function I(){if(w=!1,M){var E=n.unstable_now();N=E;var O=!0;try{e:{x=!1,j&&(j=!1,C($),$=-1),y=!0;var F=_;try{t:{for(B(E),g=t(h);g!==null&&!(g.expirationTime>E&&z());){var Y=g.callback;if(typeof Y=="function"){g.callback=null,_=g.priorityLevel;var L=Y(g.expirationTime<=E);if(E=n.unstable_now(),typeof L=="function"){g.callback=L,B(E),O=!0;break t}g===t(h)&&i(h),B(E)}else i(h);g=t(h)}if(g!==null)O=!0;else{var X=t(m);X!==null&&G(D,X.startTime-E),O=!1}}break e}finally{g=null,_=F,y=!1}O=void 0}}finally{O?U():M=!1}}}var U;if(typeof T=="function")U=function(){T(I)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,H=q.port2;q.port1.onmessage=I,U=function(){H.postMessage(null)}}else U=function(){S(I,0)};function G(E,O){$=S(function(){E(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(E){E.callback=null},n.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<E?Math.floor(1e3/E):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(E){switch(_){case 1:case 2:case 3:var O=3;break;default:O=_}var F=_;_=O;try{return E()}finally{_=F}},n.unstable_requestPaint=function(){w=!0},n.unstable_runWithPriority=function(E,O){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var F=_;_=E;try{return O()}finally{_=F}},n.unstable_scheduleCallback=function(E,O,F){var Y=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Y+F:Y):F=Y,E){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=F+L,E={id:p++,callback:O,priorityLevel:E,startTime:F,expirationTime:L,sortIndex:-1},F>Y?(E.sortIndex=F,e(m,E),t(h)===null&&E===t(m)&&(j?(C($),$=-1):j=!0,G(D,F-Y))):(E.sortIndex=L,e(h,E),x||y||(x=!0,M||(M=!0,U()))),E},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(E){var O=_;return function(){var F=_;_=O;try{return E.apply(this,arguments)}finally{_=F}}}})(Ef)),Ef}var r0;function nS(){return r0||(r0=1,jf.exports=tS()),jf.exports}var Af={exports:{}},An={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function sS(){if(o0)return An;o0=1;var n=zm();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,m,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:h,containerInfo:m,implementation:p}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return An.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,An.createPortal=function(h,m){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(h,m,null,p)},An.flushSync=function(h){var m=l.T,p=i.p;try{if(l.T=null,i.p=2,h)return h()}finally{l.T=m,i.p=p,i.d.f()}},An.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(h,m))},An.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},An.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var p=m.as,g=u(p,m.crossOrigin),_=typeof m.integrity=="string"?m.integrity:void 0,y=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;p==="style"?i.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:g,integrity:_,fetchPriority:y}):p==="script"&&i.d.X(h,{crossOrigin:g,integrity:_,fetchPriority:y,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},An.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var p=u(m.as,m.crossOrigin);i.d.M(h,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(h)},An.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var p=m.as,g=u(p,m.crossOrigin);i.d.L(h,p,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},An.preloadModule=function(h,m){if(typeof h=="string")if(m){var p=u(m.as,m.crossOrigin);i.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(h)},An.requestFormReset=function(h){i.d.r(h)},An.unstable_batchedUpdates=function(h,m){return h(m)},An.useFormState=function(h,m,p){return l.H.useFormState(h,m,p)},An.useFormStatus=function(){return l.H.useHostTransitionStatus()},An.version="19.1.1",An}var l0;function iS(){if(l0)return Af.exports;l0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Af.exports=sS(),Af.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0;function aS(){if(c0)return dl;c0=1;var n=nS(),e=zm(),t=iS();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var r=s,c=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(c=r.return),s=r.return;while(s)}return r.tag===3?c:null}function l(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function u(s){if(o(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=o(s),r===null)throw Error(i(188));return r!==s?null:s}for(var c=s,f=r;;){var v=c.return;if(v===null)break;var b=v.alternate;if(b===null){if(f=v.return,f!==null){c=f;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===c)return u(v),s;if(b===f)return u(v),r;b=b.sibling}throw Error(i(188))}if(c.return!==f.return)c=v,f=b;else{for(var k=!1,P=v.child;P;){if(P===c){k=!0,c=v,f=b;break}if(P===f){k=!0,f=v,c=b;break}P=P.sibling}if(!k){for(P=b.child;P;){if(P===c){k=!0,c=b,f=v;break}if(P===f){k=!0,f=b,c=v;break}P=P.sibling}if(!k)throw Error(i(189))}}if(c.alternate!==f)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?s:r}function m(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=m(s),r!==null)return r;s=s.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function U(s){return s===null||typeof s!="object"?null:(s=I&&s[I]||s["@@iterator"],typeof s=="function"?s:null)}var q=Symbol.for("react.client.reference");function H(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===q?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case x:return"Fragment";case w:return"Profiler";case j:return"StrictMode";case D:return"Suspense";case M:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case y:return"Portal";case T:return(s.displayName||"Context")+".Provider";case C:return(s._context.displayName||"Context")+".Consumer";case B:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $:return r=s.displayName||null,r!==null?r:H(s.type)||"Memo";case R:r=s._payload,s=s._init;try{return H(s(r))}catch{}}return null}var G=Array.isArray,E=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},Y=[],L=-1;function X(s){return{current:s}}function J(s){0>L||(s.current=Y[L],Y[L]=null,L--)}function ee(s,r){L++,Y[L]=s.current,s.current=r}var ne=X(null),W=X(null),oe=X(null),_e=X(null);function he(s,r){switch(ee(oe,r),ee(W,s),ee(ne,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?kv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=kv(r),s=Ov(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}J(ne),ee(ne,s)}function be(){J(ne),J(W),J(oe)}function Ae(s){s.memoizedState!==null&&ee(_e,s);var r=ne.current,c=Ov(r,s.type);r!==c&&(ee(W,s),ee(ne,c))}function fe(s){W.current===s&&(J(ne),J(W)),_e.current===s&&(J(_e),al._currentValue=F)}var Te=Object.prototype.hasOwnProperty,Ze=n.unstable_scheduleCallback,kt=n.unstable_cancelCallback,nt=n.unstable_shouldYield,Ot=n.unstable_requestPaint,Oe=n.unstable_now,Ve=n.unstable_getCurrentPriorityLevel,vt=n.unstable_ImmediatePriority,Lt=n.unstable_UserBlockingPriority,st=n.unstable_NormalPriority,gn=n.unstable_LowPriority,lt=n.unstable_IdlePriority,qe=n.log,Nt=n.unstable_setDisableYieldValue,Pt=null,It=null;function it(s){if(typeof qe=="function"&&Nt(s),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(Pt,s)}catch{}}var wt=Math.clz32?Math.clz32:Jt,Ut=Math.log,Sn=Math.LN2;function Jt(s){return s>>>=0,s===0?32:31-(Ut(s)/Sn|0)|0}var en=256,yt=4194304;function Rt(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function rs(s,r,c){var f=s.pendingLanes;if(f===0)return 0;var v=0,b=s.suspendedLanes,k=s.pingedLanes;s=s.warmLanes;var P=f&134217727;return P!==0?(f=P&~b,f!==0?v=Rt(f):(k&=P,k!==0?v=Rt(k):c||(c=P&~s,c!==0&&(v=Rt(c))))):(P=f&~b,P!==0?v=Rt(P):k!==0?v=Rt(k):c||(c=f&~s,c!==0&&(v=Rt(c)))),v===0?0:r!==0&&r!==v&&(r&b)===0&&(b=v&-v,c=r&-r,b>=c||b===32&&(c&4194048)!==0)?r:v}function Cs(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function _a(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qs(){var s=en;return en<<=1,(en&4194048)===0&&(en=256),s}function Yn(){var s=yt;return yt<<=1,(yt&62914560)===0&&(yt=4194304),s}function va(s){for(var r=[],c=0;31>c;c++)r.push(s);return r}function Yt(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function os(s,r,c,f,v,b){var k=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var P=s.entanglements,V=s.expirationTimes,se=s.hiddenUpdates;for(c=k&~c;0<c;){var le=31-wt(c),ue=1<<le;P[le]=0,V[le]=-1;var ie=se[le];if(ie!==null)for(se[le]=null,le=0;le<ie.length;le++){var re=ie[le];re!==null&&(re.lane&=-536870913)}c&=~ue}f!==0&&js(s,f,0),b!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=b&~(k&~r))}function js(s,r,c){s.pendingLanes|=r,s.suspendedLanes&=~r;var f=31-wt(r);s.entangledLanes|=r,s.entanglements[f]=s.entanglements[f]|1073741824|c&4194090}function ct(s,r){var c=s.entangledLanes|=r;for(s=s.entanglements;c;){var f=31-wt(c),v=1<<f;v&r|s[f]&r&&(s[f]|=r),c&=~v}}function Wn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Xn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Kn(){var s=O.p;return s!==0?s:(s=window.event,s===void 0?32:Xv(s.type))}function go(s,r){var c=O.p;try{return O.p=s,r()}finally{O.p=c}}var Es=Math.random().toString(36).slice(2),tn="__reactFiber$"+Es,Cn="__reactProps$"+Es,_n="__reactContainer$"+Es,As="__reactEvents$"+Es,nc="__reactListeners$"+Es,sc="__reactHandles$"+Es,nr="__reactResources$"+Es,Bi="__reactMarker$"+Es;function Qn(s){delete s[tn],delete s[Cn],delete s[As],delete s[nc],delete s[sc]}function ii(s){var r=s[tn];if(r)return r;for(var c=s.parentNode;c;){if(r=c[_n]||c[tn]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(s=Dv(s);s!==null;){if(c=s[tn])return c;s=Dv(s)}return r}s=c,c=s.parentNode}return null}function ai(s){if(s=s[tn]||s[_n]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function Li(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function ri(s){var r=s[nr];return r||(r=s[nr]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Wt(s){s[Bi]=!0}var ge=new Set,Q={};function de(s,r){me(s,r),me(s+"Capture",r)}function me(s,r){for(Q[s]=r,s=0;s<r.length;s++)ge.add(r[s])}var mt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),nn={},Et={};function jn(s){return Te.call(Et,s)?!0:Te.call(nn,s)?!1:mt.test(s)?Et[s]=!0:(nn[s]=!0,!1)}function Pn(s,r,c){if(jn(r))if(c===null)s.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+c)}}function Ts(s,r,c){if(c===null)s.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+c)}}function Zn(s,r,c,f){if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(r,c,""+f)}}var zt,_o;function oi(s){if(zt===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);zt=r&&r[1]||"",_o=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zt+s+_o}var gd=!1;function _d(s,r){if(!s||gd)return"";gd=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(re){var ie=re}Reflect.construct(s,[],ue)}else{try{ue.call()}catch(re){ie=re}s.call(ue.prototype)}}else{try{throw Error()}catch(re){ie=re}(ue=s())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(re){if(re&&ie&&typeof re.stack=="string")return[re.stack,ie.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),k=b[0],P=b[1];if(k&&P){var V=k.split(`
`),se=P.split(`
`);for(v=f=0;f<V.length&&!V[f].includes("DetermineComponentFrameRoot");)f++;for(;v<se.length&&!se[v].includes("DetermineComponentFrameRoot");)v++;if(f===V.length||v===se.length)for(f=V.length-1,v=se.length-1;1<=f&&0<=v&&V[f]!==se[v];)v--;for(;1<=f&&0<=v;f--,v--)if(V[f]!==se[v]){if(f!==1||v!==1)do if(f--,v--,0>v||V[f]!==se[v]){var le=`
`+V[f].replace(" at new "," at ");return s.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",s.displayName)),le}while(1<=f&&0<=v);break}}}finally{gd=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?oi(c):""}function G1(s){switch(s.tag){case 26:case 27:case 5:return oi(s.type);case 16:return oi("Lazy");case 13:return oi("Suspense");case 19:return oi("SuspenseList");case 0:case 15:return _d(s.type,!1);case 11:return _d(s.type.render,!1);case 1:return _d(s.type,!0);case 31:return oi("Activity");default:return""}}function Sp(s){try{var r="";do r+=G1(s),s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function ls(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Cp(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function V1(s){var r=Cp(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),f=""+s[r];if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var v=c.get,b=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return v.call(this)},set:function(k){f=""+k,b.call(this,k)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function ic(s){s._valueTracker||(s._valueTracker=V1(s))}function jp(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var c=r.getValue(),f="";return s&&(f=Cp(s)?s.checked?"true":"false":s.value),s=f,s!==c?(r.setValue(s),!0):!1}function ac(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Y1=/[\n"\\]/g;function cs(s){return s.replace(Y1,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function vd(s,r,c,f,v,b,k,P){s.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?s.type=k:s.removeAttribute("type"),r!=null?k==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+ls(r)):s.value!==""+ls(r)&&(s.value=""+ls(r)):k!=="submit"&&k!=="reset"||s.removeAttribute("value"),r!=null?yd(s,k,ls(r)):c!=null?yd(s,k,ls(c)):f!=null&&s.removeAttribute("value"),v==null&&b!=null&&(s.defaultChecked=!!b),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?s.name=""+ls(P):s.removeAttribute("name")}function Ep(s,r,c,f,v,b,k,P){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),r!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||r!=null))return;c=c!=null?""+ls(c):"",r=r!=null?""+ls(r):c,P||r===s.value||(s.value=r),s.defaultValue=r}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=P?s.checked:!!f,s.defaultChecked=!!f,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(s.name=k)}function yd(s,r,c){r==="number"&&ac(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function sr(s,r,c,f){if(s=s.options,r){r={};for(var v=0;v<c.length;v++)r["$"+c[v]]=!0;for(c=0;c<s.length;c++)v=r.hasOwnProperty("$"+s[c].value),s[c].selected!==v&&(s[c].selected=v),v&&f&&(s[c].defaultSelected=!0)}else{for(c=""+ls(c),r=null,v=0;v<s.length;v++){if(s[v].value===c){s[v].selected=!0,f&&(s[v].defaultSelected=!0);return}r!==null||s[v].disabled||(r=s[v])}r!==null&&(r.selected=!0)}}function Ap(s,r,c){if(r!=null&&(r=""+ls(r),r!==s.value&&(s.value=r),c==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=c!=null?""+ls(c):""}function Tp(s,r,c,f){if(r==null){if(f!=null){if(c!=null)throw Error(i(92));if(G(f)){if(1<f.length)throw Error(i(93));f=f[0]}c=f}c==null&&(c=""),r=c}c=ls(r),s.defaultValue=c,f=s.textContent,f===c&&f!==""&&f!==null&&(s.value=f)}function ir(s,r){if(r){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=r;return}}s.textContent=r}var W1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kp(s,r,c){var f=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":f?s.setProperty(r,c):typeof c!="number"||c===0||W1.has(r)?r==="float"?s.cssFloat=c:s[r]=(""+c).trim():s[r]=c+"px"}function Op(s,r,c){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var v in r)f=r[v],r.hasOwnProperty(v)&&c[v]!==f&&kp(s,v,f)}else for(var b in r)r.hasOwnProperty(b)&&kp(s,b,r[b])}function bd(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),K1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rc(s){return K1.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var xd=null;function wd(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ar=null,rr=null;function Np(s){var r=ai(s);if(r&&(s=r.stateNode)){var c=s[Cn]||null;e:switch(s=r.stateNode,r.type){case"input":if(vd(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+cs(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var f=c[r];if(f!==s&&f.form===s.form){var v=f[Cn]||null;if(!v)throw Error(i(90));vd(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<c.length;r++)f=c[r],f.form===s.form&&jp(f)}break e;case"textarea":Ap(s,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&sr(s,!!c.multiple,r,!1)}}}var Sd=!1;function Rp(s,r,c){if(Sd)return s(r,c);Sd=!0;try{var f=s(r);return f}finally{if(Sd=!1,(ar!==null||rr!==null)&&(Gc(),ar&&(r=ar,s=rr,rr=ar=null,Np(r),s)))for(r=0;r<s.length;r++)Np(s[r])}}function vo(s,r){var c=s.stateNode;if(c===null)return null;var f=c[Cn]||null;if(f===null)return null;c=f[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(i(231,r,typeof c));return c}var li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cd=!1;if(li)try{var yo={};Object.defineProperty(yo,"passive",{get:function(){Cd=!0}}),window.addEventListener("test",yo,yo),window.removeEventListener("test",yo,yo)}catch{Cd=!1}var Pi=null,jd=null,oc=null;function Mp(){if(oc)return oc;var s,r=jd,c=r.length,f,v="value"in Pi?Pi.value:Pi.textContent,b=v.length;for(s=0;s<c&&r[s]===v[s];s++);var k=c-s;for(f=1;f<=k&&r[c-f]===v[b-f];f++);return oc=v.slice(s,1<f?1-f:void 0)}function lc(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function cc(){return!0}function Dp(){return!1}function In(s){function r(c,f,v,b,k){this._reactName=c,this._targetInst=v,this.type=f,this.nativeEvent=b,this.target=k,this.currentTarget=null;for(var P in s)s.hasOwnProperty(P)&&(c=s[P],this[P]=c?c(b):b[P]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?cc:Dp,this.isPropagationStopped=Dp,this}return p(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=cc)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=cc)},persist:function(){},isPersistent:cc}),r}var ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uc=In(ya),bo=p({},ya,{view:0,detail:0}),Q1=In(bo),Ed,Ad,xo,dc=p({},bo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==xo&&(xo&&s.type==="mousemove"?(Ed=s.screenX-xo.screenX,Ad=s.screenY-xo.screenY):Ad=Ed=0,xo=s),Ed)},movementY:function(s){return"movementY"in s?s.movementY:Ad}}),Bp=In(dc),Z1=p({},dc,{dataTransfer:0}),J1=In(Z1),ew=p({},bo,{relatedTarget:0}),Td=In(ew),tw=p({},ya,{animationName:0,elapsedTime:0,pseudoElement:0}),nw=In(tw),sw=p({},ya,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),iw=In(sw),aw=p({},ya,{data:0}),Lp=In(aw),rw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ow={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cw(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=lw[s])?!!r[s]:!1}function kd(){return cw}var uw=p({},bo,{key:function(s){if(s.key){var r=rw[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=lc(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ow[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kd,charCode:function(s){return s.type==="keypress"?lc(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?lc(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),dw=In(uw),hw=p({},dc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pp=In(hw),fw=p({},bo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kd}),mw=In(fw),pw=p({},ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),gw=In(pw),_w=p({},dc,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),vw=In(_w),yw=p({},ya,{newState:0,oldState:0}),bw=In(yw),xw=[9,13,27,32],Od=li&&"CompositionEvent"in window,wo=null;li&&"documentMode"in document&&(wo=document.documentMode);var ww=li&&"TextEvent"in window&&!wo,Ip=li&&(!Od||wo&&8<wo&&11>=wo),Up=" ",zp=!1;function $p(s,r){switch(s){case"keyup":return xw.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hp(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var or=!1;function Sw(s,r){switch(s){case"compositionend":return Hp(r);case"keypress":return r.which!==32?null:(zp=!0,Up);case"textInput":return s=r.data,s===Up&&zp?null:s;default:return null}}function Cw(s,r){if(or)return s==="compositionend"||!Od&&$p(s,r)?(s=Mp(),oc=jd=Pi=null,or=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ip&&r.locale!=="ko"?null:r.data;default:return null}}var jw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qp(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!jw[s.type]:r==="textarea"}function Fp(s,r,c,f){ar?rr?rr.push(f):rr=[f]:ar=f,r=Qc(r,"onChange"),0<r.length&&(c=new uc("onChange","change",null,c,f),s.push({event:c,listeners:r}))}var So=null,Co=null;function Ew(s){Cv(s,0)}function hc(s){var r=Li(s);if(jp(r))return s}function Gp(s,r){if(s==="change")return r}var Vp=!1;if(li){var Nd;if(li){var Rd="oninput"in document;if(!Rd){var Yp=document.createElement("div");Yp.setAttribute("oninput","return;"),Rd=typeof Yp.oninput=="function"}Nd=Rd}else Nd=!1;Vp=Nd&&(!document.documentMode||9<document.documentMode)}function Wp(){So&&(So.detachEvent("onpropertychange",Xp),Co=So=null)}function Xp(s){if(s.propertyName==="value"&&hc(Co)){var r=[];Fp(r,Co,s,wd(s)),Rp(Ew,r)}}function Aw(s,r,c){s==="focusin"?(Wp(),So=r,Co=c,So.attachEvent("onpropertychange",Xp)):s==="focusout"&&Wp()}function Tw(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return hc(Co)}function kw(s,r){if(s==="click")return hc(r)}function Ow(s,r){if(s==="input"||s==="change")return hc(r)}function Nw(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Jn=typeof Object.is=="function"?Object.is:Nw;function jo(s,r){if(Jn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var c=Object.keys(s),f=Object.keys(r);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var v=c[f];if(!Te.call(r,v)||!Jn(s[v],r[v]))return!1}return!0}function Kp(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Qp(s,r){var c=Kp(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=r&&f>=r)return{node:c,offset:r-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Kp(c)}}function Zp(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Zp(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Jp(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=ac(s.document);r instanceof s.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)s=r.contentWindow;else break;r=ac(s.document)}return r}function Md(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var Rw=li&&"documentMode"in document&&11>=document.documentMode,lr=null,Dd=null,Eo=null,Bd=!1;function eg(s,r,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Bd||lr==null||lr!==ac(f)||(f=lr,"selectionStart"in f&&Md(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Eo&&jo(Eo,f)||(Eo=f,f=Qc(Dd,"onSelect"),0<f.length&&(r=new uc("onSelect","select",null,r,c),s.push({event:r,listeners:f}),r.target=lr)))}function ba(s,r){var c={};return c[s.toLowerCase()]=r.toLowerCase(),c["Webkit"+s]="webkit"+r,c["Moz"+s]="moz"+r,c}var cr={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionrun:ba("Transition","TransitionRun"),transitionstart:ba("Transition","TransitionStart"),transitioncancel:ba("Transition","TransitionCancel"),transitionend:ba("Transition","TransitionEnd")},Ld={},tg={};li&&(tg=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);function xa(s){if(Ld[s])return Ld[s];if(!cr[s])return s;var r=cr[s],c;for(c in r)if(r.hasOwnProperty(c)&&c in tg)return Ld[s]=r[c];return s}var ng=xa("animationend"),sg=xa("animationiteration"),ig=xa("animationstart"),Mw=xa("transitionrun"),Dw=xa("transitionstart"),Bw=xa("transitioncancel"),ag=xa("transitionend"),rg=new Map,Pd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pd.push("scrollEnd");function ks(s,r){rg.set(s,r),de(r,[s])}var og=new WeakMap;function us(s,r){if(typeof s=="object"&&s!==null){var c=og.get(s);return c!==void 0?c:(r={value:s,source:r,stack:Sp(r)},og.set(s,r),r)}return{value:s,source:r,stack:Sp(r)}}var ds=[],ur=0,Id=0;function fc(){for(var s=ur,r=Id=ur=0;r<s;){var c=ds[r];ds[r++]=null;var f=ds[r];ds[r++]=null;var v=ds[r];ds[r++]=null;var b=ds[r];if(ds[r++]=null,f!==null&&v!==null){var k=f.pending;k===null?v.next=v:(v.next=k.next,k.next=v),f.pending=v}b!==0&&lg(c,v,b)}}function mc(s,r,c,f){ds[ur++]=s,ds[ur++]=r,ds[ur++]=c,ds[ur++]=f,Id|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function Ud(s,r,c,f){return mc(s,r,c,f),pc(s)}function dr(s,r){return mc(s,null,null,r),pc(s)}function lg(s,r,c){s.lanes|=c;var f=s.alternate;f!==null&&(f.lanes|=c);for(var v=!1,b=s.return;b!==null;)b.childLanes|=c,f=b.alternate,f!==null&&(f.childLanes|=c),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(v=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,v&&r!==null&&(v=31-wt(c),s=b.hiddenUpdates,f=s[v],f===null?s[v]=[r]:f.push(r),r.lane=c|536870912),b):null}function pc(s){if(50<Qo)throw Qo=0,Gh=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var hr={};function Lw(s,r,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function es(s,r,c,f){return new Lw(s,r,c,f)}function zd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ci(s,r){var c=s.alternate;return c===null?(c=es(s.tag,r,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=r,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,r=s.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function cg(s,r){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,r=c.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function gc(s,r,c,f,v,b){var k=0;if(f=s,typeof s=="function")zd(s)&&(k=1);else if(typeof s=="string")k=I2(s,c,ne.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=es(31,c,r,v),s.elementType=N,s.lanes=b,s;case x:return wa(c.children,v,b,r);case j:k=8,v|=24;break;case w:return s=es(12,c,r,v|2),s.elementType=w,s.lanes=b,s;case D:return s=es(13,c,r,v),s.elementType=D,s.lanes=b,s;case M:return s=es(19,c,r,v),s.elementType=M,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case S:case T:k=10;break e;case C:k=9;break e;case B:k=11;break e;case $:k=14;break e;case R:k=16,f=null;break e}k=29,c=Error(i(130,s===null?"null":typeof s,"")),f=null}return r=es(k,c,r,v),r.elementType=s,r.type=f,r.lanes=b,r}function wa(s,r,c,f){return s=es(7,s,f,r),s.lanes=c,s}function $d(s,r,c){return s=es(6,s,null,r),s.lanes=c,s}function Hd(s,r,c){return r=es(4,s.children!==null?s.children:[],s.key,r),r.lanes=c,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var fr=[],mr=0,_c=null,vc=0,hs=[],fs=0,Sa=null,ui=1,di="";function Ca(s,r){fr[mr++]=vc,fr[mr++]=_c,_c=s,vc=r}function ug(s,r,c){hs[fs++]=ui,hs[fs++]=di,hs[fs++]=Sa,Sa=s;var f=ui;s=di;var v=32-wt(f)-1;f&=~(1<<v),c+=1;var b=32-wt(r)+v;if(30<b){var k=v-v%5;b=(f&(1<<k)-1).toString(32),f>>=k,v-=k,ui=1<<32-wt(r)+v|c<<v|f,di=b+s}else ui=1<<b|c<<v|f,di=s}function qd(s){s.return!==null&&(Ca(s,1),ug(s,1,0))}function Fd(s){for(;s===_c;)_c=fr[--mr],fr[mr]=null,vc=fr[--mr],fr[mr]=null;for(;s===Sa;)Sa=hs[--fs],hs[fs]=null,di=hs[--fs],hs[fs]=null,ui=hs[--fs],hs[fs]=null}var Nn=null,Mt=null,Ke=!1,ja=null,Fs=!1,Gd=Error(i(519));function Ea(s){var r=Error(i(418,""));throw ko(us(r,s)),Gd}function dg(s){var r=s.stateNode,c=s.type,f=s.memoizedProps;switch(r[tn]=s,r[Cn]=f,c){case"dialog":Le("cancel",r),Le("close",r);break;case"iframe":case"object":case"embed":Le("load",r);break;case"video":case"audio":for(c=0;c<Jo.length;c++)Le(Jo[c],r);break;case"source":Le("error",r);break;case"img":case"image":case"link":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"input":Le("invalid",r),Ep(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),ic(r);break;case"select":Le("invalid",r);break;case"textarea":Le("invalid",r),Tp(r,f.value,f.defaultValue,f.children),ic(r)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||f.suppressHydrationWarning===!0||Tv(r.textContent,c)?(f.popover!=null&&(Le("beforetoggle",r),Le("toggle",r)),f.onScroll!=null&&Le("scroll",r),f.onScrollEnd!=null&&Le("scrollend",r),f.onClick!=null&&(r.onclick=Zc),r=!0):r=!1,r||Ea(s)}function hg(s){for(Nn=s.return;Nn;)switch(Nn.tag){case 5:case 13:Fs=!1;return;case 27:case 3:Fs=!0;return;default:Nn=Nn.return}}function Ao(s){if(s!==Nn)return!1;if(!Ke)return hg(s),Ke=!0,!1;var r=s.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||lf(s.type,s.memoizedProps)),c=!c),c&&Mt&&Ea(s),hg(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(r===0){Mt=Ns(s.nextSibling);break e}r--}else c!=="$"&&c!=="$!"&&c!=="$?"||r++;s=s.nextSibling}Mt=null}}else r===27?(r=Mt,Ji(s.type)?(s=hf,hf=null,Mt=s):Mt=r):Mt=Nn?Ns(s.stateNode.nextSibling):null;return!0}function To(){Mt=Nn=null,Ke=!1}function fg(){var s=ja;return s!==null&&($n===null?$n=s:$n.push.apply($n,s),ja=null),s}function ko(s){ja===null?ja=[s]:ja.push(s)}var Vd=X(null),Aa=null,hi=null;function Ii(s,r,c){ee(Vd,r._currentValue),r._currentValue=c}function fi(s){s._currentValue=Vd.current,J(Vd)}function Yd(s,r,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),s===c)break;s=s.return}}function Wd(s,r,c,f){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var b=v.dependencies;if(b!==null){var k=v.child;b=b.firstContext;e:for(;b!==null;){var P=b;b=v;for(var V=0;V<r.length;V++)if(P.context===r[V]){b.lanes|=c,P=b.alternate,P!==null&&(P.lanes|=c),Yd(b.return,c,s),f||(k=null);break e}b=P.next}}else if(v.tag===18){if(k=v.return,k===null)throw Error(i(341));k.lanes|=c,b=k.alternate,b!==null&&(b.lanes|=c),Yd(k,c,s),k=null}else k=v.child;if(k!==null)k.return=v;else for(k=v;k!==null;){if(k===s){k=null;break}if(v=k.sibling,v!==null){v.return=k.return,k=v;break}k=k.return}v=k}}function Oo(s,r,c,f){s=null;for(var v=r,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var k=v.alternate;if(k===null)throw Error(i(387));if(k=k.memoizedProps,k!==null){var P=v.type;Jn(v.pendingProps.value,k.value)||(s!==null?s.push(P):s=[P])}}else if(v===_e.current){if(k=v.alternate,k===null)throw Error(i(387));k.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(al):s=[al])}v=v.return}s!==null&&Wd(r,s,c,f),r.flags|=262144}function yc(s){for(s=s.firstContext;s!==null;){if(!Jn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ta(s){Aa=s,hi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function En(s){return mg(Aa,s)}function bc(s,r){return Aa===null&&Ta(s),mg(s,r)}function mg(s,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},hi===null){if(s===null)throw Error(i(308));hi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else hi=hi.next=r;return c}var Pw=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(c,f){s.push(f)}};this.abort=function(){r.aborted=!0,s.forEach(function(c){return c()})}},Iw=n.unstable_scheduleCallback,Uw=n.unstable_NormalPriority,sn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xd(){return{controller:new Pw,data:new Map,refCount:0}}function No(s){s.refCount--,s.refCount===0&&Iw(Uw,function(){s.controller.abort()})}var Ro=null,Kd=0,pr=0,gr=null;function zw(s,r){if(Ro===null){var c=Ro=[];Kd=0,pr=Zh(),gr={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Kd++,r.then(pg,pg),r}function pg(){if(--Kd===0&&Ro!==null){gr!==null&&(gr.status="fulfilled");var s=Ro;Ro=null,pr=0,gr=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function $w(s,r){var c=[],f={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return s.then(function(){f.status="fulfilled",f.value=r;for(var v=0;v<c.length;v++)(0,c[v])(r)},function(v){for(f.status="rejected",f.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),f}var gg=E.S;E.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&zw(s,r),gg!==null&&gg(s,r)};var ka=X(null);function Qd(){var s=ka.current;return s!==null?s:pt.pooledCache}function xc(s,r){r===null?ee(ka,ka.current):ee(ka,r.pool)}function _g(){var s=Qd();return s===null?null:{parent:sn._currentValue,pool:s}}var Mo=Error(i(460)),vg=Error(i(474)),wc=Error(i(542)),Zd={then:function(){}};function yg(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Sc(){}function bg(s,r,c){switch(c=s[c],c===void 0?s.push(r):c!==r&&(r.then(Sc,Sc),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,wg(s),s;default:if(typeof r.status=="string")r.then(Sc,Sc);else{if(s=pt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(f){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=f}},function(f){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,wg(s),s}throw Do=r,Mo}}var Do=null;function xg(){if(Do===null)throw Error(i(459));var s=Do;return Do=null,s}function wg(s){if(s===Mo||s===wc)throw Error(i(483))}var Ui=!1;function Jd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function eh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function zi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function $i(s,r,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(Je&2)!==0){var v=f.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),f.pending=r,r=pc(s),lg(s,null,c),r}return mc(s,f,r,c),pc(s)}function Bo(s,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var f=r.lanes;f&=s.pendingLanes,c|=f,r.lanes=c,ct(s,c)}}function th(s,r){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var v=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var k={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?v=b=k:b=b.next=k,c=c.next}while(c!==null);b===null?v=b=r:b=b.next=r}else v=b=r;c={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=r:s.next=r,c.lastBaseUpdate=r}var nh=!1;function Lo(){if(nh){var s=gr;if(s!==null)throw s}}function Po(s,r,c,f){nh=!1;var v=s.updateQueue;Ui=!1;var b=v.firstBaseUpdate,k=v.lastBaseUpdate,P=v.shared.pending;if(P!==null){v.shared.pending=null;var V=P,se=V.next;V.next=null,k===null?b=se:k.next=se,k=V;var le=s.alternate;le!==null&&(le=le.updateQueue,P=le.lastBaseUpdate,P!==k&&(P===null?le.firstBaseUpdate=se:P.next=se,le.lastBaseUpdate=V))}if(b!==null){var ue=v.baseState;k=0,le=se=V=null,P=b;do{var ie=P.lane&-536870913,re=ie!==P.lane;if(re?($e&ie)===ie:(f&ie)===ie){ie!==0&&ie===pr&&(nh=!0),le!==null&&(le=le.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Ce=s,xe=P;ie=r;var ot=c;switch(xe.tag){case 1:if(Ce=xe.payload,typeof Ce=="function"){ue=Ce.call(ot,ue,ie);break e}ue=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=xe.payload,ie=typeof Ce=="function"?Ce.call(ot,ue,ie):Ce,ie==null)break e;ue=p({},ue,ie);break e;case 2:Ui=!0}}ie=P.callback,ie!==null&&(s.flags|=64,re&&(s.flags|=8192),re=v.callbacks,re===null?v.callbacks=[ie]:re.push(ie))}else re={lane:ie,tag:P.tag,payload:P.payload,callback:P.callback,next:null},le===null?(se=le=re,V=ue):le=le.next=re,k|=ie;if(P=P.next,P===null){if(P=v.shared.pending,P===null)break;re=P,P=re.next,re.next=null,v.lastBaseUpdate=re,v.shared.pending=null}}while(!0);le===null&&(V=ue),v.baseState=V,v.firstBaseUpdate=se,v.lastBaseUpdate=le,b===null&&(v.shared.lanes=0),Xi|=k,s.lanes=k,s.memoizedState=ue}}function Sg(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function Cg(s,r){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)Sg(c[s],r)}var _r=X(null),Cc=X(0);function jg(s,r){s=bi,ee(Cc,s),ee(_r,r),bi=s|r.baseLanes}function sh(){ee(Cc,bi),ee(_r,_r.current)}function ih(){bi=Cc.current,J(_r),J(Cc)}var Hi=0,Me=null,at=null,Xt=null,jc=!1,vr=!1,Oa=!1,Ec=0,Io=0,yr=null,Hw=0;function $t(){throw Error(i(321))}function ah(s,r){if(r===null)return!1;for(var c=0;c<r.length&&c<s.length;c++)if(!Jn(s[c],r[c]))return!1;return!0}function rh(s,r,c,f,v,b){return Hi=b,Me=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,E.H=s===null||s.memoizedState===null?l_:c_,Oa=!1,b=c(f,v),Oa=!1,vr&&(b=Ag(r,c,f,v)),Eg(s),b}function Eg(s){E.H=Rc;var r=at!==null&&at.next!==null;if(Hi=0,Xt=at=Me=null,jc=!1,Io=0,yr=null,r)throw Error(i(300));s===null||dn||(s=s.dependencies,s!==null&&yc(s)&&(dn=!0))}function Ag(s,r,c,f){Me=s;var v=0;do{if(vr&&(yr=null),Io=0,vr=!1,25<=v)throw Error(i(301));if(v+=1,Xt=at=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}E.H=Xw,b=r(c,f)}while(vr);return b}function qw(){var s=E.H,r=s.useState()[0];return r=typeof r.then=="function"?Uo(r):r,s=s.useState()[0],(at!==null?at.memoizedState:null)!==s&&(Me.flags|=1024),r}function oh(){var s=Ec!==0;return Ec=0,s}function lh(s,r,c){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~c}function ch(s){if(jc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}jc=!1}Hi=0,Xt=at=Me=null,vr=!1,Io=Ec=0,yr=null}function Un(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Me.memoizedState=Xt=s:Xt=Xt.next=s,Xt}function Kt(){if(at===null){var s=Me.alternate;s=s!==null?s.memoizedState:null}else s=at.next;var r=Xt===null?Me.memoizedState:Xt.next;if(r!==null)Xt=r,at=s;else{if(s===null)throw Me.alternate===null?Error(i(467)):Error(i(310));at=s,s={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Xt===null?Me.memoizedState=Xt=s:Xt=Xt.next=s}return Xt}function uh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uo(s){var r=Io;return Io+=1,yr===null&&(yr=[]),s=bg(yr,s,r),r=Me,(Xt===null?r.memoizedState:Xt.next)===null&&(r=r.alternate,E.H=r===null||r.memoizedState===null?l_:c_),s}function Ac(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Uo(s);if(s.$$typeof===T)return En(s)}throw Error(i(438,String(s)))}function dh(s){var r=null,c=Me.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var f=Me.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=uh(),Me.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(s),f=0;f<s;f++)c[f]=z;return r.index++,c}function mi(s,r){return typeof r=="function"?r(s):r}function Tc(s){var r=Kt();return hh(r,at,s)}function hh(s,r,c){var f=s.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=c;var v=s.baseQueue,b=f.pending;if(b!==null){if(v!==null){var k=v.next;v.next=b.next,b.next=k}r.baseQueue=v=b,f.pending=null}if(b=s.baseState,v===null)s.memoizedState=b;else{r=v.next;var P=k=null,V=null,se=r,le=!1;do{var ue=se.lane&-536870913;if(ue!==se.lane?($e&ue)===ue:(Hi&ue)===ue){var ie=se.revertLane;if(ie===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ue===pr&&(le=!0);else if((Hi&ie)===ie){se=se.next,ie===pr&&(le=!0);continue}else ue={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},V===null?(P=V=ue,k=b):V=V.next=ue,Me.lanes|=ie,Xi|=ie;ue=se.action,Oa&&c(b,ue),b=se.hasEagerState?se.eagerState:c(b,ue)}else ie={lane:ue,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},V===null?(P=V=ie,k=b):V=V.next=ie,Me.lanes|=ue,Xi|=ue;se=se.next}while(se!==null&&se!==r);if(V===null?k=b:V.next=P,!Jn(b,s.memoizedState)&&(dn=!0,le&&(c=gr,c!==null)))throw c;s.memoizedState=b,s.baseState=k,s.baseQueue=V,f.lastRenderedState=b}return v===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function fh(s){var r=Kt(),c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=s;var f=c.dispatch,v=c.pending,b=r.memoizedState;if(v!==null){c.pending=null;var k=v=v.next;do b=s(b,k.action),k=k.next;while(k!==v);Jn(b,r.memoizedState)||(dn=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),c.lastRenderedState=b}return[b,f]}function Tg(s,r,c){var f=Me,v=Kt(),b=Ke;if(b){if(c===void 0)throw Error(i(407));c=c()}else c=r();var k=!Jn((at||v).memoizedState,c);k&&(v.memoizedState=c,dn=!0),v=v.queue;var P=Ng.bind(null,f,v,s);if(zo(2048,8,P,[s]),v.getSnapshot!==r||k||Xt!==null&&Xt.memoizedState.tag&1){if(f.flags|=2048,br(9,kc(),Og.bind(null,f,v,c,r),null),pt===null)throw Error(i(349));b||(Hi&124)!==0||kg(f,r,c)}return c}function kg(s,r,c){s.flags|=16384,s={getSnapshot:r,value:c},r=Me.updateQueue,r===null?(r=uh(),Me.updateQueue=r,r.stores=[s]):(c=r.stores,c===null?r.stores=[s]:c.push(s))}function Og(s,r,c,f){r.value=c,r.getSnapshot=f,Rg(r)&&Mg(s)}function Ng(s,r,c){return c(function(){Rg(r)&&Mg(s)})}function Rg(s){var r=s.getSnapshot;s=s.value;try{var c=r();return!Jn(s,c)}catch{return!0}}function Mg(s){var r=dr(s,2);r!==null&&as(r,s,2)}function mh(s){var r=Un();if(typeof s=="function"){var c=s;if(s=c(),Oa){it(!0);try{c()}finally{it(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:s},r}function Dg(s,r,c,f){return s.baseState=c,hh(s,at,typeof f=="function"?f:mi)}function Fw(s,r,c,f,v){if(Nc(s))throw Error(i(485));if(s=r.action,s!==null){var b={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){b.listeners.push(k)}};E.T!==null?c(!0):b.isTransition=!1,f(b),c=r.pending,c===null?(b.next=r.pending=b,Bg(r,b)):(b.next=c.next,r.pending=c.next=b)}}function Bg(s,r){var c=r.action,f=r.payload,v=s.state;if(r.isTransition){var b=E.T,k={};E.T=k;try{var P=c(v,f),V=E.S;V!==null&&V(k,P),Lg(s,r,P)}catch(se){ph(s,r,se)}finally{E.T=b}}else try{b=c(v,f),Lg(s,r,b)}catch(se){ph(s,r,se)}}function Lg(s,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Pg(s,r,f)},function(f){return ph(s,r,f)}):Pg(s,r,c)}function Pg(s,r,c){r.status="fulfilled",r.value=c,Ig(r),s.state=c,r=s.pending,r!==null&&(c=r.next,c===r?s.pending=null:(c=c.next,r.next=c,Bg(s,c)))}function ph(s,r,c){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=c,Ig(r),r=r.next;while(r!==f)}s.action=null}function Ig(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Ug(s,r){return r}function zg(s,r){if(Ke){var c=pt.formState;if(c!==null){e:{var f=Me;if(Ke){if(Mt){t:{for(var v=Mt,b=Fs;v.nodeType!==8;){if(!b){v=null;break t}if(v=Ns(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){Mt=Ns(v.nextSibling),f=v.data==="F!";break e}}Ea(f)}f=!1}f&&(r=c[0])}}return c=Un(),c.memoizedState=c.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ug,lastRenderedState:r},c.queue=f,c=a_.bind(null,Me,f),f.dispatch=c,f=mh(!1),b=bh.bind(null,Me,!1,f.queue),f=Un(),v={state:r,dispatch:null,action:s,pending:null},f.queue=v,c=Fw.bind(null,Me,v,b,c),v.dispatch=c,f.memoizedState=s,[r,c,!1]}function $g(s){var r=Kt();return Hg(r,at,s)}function Hg(s,r,c){if(r=hh(s,r,Ug)[0],s=Tc(mi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=Uo(r)}catch(k){throw k===Mo?wc:k}else f=r;r=Kt();var v=r.queue,b=v.dispatch;return c!==r.memoizedState&&(Me.flags|=2048,br(9,kc(),Gw.bind(null,v,c),null)),[f,b,s]}function Gw(s,r){s.action=r}function qg(s){var r=Kt(),c=at;if(c!==null)return Hg(r,c,s);Kt(),r=r.memoizedState,c=Kt();var f=c.queue.dispatch;return c.memoizedState=s,[r,f,!1]}function br(s,r,c,f){return s={tag:s,create:c,deps:f,inst:r,next:null},r=Me.updateQueue,r===null&&(r=uh(),Me.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,r.lastEffect=s),s}function kc(){return{destroy:void 0,resource:void 0}}function Fg(){return Kt().memoizedState}function Oc(s,r,c,f){var v=Un();f=f===void 0?null:f,Me.flags|=s,v.memoizedState=br(1|r,kc(),c,f)}function zo(s,r,c,f){var v=Kt();f=f===void 0?null:f;var b=v.memoizedState.inst;at!==null&&f!==null&&ah(f,at.memoizedState.deps)?v.memoizedState=br(r,b,c,f):(Me.flags|=s,v.memoizedState=br(1|r,b,c,f))}function Gg(s,r){Oc(8390656,8,s,r)}function Vg(s,r){zo(2048,8,s,r)}function Yg(s,r){return zo(4,2,s,r)}function Wg(s,r){return zo(4,4,s,r)}function Xg(s,r){if(typeof r=="function"){s=s();var c=r(s);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function Kg(s,r,c){c=c!=null?c.concat([s]):null,zo(4,4,Xg.bind(null,r,s),c)}function gh(){}function Qg(s,r){var c=Kt();r=r===void 0?null:r;var f=c.memoizedState;return r!==null&&ah(r,f[1])?f[0]:(c.memoizedState=[s,r],s)}function Zg(s,r){var c=Kt();r=r===void 0?null:r;var f=c.memoizedState;if(r!==null&&ah(r,f[1]))return f[0];if(f=s(),Oa){it(!0);try{s()}finally{it(!1)}}return c.memoizedState=[f,r],f}function _h(s,r,c){return c===void 0||(Hi&1073741824)!==0?s.memoizedState=r:(s.memoizedState=c,s=tv(),Me.lanes|=s,Xi|=s,c)}function Jg(s,r,c,f){return Jn(c,r)?c:_r.current!==null?(s=_h(s,c,f),Jn(s,r)||(dn=!0),s):(Hi&42)===0?(dn=!0,s.memoizedState=c):(s=tv(),Me.lanes|=s,Xi|=s,r)}function e_(s,r,c,f,v){var b=O.p;O.p=b!==0&&8>b?b:8;var k=E.T,P={};E.T=P,bh(s,!1,r,c);try{var V=v(),se=E.S;if(se!==null&&se(P,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var le=$w(V,f);$o(s,r,le,is(s))}else $o(s,r,f,is(s))}catch(ue){$o(s,r,{then:function(){},status:"rejected",reason:ue},is())}finally{O.p=b,E.T=k}}function Vw(){}function vh(s,r,c,f){if(s.tag!==5)throw Error(i(476));var v=t_(s).queue;e_(s,v,r,F,c===null?Vw:function(){return n_(s),c(f)})}function t_(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:F},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:c},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function n_(s){var r=t_(s).next.queue;$o(s,r,{},is())}function yh(){return En(al)}function s_(){return Kt().memoizedState}function i_(){return Kt().memoizedState}function Yw(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var c=is();s=zi(c);var f=$i(r,s,c);f!==null&&(as(f,r,c),Bo(f,r,c)),r={cache:Xd()},s.payload=r;return}r=r.return}}function Ww(s,r,c){var f=is();c={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},Nc(s)?r_(r,c):(c=Ud(s,r,c,f),c!==null&&(as(c,s,f),o_(c,r,f)))}function a_(s,r,c){var f=is();$o(s,r,c,f)}function $o(s,r,c,f){var v={lane:f,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(Nc(s))r_(r,v);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var k=r.lastRenderedState,P=b(k,c);if(v.hasEagerState=!0,v.eagerState=P,Jn(P,k))return mc(s,r,v,0),pt===null&&fc(),!1}catch{}finally{}if(c=Ud(s,r,v,f),c!==null)return as(c,s,f),o_(c,r,f),!0}return!1}function bh(s,r,c,f){if(f={lane:2,revertLane:Zh(),action:f,hasEagerState:!1,eagerState:null,next:null},Nc(s)){if(r)throw Error(i(479))}else r=Ud(s,c,f,2),r!==null&&as(r,s,2)}function Nc(s){var r=s.alternate;return s===Me||r!==null&&r===Me}function r_(s,r){vr=jc=!0;var c=s.pending;c===null?r.next=r:(r.next=c.next,c.next=r),s.pending=r}function o_(s,r,c){if((c&4194048)!==0){var f=r.lanes;f&=s.pendingLanes,c|=f,r.lanes=c,ct(s,c)}}var Rc={readContext:En,use:Ac,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t},l_={readContext:En,use:Ac,useCallback:function(s,r){return Un().memoizedState=[s,r===void 0?null:r],s},useContext:En,useEffect:Gg,useImperativeHandle:function(s,r,c){c=c!=null?c.concat([s]):null,Oc(4194308,4,Xg.bind(null,r,s),c)},useLayoutEffect:function(s,r){return Oc(4194308,4,s,r)},useInsertionEffect:function(s,r){Oc(4,2,s,r)},useMemo:function(s,r){var c=Un();r=r===void 0?null:r;var f=s();if(Oa){it(!0);try{s()}finally{it(!1)}}return c.memoizedState=[f,r],f},useReducer:function(s,r,c){var f=Un();if(c!==void 0){var v=c(r);if(Oa){it(!0);try{c(r)}finally{it(!1)}}}else v=r;return f.memoizedState=f.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},f.queue=s,s=s.dispatch=Ww.bind(null,Me,s),[f.memoizedState,s]},useRef:function(s){var r=Un();return s={current:s},r.memoizedState=s},useState:function(s){s=mh(s);var r=s.queue,c=a_.bind(null,Me,r);return r.dispatch=c,[s.memoizedState,c]},useDebugValue:gh,useDeferredValue:function(s,r){var c=Un();return _h(c,s,r)},useTransition:function(){var s=mh(!1);return s=e_.bind(null,Me,s.queue,!0,!1),Un().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,c){var f=Me,v=Un();if(Ke){if(c===void 0)throw Error(i(407));c=c()}else{if(c=r(),pt===null)throw Error(i(349));($e&124)!==0||kg(f,r,c)}v.memoizedState=c;var b={value:c,getSnapshot:r};return v.queue=b,Gg(Ng.bind(null,f,b,s),[s]),f.flags|=2048,br(9,kc(),Og.bind(null,f,b,c,r),null),c},useId:function(){var s=Un(),r=pt.identifierPrefix;if(Ke){var c=di,f=ui;c=(f&~(1<<32-wt(f)-1)).toString(32)+c,r=""+r+"R"+c,c=Ec++,0<c&&(r+="H"+c.toString(32)),r+=""}else c=Hw++,r=""+r+"r"+c.toString(32)+"";return s.memoizedState=r},useHostTransitionStatus:yh,useFormState:zg,useActionState:zg,useOptimistic:function(s){var r=Un();r.memoizedState=r.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=bh.bind(null,Me,!0,c),c.dispatch=r,[s,r]},useMemoCache:dh,useCacheRefresh:function(){return Un().memoizedState=Yw.bind(null,Me)}},c_={readContext:En,use:Ac,useCallback:Qg,useContext:En,useEffect:Vg,useImperativeHandle:Kg,useInsertionEffect:Yg,useLayoutEffect:Wg,useMemo:Zg,useReducer:Tc,useRef:Fg,useState:function(){return Tc(mi)},useDebugValue:gh,useDeferredValue:function(s,r){var c=Kt();return Jg(c,at.memoizedState,s,r)},useTransition:function(){var s=Tc(mi)[0],r=Kt().memoizedState;return[typeof s=="boolean"?s:Uo(s),r]},useSyncExternalStore:Tg,useId:s_,useHostTransitionStatus:yh,useFormState:$g,useActionState:$g,useOptimistic:function(s,r){var c=Kt();return Dg(c,at,s,r)},useMemoCache:dh,useCacheRefresh:i_},Xw={readContext:En,use:Ac,useCallback:Qg,useContext:En,useEffect:Vg,useImperativeHandle:Kg,useInsertionEffect:Yg,useLayoutEffect:Wg,useMemo:Zg,useReducer:fh,useRef:Fg,useState:function(){return fh(mi)},useDebugValue:gh,useDeferredValue:function(s,r){var c=Kt();return at===null?_h(c,s,r):Jg(c,at.memoizedState,s,r)},useTransition:function(){var s=fh(mi)[0],r=Kt().memoizedState;return[typeof s=="boolean"?s:Uo(s),r]},useSyncExternalStore:Tg,useId:s_,useHostTransitionStatus:yh,useFormState:qg,useActionState:qg,useOptimistic:function(s,r){var c=Kt();return at!==null?Dg(c,at,s,r):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:dh,useCacheRefresh:i_},xr=null,Ho=0;function Mc(s){var r=Ho;return Ho+=1,xr===null&&(xr=[]),bg(xr,s,r)}function qo(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Dc(s,r){throw r.$$typeof===g?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function u_(s){var r=s._init;return r(s._payload)}function d_(s){function r(Z,K){if(s){var te=Z.deletions;te===null?(Z.deletions=[K],Z.flags|=16):te.push(K)}}function c(Z,K){if(!s)return null;for(;K!==null;)r(Z,K),K=K.sibling;return null}function f(Z){for(var K=new Map;Z!==null;)Z.key!==null?K.set(Z.key,Z):K.set(Z.index,Z),Z=Z.sibling;return K}function v(Z,K){return Z=ci(Z,K),Z.index=0,Z.sibling=null,Z}function b(Z,K,te){return Z.index=te,s?(te=Z.alternate,te!==null?(te=te.index,te<K?(Z.flags|=67108866,K):te):(Z.flags|=67108866,K)):(Z.flags|=1048576,K)}function k(Z){return s&&Z.alternate===null&&(Z.flags|=67108866),Z}function P(Z,K,te,ce){return K===null||K.tag!==6?(K=$d(te,Z.mode,ce),K.return=Z,K):(K=v(K,te),K.return=Z,K)}function V(Z,K,te,ce){var pe=te.type;return pe===x?le(Z,K,te.props.children,ce,te.key):K!==null&&(K.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===R&&u_(pe)===K.type)?(K=v(K,te.props),qo(K,te),K.return=Z,K):(K=gc(te.type,te.key,te.props,null,Z.mode,ce),qo(K,te),K.return=Z,K)}function se(Z,K,te,ce){return K===null||K.tag!==4||K.stateNode.containerInfo!==te.containerInfo||K.stateNode.implementation!==te.implementation?(K=Hd(te,Z.mode,ce),K.return=Z,K):(K=v(K,te.children||[]),K.return=Z,K)}function le(Z,K,te,ce,pe){return K===null||K.tag!==7?(K=wa(te,Z.mode,ce,pe),K.return=Z,K):(K=v(K,te),K.return=Z,K)}function ue(Z,K,te){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=$d(""+K,Z.mode,te),K.return=Z,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case _:return te=gc(K.type,K.key,K.props,null,Z.mode,te),qo(te,K),te.return=Z,te;case y:return K=Hd(K,Z.mode,te),K.return=Z,K;case R:var ce=K._init;return K=ce(K._payload),ue(Z,K,te)}if(G(K)||U(K))return K=wa(K,Z.mode,te,null),K.return=Z,K;if(typeof K.then=="function")return ue(Z,Mc(K),te);if(K.$$typeof===T)return ue(Z,bc(Z,K),te);Dc(Z,K)}return null}function ie(Z,K,te,ce){var pe=K!==null?K.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return pe!==null?null:P(Z,K,""+te,ce);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case _:return te.key===pe?V(Z,K,te,ce):null;case y:return te.key===pe?se(Z,K,te,ce):null;case R:return pe=te._init,te=pe(te._payload),ie(Z,K,te,ce)}if(G(te)||U(te))return pe!==null?null:le(Z,K,te,ce,null);if(typeof te.then=="function")return ie(Z,K,Mc(te),ce);if(te.$$typeof===T)return ie(Z,K,bc(Z,te),ce);Dc(Z,te)}return null}function re(Z,K,te,ce,pe){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Z=Z.get(te)||null,P(K,Z,""+ce,pe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case _:return Z=Z.get(ce.key===null?te:ce.key)||null,V(K,Z,ce,pe);case y:return Z=Z.get(ce.key===null?te:ce.key)||null,se(K,Z,ce,pe);case R:var De=ce._init;return ce=De(ce._payload),re(Z,K,te,ce,pe)}if(G(ce)||U(ce))return Z=Z.get(te)||null,le(K,Z,ce,pe,null);if(typeof ce.then=="function")return re(Z,K,te,Mc(ce),pe);if(ce.$$typeof===T)return re(Z,K,te,bc(K,ce),pe);Dc(K,ce)}return null}function Ce(Z,K,te,ce){for(var pe=null,De=null,ve=K,Se=K=0,fn=null;ve!==null&&Se<te.length;Se++){ve.index>Se?(fn=ve,ve=null):fn=ve.sibling;var Ye=ie(Z,ve,te[Se],ce);if(Ye===null){ve===null&&(ve=fn);break}s&&ve&&Ye.alternate===null&&r(Z,ve),K=b(Ye,K,Se),De===null?pe=Ye:De.sibling=Ye,De=Ye,ve=fn}if(Se===te.length)return c(Z,ve),Ke&&Ca(Z,Se),pe;if(ve===null){for(;Se<te.length;Se++)ve=ue(Z,te[Se],ce),ve!==null&&(K=b(ve,K,Se),De===null?pe=ve:De.sibling=ve,De=ve);return Ke&&Ca(Z,Se),pe}for(ve=f(ve);Se<te.length;Se++)fn=re(ve,Z,Se,te[Se],ce),fn!==null&&(s&&fn.alternate!==null&&ve.delete(fn.key===null?Se:fn.key),K=b(fn,K,Se),De===null?pe=fn:De.sibling=fn,De=fn);return s&&ve.forEach(function(ia){return r(Z,ia)}),Ke&&Ca(Z,Se),pe}function xe(Z,K,te,ce){if(te==null)throw Error(i(151));for(var pe=null,De=null,ve=K,Se=K=0,fn=null,Ye=te.next();ve!==null&&!Ye.done;Se++,Ye=te.next()){ve.index>Se?(fn=ve,ve=null):fn=ve.sibling;var ia=ie(Z,ve,Ye.value,ce);if(ia===null){ve===null&&(ve=fn);break}s&&ve&&ia.alternate===null&&r(Z,ve),K=b(ia,K,Se),De===null?pe=ia:De.sibling=ia,De=ia,ve=fn}if(Ye.done)return c(Z,ve),Ke&&Ca(Z,Se),pe;if(ve===null){for(;!Ye.done;Se++,Ye=te.next())Ye=ue(Z,Ye.value,ce),Ye!==null&&(K=b(Ye,K,Se),De===null?pe=Ye:De.sibling=Ye,De=Ye);return Ke&&Ca(Z,Se),pe}for(ve=f(ve);!Ye.done;Se++,Ye=te.next())Ye=re(ve,Z,Se,Ye.value,ce),Ye!==null&&(s&&Ye.alternate!==null&&ve.delete(Ye.key===null?Se:Ye.key),K=b(Ye,K,Se),De===null?pe=Ye:De.sibling=Ye,De=Ye);return s&&ve.forEach(function(K2){return r(Z,K2)}),Ke&&Ca(Z,Se),pe}function ot(Z,K,te,ce){if(typeof te=="object"&&te!==null&&te.type===x&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case _:e:{for(var pe=te.key;K!==null;){if(K.key===pe){if(pe=te.type,pe===x){if(K.tag===7){c(Z,K.sibling),ce=v(K,te.props.children),ce.return=Z,Z=ce;break e}}else if(K.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===R&&u_(pe)===K.type){c(Z,K.sibling),ce=v(K,te.props),qo(ce,te),ce.return=Z,Z=ce;break e}c(Z,K);break}else r(Z,K);K=K.sibling}te.type===x?(ce=wa(te.props.children,Z.mode,ce,te.key),ce.return=Z,Z=ce):(ce=gc(te.type,te.key,te.props,null,Z.mode,ce),qo(ce,te),ce.return=Z,Z=ce)}return k(Z);case y:e:{for(pe=te.key;K!==null;){if(K.key===pe)if(K.tag===4&&K.stateNode.containerInfo===te.containerInfo&&K.stateNode.implementation===te.implementation){c(Z,K.sibling),ce=v(K,te.children||[]),ce.return=Z,Z=ce;break e}else{c(Z,K);break}else r(Z,K);K=K.sibling}ce=Hd(te,Z.mode,ce),ce.return=Z,Z=ce}return k(Z);case R:return pe=te._init,te=pe(te._payload),ot(Z,K,te,ce)}if(G(te))return Ce(Z,K,te,ce);if(U(te)){if(pe=U(te),typeof pe!="function")throw Error(i(150));return te=pe.call(te),xe(Z,K,te,ce)}if(typeof te.then=="function")return ot(Z,K,Mc(te),ce);if(te.$$typeof===T)return ot(Z,K,bc(Z,te),ce);Dc(Z,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,K!==null&&K.tag===6?(c(Z,K.sibling),ce=v(K,te),ce.return=Z,Z=ce):(c(Z,K),ce=$d(te,Z.mode,ce),ce.return=Z,Z=ce),k(Z)):c(Z,K)}return function(Z,K,te,ce){try{Ho=0;var pe=ot(Z,K,te,ce);return xr=null,pe}catch(ve){if(ve===Mo||ve===wc)throw ve;var De=es(29,ve,null,Z.mode);return De.lanes=ce,De.return=Z,De}finally{}}}var wr=d_(!0),h_=d_(!1),ms=X(null),Gs=null;function qi(s){var r=s.alternate;ee(an,an.current&1),ee(ms,s),Gs===null&&(r===null||_r.current!==null||r.memoizedState!==null)&&(Gs=s)}function f_(s){if(s.tag===22){if(ee(an,an.current),ee(ms,s),Gs===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(Gs=s)}}else Fi()}function Fi(){ee(an,an.current),ee(ms,ms.current)}function pi(s){J(ms),Gs===s&&(Gs=null),J(an)}var an=X(0);function Bc(s){for(var r=s;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||df(c)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function xh(s,r,c,f){r=s.memoizedState,c=c(f,r),c=c==null?r:p({},r,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var wh={enqueueSetState:function(s,r,c){s=s._reactInternals;var f=is(),v=zi(f);v.payload=r,c!=null&&(v.callback=c),r=$i(s,v,f),r!==null&&(as(r,s,f),Bo(r,s,f))},enqueueReplaceState:function(s,r,c){s=s._reactInternals;var f=is(),v=zi(f);v.tag=1,v.payload=r,c!=null&&(v.callback=c),r=$i(s,v,f),r!==null&&(as(r,s,f),Bo(r,s,f))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var c=is(),f=zi(c);f.tag=2,r!=null&&(f.callback=r),r=$i(s,f,c),r!==null&&(as(r,s,c),Bo(r,s,c))}};function m_(s,r,c,f,v,b,k){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,b,k):r.prototype&&r.prototype.isPureReactComponent?!jo(c,f)||!jo(v,b):!0}function p_(s,r,c,f){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,f),r.state!==s&&wh.enqueueReplaceState(r,r.state,null)}function Na(s,r){var c=r;if("ref"in r){c={};for(var f in r)f!=="ref"&&(c[f]=r[f])}if(s=s.defaultProps){c===r&&(c=p({},c));for(var v in s)c[v]===void 0&&(c[v]=s[v])}return c}var Lc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function g_(s){Lc(s)}function __(s){console.error(s)}function v_(s){Lc(s)}function Pc(s,r){try{var c=s.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function y_(s,r,c){try{var f=s.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Sh(s,r,c){return c=zi(c),c.tag=3,c.payload={element:null},c.callback=function(){Pc(s,r)},c}function b_(s){return s=zi(s),s.tag=3,s}function x_(s,r,c,f){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var b=f.value;s.payload=function(){return v(b)},s.callback=function(){y_(r,c,f)}}var k=c.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(s.callback=function(){y_(r,c,f),typeof v!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var P=f.stack;this.componentDidCatch(f.value,{componentStack:P!==null?P:""})})}function Kw(s,r,c,f,v){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=c.alternate,r!==null&&Oo(r,c,v,!0),c=ms.current,c!==null){switch(c.tag){case 13:return Gs===null?Yh():c.alternate===null&&Dt===0&&(Dt=3),c.flags&=-257,c.flags|=65536,c.lanes=v,f===Zd?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([f]):r.add(f),Xh(s,f,v)),!1;case 22:return c.flags|=65536,f===Zd?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([f]):c.add(f)),Xh(s,f,v)),!1}throw Error(i(435,c.tag))}return Xh(s,f,v),Yh(),!1}if(Ke)return r=ms.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,f!==Gd&&(s=Error(i(422),{cause:f}),ko(us(s,c)))):(f!==Gd&&(r=Error(i(423),{cause:f}),ko(us(r,c))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,f=us(f,c),v=Sh(s.stateNode,f,v),th(s,v),Dt!==4&&(Dt=2)),!1;var b=Error(i(520),{cause:f});if(b=us(b,c),Ko===null?Ko=[b]:Ko.push(b),Dt!==4&&(Dt=2),r===null)return!0;f=us(f,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,s=v&-v,c.lanes|=s,s=Sh(c.stateNode,f,s),th(c,s),!1;case 1:if(r=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ki===null||!Ki.has(b))))return c.flags|=65536,v&=-v,c.lanes|=v,v=b_(v),x_(v,s,c,f),th(c,v),!1}c=c.return}while(c!==null);return!1}var w_=Error(i(461)),dn=!1;function vn(s,r,c,f){r.child=s===null?h_(r,null,c,f):wr(r,s.child,c,f)}function S_(s,r,c,f,v){c=c.render;var b=r.ref;if("ref"in f){var k={};for(var P in f)P!=="ref"&&(k[P]=f[P])}else k=f;return Ta(r),f=rh(s,r,c,k,b,v),P=oh(),s!==null&&!dn?(lh(s,r,v),gi(s,r,v)):(Ke&&P&&qd(r),r.flags|=1,vn(s,r,f,v),r.child)}function C_(s,r,c,f,v){if(s===null){var b=c.type;return typeof b=="function"&&!zd(b)&&b.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=b,j_(s,r,b,f,v)):(s=gc(c.type,null,f,r,r.mode,v),s.ref=r.ref,s.return=r,r.child=s)}if(b=s.child,!Nh(s,v)){var k=b.memoizedProps;if(c=c.compare,c=c!==null?c:jo,c(k,f)&&s.ref===r.ref)return gi(s,r,v)}return r.flags|=1,s=ci(b,f),s.ref=r.ref,s.return=r,r.child=s}function j_(s,r,c,f,v){if(s!==null){var b=s.memoizedProps;if(jo(b,f)&&s.ref===r.ref)if(dn=!1,r.pendingProps=f=b,Nh(s,v))(s.flags&131072)!==0&&(dn=!0);else return r.lanes=s.lanes,gi(s,r,v)}return Ch(s,r,c,f,v)}function E_(s,r,c){var f=r.pendingProps,v=f.children,b=s!==null?s.memoizedState:null;if(f.mode==="hidden"){if((r.flags&128)!==0){if(f=b!==null?b.baseLanes|c:c,s!==null){for(v=r.child=s.child,b=0;v!==null;)b=b|v.lanes|v.childLanes,v=v.sibling;r.childLanes=b&~f}else r.childLanes=0,r.child=null;return A_(s,r,f,c)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&xc(r,b!==null?b.cachePool:null),b!==null?jg(r,b):sh(),f_(r);else return r.lanes=r.childLanes=536870912,A_(s,r,b!==null?b.baseLanes|c:c,c)}else b!==null?(xc(r,b.cachePool),jg(r,b),Fi(),r.memoizedState=null):(s!==null&&xc(r,null),sh(),Fi());return vn(s,r,v,c),r.child}function A_(s,r,c,f){var v=Qd();return v=v===null?null:{parent:sn._currentValue,pool:v},r.memoizedState={baseLanes:c,cachePool:v},s!==null&&xc(r,null),sh(),f_(r),s!==null&&Oo(s,r,f,!0),null}function Ic(s,r){var c=r.ref;if(c===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(s===null||s.ref!==c)&&(r.flags|=4194816)}}function Ch(s,r,c,f,v){return Ta(r),c=rh(s,r,c,f,void 0,v),f=oh(),s!==null&&!dn?(lh(s,r,v),gi(s,r,v)):(Ke&&f&&qd(r),r.flags|=1,vn(s,r,c,v),r.child)}function T_(s,r,c,f,v,b){return Ta(r),r.updateQueue=null,c=Ag(r,f,c,v),Eg(s),f=oh(),s!==null&&!dn?(lh(s,r,b),gi(s,r,b)):(Ke&&f&&qd(r),r.flags|=1,vn(s,r,c,b),r.child)}function k_(s,r,c,f,v){if(Ta(r),r.stateNode===null){var b=hr,k=c.contextType;typeof k=="object"&&k!==null&&(b=En(k)),b=new c(f,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=wh,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=f,b.state=r.memoizedState,b.refs={},Jd(r),k=c.contextType,b.context=typeof k=="object"&&k!==null?En(k):hr,b.state=r.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(xh(r,c,k,f),b.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(k=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),k!==b.state&&wh.enqueueReplaceState(b,b.state,null),Po(r,f,b,v),Lo(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(s===null){b=r.stateNode;var P=r.memoizedProps,V=Na(c,P);b.props=V;var se=b.context,le=c.contextType;k=hr,typeof le=="object"&&le!==null&&(k=En(le));var ue=c.getDerivedStateFromProps;le=typeof ue=="function"||typeof b.getSnapshotBeforeUpdate=="function",P=r.pendingProps!==P,le||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P||se!==k)&&p_(r,b,f,k),Ui=!1;var ie=r.memoizedState;b.state=ie,Po(r,f,b,v),Lo(),se=r.memoizedState,P||ie!==se||Ui?(typeof ue=="function"&&(xh(r,c,ue,f),se=r.memoizedState),(V=Ui||m_(r,c,V,f,ie,se,k))?(le||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=se),b.props=f,b.state=se,b.context=k,f=V):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{b=r.stateNode,eh(s,r),k=r.memoizedProps,le=Na(c,k),b.props=le,ue=r.pendingProps,ie=b.context,se=c.contextType,V=hr,typeof se=="object"&&se!==null&&(V=En(se)),P=c.getDerivedStateFromProps,(se=typeof P=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k!==ue||ie!==V)&&p_(r,b,f,V),Ui=!1,ie=r.memoizedState,b.state=ie,Po(r,f,b,v),Lo();var re=r.memoizedState;k!==ue||ie!==re||Ui||s!==null&&s.dependencies!==null&&yc(s.dependencies)?(typeof P=="function"&&(xh(r,c,P,f),re=r.memoizedState),(le=Ui||m_(r,c,le,f,ie,re,V)||s!==null&&s.dependencies!==null&&yc(s.dependencies))?(se||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,re,V),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,re,V)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||k===s.memoizedProps&&ie===s.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&ie===s.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=re),b.props=f,b.state=re,b.context=V,f=le):(typeof b.componentDidUpdate!="function"||k===s.memoizedProps&&ie===s.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&ie===s.memoizedState||(r.flags|=1024),f=!1)}return b=f,Ic(s,r),f=(r.flags&128)!==0,b||f?(b=r.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,s!==null&&f?(r.child=wr(r,s.child,null,v),r.child=wr(r,null,c,v)):vn(s,r,c,v),r.memoizedState=b.state,s=r.child):s=gi(s,r,v),s}function O_(s,r,c,f){return To(),r.flags|=256,vn(s,r,c,f),r.child}var jh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Eh(s){return{baseLanes:s,cachePool:_g()}}function Ah(s,r,c){return s=s!==null?s.childLanes&~c:0,r&&(s|=ps),s}function N_(s,r,c){var f=r.pendingProps,v=!1,b=(r.flags&128)!==0,k;if((k=b)||(k=s!==null&&s.memoizedState===null?!1:(an.current&2)!==0),k&&(v=!0,r.flags&=-129),k=(r.flags&32)!==0,r.flags&=-33,s===null){if(Ke){if(v?qi(r):Fi(),Ke){var P=Mt,V;if(V=P){e:{for(V=P,P=Fs;V.nodeType!==8;){if(!P){P=null;break e}if(V=Ns(V.nextSibling),V===null){P=null;break e}}P=V}P!==null?(r.memoizedState={dehydrated:P,treeContext:Sa!==null?{id:ui,overflow:di}:null,retryLane:536870912,hydrationErrors:null},V=es(18,null,null,0),V.stateNode=P,V.return=r,r.child=V,Nn=r,Mt=null,V=!0):V=!1}V||Ea(r)}if(P=r.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return df(P)?r.lanes=32:r.lanes=536870912,null;pi(r)}return P=f.children,f=f.fallback,v?(Fi(),v=r.mode,P=Uc({mode:"hidden",children:P},v),f=wa(f,v,c,null),P.return=r,f.return=r,P.sibling=f,r.child=P,v=r.child,v.memoizedState=Eh(c),v.childLanes=Ah(s,k,c),r.memoizedState=jh,f):(qi(r),Th(r,P))}if(V=s.memoizedState,V!==null&&(P=V.dehydrated,P!==null)){if(b)r.flags&256?(qi(r),r.flags&=-257,r=kh(s,r,c)):r.memoizedState!==null?(Fi(),r.child=s.child,r.flags|=128,r=null):(Fi(),v=f.fallback,P=r.mode,f=Uc({mode:"visible",children:f.children},P),v=wa(v,P,c,null),v.flags|=2,f.return=r,v.return=r,f.sibling=v,r.child=f,wr(r,s.child,null,c),f=r.child,f.memoizedState=Eh(c),f.childLanes=Ah(s,k,c),r.memoizedState=jh,r=v);else if(qi(r),df(P)){if(k=P.nextSibling&&P.nextSibling.dataset,k)var se=k.dgst;k=se,f=Error(i(419)),f.stack="",f.digest=k,ko({value:f,source:null,stack:null}),r=kh(s,r,c)}else if(dn||Oo(s,r,c,!1),k=(c&s.childLanes)!==0,dn||k){if(k=pt,k!==null&&(f=c&-c,f=(f&42)!==0?1:Wn(f),f=(f&(k.suspendedLanes|c))!==0?0:f,f!==0&&f!==V.retryLane))throw V.retryLane=f,dr(s,f),as(k,s,f),w_;P.data==="$?"||Yh(),r=kh(s,r,c)}else P.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=V.treeContext,Mt=Ns(P.nextSibling),Nn=r,Ke=!0,ja=null,Fs=!1,s!==null&&(hs[fs++]=ui,hs[fs++]=di,hs[fs++]=Sa,ui=s.id,di=s.overflow,Sa=r),r=Th(r,f.children),r.flags|=4096);return r}return v?(Fi(),v=f.fallback,P=r.mode,V=s.child,se=V.sibling,f=ci(V,{mode:"hidden",children:f.children}),f.subtreeFlags=V.subtreeFlags&65011712,se!==null?v=ci(se,v):(v=wa(v,P,c,null),v.flags|=2),v.return=r,f.return=r,f.sibling=v,r.child=f,f=v,v=r.child,P=s.child.memoizedState,P===null?P=Eh(c):(V=P.cachePool,V!==null?(se=sn._currentValue,V=V.parent!==se?{parent:se,pool:se}:V):V=_g(),P={baseLanes:P.baseLanes|c,cachePool:V}),v.memoizedState=P,v.childLanes=Ah(s,k,c),r.memoizedState=jh,f):(qi(r),c=s.child,s=c.sibling,c=ci(c,{mode:"visible",children:f.children}),c.return=r,c.sibling=null,s!==null&&(k=r.deletions,k===null?(r.deletions=[s],r.flags|=16):k.push(s)),r.child=c,r.memoizedState=null,c)}function Th(s,r){return r=Uc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Uc(s,r){return s=es(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function kh(s,r,c){return wr(r,s.child,null,c),s=Th(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function R_(s,r,c){s.lanes|=r;var f=s.alternate;f!==null&&(f.lanes|=r),Yd(s.return,r,c)}function Oh(s,r,c,f,v){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:v}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=f,b.tail=c,b.tailMode=v)}function M_(s,r,c){var f=r.pendingProps,v=f.revealOrder,b=f.tail;if(vn(s,r,f.children,c),f=an.current,(f&2)!==0)f=f&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&R_(s,c,r);else if(s.tag===19)R_(s,c,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}switch(ee(an,f),v){case"forwards":for(c=r.child,v=null;c!==null;)s=c.alternate,s!==null&&Bc(s)===null&&(v=c),c=c.sibling;c=v,c===null?(v=r.child,r.child=null):(v=c.sibling,c.sibling=null),Oh(r,!1,v,c,b);break;case"backwards":for(c=null,v=r.child,r.child=null;v!==null;){if(s=v.alternate,s!==null&&Bc(s)===null){r.child=v;break}s=v.sibling,v.sibling=c,c=v,v=s}Oh(r,!0,c,null,b);break;case"together":Oh(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function gi(s,r,c){if(s!==null&&(r.dependencies=s.dependencies),Xi|=r.lanes,(c&r.childLanes)===0)if(s!==null){if(Oo(s,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,c=ci(s,s.pendingProps),r.child=c,c.return=r;s.sibling!==null;)s=s.sibling,c=c.sibling=ci(s,s.pendingProps),c.return=r;c.sibling=null}return r.child}function Nh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&yc(s)))}function Qw(s,r,c){switch(r.tag){case 3:he(r,r.stateNode.containerInfo),Ii(r,sn,s.memoizedState.cache),To();break;case 27:case 5:Ae(r);break;case 4:he(r,r.stateNode.containerInfo);break;case 10:Ii(r,r.type,r.memoizedProps.value);break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(qi(r),r.flags|=128,null):(c&r.child.childLanes)!==0?N_(s,r,c):(qi(r),s=gi(s,r,c),s!==null?s.sibling:null);qi(r);break;case 19:var v=(s.flags&128)!==0;if(f=(c&r.childLanes)!==0,f||(Oo(s,r,c,!1),f=(c&r.childLanes)!==0),v){if(f)return M_(s,r,c);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ee(an,an.current),f)break;return null;case 22:case 23:return r.lanes=0,E_(s,r,c);case 24:Ii(r,sn,s.memoizedState.cache)}return gi(s,r,c)}function D_(s,r,c){if(s!==null)if(s.memoizedProps!==r.pendingProps)dn=!0;else{if(!Nh(s,c)&&(r.flags&128)===0)return dn=!1,Qw(s,r,c);dn=(s.flags&131072)!==0}else dn=!1,Ke&&(r.flags&1048576)!==0&&ug(r,vc,r.index);switch(r.lanes=0,r.tag){case 16:e:{s=r.pendingProps;var f=r.elementType,v=f._init;if(f=v(f._payload),r.type=f,typeof f=="function")zd(f)?(s=Na(f,s),r.tag=1,r=k_(null,r,f,s,c)):(r.tag=0,r=Ch(null,r,f,s,c));else{if(f!=null){if(v=f.$$typeof,v===B){r.tag=11,r=S_(null,r,f,s,c);break e}else if(v===$){r.tag=14,r=C_(null,r,f,s,c);break e}}throw r=H(f)||f,Error(i(306,r,""))}}return r;case 0:return Ch(s,r,r.type,r.pendingProps,c);case 1:return f=r.type,v=Na(f,r.pendingProps),k_(s,r,f,v,c);case 3:e:{if(he(r,r.stateNode.containerInfo),s===null)throw Error(i(387));f=r.pendingProps;var b=r.memoizedState;v=b.element,eh(s,r),Po(r,f,null,c);var k=r.memoizedState;if(f=k.cache,Ii(r,sn,f),f!==b.cache&&Wd(r,[sn],c,!0),Lo(),f=k.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:k.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=O_(s,r,f,c);break e}else if(f!==v){v=us(Error(i(424)),r),ko(v),r=O_(s,r,f,c);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Mt=Ns(s.firstChild),Nn=r,Ke=!0,ja=null,Fs=!0,c=h_(r,null,f,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(To(),f===v){r=gi(s,r,c);break e}vn(s,r,f,c)}r=r.child}return r;case 26:return Ic(s,r),s===null?(c=Iv(r.type,null,r.pendingProps,null))?r.memoizedState=c:Ke||(c=r.type,s=r.pendingProps,f=Jc(oe.current).createElement(c),f[tn]=r,f[Cn]=s,bn(f,c,s),Wt(f),r.stateNode=f):r.memoizedState=Iv(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return Ae(r),s===null&&Ke&&(f=r.stateNode=Bv(r.type,r.pendingProps,oe.current),Nn=r,Fs=!0,v=Mt,Ji(r.type)?(hf=v,Mt=Ns(f.firstChild)):Mt=v),vn(s,r,r.pendingProps.children,c),Ic(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Ke&&((v=f=Mt)&&(f=j2(f,r.type,r.pendingProps,Fs),f!==null?(r.stateNode=f,Nn=r,Mt=Ns(f.firstChild),Fs=!1,v=!0):v=!1),v||Ea(r)),Ae(r),v=r.type,b=r.pendingProps,k=s!==null?s.memoizedProps:null,f=b.children,lf(v,b)?f=null:k!==null&&lf(v,k)&&(r.flags|=32),r.memoizedState!==null&&(v=rh(s,r,qw,null,null,c),al._currentValue=v),Ic(s,r),vn(s,r,f,c),r.child;case 6:return s===null&&Ke&&((s=c=Mt)&&(c=E2(c,r.pendingProps,Fs),c!==null?(r.stateNode=c,Nn=r,Mt=null,s=!0):s=!1),s||Ea(r)),null;case 13:return N_(s,r,c);case 4:return he(r,r.stateNode.containerInfo),f=r.pendingProps,s===null?r.child=wr(r,null,f,c):vn(s,r,f,c),r.child;case 11:return S_(s,r,r.type,r.pendingProps,c);case 7:return vn(s,r,r.pendingProps,c),r.child;case 8:return vn(s,r,r.pendingProps.children,c),r.child;case 12:return vn(s,r,r.pendingProps.children,c),r.child;case 10:return f=r.pendingProps,Ii(r,r.type,f.value),vn(s,r,f.children,c),r.child;case 9:return v=r.type._context,f=r.pendingProps.children,Ta(r),v=En(v),f=f(v),r.flags|=1,vn(s,r,f,c),r.child;case 14:return C_(s,r,r.type,r.pendingProps,c);case 15:return j_(s,r,r.type,r.pendingProps,c);case 19:return M_(s,r,c);case 31:return f=r.pendingProps,c=r.mode,f={mode:f.mode,children:f.children},s===null?(c=Uc(f,c),c.ref=r.ref,r.child=c,c.return=r,r=c):(c=ci(s.child,f),c.ref=r.ref,r.child=c,c.return=r,r=c),r;case 22:return E_(s,r,c);case 24:return Ta(r),f=En(sn),s===null?(v=Qd(),v===null&&(v=pt,b=Xd(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=c),v=b),r.memoizedState={parent:f,cache:v},Jd(r),Ii(r,sn,v)):((s.lanes&c)!==0&&(eh(s,r),Po(r,null,null,c),Lo()),v=s.memoizedState,b=r.memoizedState,v.parent!==f?(v={parent:f,cache:f},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),Ii(r,sn,f)):(f=b.cache,Ii(r,sn,f),f!==v.cache&&Wd(r,[sn],c,!0))),vn(s,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function _i(s){s.flags|=4}function B_(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!qv(r)){if(r=ms.current,r!==null&&(($e&4194048)===$e?Gs!==null:($e&62914560)!==$e&&($e&536870912)===0||r!==Gs))throw Do=Zd,vg;s.flags|=8192}}function zc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Yn():536870912,s.lanes|=r,Er|=r)}function Fo(s,r){if(!Ke)switch(s.tailMode){case"hidden":r=s.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function At(s){var r=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(r)for(var v=s.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=f,s.childLanes=c,r}function Zw(s,r,c){var f=r.pendingProps;switch(Fd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(r),null;case 1:return At(r),null;case 3:return c=r.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),fi(sn),be(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Ao(r)?_i(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,fg())),At(r),null;case 26:return c=r.memoizedState,s===null?(_i(r),c!==null?(At(r),B_(r,c)):(At(r),r.flags&=-16777217)):c?c!==s.memoizedState?(_i(r),At(r),B_(r,c)):(At(r),r.flags&=-16777217):(s.memoizedProps!==f&&_i(r),At(r),r.flags&=-16777217),null;case 27:fe(r),c=oe.current;var v=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==f&&_i(r);else{if(!f){if(r.stateNode===null)throw Error(i(166));return At(r),null}s=ne.current,Ao(r)?dg(r):(s=Bv(v,f,c),r.stateNode=s,_i(r))}return At(r),null;case 5:if(fe(r),c=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==f&&_i(r);else{if(!f){if(r.stateNode===null)throw Error(i(166));return At(r),null}if(s=ne.current,Ao(r))dg(r);else{switch(v=Jc(oe.current),s){case 1:s=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=v.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof f.is=="string"?v.createElement("select",{is:f.is}):v.createElement("select"),f.multiple?s.multiple=!0:f.size&&(s.size=f.size);break;default:s=typeof f.is=="string"?v.createElement(c,{is:f.is}):v.createElement(c)}}s[tn]=r,s[Cn]=f;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)s.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=s;e:switch(bn(s,c,f),c){case"button":case"input":case"select":case"textarea":s=!!f.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&_i(r)}}return At(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==f&&_i(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(i(166));if(s=oe.current,Ao(r)){if(s=r.stateNode,c=r.memoizedProps,f=null,v=Nn,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}s[tn]=r,s=!!(s.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||Tv(s.nodeValue,c)),s||Ea(r)}else s=Jc(s).createTextNode(f),s[tn]=r,r.stateNode=s}return At(r),null;case 13:if(f=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=Ao(r),f!==null&&f.dehydrated!==null){if(s===null){if(!v)throw Error(i(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[tn]=r}else To(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;At(r),v=!1}else v=fg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(pi(r),r):(pi(r),null)}if(pi(r),(r.flags&128)!==0)return r.lanes=c,r;if(c=f!==null,s=s!==null&&s.memoizedState!==null,c){f=r.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool);var b=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==v&&(f.flags|=2048)}return c!==s&&c&&(r.child.flags|=8192),zc(r,r.updateQueue),At(r),null;case 4:return be(),s===null&&nf(r.stateNode.containerInfo),At(r),null;case 10:return fi(r.type),At(r),null;case 19:if(J(an),v=r.memoizedState,v===null)return At(r),null;if(f=(r.flags&128)!==0,b=v.rendering,b===null)if(f)Fo(v,!1);else{if(Dt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(b=Bc(s),b!==null){for(r.flags|=128,Fo(v,!1),s=b.updateQueue,r.updateQueue=s,zc(r,s),r.subtreeFlags=0,s=c,c=r.child;c!==null;)cg(c,s),c=c.sibling;return ee(an,an.current&1|2),r.child}s=s.sibling}v.tail!==null&&Oe()>qc&&(r.flags|=128,f=!0,Fo(v,!1),r.lanes=4194304)}else{if(!f)if(s=Bc(b),s!==null){if(r.flags|=128,f=!0,s=s.updateQueue,r.updateQueue=s,zc(r,s),Fo(v,!0),v.tail===null&&v.tailMode==="hidden"&&!b.alternate&&!Ke)return At(r),null}else 2*Oe()-v.renderingStartTime>qc&&c!==536870912&&(r.flags|=128,f=!0,Fo(v,!1),r.lanes=4194304);v.isBackwards?(b.sibling=r.child,r.child=b):(s=v.last,s!==null?s.sibling=b:r.child=b,v.last=b)}return v.tail!==null?(r=v.tail,v.rendering=r,v.tail=r.sibling,v.renderingStartTime=Oe(),r.sibling=null,s=an.current,ee(an,f?s&1|2:s&1),r):(At(r),null);case 22:case 23:return pi(r),ih(),f=r.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(c&536870912)!==0&&(r.flags&128)===0&&(At(r),r.subtreeFlags&6&&(r.flags|=8192)):At(r),c=r.updateQueue,c!==null&&zc(r,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==c&&(r.flags|=2048),s!==null&&J(ka),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),fi(sn),At(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Jw(s,r){switch(Fd(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return fi(sn),be(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return fe(r),null;case 13:if(pi(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));To()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return J(an),null;case 4:return be(),null;case 10:return fi(r.type),null;case 22:case 23:return pi(r),ih(),s!==null&&J(ka),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return fi(sn),null;case 25:return null;default:return null}}function L_(s,r){switch(Fd(r),r.tag){case 3:fi(sn),be();break;case 26:case 27:case 5:fe(r);break;case 4:be();break;case 13:pi(r);break;case 19:J(an);break;case 10:fi(r.type);break;case 22:case 23:pi(r),ih(),s!==null&&J(ka);break;case 24:fi(sn)}}function Go(s,r){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var v=f.next;c=v;do{if((c.tag&s)===s){f=void 0;var b=c.create,k=c.inst;f=b(),k.destroy=f}c=c.next}while(c!==v)}}catch(P){ut(r,r.return,P)}}function Gi(s,r,c){try{var f=r.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var b=v.next;f=b;do{if((f.tag&s)===s){var k=f.inst,P=k.destroy;if(P!==void 0){k.destroy=void 0,v=r;var V=c,se=P;try{se()}catch(le){ut(v,V,le)}}}f=f.next}while(f!==b)}}catch(le){ut(r,r.return,le)}}function P_(s){var r=s.updateQueue;if(r!==null){var c=s.stateNode;try{Cg(r,c)}catch(f){ut(s,s.return,f)}}}function I_(s,r,c){c.props=Na(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(f){ut(s,r,f)}}function Vo(s,r){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof c=="function"?s.refCleanup=c(f):c.current=f}}catch(v){ut(s,r,v)}}function Vs(s,r){var c=s.ref,f=s.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(v){ut(s,r,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){ut(s,r,v)}else c.current=null}function U_(s){var r=s.type,c=s.memoizedProps,f=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(v){ut(s,s.return,v)}}function Rh(s,r,c){try{var f=s.stateNode;b2(f,s.type,c,r),f[Cn]=r}catch(v){ut(s,s.return,v)}}function z_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ji(s.type)||s.tag===4}function Mh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||z_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ji(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Dh(s,r,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(s),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=Zc));else if(f!==4&&(f===27&&Ji(s.type)&&(c=s.stateNode,r=null),s=s.child,s!==null))for(Dh(s,r,c),s=s.sibling;s!==null;)Dh(s,r,c),s=s.sibling}function $c(s,r,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,r?c.insertBefore(s,r):c.appendChild(s);else if(f!==4&&(f===27&&Ji(s.type)&&(c=s.stateNode),s=s.child,s!==null))for($c(s,r,c),s=s.sibling;s!==null;)$c(s,r,c),s=s.sibling}function $_(s){var r=s.stateNode,c=s.memoizedProps;try{for(var f=s.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);bn(r,f,c),r[tn]=s,r[Cn]=c}catch(b){ut(s,s.return,b)}}var vi=!1,Ht=!1,Bh=!1,H_=typeof WeakSet=="function"?WeakSet:Set,hn=null;function e2(s,r){if(s=s.containerInfo,rf=au,s=Jp(s),Md(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var v=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var k=0,P=-1,V=-1,se=0,le=0,ue=s,ie=null;t:for(;;){for(var re;ue!==c||v!==0&&ue.nodeType!==3||(P=k+v),ue!==b||f!==0&&ue.nodeType!==3||(V=k+f),ue.nodeType===3&&(k+=ue.nodeValue.length),(re=ue.firstChild)!==null;)ie=ue,ue=re;for(;;){if(ue===s)break t;if(ie===c&&++se===v&&(P=k),ie===b&&++le===f&&(V=k),(re=ue.nextSibling)!==null)break;ue=ie,ie=ue.parentNode}ue=re}c=P===-1||V===-1?null:{start:P,end:V}}else c=null}c=c||{start:0,end:0}}else c=null;for(of={focusedElem:s,selectionRange:c},au=!1,hn=r;hn!==null;)if(r=hn,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,hn=s;else for(;hn!==null;){switch(r=hn,b=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,c=r,v=b.memoizedProps,b=b.memoizedState,f=c.stateNode;try{var Ce=Na(c.type,v,c.elementType===c.type);s=f.getSnapshotBeforeUpdate(Ce,b),f.__reactInternalSnapshotBeforeUpdate=s}catch(xe){ut(c,c.return,xe)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,c=s.nodeType,c===9)uf(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":uf(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,hn=s;break}hn=r.return}}function q_(s,r,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:Vi(s,c),f&4&&Go(5,c);break;case 1:if(Vi(s,c),f&4)if(s=c.stateNode,r===null)try{s.componentDidMount()}catch(k){ut(c,c.return,k)}else{var v=Na(c.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(v,r,s.__reactInternalSnapshotBeforeUpdate)}catch(k){ut(c,c.return,k)}}f&64&&P_(c),f&512&&Vo(c,c.return);break;case 3:if(Vi(s,c),f&64&&(s=c.updateQueue,s!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{Cg(s,r)}catch(k){ut(c,c.return,k)}}break;case 27:r===null&&f&4&&$_(c);case 26:case 5:Vi(s,c),r===null&&f&4&&U_(c),f&512&&Vo(c,c.return);break;case 12:Vi(s,c);break;case 13:Vi(s,c),f&4&&V_(s,c),f&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=c2.bind(null,c),A2(s,c))));break;case 22:if(f=c.memoizedState!==null||vi,!f){r=r!==null&&r.memoizedState!==null||Ht,v=vi;var b=Ht;vi=f,(Ht=r)&&!b?Yi(s,c,(c.subtreeFlags&8772)!==0):Vi(s,c),vi=v,Ht=b}break;case 30:break;default:Vi(s,c)}}function F_(s){var r=s.alternate;r!==null&&(s.alternate=null,F_(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Qn(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var St=null,zn=!1;function yi(s,r,c){for(c=c.child;c!==null;)G_(s,r,c),c=c.sibling}function G_(s,r,c){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(Pt,c)}catch{}switch(c.tag){case 26:Ht||Vs(c,r),yi(s,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ht||Vs(c,r);var f=St,v=zn;Ji(c.type)&&(St=c.stateNode,zn=!1),yi(s,r,c),tl(c.stateNode),St=f,zn=v;break;case 5:Ht||Vs(c,r);case 6:if(f=St,v=zn,St=null,yi(s,r,c),St=f,zn=v,St!==null)if(zn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(c.stateNode)}catch(b){ut(c,r,b)}else try{St.removeChild(c.stateNode)}catch(b){ut(c,r,b)}break;case 18:St!==null&&(zn?(s=St,Mv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),cl(s)):Mv(St,c.stateNode));break;case 4:f=St,v=zn,St=c.stateNode.containerInfo,zn=!0,yi(s,r,c),St=f,zn=v;break;case 0:case 11:case 14:case 15:Ht||Gi(2,c,r),Ht||Gi(4,c,r),yi(s,r,c);break;case 1:Ht||(Vs(c,r),f=c.stateNode,typeof f.componentWillUnmount=="function"&&I_(c,r,f)),yi(s,r,c);break;case 21:yi(s,r,c);break;case 22:Ht=(f=Ht)||c.memoizedState!==null,yi(s,r,c),Ht=f;break;default:yi(s,r,c)}}function V_(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{cl(s)}catch(c){ut(r,r.return,c)}}function t2(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new H_),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new H_),r;default:throw Error(i(435,s.tag))}}function Lh(s,r){var c=t2(s);r.forEach(function(f){var v=u2.bind(null,s,f);c.has(f)||(c.add(f),f.then(v,v))})}function ts(s,r){var c=r.deletions;if(c!==null)for(var f=0;f<c.length;f++){var v=c[f],b=s,k=r,P=k;e:for(;P!==null;){switch(P.tag){case 27:if(Ji(P.type)){St=P.stateNode,zn=!1;break e}break;case 5:St=P.stateNode,zn=!1;break e;case 3:case 4:St=P.stateNode.containerInfo,zn=!0;break e}P=P.return}if(St===null)throw Error(i(160));G_(b,k,v),St=null,zn=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Y_(r,s),r=r.sibling}var Os=null;function Y_(s,r){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ts(r,s),ns(s),f&4&&(Gi(3,s,s.return),Go(3,s),Gi(5,s,s.return));break;case 1:ts(r,s),ns(s),f&512&&(Ht||c===null||Vs(c,c.return)),f&64&&vi&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var v=Os;if(ts(r,s),ns(s),f&512&&(Ht||c===null||Vs(c,c.return)),f&4){var b=c!==null?c.memoizedState:null;if(f=s.memoizedState,c===null)if(f===null)if(s.stateNode===null){e:{f=s.type,c=s.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Bi]||b[tn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(f),v.head.insertBefore(b,v.querySelector("head > title"))),bn(b,f,c),b[tn]=s,Wt(b),f=b;break e;case"link":var k=$v("link","href",v).get(f+(c.href||""));if(k){for(var P=0;P<k.length;P++)if(b=k[P],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){k.splice(P,1);break t}}b=v.createElement(f),bn(b,f,c),v.head.appendChild(b);break;case"meta":if(k=$v("meta","content",v).get(f+(c.content||""))){for(P=0;P<k.length;P++)if(b=k[P],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){k.splice(P,1);break t}}b=v.createElement(f),bn(b,f,c),v.head.appendChild(b);break;default:throw Error(i(468,f))}b[tn]=s,Wt(b),f=b}s.stateNode=f}else Hv(v,s.type,s.stateNode);else s.stateNode=zv(v,f,s.memoizedProps);else b!==f?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,f===null?Hv(v,s.type,s.stateNode):zv(v,f,s.memoizedProps)):f===null&&s.stateNode!==null&&Rh(s,s.memoizedProps,c.memoizedProps)}break;case 27:ts(r,s),ns(s),f&512&&(Ht||c===null||Vs(c,c.return)),c!==null&&f&4&&Rh(s,s.memoizedProps,c.memoizedProps);break;case 5:if(ts(r,s),ns(s),f&512&&(Ht||c===null||Vs(c,c.return)),s.flags&32){v=s.stateNode;try{ir(v,"")}catch(re){ut(s,s.return,re)}}f&4&&s.stateNode!=null&&(v=s.memoizedProps,Rh(s,v,c!==null?c.memoizedProps:v)),f&1024&&(Bh=!0);break;case 6:if(ts(r,s),ns(s),f&4){if(s.stateNode===null)throw Error(i(162));f=s.memoizedProps,c=s.stateNode;try{c.nodeValue=f}catch(re){ut(s,s.return,re)}}break;case 3:if(nu=null,v=Os,Os=eu(r.containerInfo),ts(r,s),Os=v,ns(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{cl(r.containerInfo)}catch(re){ut(s,s.return,re)}Bh&&(Bh=!1,W_(s));break;case 4:f=Os,Os=eu(s.stateNode.containerInfo),ts(r,s),ns(s),Os=f;break;case 12:ts(r,s),ns(s);break;case 13:ts(r,s),ns(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Hh=Oe()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Lh(s,f)));break;case 22:v=s.memoizedState!==null;var V=c!==null&&c.memoizedState!==null,se=vi,le=Ht;if(vi=se||v,Ht=le||V,ts(r,s),Ht=le,vi=se,ns(s),f&8192)e:for(r=s.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(c===null||V||vi||Ht||Ra(s)),c=null,r=s;;){if(r.tag===5||r.tag===26){if(c===null){V=c=r;try{if(b=V.stateNode,v)k=b.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{P=V.stateNode;var ue=V.memoizedProps.style,ie=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;P.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(re){ut(V,V.return,re)}}}else if(r.tag===6){if(c===null){V=r;try{V.stateNode.nodeValue=v?"":V.memoizedProps}catch(re){ut(V,V.return,re)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=s.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Lh(s,c))));break;case 19:ts(r,s),ns(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Lh(s,f)));break;case 30:break;case 21:break;default:ts(r,s),ns(s)}}function ns(s){var r=s.flags;if(r&2){try{for(var c,f=s.return;f!==null;){if(z_(f)){c=f;break}f=f.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var v=c.stateNode,b=Mh(s);$c(s,b,v);break;case 5:var k=c.stateNode;c.flags&32&&(ir(k,""),c.flags&=-33);var P=Mh(s);$c(s,P,k);break;case 3:case 4:var V=c.stateNode.containerInfo,se=Mh(s);Dh(s,se,V);break;default:throw Error(i(161))}}catch(le){ut(s,s.return,le)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function W_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;W_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Vi(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)q_(s,r.alternate,r),r=r.sibling}function Ra(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Gi(4,r,r.return),Ra(r);break;case 1:Vs(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&I_(r,r.return,c),Ra(r);break;case 27:tl(r.stateNode);case 26:case 5:Vs(r,r.return),Ra(r);break;case 22:r.memoizedState===null&&Ra(r);break;case 30:Ra(r);break;default:Ra(r)}s=s.sibling}}function Yi(s,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,v=s,b=r,k=b.flags;switch(b.tag){case 0:case 11:case 15:Yi(v,b,c),Go(4,b);break;case 1:if(Yi(v,b,c),f=b,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(se){ut(f,f.return,se)}if(f=b,v=f.updateQueue,v!==null){var P=f.stateNode;try{var V=v.shared.hiddenCallbacks;if(V!==null)for(v.shared.hiddenCallbacks=null,v=0;v<V.length;v++)Sg(V[v],P)}catch(se){ut(f,f.return,se)}}c&&k&64&&P_(b),Vo(b,b.return);break;case 27:$_(b);case 26:case 5:Yi(v,b,c),c&&f===null&&k&4&&U_(b),Vo(b,b.return);break;case 12:Yi(v,b,c);break;case 13:Yi(v,b,c),c&&k&4&&V_(v,b);break;case 22:b.memoizedState===null&&Yi(v,b,c),Vo(b,b.return);break;case 30:break;default:Yi(v,b,c)}r=r.sibling}}function Ph(s,r){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&No(c))}function Ih(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&No(s))}function Ys(s,r,c,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)X_(s,r,c,f),r=r.sibling}function X_(s,r,c,f){var v=r.flags;switch(r.tag){case 0:case 11:case 15:Ys(s,r,c,f),v&2048&&Go(9,r);break;case 1:Ys(s,r,c,f);break;case 3:Ys(s,r,c,f),v&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&No(s)));break;case 12:if(v&2048){Ys(s,r,c,f),s=r.stateNode;try{var b=r.memoizedProps,k=b.id,P=b.onPostCommit;typeof P=="function"&&P(k,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){ut(r,r.return,V)}}else Ys(s,r,c,f);break;case 13:Ys(s,r,c,f);break;case 23:break;case 22:b=r.stateNode,k=r.alternate,r.memoizedState!==null?b._visibility&2?Ys(s,r,c,f):Yo(s,r):b._visibility&2?Ys(s,r,c,f):(b._visibility|=2,Sr(s,r,c,f,(r.subtreeFlags&10256)!==0)),v&2048&&Ph(k,r);break;case 24:Ys(s,r,c,f),v&2048&&Ih(r.alternate,r);break;default:Ys(s,r,c,f)}}function Sr(s,r,c,f,v){for(v=v&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var b=s,k=r,P=c,V=f,se=k.flags;switch(k.tag){case 0:case 11:case 15:Sr(b,k,P,V,v),Go(8,k);break;case 23:break;case 22:var le=k.stateNode;k.memoizedState!==null?le._visibility&2?Sr(b,k,P,V,v):Yo(b,k):(le._visibility|=2,Sr(b,k,P,V,v)),v&&se&2048&&Ph(k.alternate,k);break;case 24:Sr(b,k,P,V,v),v&&se&2048&&Ih(k.alternate,k);break;default:Sr(b,k,P,V,v)}r=r.sibling}}function Yo(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=s,f=r,v=f.flags;switch(f.tag){case 22:Yo(c,f),v&2048&&Ph(f.alternate,f);break;case 24:Yo(c,f),v&2048&&Ih(f.alternate,f);break;default:Yo(c,f)}r=r.sibling}}var Wo=8192;function Cr(s){if(s.subtreeFlags&Wo)for(s=s.child;s!==null;)K_(s),s=s.sibling}function K_(s){switch(s.tag){case 26:Cr(s),s.flags&Wo&&s.memoizedState!==null&&z2(Os,s.memoizedState,s.memoizedProps);break;case 5:Cr(s);break;case 3:case 4:var r=Os;Os=eu(s.stateNode.containerInfo),Cr(s),Os=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=Wo,Wo=16777216,Cr(s),Wo=r):Cr(s));break;default:Cr(s)}}function Q_(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Xo(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var f=r[c];hn=f,J_(f,s)}Q_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Z_(s),s=s.sibling}function Z_(s){switch(s.tag){case 0:case 11:case 15:Xo(s),s.flags&2048&&Gi(9,s,s.return);break;case 3:Xo(s);break;case 12:Xo(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Hc(s)):Xo(s);break;default:Xo(s)}}function Hc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var f=r[c];hn=f,J_(f,s)}Q_(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Gi(8,r,r.return),Hc(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,Hc(r));break;default:Hc(r)}s=s.sibling}}function J_(s,r){for(;hn!==null;){var c=hn;switch(c.tag){case 0:case 11:case 15:Gi(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:No(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,hn=f;else e:for(c=s;hn!==null;){f=hn;var v=f.sibling,b=f.return;if(F_(f),f===c){hn=null;break e}if(v!==null){v.return=b,hn=v;break e}hn=b}}}var n2={getCacheForType:function(s){var r=En(sn),c=r.data.get(s);return c===void 0&&(c=s(),r.data.set(s,c)),c}},s2=typeof WeakMap=="function"?WeakMap:Map,Je=0,pt=null,Be=null,$e=0,et=0,ss=null,Wi=!1,jr=!1,Uh=!1,bi=0,Dt=0,Xi=0,Ma=0,zh=0,ps=0,Er=0,Ko=null,$n=null,$h=!1,Hh=0,qc=1/0,Fc=null,Ki=null,yn=0,Qi=null,Ar=null,Tr=0,qh=0,Fh=null,ev=null,Qo=0,Gh=null;function is(){if((Je&2)!==0&&$e!==0)return $e&-$e;if(E.T!==null){var s=pr;return s!==0?s:Zh()}return Kn()}function tv(){ps===0&&(ps=($e&536870912)===0||Ke?qs():536870912);var s=ms.current;return s!==null&&(s.flags|=32),ps}function as(s,r,c){(s===pt&&(et===2||et===9)||s.cancelPendingCommit!==null)&&(kr(s,0),Zi(s,$e,ps,!1)),Yt(s,c),((Je&2)===0||s!==pt)&&(s===pt&&((Je&2)===0&&(Ma|=c),Dt===4&&Zi(s,$e,ps,!1)),Ws(s))}function nv(s,r,c){if((Je&6)!==0)throw Error(i(327));var f=!c&&(r&124)===0&&(r&s.expiredLanes)===0||Cs(s,r),v=f?r2(s,r):Wh(s,r,!0),b=f;do{if(v===0){jr&&!f&&Zi(s,r,0,!1);break}else{if(c=s.current.alternate,b&&!i2(c)){v=Wh(s,r,!1),b=!1;continue}if(v===2){if(b=r,s.errorRecoveryDisabledLanes&b)var k=0;else k=s.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){r=k;e:{var P=s;v=Ko;var V=P.current.memoizedState.isDehydrated;if(V&&(kr(P,k).flags|=256),k=Wh(P,k,!1),k!==2){if(Uh&&!V){P.errorRecoveryDisabledLanes|=b,Ma|=b,v=4;break e}b=$n,$n=v,b!==null&&($n===null?$n=b:$n.push.apply($n,b))}v=k}if(b=!1,v!==2)continue}}if(v===1){kr(s,0),Zi(s,r,0,!0);break}e:{switch(f=s,b=v,b){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Zi(f,r,ps,!Wi);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(v=Hh+300-Oe(),10<v)){if(Zi(f,r,ps,!Wi),rs(f,0,!0)!==0)break e;f.timeoutHandle=Nv(sv.bind(null,f,c,$n,Fc,$h,r,ps,Ma,Er,Wi,b,2,-0,0),v);break e}sv(f,c,$n,Fc,$h,r,ps,Ma,Er,Wi,b,0,-0,0)}}break}while(!0);Ws(s)}function sv(s,r,c,f,v,b,k,P,V,se,le,ue,ie,re){if(s.timeoutHandle=-1,ue=r.subtreeFlags,(ue&8192||(ue&16785408)===16785408)&&(il={stylesheets:null,count:0,unsuspend:U2},K_(r),ue=$2(),ue!==null)){s.cancelPendingCommit=ue(uv.bind(null,s,r,b,c,f,v,k,P,V,le,1,ie,re)),Zi(s,b,k,!se);return}uv(s,r,b,c,f,v,k,P,V)}function i2(s){for(var r=s;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var v=c[f],b=v.getSnapshot;v=v.value;try{if(!Jn(b(),v))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Zi(s,r,c,f){r&=~zh,r&=~Ma,s.suspendedLanes|=r,s.pingedLanes&=~r,f&&(s.warmLanes|=r),f=s.expirationTimes;for(var v=r;0<v;){var b=31-wt(v),k=1<<b;f[b]=-1,v&=~k}c!==0&&js(s,c,r)}function Gc(){return(Je&6)===0?(Zo(0),!1):!0}function Vh(){if(Be!==null){if(et===0)var s=Be.return;else s=Be,hi=Aa=null,ch(s),xr=null,Ho=0,s=Be;for(;s!==null;)L_(s.alternate,s),s=s.return;Be=null}}function kr(s,r){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,w2(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),Vh(),pt=s,Be=c=ci(s.current,null),$e=r,et=0,ss=null,Wi=!1,jr=Cs(s,r),Uh=!1,Er=ps=zh=Ma=Xi=Dt=0,$n=Ko=null,$h=!1,(r&8)!==0&&(r|=r&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=r;0<f;){var v=31-wt(f),b=1<<v;r|=s[v],f&=~b}return bi=r,fc(),c}function iv(s,r){Me=null,E.H=Rc,r===Mo||r===wc?(r=xg(),et=3):r===vg?(r=xg(),et=4):et=r===w_?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ss=r,Be===null&&(Dt=1,Pc(s,us(r,s.current)))}function av(){var s=E.H;return E.H=Rc,s===null?Rc:s}function rv(){var s=E.A;return E.A=n2,s}function Yh(){Dt=4,Wi||($e&4194048)!==$e&&ms.current!==null||(jr=!0),(Xi&134217727)===0&&(Ma&134217727)===0||pt===null||Zi(pt,$e,ps,!1)}function Wh(s,r,c){var f=Je;Je|=2;var v=av(),b=rv();(pt!==s||$e!==r)&&(Fc=null,kr(s,r)),r=!1;var k=Dt;e:do try{if(et!==0&&Be!==null){var P=Be,V=ss;switch(et){case 8:Vh(),k=6;break e;case 3:case 2:case 9:case 6:ms.current===null&&(r=!0);var se=et;if(et=0,ss=null,Or(s,P,V,se),c&&jr){k=0;break e}break;default:se=et,et=0,ss=null,Or(s,P,V,se)}}a2(),k=Dt;break}catch(le){iv(s,le)}while(!0);return r&&s.shellSuspendCounter++,hi=Aa=null,Je=f,E.H=v,E.A=b,Be===null&&(pt=null,$e=0,fc()),k}function a2(){for(;Be!==null;)ov(Be)}function r2(s,r){var c=Je;Je|=2;var f=av(),v=rv();pt!==s||$e!==r?(Fc=null,qc=Oe()+500,kr(s,r)):jr=Cs(s,r);e:do try{if(et!==0&&Be!==null){r=Be;var b=ss;t:switch(et){case 1:et=0,ss=null,Or(s,r,b,1);break;case 2:case 9:if(yg(b)){et=0,ss=null,lv(r);break}r=function(){et!==2&&et!==9||pt!==s||(et=7),Ws(s)},b.then(r,r);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:yg(b)?(et=0,ss=null,lv(r)):(et=0,ss=null,Or(s,r,b,7));break;case 5:var k=null;switch(Be.tag){case 26:k=Be.memoizedState;case 5:case 27:var P=Be;if(!k||qv(k)){et=0,ss=null;var V=P.sibling;if(V!==null)Be=V;else{var se=P.return;se!==null?(Be=se,Vc(se)):Be=null}break t}}et=0,ss=null,Or(s,r,b,5);break;case 6:et=0,ss=null,Or(s,r,b,6);break;case 8:Vh(),Dt=6;break e;default:throw Error(i(462))}}o2();break}catch(le){iv(s,le)}while(!0);return hi=Aa=null,E.H=f,E.A=v,Je=c,Be!==null?0:(pt=null,$e=0,fc(),Dt)}function o2(){for(;Be!==null&&!nt();)ov(Be)}function ov(s){var r=D_(s.alternate,s,bi);s.memoizedProps=s.pendingProps,r===null?Vc(s):Be=r}function lv(s){var r=s,c=r.alternate;switch(r.tag){case 15:case 0:r=T_(c,r,r.pendingProps,r.type,void 0,$e);break;case 11:r=T_(c,r,r.pendingProps,r.type.render,r.ref,$e);break;case 5:ch(r);default:L_(c,r),r=Be=cg(r,bi),r=D_(c,r,bi)}s.memoizedProps=s.pendingProps,r===null?Vc(s):Be=r}function Or(s,r,c,f){hi=Aa=null,ch(r),xr=null,Ho=0;var v=r.return;try{if(Kw(s,v,r,c,$e)){Dt=1,Pc(s,us(c,s.current)),Be=null;return}}catch(b){if(v!==null)throw Be=v,b;Dt=1,Pc(s,us(c,s.current)),Be=null;return}r.flags&32768?(Ke||f===1?s=!0:jr||($e&536870912)!==0?s=!1:(Wi=s=!0,(f===2||f===9||f===3||f===6)&&(f=ms.current,f!==null&&f.tag===13&&(f.flags|=16384))),cv(r,s)):Vc(r)}function Vc(s){var r=s;do{if((r.flags&32768)!==0){cv(r,Wi);return}s=r.return;var c=Zw(r.alternate,r,bi);if(c!==null){Be=c;return}if(r=r.sibling,r!==null){Be=r;return}Be=r=s}while(r!==null);Dt===0&&(Dt=5)}function cv(s,r){do{var c=Jw(s.alternate,s);if(c!==null){c.flags&=32767,Be=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(s=s.sibling,s!==null)){Be=s;return}Be=s=c}while(s!==null);Dt=6,Be=null}function uv(s,r,c,f,v,b,k,P,V){s.cancelPendingCommit=null;do Yc();while(yn!==0);if((Je&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(b=r.lanes|r.childLanes,b|=Id,os(s,c,b,k,P,V),s===pt&&(Be=pt=null,$e=0),Ar=r,Qi=s,Tr=c,qh=b,Fh=v,ev=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,d2(st,function(){return pv(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=E.T,E.T=null,v=O.p,O.p=2,k=Je,Je|=4;try{e2(s,r,c)}finally{Je=k,O.p=v,E.T=f}}yn=1,dv(),hv(),fv()}}function dv(){if(yn===1){yn=0;var s=Qi,r=Ar,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=E.T,E.T=null;var f=O.p;O.p=2;var v=Je;Je|=4;try{Y_(r,s);var b=of,k=Jp(s.containerInfo),P=b.focusedElem,V=b.selectionRange;if(k!==P&&P&&P.ownerDocument&&Zp(P.ownerDocument.documentElement,P)){if(V!==null&&Md(P)){var se=V.start,le=V.end;if(le===void 0&&(le=se),"selectionStart"in P)P.selectionStart=se,P.selectionEnd=Math.min(le,P.value.length);else{var ue=P.ownerDocument||document,ie=ue&&ue.defaultView||window;if(ie.getSelection){var re=ie.getSelection(),Ce=P.textContent.length,xe=Math.min(V.start,Ce),ot=V.end===void 0?xe:Math.min(V.end,Ce);!re.extend&&xe>ot&&(k=ot,ot=xe,xe=k);var Z=Qp(P,xe),K=Qp(P,ot);if(Z&&K&&(re.rangeCount!==1||re.anchorNode!==Z.node||re.anchorOffset!==Z.offset||re.focusNode!==K.node||re.focusOffset!==K.offset)){var te=ue.createRange();te.setStart(Z.node,Z.offset),re.removeAllRanges(),xe>ot?(re.addRange(te),re.extend(K.node,K.offset)):(te.setEnd(K.node,K.offset),re.addRange(te))}}}}for(ue=[],re=P;re=re.parentNode;)re.nodeType===1&&ue.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<ue.length;P++){var ce=ue[P];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}au=!!rf,of=rf=null}finally{Je=v,O.p=f,E.T=c}}s.current=r,yn=2}}function hv(){if(yn===2){yn=0;var s=Qi,r=Ar,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=E.T,E.T=null;var f=O.p;O.p=2;var v=Je;Je|=4;try{q_(s,r.alternate,r)}finally{Je=v,O.p=f,E.T=c}}yn=3}}function fv(){if(yn===4||yn===3){yn=0,Ot();var s=Qi,r=Ar,c=Tr,f=ev;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?yn=5:(yn=0,Ar=Qi=null,mv(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(Ki=null),Xn(c),r=r.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(Pt,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=E.T,v=O.p,O.p=2,E.T=null;try{for(var b=s.onRecoverableError,k=0;k<f.length;k++){var P=f[k];b(P.value,{componentStack:P.stack})}}finally{E.T=r,O.p=v}}(Tr&3)!==0&&Yc(),Ws(s),v=s.pendingLanes,(c&4194090)!==0&&(v&42)!==0?s===Gh?Qo++:(Qo=0,Gh=s):Qo=0,Zo(0)}}function mv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,No(r)))}function Yc(s){return dv(),hv(),fv(),pv()}function pv(){if(yn!==5)return!1;var s=Qi,r=qh;qh=0;var c=Xn(Tr),f=E.T,v=O.p;try{O.p=32>c?32:c,E.T=null,c=Fh,Fh=null;var b=Qi,k=Tr;if(yn=0,Ar=Qi=null,Tr=0,(Je&6)!==0)throw Error(i(331));var P=Je;if(Je|=4,Z_(b.current),X_(b,b.current,k,c),Je=P,Zo(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(Pt,b)}catch{}return!0}finally{O.p=v,E.T=f,mv(s,r)}}function gv(s,r,c){r=us(c,r),r=Sh(s.stateNode,r,2),s=$i(s,r,2),s!==null&&(Yt(s,2),Ws(s))}function ut(s,r,c){if(s.tag===3)gv(s,s,c);else for(;r!==null;){if(r.tag===3){gv(r,s,c);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ki===null||!Ki.has(f))){s=us(c,s),c=b_(2),f=$i(r,c,2),f!==null&&(x_(c,f,r,s),Yt(f,2),Ws(f));break}}r=r.return}}function Xh(s,r,c){var f=s.pingCache;if(f===null){f=s.pingCache=new s2;var v=new Set;f.set(r,v)}else v=f.get(r),v===void 0&&(v=new Set,f.set(r,v));v.has(c)||(Uh=!0,v.add(c),s=l2.bind(null,s,r,c),r.then(s,s))}function l2(s,r,c){var f=s.pingCache;f!==null&&f.delete(r),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,pt===s&&($e&c)===c&&(Dt===4||Dt===3&&($e&62914560)===$e&&300>Oe()-Hh?(Je&2)===0&&kr(s,0):zh|=c,Er===$e&&(Er=0)),Ws(s)}function _v(s,r){r===0&&(r=Yn()),s=dr(s,r),s!==null&&(Yt(s,r),Ws(s))}function c2(s){var r=s.memoizedState,c=0;r!==null&&(c=r.retryLane),_v(s,c)}function u2(s,r){var c=0;switch(s.tag){case 13:var f=s.stateNode,v=s.memoizedState;v!==null&&(c=v.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(r),_v(s,c)}function d2(s,r){return Ze(s,r)}var Wc=null,Nr=null,Kh=!1,Xc=!1,Qh=!1,Da=0;function Ws(s){s!==Nr&&s.next===null&&(Nr===null?Wc=Nr=s:Nr=Nr.next=s),Xc=!0,Kh||(Kh=!0,f2())}function Zo(s,r){if(!Qh&&Xc){Qh=!0;do for(var c=!1,f=Wc;f!==null;){if(s!==0){var v=f.pendingLanes;if(v===0)var b=0;else{var k=f.suspendedLanes,P=f.pingedLanes;b=(1<<31-wt(42|s)+1)-1,b&=v&~(k&~P),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,xv(f,b))}else b=$e,b=rs(f,f===pt?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||Cs(f,b)||(c=!0,xv(f,b));f=f.next}while(c);Qh=!1}}function h2(){vv()}function vv(){Xc=Kh=!1;var s=0;Da!==0&&(x2()&&(s=Da),Da=0);for(var r=Oe(),c=null,f=Wc;f!==null;){var v=f.next,b=yv(f,r);b===0?(f.next=null,c===null?Wc=v:c.next=v,v===null&&(Nr=c)):(c=f,(s!==0||(b&3)!==0)&&(Xc=!0)),f=v}Zo(s)}function yv(s,r){for(var c=s.suspendedLanes,f=s.pingedLanes,v=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var k=31-wt(b),P=1<<k,V=v[k];V===-1?((P&c)===0||(P&f)!==0)&&(v[k]=_a(P,r)):V<=r&&(s.expiredLanes|=P),b&=~P}if(r=pt,c=$e,c=rs(s,s===r?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,c===0||s===r&&(et===2||et===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&kt(f),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||Cs(s,c)){if(r=c&-c,r===s.callbackPriority)return r;switch(f!==null&&kt(f),Xn(c)){case 2:case 8:c=Lt;break;case 32:c=st;break;case 268435456:c=lt;break;default:c=st}return f=bv.bind(null,s),c=Ze(c,f),s.callbackPriority=r,s.callbackNode=c,r}return f!==null&&f!==null&&kt(f),s.callbackPriority=2,s.callbackNode=null,2}function bv(s,r){if(yn!==0&&yn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Yc()&&s.callbackNode!==c)return null;var f=$e;return f=rs(s,s===pt?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(nv(s,f,r),yv(s,Oe()),s.callbackNode!=null&&s.callbackNode===c?bv.bind(null,s):null)}function xv(s,r){if(Yc())return null;nv(s,r,!0)}function f2(){S2(function(){(Je&6)!==0?Ze(vt,h2):vv()})}function Zh(){return Da===0&&(Da=qs()),Da}function wv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:rc(""+s)}function Sv(s,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,s.id&&c.setAttribute("form",s.id),r.parentNode.insertBefore(c,r),s=new FormData(s),c.parentNode.removeChild(c),s}function m2(s,r,c,f,v){if(r==="submit"&&c&&c.stateNode===v){var b=wv((v[Cn]||null).action),k=f.submitter;k&&(r=(r=k[Cn]||null)?wv(r.formAction):k.getAttribute("formAction"),r!==null&&(b=r,k=null));var P=new uc("action","action",null,f,v);s.push({event:P,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Da!==0){var V=k?Sv(v,k):new FormData(v);vh(c,{pending:!0,data:V,method:v.method,action:b},null,V)}}else typeof b=="function"&&(P.preventDefault(),V=k?Sv(v,k):new FormData(v),vh(c,{pending:!0,data:V,method:v.method,action:b},b,V))},currentTarget:v}]})}}for(var Jh=0;Jh<Pd.length;Jh++){var ef=Pd[Jh],p2=ef.toLowerCase(),g2=ef[0].toUpperCase()+ef.slice(1);ks(p2,"on"+g2)}ks(ng,"onAnimationEnd"),ks(sg,"onAnimationIteration"),ks(ig,"onAnimationStart"),ks("dblclick","onDoubleClick"),ks("focusin","onFocus"),ks("focusout","onBlur"),ks(Mw,"onTransitionRun"),ks(Dw,"onTransitionStart"),ks(Bw,"onTransitionCancel"),ks(ag,"onTransitionEnd"),me("onMouseEnter",["mouseout","mouseover"]),me("onMouseLeave",["mouseout","mouseover"]),me("onPointerEnter",["pointerout","pointerover"]),me("onPointerLeave",["pointerout","pointerover"]),de("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),de("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),de("onBeforeInput",["compositionend","keypress","textInput","paste"]),de("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),de("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),de("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jo));function Cv(s,r){r=(r&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],v=f.event;f=f.listeners;e:{var b=void 0;if(r)for(var k=f.length-1;0<=k;k--){var P=f[k],V=P.instance,se=P.currentTarget;if(P=P.listener,V!==b&&v.isPropagationStopped())break e;b=P,v.currentTarget=se;try{b(v)}catch(le){Lc(le)}v.currentTarget=null,b=V}else for(k=0;k<f.length;k++){if(P=f[k],V=P.instance,se=P.currentTarget,P=P.listener,V!==b&&v.isPropagationStopped())break e;b=P,v.currentTarget=se;try{b(v)}catch(le){Lc(le)}v.currentTarget=null,b=V}}}}function Le(s,r){var c=r[As];c===void 0&&(c=r[As]=new Set);var f=s+"__bubble";c.has(f)||(jv(r,s,2,!1),c.add(f))}function tf(s,r,c){var f=0;r&&(f|=4),jv(c,s,f,r)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function nf(s){if(!s[Kc]){s[Kc]=!0,ge.forEach(function(c){c!=="selectionchange"&&(_2.has(c)||tf(c,!1,s),tf(c,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Kc]||(r[Kc]=!0,tf("selectionchange",!1,r))}}function jv(s,r,c,f){switch(Xv(r)){case 2:var v=F2;break;case 8:v=G2;break;default:v=_f}c=v.bind(null,r,c,s),v=void 0,!Cd||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),f?v!==void 0?s.addEventListener(r,c,{capture:!0,passive:v}):s.addEventListener(r,c,!0):v!==void 0?s.addEventListener(r,c,{passive:v}):s.addEventListener(r,c,!1)}function sf(s,r,c,f,v){var b=f;if((r&1)===0&&(r&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var P=f.stateNode.containerInfo;if(P===v)break;if(k===4)for(k=f.return;k!==null;){var V=k.tag;if((V===3||V===4)&&k.stateNode.containerInfo===v)return;k=k.return}for(;P!==null;){if(k=ii(P),k===null)return;if(V=k.tag,V===5||V===6||V===26||V===27){f=b=k;continue e}P=P.parentNode}}f=f.return}Rp(function(){var se=b,le=wd(c),ue=[];e:{var ie=rg.get(s);if(ie!==void 0){var re=uc,Ce=s;switch(s){case"keypress":if(lc(c)===0)break e;case"keydown":case"keyup":re=dw;break;case"focusin":Ce="focus",re=Td;break;case"focusout":Ce="blur",re=Td;break;case"beforeblur":case"afterblur":re=Td;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Bp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=J1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=mw;break;case ng:case sg:case ig:re=nw;break;case ag:re=gw;break;case"scroll":case"scrollend":re=Q1;break;case"wheel":re=vw;break;case"copy":case"cut":case"paste":re=iw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Pp;break;case"toggle":case"beforetoggle":re=bw}var xe=(r&4)!==0,ot=!xe&&(s==="scroll"||s==="scrollend"),Z=xe?ie!==null?ie+"Capture":null:ie;xe=[];for(var K=se,te;K!==null;){var ce=K;if(te=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||te===null||Z===null||(ce=vo(K,Z),ce!=null&&xe.push(el(K,ce,te))),ot)break;K=K.return}0<xe.length&&(ie=new re(ie,Ce,null,c,le),ue.push({event:ie,listeners:xe}))}}if((r&7)===0){e:{if(ie=s==="mouseover"||s==="pointerover",re=s==="mouseout"||s==="pointerout",ie&&c!==xd&&(Ce=c.relatedTarget||c.fromElement)&&(ii(Ce)||Ce[_n]))break e;if((re||ie)&&(ie=le.window===le?le:(ie=le.ownerDocument)?ie.defaultView||ie.parentWindow:window,re?(Ce=c.relatedTarget||c.toElement,re=se,Ce=Ce?ii(Ce):null,Ce!==null&&(ot=o(Ce),xe=Ce.tag,Ce!==ot||xe!==5&&xe!==27&&xe!==6)&&(Ce=null)):(re=null,Ce=se),re!==Ce)){if(xe=Bp,ce="onMouseLeave",Z="onMouseEnter",K="mouse",(s==="pointerout"||s==="pointerover")&&(xe=Pp,ce="onPointerLeave",Z="onPointerEnter",K="pointer"),ot=re==null?ie:Li(re),te=Ce==null?ie:Li(Ce),ie=new xe(ce,K+"leave",re,c,le),ie.target=ot,ie.relatedTarget=te,ce=null,ii(le)===se&&(xe=new xe(Z,K+"enter",Ce,c,le),xe.target=te,xe.relatedTarget=ot,ce=xe),ot=ce,re&&Ce)t:{for(xe=re,Z=Ce,K=0,te=xe;te;te=Rr(te))K++;for(te=0,ce=Z;ce;ce=Rr(ce))te++;for(;0<K-te;)xe=Rr(xe),K--;for(;0<te-K;)Z=Rr(Z),te--;for(;K--;){if(xe===Z||Z!==null&&xe===Z.alternate)break t;xe=Rr(xe),Z=Rr(Z)}xe=null}else xe=null;re!==null&&Ev(ue,ie,re,xe,!1),Ce!==null&&ot!==null&&Ev(ue,ot,Ce,xe,!0)}}e:{if(ie=se?Li(se):window,re=ie.nodeName&&ie.nodeName.toLowerCase(),re==="select"||re==="input"&&ie.type==="file")var pe=Gp;else if(qp(ie))if(Vp)pe=Ow;else{pe=Tw;var De=Aw}else re=ie.nodeName,!re||re.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?se&&bd(se.elementType)&&(pe=Gp):pe=kw;if(pe&&(pe=pe(s,se))){Fp(ue,pe,c,le);break e}De&&De(s,ie,se),s==="focusout"&&se&&ie.type==="number"&&se.memoizedProps.value!=null&&yd(ie,"number",ie.value)}switch(De=se?Li(se):window,s){case"focusin":(qp(De)||De.contentEditable==="true")&&(lr=De,Dd=se,Eo=null);break;case"focusout":Eo=Dd=lr=null;break;case"mousedown":Bd=!0;break;case"contextmenu":case"mouseup":case"dragend":Bd=!1,eg(ue,c,le);break;case"selectionchange":if(Rw)break;case"keydown":case"keyup":eg(ue,c,le)}var ve;if(Od)e:{switch(s){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else or?$p(s,c)&&(Se="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Se="onCompositionStart");Se&&(Ip&&c.locale!=="ko"&&(or||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&or&&(ve=Mp()):(Pi=le,jd="value"in Pi?Pi.value:Pi.textContent,or=!0)),De=Qc(se,Se),0<De.length&&(Se=new Lp(Se,s,null,c,le),ue.push({event:Se,listeners:De}),ve?Se.data=ve:(ve=Hp(c),ve!==null&&(Se.data=ve)))),(ve=ww?Sw(s,c):Cw(s,c))&&(Se=Qc(se,"onBeforeInput"),0<Se.length&&(De=new Lp("onBeforeInput","beforeinput",null,c,le),ue.push({event:De,listeners:Se}),De.data=ve)),m2(ue,s,se,c,le)}Cv(ue,r)})}function el(s,r,c){return{instance:s,listener:r,currentTarget:c}}function Qc(s,r){for(var c=r+"Capture",f=[];s!==null;){var v=s,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=vo(s,c),v!=null&&f.unshift(el(s,v,b)),v=vo(s,r),v!=null&&f.push(el(s,v,b))),s.tag===3)return f;s=s.return}return[]}function Rr(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Ev(s,r,c,f,v){for(var b=r._reactName,k=[];c!==null&&c!==f;){var P=c,V=P.alternate,se=P.stateNode;if(P=P.tag,V!==null&&V===f)break;P!==5&&P!==26&&P!==27||se===null||(V=se,v?(se=vo(c,b),se!=null&&k.unshift(el(c,se,V))):v||(se=vo(c,b),se!=null&&k.push(el(c,se,V)))),c=c.return}k.length!==0&&s.push({event:r,listeners:k})}var v2=/\r\n?/g,y2=/\u0000|\uFFFD/g;function Av(s){return(typeof s=="string"?s:""+s).replace(v2,`
`).replace(y2,"")}function Tv(s,r){return r=Av(r),Av(s)===r}function Zc(){}function rt(s,r,c,f,v,b){switch(c){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||ir(s,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&ir(s,""+f);break;case"className":Ts(s,"class",f);break;case"tabIndex":Ts(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Ts(s,c,f);break;case"style":Op(s,f,b);break;case"data":if(r!=="object"){Ts(s,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||c!=="href")){s.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=rc(""+f),s.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(r!=="input"&&rt(s,r,"name",v.name,v,null),rt(s,r,"formEncType",v.formEncType,v,null),rt(s,r,"formMethod",v.formMethod,v,null),rt(s,r,"formTarget",v.formTarget,v,null)):(rt(s,r,"encType",v.encType,v,null),rt(s,r,"method",v.method,v,null),rt(s,r,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=rc(""+f),s.setAttribute(c,f);break;case"onClick":f!=null&&(s.onclick=Zc);break;case"onScroll":f!=null&&Le("scroll",s);break;case"onScrollEnd":f!=null&&Le("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}c=rc(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""+f):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":f===!0?s.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,f):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(c,f):s.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(c):s.setAttribute(c,f);break;case"popover":Le("beforetoggle",s),Le("toggle",s),Pn(s,"popover",f);break;case"xlinkActuate":Zn(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Zn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Zn(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Zn(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Zn(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Zn(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Zn(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Zn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Zn(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Pn(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=X1.get(c)||c,Pn(s,c,f))}}function af(s,r,c,f,v,b){switch(c){case"style":Op(s,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=c}}break;case"children":typeof f=="string"?ir(s,f):(typeof f=="number"||typeof f=="bigint")&&ir(s,""+f);break;case"onScroll":f!=null&&Le("scroll",s);break;case"onScrollEnd":f!=null&&Le("scrollend",s);break;case"onClick":f!=null&&(s.onclick=Zc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Q.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),r=c.slice(2,v?c.length-7:void 0),b=s[Cn]||null,b=b!=null?b[c]:null,typeof b=="function"&&s.removeEventListener(r,b,v),typeof f=="function")){typeof b!="function"&&b!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(r,f,v);break e}c in s?s[c]=f:f===!0?s.setAttribute(c,""):Pn(s,c,f)}}}function bn(s,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",s),Le("load",s);var f=!1,v=!1,b;for(b in c)if(c.hasOwnProperty(b)){var k=c[b];if(k!=null)switch(b){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(s,r,b,k,c,null)}}v&&rt(s,r,"srcSet",c.srcSet,c,null),f&&rt(s,r,"src",c.src,c,null);return;case"input":Le("invalid",s);var P=b=k=v=null,V=null,se=null;for(f in c)if(c.hasOwnProperty(f)){var le=c[f];if(le!=null)switch(f){case"name":v=le;break;case"type":k=le;break;case"checked":V=le;break;case"defaultChecked":se=le;break;case"value":b=le;break;case"defaultValue":P=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,r));break;default:rt(s,r,f,le,c,null)}}Ep(s,b,P,V,se,k,v,!1),ic(s);return;case"select":Le("invalid",s),f=k=b=null;for(v in c)if(c.hasOwnProperty(v)&&(P=c[v],P!=null))switch(v){case"value":b=P;break;case"defaultValue":k=P;break;case"multiple":f=P;default:rt(s,r,v,P,c,null)}r=b,c=k,s.multiple=!!f,r!=null?sr(s,!!f,r,!1):c!=null&&sr(s,!!f,c,!0);return;case"textarea":Le("invalid",s),b=v=f=null;for(k in c)if(c.hasOwnProperty(k)&&(P=c[k],P!=null))switch(k){case"value":f=P;break;case"defaultValue":v=P;break;case"children":b=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(91));break;default:rt(s,r,k,P,c,null)}Tp(s,f,v,b),ic(s);return;case"option":for(V in c)if(c.hasOwnProperty(V)&&(f=c[V],f!=null))switch(V){case"selected":s.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:rt(s,r,V,f,c,null)}return;case"dialog":Le("beforetoggle",s),Le("toggle",s),Le("cancel",s),Le("close",s);break;case"iframe":case"object":Le("load",s);break;case"video":case"audio":for(f=0;f<Jo.length;f++)Le(Jo[f],s);break;case"image":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"embed":case"source":case"link":Le("error",s),Le("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in c)if(c.hasOwnProperty(se)&&(f=c[se],f!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(s,r,se,f,c,null)}return;default:if(bd(r)){for(le in c)c.hasOwnProperty(le)&&(f=c[le],f!==void 0&&af(s,r,le,f,c,void 0));return}}for(P in c)c.hasOwnProperty(P)&&(f=c[P],f!=null&&rt(s,r,P,f,c,null))}function b2(s,r,c,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,k=null,P=null,V=null,se=null,le=null;for(re in c){var ue=c[re];if(c.hasOwnProperty(re)&&ue!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":V=ue;default:f.hasOwnProperty(re)||rt(s,r,re,null,f,ue)}}for(var ie in f){var re=f[ie];if(ue=c[ie],f.hasOwnProperty(ie)&&(re!=null||ue!=null))switch(ie){case"type":b=re;break;case"name":v=re;break;case"checked":se=re;break;case"defaultChecked":le=re;break;case"value":k=re;break;case"defaultValue":P=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,r));break;default:re!==ue&&rt(s,r,ie,re,f,ue)}}vd(s,k,P,V,se,le,b,v);return;case"select":re=k=P=ie=null;for(b in c)if(V=c[b],c.hasOwnProperty(b)&&V!=null)switch(b){case"value":break;case"multiple":re=V;default:f.hasOwnProperty(b)||rt(s,r,b,null,f,V)}for(v in f)if(b=f[v],V=c[v],f.hasOwnProperty(v)&&(b!=null||V!=null))switch(v){case"value":ie=b;break;case"defaultValue":P=b;break;case"multiple":k=b;default:b!==V&&rt(s,r,v,b,f,V)}r=P,c=k,f=re,ie!=null?sr(s,!!c,ie,!1):!!f!=!!c&&(r!=null?sr(s,!!c,r,!0):sr(s,!!c,c?[]:"",!1));return;case"textarea":re=ie=null;for(P in c)if(v=c[P],c.hasOwnProperty(P)&&v!=null&&!f.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:rt(s,r,P,null,f,v)}for(k in f)if(v=f[k],b=c[k],f.hasOwnProperty(k)&&(v!=null||b!=null))switch(k){case"value":ie=v;break;case"defaultValue":re=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==b&&rt(s,r,k,v,f,b)}Ap(s,ie,re);return;case"option":for(var Ce in c)if(ie=c[Ce],c.hasOwnProperty(Ce)&&ie!=null&&!f.hasOwnProperty(Ce))switch(Ce){case"selected":s.selected=!1;break;default:rt(s,r,Ce,null,f,ie)}for(V in f)if(ie=f[V],re=c[V],f.hasOwnProperty(V)&&ie!==re&&(ie!=null||re!=null))switch(V){case"selected":s.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:rt(s,r,V,ie,f,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in c)ie=c[xe],c.hasOwnProperty(xe)&&ie!=null&&!f.hasOwnProperty(xe)&&rt(s,r,xe,null,f,ie);for(se in f)if(ie=f[se],re=c[se],f.hasOwnProperty(se)&&ie!==re&&(ie!=null||re!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,r));break;default:rt(s,r,se,ie,f,re)}return;default:if(bd(r)){for(var ot in c)ie=c[ot],c.hasOwnProperty(ot)&&ie!==void 0&&!f.hasOwnProperty(ot)&&af(s,r,ot,void 0,f,ie);for(le in f)ie=f[le],re=c[le],!f.hasOwnProperty(le)||ie===re||ie===void 0&&re===void 0||af(s,r,le,ie,f,re);return}}for(var Z in c)ie=c[Z],c.hasOwnProperty(Z)&&ie!=null&&!f.hasOwnProperty(Z)&&rt(s,r,Z,null,f,ie);for(ue in f)ie=f[ue],re=c[ue],!f.hasOwnProperty(ue)||ie===re||ie==null&&re==null||rt(s,r,ue,ie,f,re)}var rf=null,of=null;function Jc(s){return s.nodeType===9?s:s.ownerDocument}function kv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ov(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function lf(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var cf=null;function x2(){var s=window.event;return s&&s.type==="popstate"?s===cf?!1:(cf=s,!0):(cf=null,!1)}var Nv=typeof setTimeout=="function"?setTimeout:void 0,w2=typeof clearTimeout=="function"?clearTimeout:void 0,Rv=typeof Promise=="function"?Promise:void 0,S2=typeof queueMicrotask=="function"?queueMicrotask:typeof Rv<"u"?function(s){return Rv.resolve(null).then(s).catch(C2)}:Nv;function C2(s){setTimeout(function(){throw s})}function Ji(s){return s==="head"}function Mv(s,r){var c=r,f=0,v=0;do{var b=c.nextSibling;if(s.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(0<f&&8>f){c=f;var k=s.ownerDocument;if(c&1&&tl(k.documentElement),c&2&&tl(k.body),c&4)for(c=k.head,tl(c),k=c.firstChild;k;){var P=k.nextSibling,V=k.nodeName;k[Bi]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&k.rel.toLowerCase()==="stylesheet"||c.removeChild(k),k=P}}if(v===0){s.removeChild(b),cl(r);return}v--}else c==="$"||c==="$?"||c==="$!"?v++:f=c.charCodeAt(0)-48;else f=0;c=b}while(c);cl(r)}function uf(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":uf(c),Qn(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function j2(s,r,c,f){for(;s.nodeType===1;){var v=c;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[Bi])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=Ns(s.nextSibling),s===null)break}return null}function E2(s,r,c){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Ns(s.nextSibling),s===null))return null;return s}function df(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function A2(s,r){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")r();else{var f=function(){r(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function Ns(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var hf=null;function Dv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(r===0)return s;r--}else c==="/$"&&r++}s=s.previousSibling}return null}function Bv(s,r,c){switch(r=Jc(c),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function tl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Qn(s)}var gs=new Map,Lv=new Set;function eu(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var xi=O.d;O.d={f:T2,r:k2,D:O2,C:N2,L:R2,m:M2,X:B2,S:D2,M:L2};function T2(){var s=xi.f(),r=Gc();return s||r}function k2(s){var r=ai(s);r!==null&&r.tag===5&&r.type==="form"?n_(r):xi.r(s)}var Mr=typeof document>"u"?null:document;function Pv(s,r,c){var f=Mr;if(f&&typeof r=="string"&&r){var v=cs(r);v='link[rel="'+s+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),Lv.has(v)||(Lv.add(v),s={rel:s,crossOrigin:c,href:r},f.querySelector(v)===null&&(r=f.createElement("link"),bn(r,"link",s),Wt(r),f.head.appendChild(r)))}}function O2(s){xi.D(s),Pv("dns-prefetch",s,null)}function N2(s,r){xi.C(s,r),Pv("preconnect",s,r)}function R2(s,r,c){xi.L(s,r,c);var f=Mr;if(f&&s&&r){var v='link[rel="preload"][as="'+cs(r)+'"]';r==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+cs(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+cs(c.imageSizes)+'"]')):v+='[href="'+cs(s)+'"]';var b=v;switch(r){case"style":b=Dr(s);break;case"script":b=Br(s)}gs.has(b)||(s=p({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:s,as:r},c),gs.set(b,s),f.querySelector(v)!==null||r==="style"&&f.querySelector(nl(b))||r==="script"&&f.querySelector(sl(b))||(r=f.createElement("link"),bn(r,"link",s),Wt(r),f.head.appendChild(r)))}}function M2(s,r){xi.m(s,r);var c=Mr;if(c&&s){var f=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+cs(f)+'"][href="'+cs(s)+'"]',b=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Br(s)}if(!gs.has(b)&&(s=p({rel:"modulepreload",href:s},r),gs.set(b,s),c.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(sl(b)))return}f=c.createElement("link"),bn(f,"link",s),Wt(f),c.head.appendChild(f)}}}function D2(s,r,c){xi.S(s,r,c);var f=Mr;if(f&&s){var v=ri(f).hoistableStyles,b=Dr(s);r=r||"default";var k=v.get(b);if(!k){var P={loading:0,preload:null};if(k=f.querySelector(nl(b)))P.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":r},c),(c=gs.get(b))&&ff(s,c);var V=k=f.createElement("link");Wt(V),bn(V,"link",s),V._p=new Promise(function(se,le){V.onload=se,V.onerror=le}),V.addEventListener("load",function(){P.loading|=1}),V.addEventListener("error",function(){P.loading|=2}),P.loading|=4,tu(k,r,f)}k={type:"stylesheet",instance:k,count:1,state:P},v.set(b,k)}}}function B2(s,r){xi.X(s,r);var c=Mr;if(c&&s){var f=ri(c).hoistableScripts,v=Br(s),b=f.get(v);b||(b=c.querySelector(sl(v)),b||(s=p({src:s,async:!0},r),(r=gs.get(v))&&mf(s,r),b=c.createElement("script"),Wt(b),bn(b,"link",s),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function L2(s,r){xi.M(s,r);var c=Mr;if(c&&s){var f=ri(c).hoistableScripts,v=Br(s),b=f.get(v);b||(b=c.querySelector(sl(v)),b||(s=p({src:s,async:!0,type:"module"},r),(r=gs.get(v))&&mf(s,r),b=c.createElement("script"),Wt(b),bn(b,"link",s),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function Iv(s,r,c,f){var v=(v=oe.current)?eu(v):null;if(!v)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=Dr(c.href),c=ri(v).hoistableStyles,f=c.get(r),f||(f={type:"style",instance:null,count:0,state:null},c.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=Dr(c.href);var b=ri(v).hoistableStyles,k=b.get(s);if(k||(v=v.ownerDocument||v,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,k),(b=v.querySelector(nl(s)))&&!b._p&&(k.instance=b,k.state.loading=5),gs.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},gs.set(s,c),b||P2(v,s,c,k.state))),r&&f===null)throw Error(i(528,""));return k}if(r&&f!==null)throw Error(i(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Br(c),c=ri(v).hoistableScripts,f=c.get(r),f||(f={type:"script",instance:null,count:0,state:null},c.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Dr(s){return'href="'+cs(s)+'"'}function nl(s){return'link[rel="stylesheet"]['+s+"]"}function Uv(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function P2(s,r,c,f){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=s.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),bn(r,"link",c),Wt(r),s.head.appendChild(r))}function Br(s){return'[src="'+cs(s)+'"]'}function sl(s){return"script[async]"+s}function zv(s,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var f=s.querySelector('style[data-href~="'+cs(c.href)+'"]');if(f)return r.instance=f,Wt(f),f;var v=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),Wt(f),bn(f,"style",v),tu(f,c.precedence,s),r.instance=f;case"stylesheet":v=Dr(c.href);var b=s.querySelector(nl(v));if(b)return r.state.loading|=4,r.instance=b,Wt(b),b;f=Uv(c),(v=gs.get(v))&&ff(f,v),b=(s.ownerDocument||s).createElement("link"),Wt(b);var k=b;return k._p=new Promise(function(P,V){k.onload=P,k.onerror=V}),bn(b,"link",f),r.state.loading|=4,tu(b,c.precedence,s),r.instance=b;case"script":return b=Br(c.src),(v=s.querySelector(sl(b)))?(r.instance=v,Wt(v),v):(f=c,(v=gs.get(b))&&(f=p({},c),mf(f,v)),s=s.ownerDocument||s,v=s.createElement("script"),Wt(v),bn(v,"link",f),s.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,tu(f,c.precedence,s));return r.instance}function tu(s,r,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,b=v,k=0;k<f.length;k++){var P=f[k];if(P.dataset.precedence===r)b=P;else if(b!==v)break}b?b.parentNode.insertBefore(s,b.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(s,r.firstChild))}function ff(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function mf(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var nu=null;function $v(s,r,c){if(nu===null){var f=new Map,v=nu=new Map;v.set(c,f)}else v=nu,f=v.get(c),f||(f=new Map,v.set(c,f));if(f.has(s))return f;for(f.set(s,null),c=c.getElementsByTagName(s),v=0;v<c.length;v++){var b=c[v];if(!(b[Bi]||b[tn]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var k=b.getAttribute(r)||"";k=s+k;var P=f.get(k);P?P.push(b):f.set(k,[b])}}return f}function Hv(s,r,c){s=s.ownerDocument||s,s.head.insertBefore(c,r==="title"?s.querySelector("head > title"):null)}function I2(s,r,c){if(c===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function qv(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var il=null;function U2(){}function z2(s,r,c){if(il===null)throw Error(i(475));var f=il;if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var v=Dr(c.href),b=s.querySelector(nl(v));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(f.count++,f=su.bind(f),s.then(f,f)),r.state.loading|=4,r.instance=b,Wt(b);return}b=s.ownerDocument||s,c=Uv(c),(v=gs.get(v))&&ff(c,v),b=b.createElement("link"),Wt(b);var k=b;k._p=new Promise(function(P,V){k.onload=P,k.onerror=V}),bn(b,"link",c),r.instance=b}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(f.count++,r=su.bind(f),s.addEventListener("load",r),s.addEventListener("error",r))}}function $2(){if(il===null)throw Error(i(475));var s=il;return s.stylesheets&&s.count===0&&pf(s,s.stylesheets),0<s.count?function(r){var c=setTimeout(function(){if(s.stylesheets&&pf(s,s.stylesheets),s.unsuspend){var f=s.unsuspend;s.unsuspend=null,f()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(c)}}:null}function su(){if(this.count--,this.count===0){if(this.stylesheets)pf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var iu=null;function pf(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,iu=new Map,r.forEach(H2,s),iu=null,su.call(s))}function H2(s,r){if(!(r.state.loading&4)){var c=iu.get(s);if(c)var f=c.get(null);else{c=new Map,iu.set(s,c);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var k=v[b];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(c.set(k.dataset.precedence,k),f=k)}f&&c.set(null,f)}v=r.instance,k=v.getAttribute("data-precedence"),b=c.get(k)||f,b===f&&c.set(null,v),c.set(k,v),this.count++,f=su.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),b?b.parentNode.insertBefore(v,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),r.state.loading|=4}}var al={$$typeof:T,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function q2(s,r,c,f,v,b,k,P){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=va(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=va(0),this.hiddenUpdates=va(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function Fv(s,r,c,f,v,b,k,P,V,se,le,ue){return s=new q2(s,r,c,k,P,V,se,ue),r=1,b===!0&&(r|=24),b=es(3,null,null,r),s.current=b,b.stateNode=s,r=Xd(),r.refCount++,s.pooledCache=r,r.refCount++,b.memoizedState={element:f,isDehydrated:c,cache:r},Jd(b),s}function Gv(s){return s?(s=hr,s):hr}function Vv(s,r,c,f,v,b){v=Gv(v),f.context===null?f.context=v:f.pendingContext=v,f=zi(r),f.payload={element:c},b=b===void 0?null:b,b!==null&&(f.callback=b),c=$i(s,f,r),c!==null&&(as(c,s,r),Bo(c,s,r))}function Yv(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<r?c:r}}function gf(s,r){Yv(s,r),(s=s.alternate)&&Yv(s,r)}function Wv(s){if(s.tag===13){var r=dr(s,67108864);r!==null&&as(r,s,67108864),gf(s,67108864)}}var au=!0;function F2(s,r,c,f){var v=E.T;E.T=null;var b=O.p;try{O.p=2,_f(s,r,c,f)}finally{O.p=b,E.T=v}}function G2(s,r,c,f){var v=E.T;E.T=null;var b=O.p;try{O.p=8,_f(s,r,c,f)}finally{O.p=b,E.T=v}}function _f(s,r,c,f){if(au){var v=vf(f);if(v===null)sf(s,r,f,ru,c),Kv(s,f);else if(Y2(v,s,r,c,f))f.stopPropagation();else if(Kv(s,f),r&4&&-1<V2.indexOf(s)){for(;v!==null;){var b=ai(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var k=Rt(b.pendingLanes);if(k!==0){var P=b;for(P.pendingLanes|=2,P.entangledLanes|=2;k;){var V=1<<31-wt(k);P.entanglements[1]|=V,k&=~V}Ws(b),(Je&6)===0&&(qc=Oe()+500,Zo(0))}}break;case 13:P=dr(b,2),P!==null&&as(P,b,2),Gc(),gf(b,2)}if(b=vf(f),b===null&&sf(s,r,f,ru,c),b===v)break;v=b}v!==null&&f.stopPropagation()}else sf(s,r,f,null,c)}}function vf(s){return s=wd(s),yf(s)}var ru=null;function yf(s){if(ru=null,s=ii(s),s!==null){var r=o(s);if(r===null)s=null;else{var c=r.tag;if(c===13){if(s=l(r),s!==null)return s;s=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return ru=s,null}function Xv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ve()){case vt:return 2;case Lt:return 8;case st:case gn:return 32;case lt:return 268435456;default:return 32}default:return 32}}var bf=!1,ea=null,ta=null,na=null,rl=new Map,ol=new Map,sa=[],V2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kv(s,r){switch(s){case"focusin":case"focusout":ea=null;break;case"dragenter":case"dragleave":ta=null;break;case"mouseover":case"mouseout":na=null;break;case"pointerover":case"pointerout":rl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(r.pointerId)}}function ll(s,r,c,f,v,b){return s===null||s.nativeEvent!==b?(s={blockedOn:r,domEventName:c,eventSystemFlags:f,nativeEvent:b,targetContainers:[v]},r!==null&&(r=ai(r),r!==null&&Wv(r)),s):(s.eventSystemFlags|=f,r=s.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),s)}function Y2(s,r,c,f,v){switch(r){case"focusin":return ea=ll(ea,s,r,c,f,v),!0;case"dragenter":return ta=ll(ta,s,r,c,f,v),!0;case"mouseover":return na=ll(na,s,r,c,f,v),!0;case"pointerover":var b=v.pointerId;return rl.set(b,ll(rl.get(b)||null,s,r,c,f,v)),!0;case"gotpointercapture":return b=v.pointerId,ol.set(b,ll(ol.get(b)||null,s,r,c,f,v)),!0}return!1}function Qv(s){var r=ii(s.target);if(r!==null){var c=o(r);if(c!==null){if(r=c.tag,r===13){if(r=l(c),r!==null){s.blockedOn=r,go(s.priority,function(){if(c.tag===13){var f=is();f=Wn(f);var v=dr(c,f);v!==null&&as(v,c,f),gf(c,f)}});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ou(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var c=vf(s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);xd=f,c.target.dispatchEvent(f),xd=null}else return r=ai(c),r!==null&&Wv(r),s.blockedOn=c,!1;r.shift()}return!0}function Zv(s,r,c){ou(s)&&c.delete(r)}function W2(){bf=!1,ea!==null&&ou(ea)&&(ea=null),ta!==null&&ou(ta)&&(ta=null),na!==null&&ou(na)&&(na=null),rl.forEach(Zv),ol.forEach(Zv)}function lu(s,r){s.blockedOn===r&&(s.blockedOn=null,bf||(bf=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,W2)))}var cu=null;function Jv(s){cu!==s&&(cu=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){cu===s&&(cu=null);for(var r=0;r<s.length;r+=3){var c=s[r],f=s[r+1],v=s[r+2];if(typeof f!="function"){if(yf(f||c)===null)continue;break}var b=ai(c);b!==null&&(s.splice(r,3),r-=3,vh(b,{pending:!0,data:v,method:c.method,action:f},f,v))}}))}function cl(s){function r(V){return lu(V,s)}ea!==null&&lu(ea,s),ta!==null&&lu(ta,s),na!==null&&lu(na,s),rl.forEach(r),ol.forEach(r);for(var c=0;c<sa.length;c++){var f=sa[c];f.blockedOn===s&&(f.blockedOn=null)}for(;0<sa.length&&(c=sa[0],c.blockedOn===null);)Qv(c),c.blockedOn===null&&sa.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var v=c[f],b=c[f+1],k=v[Cn]||null;if(typeof b=="function")k||Jv(c);else if(k){var P=null;if(b&&b.hasAttribute("formAction")){if(v=b,k=b[Cn]||null)P=k.formAction;else if(yf(v)!==null)continue}else P=k.action;typeof P=="function"?c[f+1]=P:(c.splice(f,3),f-=3),Jv(c)}}}function xf(s){this._internalRoot=s}uu.prototype.render=xf.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var c=r.current,f=is();Vv(c,f,s,r,null,null)},uu.prototype.unmount=xf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;Vv(s.current,2,null,s,null,null),Gc(),r[_n]=null}};function uu(s){this._internalRoot=s}uu.prototype.unstable_scheduleHydration=function(s){if(s){var r=Kn();s={blockedOn:null,target:s,priority:r};for(var c=0;c<sa.length&&r!==0&&r<sa[c].priority;c++);sa.splice(c,0,s),c===0&&Qv(s)}};var e0=e.version;if(e0!=="19.1.1")throw Error(i(527,e0,"19.1.1"));O.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var X2={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!du.isDisabled&&du.supportsFiber)try{Pt=du.inject(X2),It=du}catch{}}return dl.createRoot=function(s,r){if(!a(s))throw Error(i(299));var c=!1,f="",v=g_,b=__,k=v_,P=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(k=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(P=r.unstable_transitionCallbacks)),r=Fv(s,1,!1,null,null,c,f,v,b,k,P,null),s[_n]=r.current,nf(s),new xf(r)},dl.hydrateRoot=function(s,r,c){if(!a(s))throw Error(i(299));var f=!1,v="",b=g_,k=__,P=v_,V=null,se=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(k=c.onCaughtError),c.onRecoverableError!==void 0&&(P=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(V=c.unstable_transitionCallbacks),c.formState!==void 0&&(se=c.formState)),r=Fv(s,1,!0,r,c??null,f,v,b,k,P,V,se),r.context=Gv(null),c=r.current,f=is(),f=Wn(f),v=zi(f),v.callback=null,$i(c,v,f),c=f,r.current.lanes=c,Yt(r,c),Ws(r),s[_n]=r.current,nf(s),new uu(r)},dl.version="19.1.1",dl}var u0;function rS(){if(u0)return Cf.exports;u0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cf.exports=aS(),Cf.exports}var oS=rS();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var d0="popstate";function lS(n={}){function e(i,a){let{pathname:o,search:l,hash:u}=i.location;return fm("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:Ul(a)}return uS(e,t,null,n)}function jt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Us(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cS(){return Math.random().toString(36).substring(2,10)}function h0(n,e){return{usr:n.state,key:n.key,idx:e}}function fm(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?co(e):e,state:t,key:e&&e.key||i||cS()}}function Ul({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function co(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function uS(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,l=a.history,u="POP",h=null,m=p();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function p(){return(l.state||{idx:null}).idx}function g(){u="POP";let w=p(),S=w==null?null:w-m;m=w,h&&h({action:u,location:j.location,delta:S})}function _(w,S){u="PUSH";let C=fm(j.location,w,S);m=p()+1;let T=h0(C,m),B=j.createHref(C);try{l.pushState(T,"",B)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(B)}o&&h&&h({action:u,location:j.location,delta:1})}function y(w,S){u="REPLACE";let C=fm(j.location,w,S);m=p();let T=h0(C,m),B=j.createHref(C);l.replaceState(T,"",B),o&&h&&h({action:u,location:j.location,delta:0})}function x(w){return dS(w)}let j={get action(){return u},get location(){return n(a,l)},listen(w){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(d0,g),h=w,()=>{a.removeEventListener(d0,g),h=null}},createHref(w){return e(a,w)},createURL:x,encodeLocation(w){let S=x(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:_,replace:y,go(w){return l.go(w)}};return j}function dS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),jt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Ul(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function Eb(n,e,t="/"){return hS(n,e,t,!1)}function hS(n,e,t,i){let a=typeof e=="string"?co(e):e,o=Mi(a.pathname||"/",t);if(o==null)return null;let l=Ab(n);fS(l);let u=null;for(let h=0;u==null&&h<l.length;++h){let m=CS(o);u=wS(l[h],m,i)}return u}function Ab(n,e=[],t=[],i="",a=!1){let o=(l,u,h=a,m)=>{let p={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&h)return;jt(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let g=Ri([i,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(jt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Ab(l.children,e,_,g,h)),!(l.path==null&&!l.index)&&e.push({path:g,score:bS(g,l.index),routesMeta:_})};return n.forEach((l,u)=>{if(l.path===""||!l.path?.includes("?"))o(l,u);else for(let h of Tb(l.path))o(l,u,!0,h)}),e}function Tb(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let l=Tb(i.join("/")),u=[];return u.push(...l.map(h=>h===""?o:[o,h].join("/"))),a&&u.push(...l),u.map(h=>n.startsWith("/")&&h===""?"/":h)}function fS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:xS(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var mS=/^:[\w-]+$/,pS=3,gS=2,_S=1,vS=10,yS=-2,f0=n=>n==="*";function bS(n,e){let t=n.split("/"),i=t.length;return t.some(f0)&&(i+=yS),e&&(i+=gS),t.filter(a=>!f0(a)).reduce((a,o)=>a+(mS.test(o)?pS:o===""?_S:vS),i)}function xS(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function wS(n,e,t=!1){let{routesMeta:i}=n,a={},o="/",l=[];for(let u=0;u<i.length;++u){let h=i[u],m=u===i.length-1,p=o==="/"?e:e.slice(o.length)||"/",g=Fu({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},p),_=h.route;if(!g&&m&&t&&!i[i.length-1].route.index&&(g=Fu({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!g)return null;Object.assign(a,g.params),l.push({params:a,pathname:Ri([o,g.pathname]),pathnameBase:TS(Ri([o,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(o=Ri([o,g.pathnameBase]))}return l}function Fu(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=SS(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:i.reduce((m,{paramName:p,isOptional:g},_)=>{if(p==="*"){let x=u[_]||"";l=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const y=u[_];return g&&!y?m[p]=void 0:m[p]=(y||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:l,pattern:n}}function SS(n,e=!1,t=!0){Us(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function CS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Us(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Mi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function jS(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?co(n):n;return{pathname:t?t.startsWith("/")?t:ES(t,e):e,search:kS(i),hash:OS(a)}}function ES(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Tf(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function AS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $m(n){let e=AS(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Hm(n,e,t,i=!1){let a;typeof n=="string"?a=co(n):(a={...n},jt(!a.pathname||!a.pathname.includes("?"),Tf("?","pathname","search",a)),jt(!a.pathname||!a.pathname.includes("#"),Tf("#","pathname","hash",a)),jt(!a.search||!a.search.includes("#"),Tf("#","search","hash",a)));let o=n===""||a.pathname==="",l=o?"/":a.pathname,u;if(l==null)u=t;else{let g=e.length-1;if(!i&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),g-=1;a.pathname=_.join("/")}u=g>=0?e[g]:"/"}let h=jS(a,u),m=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(m||p)&&(h.pathname+="/"),h}var Ri=n=>n.join("/").replace(/\/\/+/g,"/"),TS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),kS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,OS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function NS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var kb=["POST","PUT","PATCH","DELETE"];new Set(kb);var RS=["GET",...kb];new Set(RS);var uo=A.createContext(null);uo.displayName="DataRouter";var ld=A.createContext(null);ld.displayName="DataRouterState";A.createContext(!1);var Ob=A.createContext({isTransitioning:!1});Ob.displayName="ViewTransition";var MS=A.createContext(new Map);MS.displayName="Fetchers";var DS=A.createContext(null);DS.displayName="Await";var zs=A.createContext(null);zs.displayName="Navigation";var Xl=A.createContext(null);Xl.displayName="Location";var $s=A.createContext({outlet:null,matches:[],isDataRoute:!1});$s.displayName="Route";var qm=A.createContext(null);qm.displayName="RouteError";function BS(n,{relative:e}={}){jt(ho(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=A.useContext(zs),{hash:a,pathname:o,search:l}=Ql(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:Ri([t,o])),i.createHref({pathname:u,search:l,hash:a})}function ho(){return A.useContext(Xl)!=null}function ni(){return jt(ho(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Xl).location}var Nb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rb(n){A.useContext(zs).static||A.useLayoutEffect(n)}function Kl(){let{isDataRoute:n}=A.useContext($s);return n?KS():LS()}function LS(){jt(ho(),"useNavigate() may be used only in the context of a <Router> component.");let n=A.useContext(uo),{basename:e,navigator:t}=A.useContext(zs),{matches:i}=A.useContext($s),{pathname:a}=ni(),o=JSON.stringify($m(i)),l=A.useRef(!1);return Rb(()=>{l.current=!0}),A.useCallback((h,m={})=>{if(Us(l.current,Nb),!l.current)return;if(typeof h=="number"){t.go(h);return}let p=Hm(h,JSON.parse(o),a,m.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ri([e,p.pathname])),(m.replace?t.replace:t.push)(p,m.state,m)},[e,t,o,a,n])}var PS=A.createContext(null);function IS(n){let e=A.useContext($s).outlet;return e&&A.createElement(PS.Provider,{value:n},e)}function Ql(n,{relative:e}={}){let{matches:t}=A.useContext($s),{pathname:i}=ni(),a=JSON.stringify($m(t));return A.useMemo(()=>Hm(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function US(n,e){return Mb(n,e)}function Mb(n,e,t,i,a){jt(ho(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=A.useContext(zs),{matches:l}=A.useContext($s),u=l[l.length-1],h=u?u.params:{},m=u?u.pathname:"/",p=u?u.pathnameBase:"/",g=u&&u.route;{let C=g&&g.path||"";Db(m,!g||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let _=ni(),y;if(e){let C=typeof e=="string"?co(e):e;jt(p==="/"||C.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${C.pathname}" was given in the \`location\` prop.`),y=C}else y=_;let x=y.pathname||"/",j=x;if(p!=="/"){let C=p.replace(/^\//,"").split("/");j="/"+x.replace(/^\//,"").split("/").slice(C.length).join("/")}let w=Eb(n,{pathname:j});Us(g||w!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Us(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=FS(w&&w.map(C=>Object.assign({},C,{params:Object.assign({},h,C.params),pathname:Ri([p,o.encodeLocation?o.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?p:Ri([p,o.encodeLocation?o.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),l,t,i,a);return e&&S?A.createElement(Xl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},S):S}function zS(){let n=XS(),e=NS(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:o},"ErrorBoundary")," or"," ",A.createElement("code",{style:o},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:a},t):null,l)}var $S=A.createElement(zS,null),HS=class extends A.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?A.createElement($s.Provider,{value:this.props.routeContext},A.createElement(qm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qS({routeContext:n,match:e,children:t}){let i=A.useContext(uo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement($s.Provider,{value:n},t)}function FS(n,e=[],t=null,i=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t?.errors;if(l!=null){let m=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);jt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let u=!1,h=-1;if(t)for(let m=0;m<o.length;m++){let p=o[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=m),p.route.id){let{loaderData:g,errors:_}=t,y=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!_||_[p.route.id]===void 0);if(p.route.lazy||y){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((m,p,g)=>{let _,y=!1,x=null,j=null;t&&(_=l&&p.route.id?l[p.route.id]:void 0,x=p.route.errorElement||$S,u&&(h<0&&g===0?(Db("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,j=null):h===g&&(y=!0,j=p.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,g+1)),S=()=>{let C;return _?C=x:y?C=j:p.route.Component?C=A.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=m,A.createElement(qS,{match:p,routeContext:{outlet:m,matches:w,isDataRoute:t!=null},children:C})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?A.createElement(HS,{location:t.location,revalidation:t.revalidation,component:x,error:_,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:i}):S()},null)}function Fm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GS(n){let e=A.useContext(uo);return jt(e,Fm(n)),e}function VS(n){let e=A.useContext(ld);return jt(e,Fm(n)),e}function YS(n){let e=A.useContext($s);return jt(e,Fm(n)),e}function Gm(n){let e=YS(n),t=e.matches[e.matches.length-1];return jt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function WS(){return Gm("useRouteId")}function XS(){let n=A.useContext(qm),e=VS("useRouteError"),t=Gm("useRouteError");return n!==void 0?n:e.errors?.[t]}function KS(){let{router:n}=GS("useNavigate"),e=Gm("useNavigate"),t=A.useRef(!1);return Rb(()=>{t.current=!0}),A.useCallback(async(a,o={})=>{Us(t.current,Nb),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...o}))},[n,e])}var m0={};function Db(n,e,t){!e&&!m0[n]&&(m0[n]=!0,Us(!1,t))}A.memo(QS);function QS({routes:n,future:e,state:t,unstable_onError:i}){return Mb(n,void 0,t,i,e)}function mm({to:n,replace:e,state:t,relative:i}){jt(ho(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=A.useContext(zs);Us(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=A.useContext($s),{pathname:l}=ni(),u=Kl(),h=Hm(n,$m(o),l,i==="path"),m=JSON.stringify(h);return A.useEffect(()=>{u(JSON.parse(m),{replace:e,state:t,relative:i})},[u,m,i,e,t]),null}function Vm(n){return IS(n.context)}function qt(n){jt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZS({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:o=!1}){jt(!ho(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);typeof t=="string"&&(t=co(t));let{pathname:h="/",search:m="",hash:p="",state:g=null,key:_="default"}=t,y=A.useMemo(()=>{let x=Mi(h,l);return x==null?null:{location:{pathname:x,search:m,hash:p,state:g,key:_},navigationType:i}},[l,h,m,p,g,_,i]);return Us(y!=null,`<Router basename="${l}"> is not able to match the URL "${h}${m}${p}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:A.createElement(zs.Provider,{value:u},A.createElement(Xl.Provider,{children:e,value:y}))}function JS({children:n,location:e}){return US(pm(n),e)}function pm(n,e=[]){let t=[];return A.Children.forEach(n,(i,a)=>{if(!A.isValidElement(i))return;let o=[...e,a];if(i.type===A.Fragment){t.push.apply(t,pm(i.props.children,o));return}jt(i.type===qt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),jt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=pm(i.props.children,o)),t.push(l)}),t}var Lu="get",Pu="application/x-www-form-urlencoded";function cd(n){return n!=null&&typeof n.tagName=="string"}function eC(n){return cd(n)&&n.tagName.toLowerCase()==="button"}function tC(n){return cd(n)&&n.tagName.toLowerCase()==="form"}function nC(n){return cd(n)&&n.tagName.toLowerCase()==="input"}function sC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function iC(n,e){return n.button===0&&(!e||e==="_self")&&!sC(n)}var hu=null;function aC(){if(hu===null)try{new FormData(document.createElement("form"),0),hu=!1}catch{hu=!0}return hu}var rC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kf(n){return n!=null&&!rC.has(n)?(Us(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pu}"`),null):n}function oC(n,e){let t,i,a,o,l;if(tC(n)){let u=n.getAttribute("action");i=u?Mi(u,e):null,t=n.getAttribute("method")||Lu,a=kf(n.getAttribute("enctype"))||Pu,o=new FormData(n)}else if(eC(n)||nC(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||u.getAttribute("action");if(i=h?Mi(h,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Lu,a=kf(n.getAttribute("formenctype"))||kf(u.getAttribute("enctype"))||Pu,o=new FormData(u,n),!aC()){let{name:m,type:p,value:g}=n;if(p==="image"){let _=m?`${m}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else m&&o.append(m,g)}}else{if(cd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Lu,i=null,a=Pu,l=n}return o&&a==="text/plain"&&(l=o,o=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ym(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function lC(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Mi(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function cC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function dC(n,e,t){let i=await Promise.all(n.map(async a=>{let o=e.routes[a.route.id];if(o){let l=await cC(o,t);return l.links?l.links():[]}return[]}));return pC(i.flat(1).filter(uC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function p0(n,e,t,i,a,o){let l=(h,m)=>t[m]?h.route.id!==t[m].route.id:!0,u=(h,m)=>t[m].pathname!==h.pathname||t[m].route.path?.endsWith("*")&&t[m].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,m)=>l(h,m)||u(h,m)):o==="data"?e.filter((h,m)=>{let p=i.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(l(h,m)||u(h,m))return!0;if(h.route.shouldRevalidate){let g=h.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function hC(n,e,{includeHydrateFallback:t}={}){return fC(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function fC(n){return[...new Set(n)]}function mC(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function pC(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let o=JSON.stringify(mC(a));return t.has(o)||(t.add(o),i.push({key:o,link:a})),i},[])}function Bb(){let n=A.useContext(uo);return Ym(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function gC(){let n=A.useContext(ld);return Ym(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Wm=A.createContext(void 0);Wm.displayName="FrameworkContext";function Lb(){let n=A.useContext(Wm);return Ym(n,"You must render this element inside a <HydratedRouter> element"),n}function _C(n,e){let t=A.useContext(Wm),[i,a]=A.useState(!1),[o,l]=A.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:m,onMouseLeave:p,onTouchStart:g}=e,_=A.useRef(null);A.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let j=S=>{S.forEach(C=>{l(C.isIntersecting)})},w=new IntersectionObserver(j,{threshold:.5});return _.current&&w.observe(_.current),()=>{w.disconnect()}}},[n]),A.useEffect(()=>{if(i){let j=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(j)}}},[i]);let y=()=>{a(!0)},x=()=>{a(!1),l(!1)};return t?n!=="intent"?[o,_,{}]:[o,_,{onFocus:hl(u,y),onBlur:hl(h,x),onMouseEnter:hl(m,y),onMouseLeave:hl(p,x),onTouchStart:hl(g,y)}]:[!1,_,{}]}function hl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function vC({page:n,...e}){let{router:t}=Bb(),i=A.useMemo(()=>Eb(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?A.createElement(bC,{page:n,matches:i,...e}):null}function yC(n){let{manifest:e,routeModules:t}=Lb(),[i,a]=A.useState([]);return A.useEffect(()=>{let o=!1;return dC(n,e,t).then(l=>{o||a(l)}),()=>{o=!0}},[n,e,t]),i}function bC({page:n,matches:e,...t}){let i=ni(),{manifest:a,routeModules:o}=Lb(),{basename:l}=Bb(),{loaderData:u,matches:h}=gC(),m=A.useMemo(()=>p0(n,e,h,a,i,"data"),[n,e,h,a,i]),p=A.useMemo(()=>p0(n,e,h,a,i,"assets"),[n,e,h,a,i]),g=A.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let x=new Set,j=!1;if(e.forEach(S=>{let C=a.routes[S.route.id];!C||!C.hasLoader||(!m.some(T=>T.route.id===S.route.id)&&S.route.id in u&&o[S.route.id]?.shouldRevalidate||C.hasClientLoader?j=!0:x.add(S.route.id))}),x.size===0)return[];let w=lC(n,l,"data");return j&&x.size>0&&w.searchParams.set("_routes",e.filter(S=>x.has(S.route.id)).map(S=>S.route.id).join(",")),[w.pathname+w.search]},[l,u,i,a,m,e,n,o]),_=A.useMemo(()=>hC(p,a),[p,a]),y=yC(p);return A.createElement(A.Fragment,null,g.map(x=>A.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),_.map(x=>A.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),y.map(({key:x,link:j})=>A.createElement("link",{key:x,nonce:t.nonce,...j})))}function xC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Pb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Pb&&(window.__reactRouterVersion="7.9.1")}catch{}function wC({basename:n,children:e,window:t}){let i=A.useRef();i.current==null&&(i.current=lS({window:t,v5Compat:!0}));let a=i.current,[o,l]=A.useState({action:a.action,location:a.location}),u=A.useCallback(h=>{A.startTransition(()=>l(h))},[l]);return A.useLayoutEffect(()=>a.listen(u),[a,u]),A.createElement(ZS,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:a})}var Ib=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qn=A.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:o,replace:l,state:u,target:h,to:m,preventScrollReset:p,viewTransition:g,..._},y){let{basename:x}=A.useContext(zs),j=typeof m=="string"&&Ib.test(m),w,S=!1;if(typeof m=="string"&&j&&(w=m,Pb))try{let N=new URL(window.location.href),z=m.startsWith("//")?new URL(N.protocol+m):new URL(m),I=Mi(z.pathname,x);z.origin===N.origin&&I!=null?m=I+z.search+z.hash:S=!0}catch{Us(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=BS(m,{relative:a}),[T,B,D]=_C(i,_),M=jC(m,{replace:l,state:u,target:h,preventScrollReset:p,relative:a,viewTransition:g});function $(N){e&&e(N),N.defaultPrevented||M(N)}let R=A.createElement("a",{..._,...D,href:w||C,onClick:S||o?e:$,ref:xC(y,B),target:h,"data-discover":!j&&t==="render"?"true":void 0});return T&&!j?A.createElement(A.Fragment,null,R,A.createElement(vC,{page:C})):R});qn.displayName="Link";var eo=A.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:o,to:l,viewTransition:u,children:h,...m},p){let g=Ql(l,{relative:m.relative}),_=ni(),y=A.useContext(ld),{navigator:x,basename:j}=A.useContext(zs),w=y!=null&&OC(g)&&u===!0,S=x.encodeLocation?x.encodeLocation(g).pathname:g.pathname,C=_.pathname,T=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(C=C.toLowerCase(),T=T?T.toLowerCase():null,S=S.toLowerCase()),T&&j&&(T=Mi(T,j)||T);const B=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let D=C===S||!a&&C.startsWith(S)&&C.charAt(B)==="/",M=T!=null&&(T===S||!a&&T.startsWith(S)&&T.charAt(S.length)==="/"),$={isActive:D,isPending:M,isTransitioning:w},R=D?e:void 0,N;typeof i=="function"?N=i($):N=[i,D?"active":null,M?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let z=typeof o=="function"?o($):o;return A.createElement(qn,{...m,"aria-current":R,className:N,ref:p,style:z,to:l,viewTransition:u},typeof h=="function"?h($):h)});eo.displayName="NavLink";var SC=A.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:o,method:l=Lu,action:u,onSubmit:h,relative:m,preventScrollReset:p,viewTransition:g,..._},y)=>{let x=TC(),j=kC(u,{relative:m}),w=l.toLowerCase()==="get"?"get":"post",S=typeof u=="string"&&Ib.test(u),C=T=>{if(h&&h(T),T.defaultPrevented)return;T.preventDefault();let B=T.nativeEvent.submitter,D=B?.getAttribute("formmethod")||l;x(B||T.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:a,state:o,relative:m,preventScrollReset:p,viewTransition:g})};return A.createElement("form",{ref:y,method:w,action:j,onSubmit:i?h:C,..._,"data-discover":!S&&n==="render"?"true":void 0})});SC.displayName="Form";function CC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ub(n){let e=A.useContext(uo);return jt(e,CC(n)),e}function jC(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:o,viewTransition:l}={}){let u=Kl(),h=ni(),m=Ql(n,{relative:o});return A.useCallback(p=>{if(iC(p,e)){p.preventDefault();let g=t!==void 0?t:Ul(h)===Ul(m);u(n,{replace:g,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[h,u,m,t,i,e,n,a,o,l])}var EC=0,AC=()=>`__${String(++EC)}__`;function TC(){let{router:n}=Ub("useSubmit"),{basename:e}=A.useContext(zs),t=WS();return A.useCallback(async(i,a={})=>{let{action:o,method:l,encType:u,formData:h,body:m}=oC(i,e);if(a.navigate===!1){let p=a.fetcherKey||AC();await n.fetch(p,t,a.action||o,{preventScrollReset:a.preventScrollReset,formData:h,body:m,formMethod:a.method||l,formEncType:a.encType||u,flushSync:a.flushSync})}else await n.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:h,body:m,formMethod:a.method||l,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function kC(n,{relative:e}={}){let{basename:t}=A.useContext(zs),i=A.useContext($s);jt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...Ql(n||".",{relative:e})},l=ni();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(p=>p==="")){u.delete("index"),h.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();o.search=p?`?${p}`:""}}return(!n||n===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Ri([t,o.pathname])),Ul(o)}function OC(n,{relative:e}={}){let t=A.useContext(Ob);jt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Ub("useViewTransitionState"),a=Ql(n,{relative:e});if(!t.isTransitioning)return!1;let o=Mi(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=Mi(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Fu(a.pathname,l)!=null||Fu(a.pathname,o)!=null}const NC="modulepreload",RC=function(n){return"/"+n},g0={},Qa=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let h=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");a=h(t.map(m=>{if(m=RC(m),m in g0)return;g0[m]=!0;const p=m.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${g}`))return;const _=document.createElement("link");if(_.rel=p?"stylesheet":NC,p||(_.as="script"),_.crossOrigin="",_.href=m,u&&_.setAttribute("nonce",u),document.head.appendChild(_),p)return new Promise((y,x)=>{_.addEventListener("load",y),_.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return a.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},MC=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Qa(async()=>{const{default:i}=await Promise.resolve().then(()=>fo);return{default:i}},[]).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)};class Xm extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class DC extends Xm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _0 extends Xm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class v0 extends Xm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gm;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(gm||(gm={}));var BC=function(n,e,t,i){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(p){try{m(i.next(p))}catch(g){l(g)}}function h(p){try{m(i.throw(p))}catch(g){l(g)}}function m(p){p.done?o(p.value):a(p.value).then(u,h)}m((i=i.apply(n,e||[])).next())})};class LC{constructor(e,{headers:t={},customFetch:i,region:a=gm.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=MC(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var i;return BC(this,void 0,void 0,function*(){try{const{headers:a,method:o,body:l}=t;let u={},{region:h}=t;h||(h=this.region);const m=new URL(`${this.url}/${e}`);h&&h!=="any"&&(u["x-region"]=h,m.searchParams.set("forceFunctionRegion",h));let p;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",p=l):typeof l=="string"?(u["Content-Type"]="text/plain",p=l):typeof FormData<"u"&&l instanceof FormData?p=l:(u["Content-Type"]="application/json",p=JSON.stringify(l)));const g=yield this.fetch(m.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),a),body:p}).catch(j=>{throw new DC(j)}),_=g.headers.get("x-relay-error");if(_&&_==="true")throw new _0(g);if(!g.ok)throw new v0(g);let y=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),x;return y==="application/json"?x=yield g.json():y==="application/octet-stream"?x=yield g.blob():y==="text/event-stream"?x=g:y==="multipart/form-data"?x=yield g.formData():x=yield g.text(),{data:x,error:null,response:g}}catch(a){return{data:null,error:a,response:a instanceof v0||a instanceof _0?a.context:void 0}}})}}var mn={},Lr={},Pr={},Ir={},Ur={},zr={},PC=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},oo=PC();const IC=oo.fetch,zb=oo.fetch.bind(oo),$b=oo.Headers,UC=oo.Request,zC=oo.Response,fo=Object.freeze(Object.defineProperty({__proto__:null,Headers:$b,Request:UC,Response:zC,default:zb,fetch:IC},Symbol.toStringTag,{value:"Module"})),$C=Q2(fo);var fu={},y0;function Hb(){if(y0)return fu;y0=1,Object.defineProperty(fu,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return fu.default=n,fu}var b0;function qb(){if(b0)return zr;b0=1;var n=zr&&zr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(zr,"__esModule",{value:!0});const e=n($C),t=n(Hb());class i{constructor(o){var l,u;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(u=o.isMaybeSingle)!==null&&u!==void 0?u:!1,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let h=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var p,g,_,y;let x=null,j=null,w=null,S=m.status,C=m.statusText;if(m.ok){if(this.method!=="HEAD"){const M=await m.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?j=M:j=JSON.parse(M))}const B=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),D=(_=m.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");B&&D&&D.length>1&&(w=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(x={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,w=null,S=406,C="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const B=await m.text();try{x=JSON.parse(B),Array.isArray(x)&&m.status===404&&(j=[],x=null,S=200,C="OK")}catch{m.status===404&&B===""?(S=204,C="No Content"):x={message:B}}if(x&&this.isMaybeSingle&&(!((y=x?.details)===null||y===void 0)&&y.includes("0 rows"))&&(x=null,S=200,C="OK"),x&&this.shouldThrowOnError)throw new t.default(x)}return{error:x,data:j,count:w,status:S,statusText:C}});return this.shouldThrowOnError||(h=h.catch(m=>{var p,g,_;return{error:{message:`${(p=m?.name)!==null&&p!==void 0?p:"FetchError"}: ${m?.message}`,details:`${(g=m?.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(_=m?.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),h.then(o,l)}returns(){return this}overrideTypes(){return this}}return zr.default=i,zr}var x0;function Fb(){if(x0)return Ur;x0=1;var n=Ur&&Ur.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ur,"__esModule",{value:!0});const e=n(qb());class t extends e.default{select(a){let o=!1;const l=(a??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:h=u}={}){const m=h?`${h}.order`:"order",p=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${p?`${p},`:""}${a}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${a}`),this}range(a,o,{foreignTable:l,referencedTable:u=l}={}){const h=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${a}`),this.url.searchParams.set(m,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:h=!1,format:m="text"}={}){var p;const g=[a?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,h?"wal":null].filter(Boolean).join("|"),_=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${_}"; options=${g};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Ur.default=t,Ur}var w0;function Km(){if(w0)return Ir;w0=1;var n=Ir&&Ir.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ir,"__esModule",{value:!0});const e=n(Fb());class t extends e.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:l,type:u}={}){let h="";u==="plain"?h="pl":u==="phrase"?h="ph":u==="websearch"&&(h="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${h}fts${m}.${o}`),this}match(a){return Object.entries(a).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(a,o,l){return this.url.searchParams.append(a,`not.${o}.${l}`),this}or(a,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${a})`),this}filter(a,o,l){return this.url.searchParams.append(a,`${o}.${l}`),this}}return Ir.default=t,Ir}var S0;function Gb(){if(S0)return Pr;S0=1;var n=Pr&&Pr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Pr,"__esModule",{value:!0});const e=n(Km());class t{constructor(a,{headers:o={},schema:l,fetch:u}){this.url=a,this.headers=new Headers(o),this.schema=l,this.fetch=u}select(a,{head:o=!1,count:l}={}){const u=o?"HEAD":"GET";let h=!1;const m=(a??"*").split("").map(p=>/\s/.test(p)&&!h?"":(p==='"'&&(h=!h),p)).join("");return this.url.searchParams.set("select",m),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:o,defaultToNull:l=!0}={}){var u;const h="POST";if(o&&this.headers.append("Prefer",`count=${o}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const m=a.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(m.length>0){const p=[...new Set(m)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(a,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:h=!0}={}){var m;const p="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((_,y)=>_.concat(Object.keys(y)),[]);if(g.length>0){const _=[...new Set(g)].map(y=>`"${y}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(a,{count:o}={}){var l;const u="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:a}={}){var o;const l="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Pr.default=t,Pr}var C0;function HC(){if(C0)return Lr;C0=1;var n=Lr&&Lr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Lr,"__esModule",{value:!0});const e=n(Gb()),t=n(Km());class i{constructor(o,{headers:l={},schema:u,fetch:h}={}){this.url=o,this.headers=new Headers(l),this.schemaName=u,this.fetch=h}from(o){const l=new URL(`${this.url}/${o}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,l={},{head:u=!1,get:h=!1,count:m}={}){var p;let g;const _=new URL(`${this.url}/rpc/${o}`);let y;u||h?(g=u?"HEAD":"GET",Object.entries(l).filter(([j,w])=>w!==void 0).map(([j,w])=>[j,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([j,w])=>{_.searchParams.append(j,w)})):(g="POST",y=l);const x=new Headers(this.headers);return m&&x.set("Prefer",`count=${m}`),new t.default({method:g,url:_,headers:x,schema:this.schemaName,body:y,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return Lr.default=i,Lr}var j0;function qC(){if(j0)return mn;j0=1;var n=mn&&mn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(mn,"__esModule",{value:!0}),mn.PostgrestError=mn.PostgrestBuilder=mn.PostgrestTransformBuilder=mn.PostgrestFilterBuilder=mn.PostgrestQueryBuilder=mn.PostgrestClient=void 0;const e=n(HC());mn.PostgrestClient=e.default;const t=n(Gb());mn.PostgrestQueryBuilder=t.default;const i=n(Km());mn.PostgrestFilterBuilder=i.default;const a=n(Fb());mn.PostgrestTransformBuilder=a.default;const o=n(qb());mn.PostgrestBuilder=o.default;const l=n(Hb());return mn.PostgrestError=l.default,mn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:l.default},mn}var FC=qC();const GC=Wl(FC),{PostgrestClient:VC,PostgrestQueryBuilder:yI,PostgrestFilterBuilder:bI,PostgrestTransformBuilder:xI,PostgrestBuilder:wI,PostgrestError:SI}=GC;class YC{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const i=t.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const i=this.getWebSocketConstructor();return new i(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const WC="2.15.5",XC=`realtime-js/${WC}`,KC="1.0.0",_m=1e4,QC=1e3,ZC=100;var Ml;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ml||(Ml={}));var on;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(on||(on={}));var Ps;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ps||(Ps={}));var vm;(function(n){n.websocket="websocket"})(vm||(vm={}));var Fa;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Fa||(Fa={}));class JC{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){const a=t.getUint8(1),o=t.getUint8(2);let l=this.HEADER_LENGTH+2;const u=i.decode(e.slice(l,l+a));l=l+a;const h=i.decode(e.slice(l,l+o));l=l+o;const m=JSON.parse(i.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:h,payload:m}}}class Vb{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(gt||(gt={}));const E0=(n,e,t={})=>{var i;const a=(i=t.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((o,l)=>(o[l]=ej(l,n,e,a),o),{})},ej=(n,e,t,i)=>{const a=e.find(u=>u.name===n),o=a?.type,l=t[n];return o&&!i.includes(o)?Yb(o,l):ym(l)},Yb=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return ij(e,t)}switch(n){case gt.bool:return tj(e);case gt.float4:case gt.float8:case gt.int2:case gt.int4:case gt.int8:case gt.numeric:case gt.oid:return nj(e);case gt.json:case gt.jsonb:return sj(e);case gt.timestamp:return aj(e);case gt.abstime:case gt.date:case gt.daterange:case gt.int4range:case gt.int8range:case gt.money:case gt.reltime:case gt.text:case gt.time:case gt.timestamptz:case gt.timetz:case gt.tsrange:case gt.tstzrange:return ym(e);default:return ym(e)}},ym=n=>n,tj=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},nj=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},sj=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},ij=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let o;const l=n.slice(1,t);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>Yb(e,u))}return n},aj=n=>typeof n=="string"?n.replace(" ","T"):n,Wb=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Of{constructor(e,t,i={},a=_m){this.channel=e,this.event=t,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var A0;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(A0||(A0={}));class Dl{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Dl.syncState(this.state,a,o,l),this.pendingDiffs.forEach(h=>{this.state=Dl.syncDiff(this.state,h,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(i.diff,{},a=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Dl.syncDiff(this.state,a,o,l),u())}),this.onJoin((a,o,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:l})}),this.onLeave((a,o,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,a){const o=this.cloneDeep(e),l=this.transformState(t),u={},h={};return this.map(o,(m,p)=>{l[m]||(h[m]=p)}),this.map(l,(m,p)=>{const g=o[m];if(g){const _=p.map(w=>w.presence_ref),y=g.map(w=>w.presence_ref),x=p.filter(w=>y.indexOf(w.presence_ref)<0),j=g.filter(w=>_.indexOf(w.presence_ref)<0);x.length>0&&(u[m]=x),j.length>0&&(h[m]=j)}else u[m]=p}),this.syncDiff(o,{joins:u,leaves:h},i,a)}static syncDiff(e,t,i,a){const{joins:o,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(o,(u,h)=>{var m;const p=(m=e[u])!==null&&m!==void 0?m:[];if(e[u]=this.cloneDeep(h),p.length>0){const g=e[u].map(y=>y.presence_ref),_=p.filter(y=>g.indexOf(y.presence_ref)<0);e[u].unshift(..._)}i(u,p,h)}),this.map(l,(u,h)=>{let m=e[u];if(!m)return;const p=h.map(g=>g.presence_ref);m=m.filter(g=>p.indexOf(g.presence_ref)<0),e[u]=m,a(u,m,h),m.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const a=e[i];return"metas"in a?t[i]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[i]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var T0;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(T0||(T0={}));var Bl;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Bl||(Bl={}));var ki;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ki||(ki={}));class Qm{constructor(e,t={config:{}},i){this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=on.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Of(this,Ps.join,this.params,this.timeout),this.rejoinTimer=new Vb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=on.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=on.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=on.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ps.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new Dl(this),this.broadcastEndpointURL=Wb(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var i,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==on.closed){const{config:{broadcast:l,presence:u,private:h}}=this.params,m=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(y=>y.filter))!==null&&a!==void 0?a:[],p=!!this.bindings[Bl.PRESENCE]&&this.bindings[Bl.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,g={},_={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:m,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(y=>e?.(ki.CHANNEL_ERROR,y)),this._onClose(()=>e?.(ki.CLOSED)),this.updateJoinPayload(Object.assign({config:_},g)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var x;if(this.socket.setAuth(),y===void 0){e?.(ki.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,w=(x=j?.length)!==null&&x!==void 0?x:0,S=[];for(let C=0;C<w;C++){const T=j[C],{filter:{event:B,schema:D,table:M,filter:$}}=T,R=y&&y[C];if(R&&R.event===B&&R.schema===D&&R.table===M&&R.filter===$)S.push(Object.assign(Object.assign({},T),{id:R.id}));else{this.unsubscribe(),this.state=on.errored,e?.(ki.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(ki.SUBSCRIBED);return}}).receive("error",y=>{this.state=on.errored,e?.(ki.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e?.(ki.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this.state===on.joined&&e===Bl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,i)}async send(e,t={}){var i,a;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,h;const m=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=on.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ps.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new Of(this,Ps.leave,{},e),i.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=on.closed,this.bindings={}}async _fetchWithTimeout(e,t,i){const a=new AbortController,o=setTimeout(()=>a.abort(),i),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(o),l}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Of(this,e,t,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ZC){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var a,o;const l=e.toLocaleLowerCase(),{close:u,error:h,leave:m,join:p}=Ps;if(i&&[u,h,m,p].indexOf(l)>=0&&i!==this._joinRef())return;let _=this._onMessage(l,t,i);if(t&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var x,j,w;return((x=y.filter)===null||x===void 0?void 0:x.event)==="*"||((w=(j=y.filter)===null||j===void 0?void 0:j.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===l}).map(y=>y.callback(_,i)):(o=this.bindings[l])===null||o===void 0||o.filter(y=>{var x,j,w,S,C,T;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in y){const B=y.id,D=(x=y.filter)===null||x===void 0?void 0:x.event;return B&&((j=t.ids)===null||j===void 0?void 0:j.includes(B))&&(D==="*"||D?.toLocaleLowerCase()===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const B=(C=(S=y?.filter)===null||S===void 0?void 0:S.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return B==="*"||B===((T=t?.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===l}).map(y=>{if(typeof _=="object"&&"ids"in _){const x=_.data,{schema:j,table:w,commit_timestamp:S,type:C,errors:T}=x;_=Object.assign(Object.assign({},{schema:j,table:w,commit_timestamp:S,eventType:C,new:{},old:{},errors:T}),this._getPayloadRecords(x))}y.callback(_,i)})}_isClosed(){return this.state===on.closed}_isJoined(){return this.state===on.joined}_isJoining(){return this.state===on.joining}_isLeaving(){return this.state===on.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const a=e.toLocaleLowerCase(),o={type:a,filter:t,callback:i};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&Qm.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ps.close,{},e)}_onError(e){this._on(Ps.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=on.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=E0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=E0(e.columns,e.old_record)),t}}const Nf=()=>{},mu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},rj=[1e3,2e3,5e3,1e4],oj=1e4,lj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cj{constructor(e,t){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_m,this.transport=null,this.heartbeatIntervalMs=mu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Nf,this.ref=0,this.reconnectTimer=null,this.logger=Nf,this.conn=null,this.sendBuffer=[],this.serializer=new JC,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>Qa(async()=>{const{default:u}=await Promise.resolve().then(()=>fo);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...l)=>o(...l)},!(!((i=t?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${vm.websocket}`,this.httpEndpoint=Wb(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=YC.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:KC}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ml.connecting:return Fa.Connecting;case Ml.open:return Fa.Open;case Ml.closing:return Fa.Closing;default:return Fa.Closed}}isConnected(){return this.connectionState()===Fa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const i=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===i);if(a)return a;{const o=new Qm(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:i,payload:a,ref:o}=e,l=()=>{this.encode(e,u=>{var h;(h=this.conn)===null||h===void 0||h.send(u)})};this.log("push",`${t} ${i} (${o})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(QC,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},mu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:a,payload:o,ref:l}=t,u=l?`(${l})`:"",h=o.status||"";this.log("receive",`${h} ${i} ${a} ${u}`.trim(),o),this.channels.filter(m=>m._isMember(i)).forEach(m=>m._trigger(a,o,l)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ps.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${i}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([lj],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{const a={access_token:t,version:XC};t&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(Ps.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Vb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},mu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,i,a,o,l,u,h,m,p;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:_m,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:mu.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e?.heartbeatCallback)!==null&&u!==void 0?u:Nf,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e?.reconnectAfterMs)!==null&&h!==void 0?h:(g=>rj[g-1]||oj),this.encode=(m=e?.encode)!==null&&m!==void 0?m:((g,_)=>_(JSON.stringify(g))),this.decode=(p=e?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Zm extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ln(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class uj extends Zm{constructor(e,t,i){super(e),this.name="StorageApiError",this.status=t,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bm extends Zm{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var dj=function(n,e,t,i){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(p){try{m(i.next(p))}catch(g){l(g)}}function h(p){try{m(i.throw(p))}catch(g){l(g)}}function m(p){p.done?o(p.value):a(p.value).then(u,h)}m((i=i.apply(n,e||[])).next())})};const Xb=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Qa(async()=>{const{default:i}=await Promise.resolve().then(()=>fo);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},hj=()=>dj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Qa(()=>Promise.resolve().then(()=>fo),void 0)).Response:Response}),xm=n=>{if(Array.isArray(n))return n.map(t=>xm(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,i])=>{const a=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=xm(i)}),e},fj=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Za=function(n,e,t,i){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(p){try{m(i.next(p))}catch(g){l(g)}}function h(p){try{m(i.throw(p))}catch(g){l(g)}}function m(p){p.done?o(p.value):a(p.value).then(u,h)}m((i=i.apply(n,e||[])).next())})};const Rf=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),mj=(n,e,t)=>Za(void 0,void 0,void 0,function*(){const i=yield hj();n instanceof i&&!t?.noResolveJson?n.json().then(a=>{const o=n.status||500,l=a?.statusCode||o+"";e(new uj(Rf(a),o,l))}).catch(a=>{e(new bm(Rf(a),a))}):e(new bm(Rf(n),n))}),pj=(n,e,t,i)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"||!i?a:(fj(i)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(i)):a.body=i,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function Zl(n,e,t,i,a,o){return Za(this,void 0,void 0,function*(){return new Promise((l,u)=>{n(t,pj(e,i,a,o)).then(h=>{if(!h.ok)throw h;return i?.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>mj(h,u,i))})})}function Gu(n,e,t,i){return Za(this,void 0,void 0,function*(){return Zl(n,"GET",e,t,i)})}function Qs(n,e,t,i,a){return Za(this,void 0,void 0,function*(){return Zl(n,"POST",e,i,a,t)})}function wm(n,e,t,i,a){return Za(this,void 0,void 0,function*(){return Zl(n,"PUT",e,i,a,t)})}function gj(n,e,t,i){return Za(this,void 0,void 0,function*(){return Zl(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function Kb(n,e,t,i,a){return Za(this,void 0,void 0,function*(){return Zl(n,"DELETE",e,i,a,t)})}var Rn=function(n,e,t,i){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(p){try{m(i.next(p))}catch(g){l(g)}}function h(p){try{m(i.throw(p))}catch(g){l(g)}}function m(p){p.done?o(p.value):a(p.value).then(u,h)}m((i=i.apply(n,e||[])).next())})};const _j={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},k0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vj{constructor(e,t={},i,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=i,this.fetch=Xb(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,i,a){return Rn(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},k0),a);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),h&&o.append("metadata",this.encodeMetadata(h)),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.append("cacheControl",l.cacheControl),h&&o.append("metadata",this.encodeMetadata(h))):(o=i,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,h&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),a?.headers&&(u=Object.assign(Object.assign({},u),a.headers));const m=this._removeEmptyFolders(t),p=this._getFinalPath(m),g=yield(e=="PUT"?wm:Qs)(this.fetch,`${this.url}/object/${p}`,o,Object.assign({headers:u},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:g.Id,fullPath:g.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ln(o))return{data:null,error:o};throw o}})}upload(e,t,i){return Rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,a){return Rn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",t);try{let h;const m=Object.assign({upsert:k0.upsert},a),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&i instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),h.append("",i)):typeof FormData<"u"&&i instanceof FormData?(h=i,h.append("cacheControl",m.cacheControl)):(h=i,p["cache-control"]=`max-age=${m.cacheControl}`,p["content-type"]=m.contentType);const g=yield wm(this.fetch,u.toString(),h,{headers:p});return{data:{path:o,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(ln(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,t){return Rn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const a=Object.assign({},this.headers);t?.upsert&&(a["x-upsert"]="true");const o=yield Qs(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:a}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new Zm("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}update(e,t,i){return Rn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return Rn(this,void 0,void 0,function*(){try{return{data:yield Qs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ln(a))return{data:null,error:a};throw a}})}copy(e,t,i){return Rn(this,void 0,void 0,function*(){try{return{data:{path:(yield Qs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ln(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,i){return Rn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield Qs(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const l=i?.download?`&download=${i.download===!0?"":i.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ln(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,i){return Rn(this,void 0,void 0,function*(){try{const a=yield Qs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ln(a))return{data:null,error:a};throw a}})}download(e,t){return Rn(this,void 0,void 0,function*(){const a=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),l=o?`?${o}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield Gu(this.fetch,`${this.url}/${a}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(ln(u))return{data:null,error:u};throw u}})}info(e){return Rn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const i=yield Gu(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:xm(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}exists(e){return Rn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield gj(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i)&&i instanceof bm){const a=i.originalError;if([400,404].includes(a?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){const i=this._getFinalPath(e),a=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&a.push(o);const u=typeof t?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(t?.transform||{});h!==""&&a.push(h);let m=a.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${i}${m}`)}}}remove(e){return Rn(this,void 0,void 0,function*(){try{return{data:yield Kb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}list(e,t,i){return Rn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},_j),t),{prefix:e||""});return{data:yield Qs(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ln(a))return{data:null,error:a};throw a}})}listV2(e,t){return Rn(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield Qs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},t),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const yj="2.12.1",bj={"X-Client-Info":`storage-js/${yj}`};var $r=function(n,e,t,i){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(p){try{m(i.next(p))}catch(g){l(g)}}function h(p){try{m(i.throw(p))}catch(g){l(g)}}function m(p){p.done?o(p.value):a(p.value).then(u,h)}m((i=i.apply(n,e||[])).next())})};class xj{constructor(e,t={},i,a){this.shouldThrowOnError=!1;const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},bj),t),this.fetch=Xb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return $r(this,void 0,void 0,function*(){try{return{data:yield Gu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ln(e))return{data:null,error:e};throw e}})}getBucket(e){return $r(this,void 0,void 0,function*(){try{return{data:yield Gu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return $r(this,void 0,void 0,function*(){try{return{data:yield Qs(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return $r(this,void 0,void 0,function*(){try{return{data:yield wm(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ln(i))return{data:null,error:i};throw i}})}emptyBucket(e){return $r(this,void 0,void 0,function*(){try{return{data:yield Qs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}deleteBucket(e){return $r(this,void 0,void 0,function*(){try{return{data:yield Kb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ln(t))return{data:null,error:t};throw t}})}}class wj extends xj{constructor(e,t={},i,a){super(e,t,i,a)}from(e){return new vj(this.url,this.headers,e,this.fetch)}}const Sj="2.57.4";let kl="";typeof Deno<"u"?kl="deno":typeof document<"u"?kl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?kl="react-native":kl="node";const Cj={"X-Client-Info":`supabase-js-${kl}/${Sj}`},jj={headers:Cj},Ej={schema:"public"},Aj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Tj={};var kj=function(n,e,t,i){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(p){try{m(i.next(p))}catch(g){l(g)}}function h(p){try{m(i.throw(p))}catch(g){l(g)}}function m(p){p.done?o(p.value):a(p.value).then(u,h)}m((i=i.apply(n,e||[])).next())})};const Oj=n=>{let e;return n?e=n:typeof fetch>"u"?e=zb:e=fetch,(...t)=>e(...t)},Nj=()=>typeof Headers>"u"?$b:Headers,Rj=(n,e,t)=>{const i=Oj(t),a=Nj();return(o,l)=>kj(void 0,void 0,void 0,function*(){var u;const h=(u=yield e())!==null&&u!==void 0?u:n;let m=new a(l?.headers);return m.has("apikey")||m.set("apikey",n),m.has("Authorization")||m.set("Authorization",`Bearer ${h}`),i(o,Object.assign(Object.assign({},l),{headers:m}))})};var Mj=function(n,e,t,i){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(p){try{m(i.next(p))}catch(g){l(g)}}function h(p){try{m(i.throw(p))}catch(g){l(g)}}function m(p){p.done?o(p.value):a(p.value).then(u,h)}m((i=i.apply(n,e||[])).next())})};function Dj(n){return n.endsWith("/")?n:n+"/"}function Bj(n,e){var t,i;const{db:a,auth:o,realtime:l,global:u}=n,{db:h,auth:m,realtime:p,global:g}=e,_={db:Object.assign(Object.assign({},h),a),auth:Object.assign(Object.assign({},m),o),realtime:Object.assign(Object.assign({},p),l),storage:{},global:Object.assign(Object.assign(Object.assign({},g),u),{headers:Object.assign(Object.assign({},(t=g?.headers)!==null&&t!==void 0?t:{}),(i=u?.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>Mj(this,void 0,void 0,function*(){return""})};return n.accessToken?_.accessToken=n.accessToken:delete _.accessToken,_}function Lj(n){const e=n?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Dj(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Qb="2.71.1",Qr=30*1e3,Sm=3,Mf=Sm*Qr,Pj="http://localhost:9999",Ij="supabase.auth.token",Uj={"X-Client-Info":`gotrue-js/${Qb}`},Cm="X-Supabase-Api-Version",Zb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$j=600*1e3;class Jm extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function Ne(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class Hj extends Jm{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function qj(n){return Ne(n)&&n.name==="AuthApiError"}class Jb extends Jm{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class ga extends Jm{constructor(e,t,i,a){super(e,i,a),this.name=t,this.status=i}}class la extends ga{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Fj(n){return Ne(n)&&n.name==="AuthSessionMissingError"}class pu extends ga{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gu extends ga{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _u extends ga{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Gj(n){return Ne(n)&&n.name==="AuthImplicitGrantRedirectError"}class O0 extends ga{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jm extends ga{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Df(n){return Ne(n)&&n.name==="AuthRetryableFetchError"}class N0 extends ga{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class Em extends ga{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),R0=` 	
\r=`.split(""),Vj=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<R0.length;e+=1)n[R0[e].charCodeAt(0)]=-2;for(let e=0;e<Vu.length;e+=1)n[Vu[e].charCodeAt(0)]=e;return n})();function M0(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(Vu[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(Vu[i]),e.queuedBits-=6}}function ex(n,e,t){const i=Vj[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function D0(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=l=>{Xj(l,i,t)};for(let l=0;l<n.length;l+=1)ex(n.charCodeAt(l),a,o);return e.join("")}function Yj(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Wj(n,e){for(let t=0;t<n.length;t+=1){let i=n.charCodeAt(t);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(n.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}Yj(i,e)}}function Xj(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Kj(n){const e=[],t={queue:0,queuedBits:0},i=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)ex(n.charCodeAt(a),t,i);return new Uint8Array(e)}function Qj(n){const e=[];return Wj(n,t=>e.push(t)),new Uint8Array(e)}function Zj(n){const e=[],t={queue:0,queuedBits:0},i=a=>{e.push(a)};return n.forEach(a=>M0(a,t,i)),M0(null,t,i),e.join("")}function Jj(n){return Math.round(Date.now()/1e3)+n}function eE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Ds=()=>typeof window<"u"&&typeof document<"u",Ba={tested:!1,writable:!1},tx=()=>{if(!Ds())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ba.tested)return Ba.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ba.tested=!0,Ba.writable=!0}catch{Ba.tested=!0,Ba.writable=!1}return Ba.writable};function tE(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return t.searchParams.forEach((i,a)=>{e[a]=i}),e}const nx=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Qa(async()=>{const{default:i}=await Promise.resolve().then(()=>fo);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},nE=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Zr=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},La=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},aa=async(n,e)=>{await n.removeItem(e)};class ud{constructor(){this.promise=new ud.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ud.promiseConstructor=Promise;function Bf(n){const e=n.split(".");if(e.length!==3)throw new Em("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!zj.test(e[i]))throw new Em("JWT not in base64url format");return{header:JSON.parse(D0(e[0])),payload:JSON.parse(D0(e[1])),signature:Kj(e[2]),raw:{header:e[0],payload:e[1]}}}async function sE(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function iE(n,e){return new Promise((i,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await n(o);if(!e(o,null,l)){i(l);return}}catch(l){if(!e(o,l)){a(l);return}}})()})}function aE(n){return("0"+n.toString(16)).substr(-2)}function rE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let a="";for(let o=0;o<56;o++)a+=t.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(e),Array.from(e,aE).join("")}async function oE(n){const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(i);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function lE(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await oE(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hr(n,e,t=!1){const i=rE();let a=i;t&&(a+="/PASSWORD_RECOVERY"),await Zr(n,`${e}-code-verifier`,a);const o=await lE(i);return[o,i===o?"plain":"s256"]}const cE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uE(n){const e=n.headers.get(Cm);if(!e||!e.match(cE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function dE(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function hE(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qr(n){if(!fE.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lf(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function B0(n){return JSON.parse(JSON.stringify(n))}var mE=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t};const Ha=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),pE=[502,503,504];async function L0(n){var e;if(!nE(n))throw new jm(Ha(n),0);if(pE.includes(n.status))throw new jm(Ha(n),n.status);let t;try{t=await n.json()}catch(o){throw new Jb(Ha(o),o)}let i;const a=uE(n);if(a&&a.getTime()>=Zb["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new N0(Ha(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new la}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new N0(Ha(t),n.status,t.weak_password.reasons);throw new Hj(Ha(t),n.status||500,i)}const gE=(n,e,t,i)=>{const a={method:n,headers:e?.headers||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),t))};async function ze(n,e,t,i){var a;const o=Object.assign({},i?.headers);o[Cm]||(o[Cm]=Zb["2024-01-01"].name),i?.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const l=(a=i?.query)!==null&&a!==void 0?a:{};i?.redirectTo&&(l.redirect_to=i.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await _E(n,e,t+u,{headers:o,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(h):{data:Object.assign({},h),error:null}}async function _E(n,e,t,i,a,o){const l=gE(e,i,a,o);let u;try{u=await n(t,Object.assign({},l))}catch(h){throw console.error(h),new jm(Ha(h),0)}if(u.ok||await L0(u),i?.noResolveJson)return u;try{return await u.json()}catch(h){await L0(h)}}function ji(n){var e;let t=null;xE(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=Jj(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function P0(n){const e=ji(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ca(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function vE(n){return{data:n,error:null}}function yE(n){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:a,verification_type:o}=n,l=mE(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:i,redirect_to:a,verification_type:o},h=Object.assign({},l);return{data:{properties:u,user:h},error:null}}function bE(n){return n}function xE(n){return n.access_token&&n.refresh_token&&n.expires_in}const Pf=["global","local","others"];var wE=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t};class SE{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=nx(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Pf[0]){if(Pf.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Pf.join(", ")}`);try{return await ze(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Ne(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ca})}catch(i){if(Ne(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=wE(e,["options"]),a=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(a.new_email=i?.newEmail,delete a.newEmail),await ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:yE,redirectTo:t?.redirectTo})}catch(t){if(Ne(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ze(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ca})}catch(t){if(Ne(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,a,o,l,u,h;try{const m={nextPage:null,lastPage:0,total:0},p=await ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:bE});if(p.error)throw p.error;const g=await p.json(),_=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(h=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return y.length>0&&(y.forEach(x=>{const j=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);m[`${w}Page`]=j}),m.total=parseInt(_)),{data:Object.assign(Object.assign({},g),m),error:null}}catch(m){if(Ne(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){qr(e);try{return await ze(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ca})}catch(t){if(Ne(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){qr(e);try{return await ze(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ca})}catch(i){if(Ne(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){qr(e);try{return await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ca})}catch(i){if(Ne(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){qr(e.userId);try{const{data:t,error:i}=await ze(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:i}}catch(t){if(Ne(t))return{data:null,error:t};throw t}}async _deleteFactor(e){qr(e.userId),qr(e.id);try{return{data:await ze(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ne(t))return{data:null,error:t};throw t}}}function I0(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function CE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Fr={debug:!!(globalThis&&tx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class jE extends sx{}async function EE(n,e,t){Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await t()}finally{Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new jE(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Fr.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}CE();const AE={url:Pj,storageKey:Ij,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Uj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function U0(n,e,t){return await t()}const Gr={};class zl{constructor(e){var t,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=zl.nextInstanceID,zl.nextInstanceID+=1,this.instanceID>0&&Ds()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},AE),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new SE({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=nx(a.fetch),this.lock=a.lock||U0,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Ds()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=EE:this.lock=U0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:tx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=I0(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=I0(this.memoryStorage)),Ds()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Gr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Gr[this.storageKey]=Object.assign(Object.assign({},Gr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Gr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Gr[this.storageKey]=Object.assign(Object.assign({},Gr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qb}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=tE(window.location.href);let i="none";if(this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce"),Ds()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:o}=await this._getSessionFromURL(t,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Gj(o)){const h=(e=o.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ne(t)?{error:t}:{error:new Jb("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,a;try{const o=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:ji}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const h=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(o){if(Ne(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,i,a;try{let o;if("email"in e){const{email:p,password:g,options:_}=e;let y=null,x=null;this.flowType==="pkce"&&([y,x]=await Hr(this.storage,this.storageKey)),o=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_?.emailRedirectTo,body:{email:p,password:g,data:(t=_?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:_?.captchaToken},code_challenge:y,code_challenge_method:x},xform:ji})}else if("phone"in e){const{phone:p,password:g,options:_}=e;o=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(i=_?.data)!==null&&i!==void 0?i:{},channel:(a=_?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:ji})}else throw new gu("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const h=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(o){if(Ne(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:l,options:u}=e;t=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:P0})}else if("phone"in e){const{phone:o,password:l,options:u}=e;t=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:P0})}else throw new gu("You must provide either an email or phone number and a password");const{data:i,error:a}=t;return a?{data:{user:null,session:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new pu}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(t){if(Ne(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,i,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,i,a,o,l,u,h,m,p,g,_,y;let x,j;if("message"in e)x=e.message,j=e.signature;else{const{chain:w,wallet:S,statement:C,options:T}=e;let B;if(Ds())if(typeof S=="object")B=S;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))B=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!T?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=S}const D=new URL((t=T?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in B&&B.signIn){const M=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),C?{statement:C}:null));let $;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")$=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)$=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)x=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),j=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${D.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(a=(i=T?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=T?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((l=T?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((u=T?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((h=T?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((m=T?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((g=(p=T?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...T.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const M=await B.signMessage(new TextEncoder().encode(x),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=M}}try{const{data:w,error:S}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Zj(j)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:ji});if(S)throw S;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new pu}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:S})}catch(w){if(Ne(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const t=await La(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(t??"").split("/");try{const{data:o,error:l}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:ji});if(await aa(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new pu}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:l})}catch(o){if(Ne(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:i,token:a,access_token:o,nonce:l}=e,u=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:ji}),{data:h,error:m}=u;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new pu}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:m})}catch(t){if(Ne(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,i,a,o,l;try{if("email"in e){const{email:u,options:h}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Hr(this.storage,this.storageKey));const{error:g}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=h?.data)!==null&&t!==void 0?t:{},create_user:(i=h?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:m,code_challenge_method:p},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:u,options:h}=e,{data:m,error:p}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=h?.data)!==null&&a!==void 0?a:{},create_user:(o=h?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(l=h?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:p}}throw new gu("You must provide either an email or phone number.")}catch(u){if(Ne(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var t,i;try{let a,o;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:l,error:u}=await ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:ji});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,m=l.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(a){if(Ne(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var t,i,a;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await Hr(this.storage,this.storageKey)),await ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:vE})}catch(o){if(Ne(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new la;const{error:a}=await ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Ne(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:a,options:o}=e,{error:l}=await ze(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:i,type:a,options:o}=e,{data:l,error:u}=await ze(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:u}}throw new gu("You must provide either an email or phone number and a type")}catch(t){if(Ne(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await La(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Mf:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const l=await La(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=Lf()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,m,p)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,m,p))})}return{data:{session:e},error:null}}const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ca}):await this._useSession(async t=>{var i,a,o;const{data:l,error:u}=t;if(u)throw u;return!(!((i=l.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new la}:await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:ca})})}catch(t){if(Ne(t))return Fj(t)&&(await this._removeSession(),await aa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:a,error:o}=i;if(o)throw o;if(!a.session)throw new la;const l=a.session;let u=null,h=null;this.flowType==="pkce"&&e.email!=null&&([u,h]=await Hr(this.storage,this.storageKey));const{data:m,error:p}=await ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:h}),jwt:l.access_token,xform:ca});if(p)throw p;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(i){if(Ne(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new la;const t=Date.now()/1e3;let i=t,a=!0,o=null;const{payload:l}=Bf(e.access_token);if(l.exp&&(i=l.exp,a=i<=t),a){const{session:u,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:h}=await this._getUser(e.access_token);if(h)throw h;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(Ne(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:l,error:u}=t;if(u)throw u;e=(i=l.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new la;const{session:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ne(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ds())throw new _u("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _u(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new O0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _u("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new O0("No code detected.");const{data:C,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:o,refresh_token:l,expires_in:u,expires_at:h,token_type:m}=e;if(!o||!u||!l||!m)throw new _u("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(u);let _=p+g;h&&(_=parseInt(h));const y=_-p;y*1e3<=Qr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${g}s`);const x=_-g;p-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,_,p):p-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,_,p);const{data:j,error:w}=await this._getUser(o);if(w)throw w;const S={provider_token:i,provider_refresh_token:a,access_token:o,expires_in:g,expires_at:_,refresh_token:l,token_type:m,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(i){if(Ne(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await La(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:a,error:o}=t;if(o)return{error:o};const l=(i=a.session)===null||i===void 0?void 0:i.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(qj(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await aa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=eE(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,a;try{const{data:{session:o},error:l}=t;if(l)throw l;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await Hr(this.storage,this.storageKey,!0));try{return await ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(Ne(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Ne(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:i,error:a}=await this._useSession(async o=>{var l,u,h,m,p;const{data:g,error:_}=o;if(_)throw _;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await ze(this.fetch,"GET",y,{headers:this.headers,jwt:(p=(m=g.session)===null||m===void 0?void 0:m.access_token)!==null&&p!==void 0?p:void 0})});if(a)throw a;return Ds()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(Ne(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,a;const{data:o,error:l}=t;if(l)throw l;return await ze(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(Ne(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await iE(async a=>(a>0&&await sE(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ji})),(a,o)=>{const l=200*Math.pow(2,a);return o&&Df(o)&&Date.now()+l-i<Qr})}catch(i){if(this._debug(t,"error",i),Ne(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),Ds()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await La(this.storage,this.storageKey);if(a&&this.userStorage){let l=await La(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await Zr(this.userStorage,this.storageKey+"-user",l)),a.user=(e=l?.user)!==null&&e!==void 0?e:Lf()}else if(a&&!a.user&&!a.user){const l=await La(this.storage,this.storageKey+"-user");l&&l?.user?(a.user=l.user,await aa(this.storage,this.storageKey+"-user"),await Zr(this.storage,this.storageKey,a)):a.user=Lf()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const o=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Mf;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${Mf}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),Df(l)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(a.access_token);!u&&l?.user?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(i,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new la;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new ud;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new la;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(a,"error",o),Ne(o)){const l={session:null,error:o};return Df(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,i=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(h){o.push(h)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await Zr(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const o=B0(a);await Zr(this.storage,this.storageKey,o)}else{const a=B0(t);await Zr(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await aa(this.storage,this.storageKey),await aa(this.storage,this.storageKey+"-code-verifier"),await aa(this.storage,this.storageKey+"-user"),this.userStorage&&await aa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ds()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-e)/Qr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Qr}ms, refresh threshold is ${Sm} ticks`),a<=Sm&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sx)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ds()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const a=[`provider=${encodeURIComponent(t)}`];if(i?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,l]=await Hr(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(u.toString())}if(i?.queryParams){const o=new URLSearchParams(i.queryParams);a.push(o.toString())}return i?.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:a,error:o}=t;return o?{data:null,error:o}:await ze(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(Ne(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,a;const{data:o,error:l}=t;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:h,error:m}=await ze(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&(!((a=h?.totp)===null||a===void 0)&&a.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(t){if(Ne(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:a,error:o}=t;if(o)return{data:null,error:o};const{data:l,error:u}=await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(t){if(Ne(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:a,error:o}=t;return o?{data:null,error:o}:await ze(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(Ne(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const i=e?.factors||[],a=i.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=i.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:i,totp:a,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,i;const{data:{session:a},error:o}=e;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Bf(a.access_token);let u=null;l.aal&&(u=l.aal);let h=u;((i=(t=a.user.factors)===null||t===void 0?void 0:t.filter(g=>g.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(h="aal2");const p=l.amr||[];return{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(u=>u.kid===e);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(u=>u.kid===e),i&&this.jwks_cached_at+$j>a)return i;const{data:o,error:l}=await ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,i=o.keys.find(u=>u.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:y,error:x}=await this.getSession();if(x||!y.session)return{data:null,error:x};i=y.session.access_token}const{header:a,payload:o,signature:l,raw:{header:u,payload:h}}=Bf(i);t?.allowExpired||dE(o.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!m){const{error:y}=await this.getUser(i);if(y)throw y;return{data:{claims:o,header:a,signature:l},error:null}}const p=hE(a.alg),g=await crypto.subtle.importKey("jwk",m,p,!0,["verify"]);if(!await crypto.subtle.verify(p,g,l,Qj(`${u}.${h}`)))throw new Em("Invalid JWT signature");return{data:{claims:o,header:a,signature:l},error:null}}catch(i){if(Ne(i))return{data:null,error:i};throw i}}}zl.nextInstanceID=0;const TE=zl;class kE extends TE{constructor(e){super(e)}}var OE=function(n,e,t,i){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(p){try{m(i.next(p))}catch(g){l(g)}}function h(p){try{m(i.throw(p))}catch(g){l(g)}}function m(p){p.done?o(p.value):a(p.value).then(u,h)}m((i=i.apply(n,e||[])).next())})};class NE{constructor(e,t,i){var a,o,l;this.supabaseUrl=e,this.supabaseKey=t;const u=Lj(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:Ej,realtime:Tj,auth:Object.assign(Object.assign({},Aj),{storageKey:h}),global:jj},p=Bj(i??{},m);this.storageKey=(a=p.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=p.auth)!==null&&l!==void 0?l:{},this.headers,p.global.fetch),this.fetch=Rj(t,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new VC(new URL("rest/v1",u).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new wj(this.storageUrl.href,this.headers,this.fetch,i?.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new LC(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return OE(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:a,userStorage:o,storageKey:l,flowType:u,lock:h,debug:m},p,g){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kE({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),p),storageKey:l,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:a,userStorage:o,flowType:u,lock:h,debug:m,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new cj(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i?.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const RE=(n,e,t)=>new NE(n,e,t);function ME(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ME()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const DE="https://xvstqhvooabljhhfmuas.supabase.co",BE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh2c3RxaHZvb2FibGpoaGZtdWFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg0NzM3MTYsImV4cCI6MjA3NDA0OTcxNn0.Chn3b255Bm7FpHj5Vld7G5aoui4lj1wT4HPoF6u5kVQ",ae=RE(DE,BE),LE=720*60*60*1e3,PE=(n,e)=>n?Date.now()-n>e:!0,$l=(n,e)=>{try{const t=localStorage.getItem(n);if(!t)return{data:null,isStale:!0};const{data:i,ts:a}=JSON.parse(t);return{data:i,isStale:PE(a,e)}}catch(t){return console.error(`Error al leer el cach para la clave "${n}":`,t),{data:null,isStale:!0}}},ua=(n,e)=>{try{const t={data:e,ts:Date.now()};localStorage.setItem(n,JSON.stringify(t))}catch(t){console.error(`Error al guardar en cach para la clave "${n}":`,t)}},IE=()=>{console.log("Running cache cleanup..."),Object.keys(localStorage).forEach(n=>{if(n.startsWith("ea-"))try{const e=JSON.parse(localStorage.getItem(n));e&&e.ts&&Date.now()-e.ts>LE&&(console.log(`Removing expired cache item: ${n}`),localStorage.removeItem(n))}catch(e){console.error(`Error cleaning up cache for key "${n}":`,e),localStorage.removeItem(n)}})},Hl={BUSINESS_STATUS:300*1e3,USER_DATA:900*1e3,USER_ORDERS:600*1e3,PRODUCT_EXTRAS:600*1e3},ti={PRODUCTS:"ea-products-cache",BUSINESS_STATUS:"ea-business-status-cache",USER_INFO:"ea-user-info-cache",USER_ORDERS:"ea-user-orders-cache",FAVORITES:"ea-favorites-cache",REVIEWS:"ea-reviews-cache"},UE={RECENT_ORDERS:25},ix=A.createContext(),Jl=()=>A.useContext(ix),zE=({children:n})=>{const[e,t]=A.useState([]),[i,a]=A.useState([]),[o,l]=A.useState(!0),[u,h]=A.useState(null),[m,p]=A.useState(""),g=A.useCallback(async()=>{console.log(" Buscando y cacheando nuevos datos de productos...");try{const{data:y,error:x}=await ae.from("products").select("*, product_images ( id, image_url )").eq("is_active",!0);if(x)throw x;const{data:j,error:w}=await ae.from("categories").select("*");if(w)throw w;const S=new Date().toISOString().split("T")[0],{data:C,error:T}=await ae.from("special_prices").select("*").lte("start_date",S).gte("end_date",S);if(T)throw T;const B=y.map($=>{const R=C.find(I=>I.product_id===$.id),N=C.find(I=>I.category_id===$.category_id);let z=R||N;return z?{...$,original_price:$.price,price:parseFloat(z.override_price)}:$}),D=[...new Set(B.map($=>$.category_id))],M=j.filter($=>D.includes($.id));t(B),a(M),ua(ti.PRODUCTS,{products:B,categories:M}),console.log(" Datos frescos guardados en el estado y en el cach.")}catch(y){console.error("Error al obtener productos:",y),h(y.message)}finally{l(!1)}},[]);A.useEffect(()=>{const y=localStorage.getItem(ti.PRODUCTS);if(y){const{data:x}=JSON.parse(y);x&&(t(x.products),a(x.categories))}g()},[g]),A.useEffect(()=>{const y=ae.channel("public:products_all_changes"),x=j=>{console.log(" Cambio detectado en la base de datos!",j),p("El men se ha actualizado!"),setTimeout(()=>p(""),4e3),g()};return y.on("postgres_changes",{event:"*",schema:"public",table:"products"},x).on("postgres_changes",{event:"*",schema:"public",table:"product_images"},x).on("postgres_changes",{event:"*",schema:"public",table:"special_prices"},x).subscribe(j=>{j==="SUBSCRIBED"&&console.log(" Listener de tiempo real conectado y suscrito.")}),()=>{console.log(" Desconectando listener de tiempo real."),ae.removeChannel(y)}},[g]);const _={products:e,categories:i,loading:o,error:u,notification:m};return d.jsx(ix.Provider,{value:_,children:n})},ax=A.createContext(),If="ea-panel-cart",Ja=()=>A.useContext(ax),$E=({children:n})=>{const[e,t]=A.useState(()=>{try{const q=window.localStorage.getItem(If);return q?JSON.parse(q):[]}catch(q){return console.error("Error al cargar el carrito desde localStorage:",q),[]}}),[i,a]=A.useState(!1),[o,l]=A.useState(0),[u,h]=A.useState(null),[m,p]=A.useState(0),[g,_]=A.useState(""),{products:y,loading:x}=Jl(),[j,w]=A.useState({message:"",key:0}),S=A.useCallback(q=>{w({message:q,key:Date.now()})},[]);A.useEffect(()=>{try{window.localStorage.setItem(If,JSON.stringify(e))}catch(q){console.error("Error al guardar el carrito en localStorage:",q)}},[e]),A.useEffect(()=>{if(x||e.length===0)return;const q=new Set(y.map(G=>G.id)),H=e.filter(G=>q.has(G.id));if(H.length<e.length){const G=e.filter(Y=>!q.has(Y.id)),E=G.map(Y=>Y.name).join(", "),F=`Se ${G.length>1?"han eliminado":"ha eliminado"} "${E}" de tu carrito por no estar disponible.`;_(F),t(H)}},[y,x,e]);const C=A.useCallback((q,H,G)=>{if(!G)return 0;let E=0;switch(G.type){case"global":E=q;break;case"category":E=H.filter(O=>O.category_id===G.target_id).reduce((O,F)=>O+F.price*F.quantity,0);break;case"product":E=H.filter(O=>O.id===G.target_id).reduce((O,F)=>O+F.price*F.quantity,0);break;default:return 0}return E*(G.value/100)},[]);A.useEffect(()=>{const q=e.reduce((G,E)=>G+(Number(E.price)||0)*(Number(E.quantity)||0),0);l(q);const H=C(q,e,u?.details);p(q-H)},[e,u,C]);const T=async(q,H)=>{if(!H)return{success:!1,message:"Debes iniciar sesin para usar un cdigo."};const G=q.toUpperCase();try{const{data:E,error:O}=await ae.from("discounts").select("*").eq("code",G).single();if(O||!E)return{success:!1,message:"El cdigo no es vlido."};const F=new Date().toISOString().split("T")[0];if(!E.is_active||E.end_date&&E.end_date<F||E.start_date&&E.start_date>F)return{success:!1,message:"Este cdigo ha expirado o no est activo."};if(E.specific_customer_id&&E.specific_customer_id!==H)return{success:!1,message:"Este cdigo de recompensa es personal y no te pertenece."};if(E.requires_referred_status){const{data:X}=await ae.from("customers").select("referrer_id").eq("id",H).single();if(!X.referrer_id)return{success:!1,message:"Este cdigo es exclusivo para clientes invitados."}}if(E.is_single_use){const{data:X}=await ae.from("customer_discount_usage").select("customer_id").eq("customer_id",H).eq("discount_id",E.id).maybeSingle();if(X)return{success:!1,message:"Este cdigo de un solo uso ya ha sido canjeado."}}const Y=e.reduce((X,J)=>X+J.price*J.quantity,0);return C(Y,e,E)>0?(h({code:E.code,value:E.value,details:E}),{success:!0,message:"Descuento aplicado!"}):{success:!1,message:"Este cdigo no aplica para los productos en tu carrito."}}catch(E){return console.error("Error applying discount:",E),{success:!1,message:"Ocurri un error inesperado al validar el cdigo."}}},B=()=>h(null),D=A.useCallback(()=>a(q=>!q),[]),M=A.useCallback((q,H=1)=>{t(G=>G.find(O=>O.id===q.id)?G.map(O=>O.id===q.id?{...O,quantity:Number(O.quantity||0)+H}:O):[...G,{...q,quantity:H}])},[]),$=A.useCallback(q=>{t(H=>H.filter(G=>G.id!==q))},[]),R=A.useCallback((q,H)=>{const G=parseInt(H,10);if(isNaN(G)||G<1){$(q);return}t(E=>E.map(O=>O.id===q?{...O,quantity:G}:O))},[$]),N=A.useCallback(()=>{t([]),h(null),window.localStorage.removeItem(If)},[]),z=A.useCallback(q=>{N(),t(q)},[N]),I=C(o,e,u?.details),U={cartItems:e,addToCart:M,removeFromCart:$,updateQuantity:R,clearCart:N,subtotal:o,total:m,discount:u?{...u,amount:I}:null,applyDiscount:T,removeDiscount:B,isCartOpen:i,toggleCart:D,cartNotification:g,clearCartNotification:()=>_(""),toast:j,showToast:S,replaceCart:z};return d.jsx(ax.Provider,{value:U,children:n})},rx=A.createContext(),Uf="customer_phone",Hs=()=>A.useContext(rx),HE=async(n,e)=>{const t=n.substring(0,2).toUpperCase(),i=e.slice(-2),a=`EA-${t}-${i}`;let o=a,l=1,u=!1;for(;!u;){const{data:h,error:m}=await ae.from("customers").select("id").eq("referral_code",o).maybeSingle();if(m)return console.error("Error checking for unique code:",m),`EA-${Math.random().toString(36).substring(2,8).toUpperCase()}`;h?(l++,o=`${a}-${l}`):u=!0}return o},qE=({children:n})=>{const[e,t]=A.useState(""),[i,a]=A.useState(null),[o,l]=A.useState(!1),[u,h]=A.useState(!1),[m,p]=A.useState("checkout"),[g,_]=A.useState(null),[y,x]=A.useState(!1);A.useEffect(()=>{const $=localStorage.getItem(Uf);$?t($):sessionStorage.getItem("phoneModalShown")||(l(!0),sessionStorage.setItem("phoneModalShown","true"))},[]);const j=async $=>{if(!/^\d{10}$/.test($))return{exists:!1,accepted:!1,customer:null};const{data:R,error:N}=await ae.from("customers").select("id, name, phone").eq("phone",$).maybeSingle();if(N)return console.error("Error checking customer:",N),{exists:!1,accepted:!1,customer:null};if(a(R),R){const{data:z}=await ae.from("terms_and_conditions").select("id").order("version",{ascending:!1}).limit(1).maybeSingle();if(z){const{data:I}=await ae.from("customer_terms_acceptances").select("id").eq("customer_id",R.id).eq("terms_version_id",z.id).maybeSingle();return{exists:!0,accepted:!!I,customer:R}}return{exists:!0,accepted:!0,customer:R}}return{exists:!1,accepted:!1,customer:null}},w=async $=>{const{data:R,error:N}=await ae.from("terms_and_conditions").select("id").order("version",{ascending:!1}).limit(1).maybeSingle();if(N||!R)return console.error("No se pudieron obtener los trminos para aceptar."),!1;const{error:z}=await ae.from("customer_terms_acceptances").insert({customer_id:$,terms_version_id:R.id});return z?(console.error("Error al aceptar los trminos:",z),!1):!0},S=async($,R,N=null)=>{let z=null;if(N){const{data:H,error:G}=await ae.from("customers").select("id").eq("referral_code",N.toUpperCase()).single();H&&!G?z=H.id:console.warn("Cdigo de referido no encontrado:",N)}const I=await HE(R,$),{data:U,error:q}=await ae.from("customers").insert({name:R,phone:$,referrer_id:z,referral_code:I}).select().single();if(q)return console.error("Error creating customer:",q),!1;if(U){if(await w(U.id),z){const{error:H}=await ae.rpc("increment_referral_count",{customer_id:z});H&&console.error("Error incrementing referral count:",H)}return C($),x(!0),!0}return!1},C=$=>/^\d{10,12}$/.test($)?(localStorage.setItem(Uf,$),t($),l(!1),g&&(g(),_(null)),!0):!1,M={phone:e,customer:i,checkAndLogin:j,registerNewCustomer:S,savePhoneAndContinue:C,clearPhone:()=>{localStorage.removeItem(Uf),t(""),a(null)},isPhoneModalOpen:o,setPhoneModalOpen:$=>{typeof $=="function"?(_(()=>$),l(!0)):(_(null),l(!!$))},isCheckoutModalOpen:u,setCheckoutModalOpen:($,R="checkout")=>{p(R),h($)},checkoutMode:m,isFirstAddressRequired:y,setIsFirstAddressRequired:x,acceptTerms:w};return d.jsx(rx.Provider,{value:M,children:n})},ox=A.createContext(),er=()=>A.useContext(ox),FE=({children:n})=>{const{phone:e}=Hs(),[t,i]=A.useState({customer:null,addresses:[],orders:[]}),[a,o]=A.useState(!0),[l,u]=A.useState(null),h=`${ti.USER_INFO}-${e}`,m=`${ti.USER_ORDERS}-${e}`,p=A.useCallback(async _=>{if(!_){i({customer:null,addresses:[],orders:[]}),localStorage.removeItem(h),localStorage.removeItem(m),o(!1);return}u(null);try{const{data:y,error:x}=await ae.from("customers").select("id, name, phone, created_at, referral_code, referrer_id, referral_count").eq("phone",_).maybeSingle();if(x)throw x;if(!y){i({customer:null,addresses:[],orders:[]}),ua(h,{customer:null,addresses:[]}),ua(m,[]),o(!1);return}const{data:j}=await ae.from("customer_addresses").select("*").eq("customer_id",y.id),w={customer:y,addresses:j||[]};i(T=>({...T,...w})),ua(h,w);const{data:S}=await ae.from("orders").select("*, order_items(*, products(*))").eq("customer_id",y.id).order("created_at",{ascending:!1}),C=(S||[]).slice(0,UE.RECENT_ORDERS);i(T=>({...T,orders:S||[]})),ua(m,C)}catch(y){u(y.message)}finally{a&&o(!1)}},[a,h,m]);A.useEffect(()=>{if(!e){i({customer:null,addresses:[],orders:[]}),o(!1);return}const{data:_,isStale:y}=$l(h,Hl.USER_DATA),{data:x,isStale:j}=$l(m,Hl.USER_ORDERS);_&&x&&(i({..._,orders:x}),o(!1)),(y||j)&&p(e)},[e,p,h,m]),A.useEffect(()=>{if(!t.customer?.id)return;const _=()=>{console.log("Cambio detectado en los datos del usuario, revalidando..."),p(e)},y=ae.channel(`public:user-data:${t.customer.id}`).on("postgres_changes",{event:"*",schema:"public",table:"orders",filter:`customer_id=eq.${t.customer.id}`},_).on("postgres_changes",{event:"*",schema:"public",table:"customer_addresses",filter:`customer_id=eq.${t.customer.id}`},_).subscribe();return()=>{ae.removeChannel(y)}},[t.customer?.id,p,e]);const g={...t,loading:a,error:l,refetch:()=>p(e)};return d.jsx(ox.Provider,{value:g,children:n})},lx=A.createContext(),cx=()=>A.useContext(lx),GE=({children:n})=>{const{phone:e}=Hs(),[t,i]=A.useState([]),[a,o]=A.useState([]),[l,u]=A.useState(null),[h,m]=A.useState(!0),p=A.useCallback(async _=>{m(!0);try{const{data:y}=await ae.from("product_reviews").select("*, products(id, name, image_url, is_active), customers(name)").order("created_at",{ascending:!1}),x=y||[];if(i(x),ua(ti.REVIEWS,x),_){const j=`${ti.FAVORITES}-${_}`,{data:w}=await ae.from("customer_favorites").select("*, products(id, name, image_url, is_active)").eq("customer_id",_),S=w||[];o(S),ua(j,S)}else o([])}catch(y){console.error("Error fetching extras:",y)}finally{m(!1)}},[]);A.useEffect(()=>{(async()=>{m(!0);let y=null,x=!1;if(e){const{data:S}=await ae.from("customers").select("id").eq("phone",e).maybeSingle();if(y=S?S.id:null,u(y),y){const C=`${ti.FAVORITES}-${y}`,{data:T,isStale:B}=$l(C,Hl.PRODUCT_EXTRAS);T&&o(T),(B||!T)&&(x=!0)}}else u(null),o([]);const{data:j,isStale:w}=$l(ti.REVIEWS,Hl.PRODUCT_EXTRAS);j&&i(j),(w||!j)&&(x=!0),x?await p(y):m(!1)})()},[e,p]),A.useEffect(()=>{const _=()=>{console.log("Cambio detectado en extras, revalidando..."),p(l)},y=ae.channel("product-extras-listener");return y.on("postgres_changes",{event:"*",schema:"public",table:"product_reviews"},_),l&&y.on("postgres_changes",{event:"*",schema:"public",table:"customer_favorites",filter:`customer_id=eq.${l}`},_),y.subscribe(),()=>{ae.removeChannel(y)}},[l,p]);const g={reviews:t,favorites:a,customerId:l,loading:h,refetch:()=>p(l)};return d.jsx(lx.Provider,{value:g,children:n})},ux=A.createContext(),ft=()=>A.useContext(ux),z0=({children:n})=>{const[e,t]=A.useState(null),o={showAlert:A.useCallback((l,u="info")=>{t({message:l,type:u,key:Date.now()})},[]),closeAlert:()=>{t(null)},alert:e};return d.jsx(ux.Provider,{value:o,children:n})},dx=A.createContext(),si=()=>A.useContext(dx),VE=({children:n})=>{const[e,t]=A.useState(null),[i,a]=A.useState(!0),o=A.useCallback(async h=>{if(!h){t(null),a(!1);return}const{data:m,error:p}=await ae.from("admins").select("name, role, permissions").eq("id",h.id).single();p?(console.error("Error fetching admin profile:",p),t(null)):t(m),a(!1)},[]);A.useEffect(()=>{(async()=>{const{data:{session:p}}=await ae.auth.getSession();p?o(p.user):a(!1)})();const{data:m}=ae.auth.onAuthStateChange((p,g)=>{o(g?.user)});return()=>{m.subscription.unsubscribe()}},[o]);const u={admin:e,loading:i,hasPermission:h=>{if(e?.role==="admin")return!0;if(!e?.permissions)return!1;const m=h.split(".");let p=e.permissions;for(const g of m)if(p=p?.[g],p===void 0)return!1;return!!p}};return d.jsx(dx.Provider,{value:u,children:n})},$0="app-theme-preference",hx=A.createContext(),YE=()=>A.useContext(hx),WE=({children:n})=>{const[e,t]=A.useState(()=>localStorage.getItem($0)||"system");A.useEffect(()=>{const a=document.documentElement,o=window.matchMedia("(prefers-color-scheme: dark)").matches;a.removeAttribute("data-theme"),(e==="dark"||e==="system"&&o)&&a.setAttribute("data-theme","dark"),localStorage.setItem($0,e)},[e]),A.useEffect(()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{if(e==="system"){const u=document.documentElement;l.matches?u.setAttribute("data-theme","dark"):u.removeAttribute("data-theme")}};return a.addEventListener("change",o),()=>a.removeEventListener("change",o)},[e]);const i={theme:e,changeTheme:t};return d.jsx(hx.Provider,{value:i,children:n})},fx=A.createContext(),mx=()=>A.useContext(fx),XE=({children:n})=>{const[e,t]=A.useState({isOpen:!1,message:"Verificando horario...",loading:!0}),i=A.useCallback(async()=>{try{const{data:a,error:o}=await ae.rpc("get_business_status");if(o)throw o;const l={isOpen:a.is_open,message:a.message,loading:!1};t(l),ua(ti.BUSINESS_STATUS,l)}catch(a){console.error("Error fetching business status:",a),t(o=>({...o,message:"No se pudo verificar el horario.",loading:!1}))}},[]);return A.useEffect(()=>{const{data:a,isStale:o}=$l(ti.BUSINESS_STATUS,Hl.BUSINESS_STATUS);a&&t({...a,loading:!1}),o&&i();const l=setInterval(i,6e4);return()=>clearInterval(l)},[i]),A.useEffect(()=>{const a=()=>{console.log("Cambio detectado en los horarios, actualizando instantneamente..."),i()},o=ae.channel("public:business_hours_changes").on("postgres_changes",{event:"*",schema:"public",table:"business_hours"},a).on("postgres_changes",{event:"*",schema:"public",table:"business_exceptions"},a).subscribe();return()=>{ae.removeChannel(o)}},[i]),d.jsx(fx.Provider,{value:e,children:n})};function KE({toggleSidebar:n}){const e=Kl(),t=async()=>{const{error:i}=await ae.auth.signOut();i?console.error("Error al cerrar sesin:",i):e("/login")};return d.jsxs("div",{className:"navbar",children:[d.jsx("button",{className:"menu-toggle",onClick:n,children:""}),d.jsx("h2",{children:"Panel de Administracin"}),d.jsx("button",{onClick:t,style:{background:"#e74c3c",color:"white",border:"none",padding:"10px 15px",borderRadius:"5px",cursor:"pointer"},children:"Cerrar Sesin"})]})}function QE({isOpen:n,closeSidebar:e}){const{hasPermission:t}=si();return d.jsxs("div",{className:`sidebar ${n?"open":""}`,children:[t("dashboard.view")&&d.jsx(qn,{to:"/admin",onClick:e,children:"Dashboard"}),t("crear-pedido.view")&&d.jsx(qn,{to:"/admin/crear-pedido",onClick:e,children:"Crear Pedido"}),t("pedidos.view")&&d.jsx(qn,{to:"/admin/pedidos",onClick:e,children:"Pedidos"}),t("clientes.view")&&d.jsx(qn,{to:"/admin/clientes",onClick:e,children:"Clientes"}),t("referidos.view")&&d.jsx(qn,{to:"/admin/referidos",onClick:e,children:"Referidos"}),t("productos.view")&&d.jsx(qn,{to:"/admin/productos",onClick:e,children:"Productos"}),t("horarios.view")&&d.jsx(qn,{to:"/admin/horarios",onClick:e,children:"Horarios"}),t("descuentos.view")&&d.jsx(qn,{to:"/admin/descuentos",onClick:e,children:"Descuentos"}),t("terminos.view")&&d.jsx(qn,{to:"/admin/terminos",onClick:e,children:"Trminos y Cond."}),t("registrar-admin.view")&&d.jsx(qn,{to:"/admin/registrar-admin",onClick:e,children:"Registrar Admin"}),t("special-prices.view")&&d.jsx(qn,{to:"/admin/special-prices",onClick:e,children:"Precios Especiales"})]})}const ZE="_overlay_1eqfv_1",JE="_modalContent_1eqfv_25",eA="_iconCircle_1eqfv_53",tA="_title_1eqfv_69",nA="_message_1eqfv_79",sA="_closeButton_1eqfv_89",Jr={overlay:ZE,modalContent:JE,iconCircle:eA,title:tA,message:nA,closeButton:sA},iA=({type:n})=>d.jsx("div",{className:Jr.iconCircle,children:"!"});function px(){const{alert:n,closeAlert:e}=ft();return A.useEffect(()=>{if(n){const t=setTimeout(()=>{e()},5e3);return()=>clearTimeout(t)}},[n,e]),n?d.jsx("div",{className:Jr.overlay,onClick:e,children:d.jsxs("div",{className:Jr.modalContent,onClick:t=>t.stopPropagation(),children:[d.jsx(iA,{type:n.type}),d.jsx("h2",{className:Jr.title,children:"Notificacin"}),d.jsx("p",{className:Jr.message,children:n.message}),d.jsx("button",{onClick:e,className:Jr.closeButton,children:"Entendido"})]})}):null}function aA(){const[n,e]=A.useState(!1),t=()=>{e(!n)},i=()=>{e(!1)};return d.jsxs(d.Fragment,{children:[d.jsx(px,{}),d.jsx(KE,{toggleSidebar:t}),d.jsxs("div",{className:"container",children:[d.jsx(QE,{isOpen:n,closeSidebar:i}),d.jsx("main",{className:"main-content",children:d.jsx(Vm,{})})]})]})}const rA="_overlay_rm9eq_5",oA="_cartSidebar_rm9eq_31",lA="_open_rm9eq_31",cA="_cartHeader_rm9eq_95",uA="_cartBody_rm9eq_113",dA="_cartTitle_rm9eq_123",hA="_closeButton_rm9eq_147",fA="_emptyMessage_rm9eq_149",mA="_cartItemsList_rm9eq_153",pA="_cartItem_rm9eq_153",gA="_itemInfo_rm9eq_183",_A="_itemName_rm9eq_185",vA="_itemPrice_rm9eq_187",yA="_itemActions_rm9eq_191",bA="_quantityDisplay_rm9eq_211",xA="_quantityButton_rm9eq_225",wA="_deleteButton_rm9eq_269",SA="_cartFooter_rm9eq_287",CA="_discountToggleButton_rm9eq_301",jA="_discountAccordionContent_rm9eq_303",EA="_discountSection_rm9eq_313",AA="_discountInput_rm9eq_315",TA="_applyButton_rm9eq_335",kA="_discountMessage_rm9eq_337",OA="_totals_rm9eq_339",NA="_discountApplied_rm9eq_341",RA="_total_rm9eq_339",MA="_whatsappButton_rm9eq_347",DA="_cartNotification_rm9eq_383",BA="_discountAccordion_rm9eq_303",He={overlay:rA,cartSidebar:oA,open:lA,cartHeader:cA,cartBody:uA,cartTitle:dA,closeButton:hA,emptyMessage:fA,cartItemsList:mA,cartItem:pA,itemInfo:gA,itemName:_A,itemPrice:vA,itemActions:yA,quantityDisplay:bA,quantityButton:xA,deleteButton:wA,cartFooter:SA,discountToggleButton:CA,discountAccordionContent:jA,discountSection:EA,discountInput:AA,applyButton:TA,discountMessage:kA,totals:OA,discountApplied:NA,total:RA,whatsappButton:MA,cartNotification:DA,discountAccordion:BA},LA="_modalOverlay_yxpvw_1",PA="_modalContent_yxpvw_15",IA="_header_yxpvw_31",UA="_closeButton_yxpvw_49",zA="_mapDisplay_yxpvw_53",$A="_mapOverlay_yxpvw_71",HA="_scrollableContent_yxpvw_85",qA="_detailsGroup_yxpvw_107",FA="_detailItem_yxpvw_121",GA="_addressActions_yxpvw_135",VA="_addressSelector_yxpvw_145",YA="_editAddressButton_yxpvw_167",WA="_addNewAddressButton_yxpvw_167",XA="_summary_yxpvw_205",KA="_summaryLine_yxpvw_219",QA="_discount_yxpvw_221",ZA="_total_yxpvw_223",JA="_footer_yxpvw_227",eT="_confirmButton_yxpvw_245",tT="_spinner_yxpvw_259",nT="_deliveryOptions_yxpvw_271",sT="_activeOption_yxpvw_309",iT="_datePicker_yxpvw_319",ke={modalOverlay:LA,modalContent:PA,header:IA,closeButton:UA,mapDisplay:zA,mapOverlay:$A,scrollableContent:HA,detailsGroup:qA,detailItem:FA,addressActions:GA,addressSelector:VA,editAddressButton:YA,addNewAddressButton:WA,summary:XA,summaryLine:KA,discount:QA,total:ZA,footer:JA,confirmButton:eT,spinner:tT,deliveryOptions:nT,activeOption:sT,datePicker:iT},aT=Xe.lazy(()=>Qa(()=>import("./MapPicker-CfXYrTRz.js"),__vite__mapDeps([0,1])));function ep({onLocationSelect:n,initialPosition:e,isDraggable:t}){return d.jsx(Xe.Suspense,{fallback:d.jsx("div",{style:{height:"350px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Cargando mapa..."}),children:d.jsx(aT,{onLocationSelect:n,initialPosition:e,isDraggable:t})})}function tp({children:n}){const[e,t]=A.useState(!1);return A.useEffect(()=>{t(!0)},[]),e?d.jsx(d.Fragment,{children:n}):null}const rT="_modalOverlay_1bez7_5",oT="_modalContent_1bez7_17",lT="_closeButton_1bez7_37",cT="_form_1bez7_61",uT="_mapContainer_1bez7_81",dT="_saveButton_1bez7_97",hT="_saveOption_1bez7_121",fT="_contentWrapper_1bez7_149",ra={modalOverlay:rT,modalContent:oT,closeButton:lT,form:cT,mapContainer:uT,saveButton:dT,saveOption:hT,contentWrapper:fT};/*! @license DOMPurify 3.2.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.7/LICENSE */const{entries:gx,setPrototypeOf:H0,isFrozen:mT,getPrototypeOf:pT,getOwnPropertyDescriptor:gT}=Object;let{freeze:Bn,seal:xs,create:_x}=Object,{apply:Am,construct:Tm}=typeof Reflect<"u"&&Reflect;Bn||(Bn=function(e){return e});xs||(xs=function(e){return e});Am||(Am=function(e,t){for(var i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];return e.apply(t,a)});Tm||(Tm=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return new e(...i)});const vu=Ln(Array.prototype.forEach),_T=Ln(Array.prototype.lastIndexOf),q0=Ln(Array.prototype.pop),fl=Ln(Array.prototype.push),vT=Ln(Array.prototype.splice),Iu=Ln(String.prototype.toLowerCase),zf=Ln(String.prototype.toString),$f=Ln(String.prototype.match),ml=Ln(String.prototype.replace),yT=Ln(String.prototype.indexOf),bT=Ln(String.prototype.trim),Ls=Ln(Object.prototype.hasOwnProperty),Mn=Ln(RegExp.prototype.test),pl=xT(TypeError);function Ln(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return Am(n,e,i)}}function xT(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Tm(n,t)}}function Pe(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Iu;H0&&H0(n,null);let i=e.length;for(;i--;){let a=e[i];if(typeof a=="string"){const o=t(a);o!==a&&(mT(e)||(e[i]=o),a=o)}n[a]=!0}return n}function wT(n){for(let e=0;e<n.length;e++)Ls(n,e)||(n[e]=null);return n}function Ei(n){const e=_x(null);for(const[t,i]of gx(n))Ls(n,t)&&(Array.isArray(i)?e[t]=wT(i):i&&typeof i=="object"&&i.constructor===Object?e[t]=Ei(i):e[t]=i);return e}function gl(n,e){for(;n!==null;){const i=gT(n,e);if(i){if(i.get)return Ln(i.get);if(typeof i.value=="function")return Ln(i.value)}n=pT(n)}function t(){return null}return t}const F0=Bn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Hf=Bn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","slot","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),qf=Bn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ST=Bn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ff=Bn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),CT=Bn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),G0=Bn(["#text"]),V0=Bn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Gf=Bn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Y0=Bn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),yu=Bn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),jT=xs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ET=xs(/<%[\w\W]*|[\w\W]*%>/gm),AT=xs(/\$\{[\w\W]*/gm),TT=xs(/^data-[\-\w.\u00B7-\uFFFF]+$/),kT=xs(/^aria-[\-\w]+$/),vx=xs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),OT=xs(/^(?:\w+script|data):/i),NT=xs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),yx=xs(/^html$/i),RT=xs(/^[a-z][.\w]*(-[.\w]+)+$/i);var W0=Object.freeze({__proto__:null,ARIA_ATTR:kT,ATTR_WHITESPACE:NT,CUSTOM_ELEMENT:RT,DATA_ATTR:TT,DOCTYPE_NAME:yx,ERB_EXPR:ET,IS_ALLOWED_URI:vx,IS_SCRIPT_OR_DATA:OT,MUSTACHE_EXPR:jT,TMPLIT_EXPR:AT});const _l={element:1,text:3,progressingInstruction:7,comment:8,document:9},MT=function(){return typeof window>"u"?null:window},DT=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const a="data-tt-policy-suffix";t&&t.hasAttribute(a)&&(i=t.getAttribute(a));const o="dompurify"+(i?"#"+i:"");try{return e.createPolicy(o,{createHTML(l){return l},createScriptURL(l){return l}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},X0=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function bx(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:MT();const e=ge=>bx(ge);if(e.version="3.2.7",e.removed=[],!n||!n.document||n.document.nodeType!==_l.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const i=t,a=i.currentScript,{DocumentFragment:o,HTMLTemplateElement:l,Node:u,Element:h,NodeFilter:m,NamedNodeMap:p=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:g,DOMParser:_,trustedTypes:y}=n,x=h.prototype,j=gl(x,"cloneNode"),w=gl(x,"remove"),S=gl(x,"nextSibling"),C=gl(x,"childNodes"),T=gl(x,"parentNode");if(typeof l=="function"){const ge=t.createElement("template");ge.content&&ge.content.ownerDocument&&(t=ge.content.ownerDocument)}let B,D="";const{implementation:M,createNodeIterator:$,createDocumentFragment:R,getElementsByTagName:N}=t,{importNode:z}=i;let I=X0();e.isSupported=typeof gx=="function"&&typeof T=="function"&&M&&M.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:U,ERB_EXPR:q,TMPLIT_EXPR:H,DATA_ATTR:G,ARIA_ATTR:E,IS_SCRIPT_OR_DATA:O,ATTR_WHITESPACE:F,CUSTOM_ELEMENT:Y}=W0;let{IS_ALLOWED_URI:L}=W0,X=null;const J=Pe({},[...F0,...Hf,...qf,...Ff,...G0]);let ee=null;const ne=Pe({},[...V0,...Gf,...Y0,...yu]);let W=Object.seal(_x(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),oe=null,_e=null,he=!0,be=!0,Ae=!1,fe=!0,Te=!1,Ze=!0,kt=!1,nt=!1,Ot=!1,Oe=!1,Ve=!1,vt=!1,Lt=!0,st=!1;const gn="user-content-";let lt=!0,qe=!1,Nt={},Pt=null;const It=Pe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let it=null;const wt=Pe({},["audio","video","img","source","image","track"]);let Ut=null;const Sn=Pe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Jt="http://www.w3.org/1998/Math/MathML",en="http://www.w3.org/2000/svg",yt="http://www.w3.org/1999/xhtml";let Rt=yt,rs=!1,Cs=null;const _a=Pe({},[Jt,en,yt],zf);let qs=Pe({},["mi","mo","mn","ms","mtext"]),Yn=Pe({},["annotation-xml"]);const va=Pe({},["title","style","font","a","script"]);let Yt=null;const os=["application/xhtml+xml","text/html"],js="text/html";let ct=null,Wn=null;const Xn=t.createElement("form"),Kn=function(Q){return Q instanceof RegExp||Q instanceof Function},go=function(){let Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Wn&&Wn===Q)){if((!Q||typeof Q!="object")&&(Q={}),Q=Ei(Q),Yt=os.indexOf(Q.PARSER_MEDIA_TYPE)===-1?js:Q.PARSER_MEDIA_TYPE,ct=Yt==="application/xhtml+xml"?zf:Iu,X=Ls(Q,"ALLOWED_TAGS")?Pe({},Q.ALLOWED_TAGS,ct):J,ee=Ls(Q,"ALLOWED_ATTR")?Pe({},Q.ALLOWED_ATTR,ct):ne,Cs=Ls(Q,"ALLOWED_NAMESPACES")?Pe({},Q.ALLOWED_NAMESPACES,zf):_a,Ut=Ls(Q,"ADD_URI_SAFE_ATTR")?Pe(Ei(Sn),Q.ADD_URI_SAFE_ATTR,ct):Sn,it=Ls(Q,"ADD_DATA_URI_TAGS")?Pe(Ei(wt),Q.ADD_DATA_URI_TAGS,ct):wt,Pt=Ls(Q,"FORBID_CONTENTS")?Pe({},Q.FORBID_CONTENTS,ct):It,oe=Ls(Q,"FORBID_TAGS")?Pe({},Q.FORBID_TAGS,ct):Ei({}),_e=Ls(Q,"FORBID_ATTR")?Pe({},Q.FORBID_ATTR,ct):Ei({}),Nt=Ls(Q,"USE_PROFILES")?Q.USE_PROFILES:!1,he=Q.ALLOW_ARIA_ATTR!==!1,be=Q.ALLOW_DATA_ATTR!==!1,Ae=Q.ALLOW_UNKNOWN_PROTOCOLS||!1,fe=Q.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Te=Q.SAFE_FOR_TEMPLATES||!1,Ze=Q.SAFE_FOR_XML!==!1,kt=Q.WHOLE_DOCUMENT||!1,Oe=Q.RETURN_DOM||!1,Ve=Q.RETURN_DOM_FRAGMENT||!1,vt=Q.RETURN_TRUSTED_TYPE||!1,Ot=Q.FORCE_BODY||!1,Lt=Q.SANITIZE_DOM!==!1,st=Q.SANITIZE_NAMED_PROPS||!1,lt=Q.KEEP_CONTENT!==!1,qe=Q.IN_PLACE||!1,L=Q.ALLOWED_URI_REGEXP||vx,Rt=Q.NAMESPACE||yt,qs=Q.MATHML_TEXT_INTEGRATION_POINTS||qs,Yn=Q.HTML_INTEGRATION_POINTS||Yn,W=Q.CUSTOM_ELEMENT_HANDLING||{},Q.CUSTOM_ELEMENT_HANDLING&&Kn(Q.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=Q.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Q.CUSTOM_ELEMENT_HANDLING&&Kn(Q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=Q.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Q.CUSTOM_ELEMENT_HANDLING&&typeof Q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(W.allowCustomizedBuiltInElements=Q.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Te&&(be=!1),Ve&&(Oe=!0),Nt&&(X=Pe({},G0),ee=[],Nt.html===!0&&(Pe(X,F0),Pe(ee,V0)),Nt.svg===!0&&(Pe(X,Hf),Pe(ee,Gf),Pe(ee,yu)),Nt.svgFilters===!0&&(Pe(X,qf),Pe(ee,Gf),Pe(ee,yu)),Nt.mathMl===!0&&(Pe(X,Ff),Pe(ee,Y0),Pe(ee,yu))),Q.ADD_TAGS&&(X===J&&(X=Ei(X)),Pe(X,Q.ADD_TAGS,ct)),Q.ADD_ATTR&&(ee===ne&&(ee=Ei(ee)),Pe(ee,Q.ADD_ATTR,ct)),Q.ADD_URI_SAFE_ATTR&&Pe(Ut,Q.ADD_URI_SAFE_ATTR,ct),Q.FORBID_CONTENTS&&(Pt===It&&(Pt=Ei(Pt)),Pe(Pt,Q.FORBID_CONTENTS,ct)),lt&&(X["#text"]=!0),kt&&Pe(X,["html","head","body"]),X.table&&(Pe(X,["tbody"]),delete oe.tbody),Q.TRUSTED_TYPES_POLICY){if(typeof Q.TRUSTED_TYPES_POLICY.createHTML!="function")throw pl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Q.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw pl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');B=Q.TRUSTED_TYPES_POLICY,D=B.createHTML("")}else B===void 0&&(B=DT(y,a)),B!==null&&typeof D=="string"&&(D=B.createHTML(""));Bn&&Bn(Q),Wn=Q}},Es=Pe({},[...Hf,...qf,...ST]),tn=Pe({},[...Ff,...CT]),Cn=function(Q){let de=T(Q);(!de||!de.tagName)&&(de={namespaceURI:Rt,tagName:"template"});const me=Iu(Q.tagName),mt=Iu(de.tagName);return Cs[Q.namespaceURI]?Q.namespaceURI===en?de.namespaceURI===yt?me==="svg":de.namespaceURI===Jt?me==="svg"&&(mt==="annotation-xml"||qs[mt]):!!Es[me]:Q.namespaceURI===Jt?de.namespaceURI===yt?me==="math":de.namespaceURI===en?me==="math"&&Yn[mt]:!!tn[me]:Q.namespaceURI===yt?de.namespaceURI===en&&!Yn[mt]||de.namespaceURI===Jt&&!qs[mt]?!1:!tn[me]&&(va[me]||!Es[me]):!!(Yt==="application/xhtml+xml"&&Cs[Q.namespaceURI]):!1},_n=function(Q){fl(e.removed,{element:Q});try{T(Q).removeChild(Q)}catch{w(Q)}},As=function(Q,de){try{fl(e.removed,{attribute:de.getAttributeNode(Q),from:de})}catch{fl(e.removed,{attribute:null,from:de})}if(de.removeAttribute(Q),Q==="is")if(Oe||Ve)try{_n(de)}catch{}else try{de.setAttribute(Q,"")}catch{}},nc=function(Q){let de=null,me=null;if(Ot)Q="<remove></remove>"+Q;else{const Et=$f(Q,/^[\r\n\t ]+/);me=Et&&Et[0]}Yt==="application/xhtml+xml"&&Rt===yt&&(Q='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Q+"</body></html>");const mt=B?B.createHTML(Q):Q;if(Rt===yt)try{de=new _().parseFromString(mt,Yt)}catch{}if(!de||!de.documentElement){de=M.createDocument(Rt,"template",null);try{de.documentElement.innerHTML=rs?D:mt}catch{}}const nn=de.body||de.documentElement;return Q&&me&&nn.insertBefore(t.createTextNode(me),nn.childNodes[0]||null),Rt===yt?N.call(de,kt?"html":"body")[0]:kt?de.documentElement:nn},sc=function(Q){return $.call(Q.ownerDocument||Q,Q,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT|m.SHOW_PROCESSING_INSTRUCTION|m.SHOW_CDATA_SECTION,null)},nr=function(Q){return Q instanceof g&&(typeof Q.nodeName!="string"||typeof Q.textContent!="string"||typeof Q.removeChild!="function"||!(Q.attributes instanceof p)||typeof Q.removeAttribute!="function"||typeof Q.setAttribute!="function"||typeof Q.namespaceURI!="string"||typeof Q.insertBefore!="function"||typeof Q.hasChildNodes!="function")},Bi=function(Q){return typeof u=="function"&&Q instanceof u};function Qn(ge,Q,de){vu(ge,me=>{me.call(e,Q,de,Wn)})}const ii=function(Q){let de=null;if(Qn(I.beforeSanitizeElements,Q,null),nr(Q))return _n(Q),!0;const me=ct(Q.nodeName);if(Qn(I.uponSanitizeElement,Q,{tagName:me,allowedTags:X}),Ze&&Q.hasChildNodes()&&!Bi(Q.firstElementChild)&&Mn(/<[/\w!]/g,Q.innerHTML)&&Mn(/<[/\w!]/g,Q.textContent)||Q.nodeType===_l.progressingInstruction||Ze&&Q.nodeType===_l.comment&&Mn(/<[/\w]/g,Q.data))return _n(Q),!0;if(!X[me]||oe[me]){if(!oe[me]&&Li(me)&&(W.tagNameCheck instanceof RegExp&&Mn(W.tagNameCheck,me)||W.tagNameCheck instanceof Function&&W.tagNameCheck(me)))return!1;if(lt&&!Pt[me]){const mt=T(Q)||Q.parentNode,nn=C(Q)||Q.childNodes;if(nn&&mt){const Et=nn.length;for(let jn=Et-1;jn>=0;--jn){const Pn=j(nn[jn],!0);Pn.__removalCount=(Q.__removalCount||0)+1,mt.insertBefore(Pn,S(Q))}}}return _n(Q),!0}return Q instanceof h&&!Cn(Q)||(me==="noscript"||me==="noembed"||me==="noframes")&&Mn(/<\/no(script|embed|frames)/i,Q.innerHTML)?(_n(Q),!0):(Te&&Q.nodeType===_l.text&&(de=Q.textContent,vu([U,q,H],mt=>{de=ml(de,mt," ")}),Q.textContent!==de&&(fl(e.removed,{element:Q.cloneNode()}),Q.textContent=de)),Qn(I.afterSanitizeElements,Q,null),!1)},ai=function(Q,de,me){if(Lt&&(de==="id"||de==="name")&&(me in t||me in Xn))return!1;if(!(be&&!_e[de]&&Mn(G,de))){if(!(he&&Mn(E,de))){if(!ee[de]||_e[de]){if(!(Li(Q)&&(W.tagNameCheck instanceof RegExp&&Mn(W.tagNameCheck,Q)||W.tagNameCheck instanceof Function&&W.tagNameCheck(Q))&&(W.attributeNameCheck instanceof RegExp&&Mn(W.attributeNameCheck,de)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(de,Q))||de==="is"&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&Mn(W.tagNameCheck,me)||W.tagNameCheck instanceof Function&&W.tagNameCheck(me))))return!1}else if(!Ut[de]){if(!Mn(L,ml(me,F,""))){if(!((de==="src"||de==="xlink:href"||de==="href")&&Q!=="script"&&yT(me,"data:")===0&&it[Q])){if(!(Ae&&!Mn(O,ml(me,F,"")))){if(me)return!1}}}}}}return!0},Li=function(Q){return Q!=="annotation-xml"&&$f(Q,Y)},ri=function(Q){Qn(I.beforeSanitizeAttributes,Q,null);const{attributes:de}=Q;if(!de||nr(Q))return;const me={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ee,forceKeepAttr:void 0};let mt=de.length;for(;mt--;){const nn=de[mt],{name:Et,namespaceURI:jn,value:Pn}=nn,Ts=ct(Et),Zn=Pn;let zt=Et==="value"?Zn:bT(Zn);if(me.attrName=Ts,me.attrValue=zt,me.keepAttr=!0,me.forceKeepAttr=void 0,Qn(I.uponSanitizeAttribute,Q,me),zt=me.attrValue,st&&(Ts==="id"||Ts==="name")&&(As(Et,Q),zt=gn+zt),Ze&&Mn(/((--!?|])>)|<\/(style|title|textarea)/i,zt)){As(Et,Q);continue}if(Ts==="attributename"&&$f(zt,"href")){As(Et,Q);continue}if(me.forceKeepAttr)continue;if(!me.keepAttr){As(Et,Q);continue}if(!fe&&Mn(/\/>/i,zt)){As(Et,Q);continue}Te&&vu([U,q,H],oi=>{zt=ml(zt,oi," ")});const _o=ct(Q.nodeName);if(!ai(_o,Ts,zt)){As(Et,Q);continue}if(B&&typeof y=="object"&&typeof y.getAttributeType=="function"&&!jn)switch(y.getAttributeType(_o,Ts)){case"TrustedHTML":{zt=B.createHTML(zt);break}case"TrustedScriptURL":{zt=B.createScriptURL(zt);break}}if(zt!==Zn)try{jn?Q.setAttributeNS(jn,Et,zt):Q.setAttribute(Et,zt),nr(Q)?_n(Q):q0(e.removed)}catch{As(Et,Q)}}Qn(I.afterSanitizeAttributes,Q,null)},Wt=function ge(Q){let de=null;const me=sc(Q);for(Qn(I.beforeSanitizeShadowDOM,Q,null);de=me.nextNode();)Qn(I.uponSanitizeShadowNode,de,null),ii(de),ri(de),de.content instanceof o&&ge(de.content);Qn(I.afterSanitizeShadowDOM,Q,null)};return e.sanitize=function(ge){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},de=null,me=null,mt=null,nn=null;if(rs=!ge,rs&&(ge="<!-->"),typeof ge!="string"&&!Bi(ge))if(typeof ge.toString=="function"){if(ge=ge.toString(),typeof ge!="string")throw pl("dirty is not a string, aborting")}else throw pl("toString is not a function");if(!e.isSupported)return ge;if(nt||go(Q),e.removed=[],typeof ge=="string"&&(qe=!1),qe){if(ge.nodeName){const Pn=ct(ge.nodeName);if(!X[Pn]||oe[Pn])throw pl("root node is forbidden and cannot be sanitized in-place")}}else if(ge instanceof u)de=nc("<!---->"),me=de.ownerDocument.importNode(ge,!0),me.nodeType===_l.element&&me.nodeName==="BODY"||me.nodeName==="HTML"?de=me:de.appendChild(me);else{if(!Oe&&!Te&&!kt&&ge.indexOf("<")===-1)return B&&vt?B.createHTML(ge):ge;if(de=nc(ge),!de)return Oe?null:vt?D:""}de&&Ot&&_n(de.firstChild);const Et=sc(qe?ge:de);for(;mt=Et.nextNode();)ii(mt),ri(mt),mt.content instanceof o&&Wt(mt.content);if(qe)return ge;if(Oe){if(Ve)for(nn=R.call(de.ownerDocument);de.firstChild;)nn.appendChild(de.firstChild);else nn=de;return(ee.shadowroot||ee.shadowrootmode)&&(nn=z.call(i,nn,!0)),nn}let jn=kt?de.outerHTML:de.innerHTML;return kt&&X["!doctype"]&&de.ownerDocument&&de.ownerDocument.doctype&&de.ownerDocument.doctype.name&&Mn(yx,de.ownerDocument.doctype.name)&&(jn="<!DOCTYPE "+de.ownerDocument.doctype.name+`>
`+jn),Te&&vu([U,q,H],Pn=>{jn=ml(jn,Pn," ")}),B&&vt?B.createHTML(jn):jn},e.setConfig=function(){let ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};go(ge),nt=!0},e.clearConfig=function(){Wn=null,nt=!1},e.isValidAttribute=function(ge,Q,de){Wn||go({});const me=ct(ge),mt=ct(Q);return ai(me,mt,de)},e.addHook=function(ge,Q){typeof Q=="function"&&fl(I[ge],Q)},e.removeHook=function(ge,Q){if(Q!==void 0){const de=_T(I[ge],Q);return de===-1?void 0:vT(I[ge],de,1)[0]}return q0(I[ge])},e.removeHooks=function(ge){I[ge]=[]},e.removeAllHooks=function(){I=X0()},e}var On=bx();function Yu({isOpen:n,onClose:e,onSave:t,address:i=null,customerId:a,showSaveOption:o=!1}){const{showAlert:l}=ft(),[u,h]=A.useState({label:"",address_reference:"",coords:null}),[m,p]=A.useState(!0),[g,_]=A.useState(!1);A.useEffect(()=>{i?(h({label:i.label||"",address_reference:i.address_reference||"",coords:{lat:i.latitude,lng:i.longitude}}),p(!0)):(h({label:"Casa",address_reference:"",coords:null}),p(!0))},[i,n]);const y=A.useCallback(S=>{h(C=>({...C,coords:S}))},[]),x=S=>{const{name:C,value:T}=S.target;h(B=>({...B,[C]:T}))},j=async S=>{if(S.preventDefault(),!u.coords){l("Por favor, selecciona una ubicacin en el mapa.");return}_(!0);try{const C={customer_id:a,label:On.sanitize(u.label),address_reference:On.sanitize(u.address_reference),latitude:u.coords.lat,longitude:u.coords.lng};await t(C,o?m:!0,i?.id),e()}catch(C){l(`Error al procesar la direccin: ${C.message}`)}finally{_(!1)}};if(!n)return null;const w=i?{lat:i.latitude,lng:i.longitude}:null;return d.jsx("div",{className:ra.modalOverlay,children:d.jsxs("div",{className:ra.modalContent,children:[d.jsx("button",{onClick:e,className:ra.closeButton,children:""}),d.jsx("h2",{children:i?"Editar Direccin":"Nueva Direccin"}),d.jsxs("div",{className:ra.contentWrapper,children:[d.jsx("div",{className:ra.mapContainer,children:d.jsx(tp,{children:d.jsx(ep,{onLocationSelect:y,initialPosition:w})})}),d.jsxs("form",{onSubmit:j,className:ra.form,children:[d.jsx("label",{htmlFor:"label",children:"Etiqueta (ej: Casa, Oficina):"}),d.jsx("input",{id:"label",name:"label",type:"text",value:u.label,onChange:x,required:!0}),d.jsx("label",{htmlFor:"address_reference",children:"Referencia (ej: portn rojo):"}),d.jsx("input",{id:"address_reference",name:"address_reference",type:"text",value:u.address_reference,onChange:x}),o&&!i&&d.jsxs("div",{className:ra.saveOption,children:[d.jsx("input",{type:"checkbox",id:"shouldSave",checked:m,onChange:S=>p(S.target.checked)}),d.jsx("label",{htmlFor:"shouldSave",children:"Guardar esta direccin para futuros pedidos."})]}),d.jsx("button",{type:"submit",disabled:g,className:ra.saveButton,children:g?"Procesando...":i?"Guardar Cambios":"Usar esta Direccin"})]})]})]})})}const BT=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),d.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),LT=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),PT=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M12 20h9M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"})});function xx({phone:n,onClose:e,mode:t="checkout"}){const{showAlert:i}=ft(),{cartItems:a,total:o,subtotal:l,discount:u,clearCart:h,toggleCart:m}=Ja(),{customer:p,addresses:g,refetch:_}=er(),{isOpen:y}=mx(),[x,j]=A.useState(null),[w,S]=A.useState(!1),[C,T]=A.useState(!0),[B,D]=A.useState(!1),[M,$]=A.useState(null),[R,N]=A.useState(null),[z,I]=A.useState(""),[U,q]=A.useState(!1),[H,G]=A.useState(null),[E,O]=A.useState({date:"",hour:"00",minute:"00",period:"pm"});A.useEffect(()=>{if(U){const{date:W,hour:oe,minute:_e,period:he}=E;if(!W){G(null);return}let be=parseInt(oe,10);he==="pm"&&be<12&&(be+=12),he==="am"&&be===12&&(be=0);const Ae=new Date(`${W}T00:00:00`);Ae.setHours(be,parseInt(_e,10)),G(Ae.toISOString())}else G(null)},[U,E]);const F=W=>{if(q(W),W&&!E.date){const oe=new Date;oe.getHours()>=19&&oe.setDate(oe.getDate()+1);const _e=oe.toISOString().split("T")[0];O(he=>({...he,date:_e}))}};A.useEffect(()=>{if(p&&g){if(g.length>0){if(R){const W=g.find(oe=>oe.id===R);W&&(j(W),N(null))}else if(!x){const W=g.find(oe=>oe.is_default)||g[0];j(W)}}T(!1)}else!p&&n&&T(!1)},[p,g,n,R,x]);const Y=W=>{$(W),D(!0)},L=async(W,oe,_e)=>{if(oe){let he;if(_e?he=await ae.from("customer_addresses").update(W).eq("id",_e).select().single():he=await ae.from("customer_addresses").insert({...W,customer_id:p.id}).select().single(),he.error)throw new Error(he.error.message);_(),j(he.data),i(`Direccin ${_e?"actualizada":"guardada"} con xito.`)}else{const he={id:`temp_${Date.now()}`,...W,isTemporary:!0};j(he),i("Direccin temporal seleccionada para este pedido.")}D(!1),$(null)},X=async W=>{if(W.preventDefault(),!z.trim()){i("Por favor, ingresa tu nombre.");return}S(!0);try{const{error:oe}=await ae.from("customers").insert({name:z,phone:n});if(oe)throw oe;i("Bienvenido! Tu perfil ha sido creado."),_()}catch(oe){i(`Error al crear tu perfil: ${oe.message}`)}finally{S(!1)}},J=async()=>{if(!y){i("Lo sentimos, el negocio est cerrado y no podemos procesar tu pedido ahora.");return}if(!x){i("Por favor, selecciona o aade una direccin de entrega.");return}if(U&&!H){i("Por favor, selecciona una fecha y hora vlidas para programar tu pedido.");return}S(!0);try{const{data:W,error:oe}=await ae.from("orders").insert({customer_id:p.id,total_amount:o,status:"pendiente",scheduled_for:H}).select().single();if(oe)throw oe;const _e=a.map(Ze=>({order_id:W.id,product_id:Ze.id,quantity:Ze.quantity,price:Ze.price})),{error:he}=await ae.from("order_items").insert(_e);if(he)throw he;if(u&&u.details.is_single_use){const{error:Ze}=await ae.rpc("record_discount_usage_and_deactivate",{p_customer_id:p.id,p_discount_id:u.details.id});Ze&&console.error("Error al registrar y desactivar el descuento:",Ze)}const be=`https://www.google.com/maps/search/?api=1&query=${x?.latitude},${x?.longitude}`;let Ae=`Hola!  Pedido *${W.order_code}*.

*Mi Pedido:*
`;a.forEach(Ze=>{Ae+=`- ${Ze.quantity}x ${Ze.name}
`}),Ae+=`
*Total: $${o.toFixed(2)}*
`,H&&(Ae+=`
*Programado para:*
${new Date(H).toLocaleString("es-MX",{dateStyle:"full",timeStyle:"short"})}
`),Ae+=`
*Entregar a:*
*Nombre:* ${p?.name}
*Ubicacin:* ${be}
`,x?.address_reference&&(Ae+=`*Referencia:* ${x.address_reference}`);const Te=`https://api.whatsapp.com/send?phone=9633870587&text=${encodeURIComponent(Ae)}`;window.open(Te,"_blank"),i("Pedido guardado! Sers redirigido a WhatsApp para confirmar."),h(),m(),e(),_()}catch(W){console.error("Error al procesar el pedido:",W),i(`Hubo un error al crear tu pedido: ${W.message}`)}finally{S(!1)}},ee=W=>{const{name:oe,value:_e}=W.target;O(he=>({...he,[oe]:_e}))};if(C)return d.jsx("div",{className:ke.modalOverlay,children:d.jsx("div",{className:ke.modalContent,children:d.jsx("div",{className:ke.spinner})})});if((t==="profile"||!p)&&n&&!p)return d.jsx("div",{className:ke.modalOverlay,onClick:e,children:d.jsxs("div",{className:ke.modalContent,onClick:W=>W.stopPropagation(),children:[d.jsxs("div",{className:ke.header,children:[d.jsx("h3",{children:"Bienvenido! Completa tu perfil"}),d.jsx("button",{onClick:e,className:ke.closeButton,children:""})]}),d.jsxs("form",{onSubmit:X,className:ke.scrollableContent,children:[d.jsx("p",{children:"Parece que eres nuevo. Por favor, ingresa tu nombre para crear tu cuenta."}),d.jsx("input",{type:"text",placeholder:"Tu nombre completo",value:z,onChange:W=>I(W.target.value),required:!0}),d.jsx("button",{type:"submit",disabled:w,className:ke.confirmButton,children:w?"Creando...":"Crear y Continuar"})]})]})});if(p&&g.length===0)return B||Y(null),d.jsxs(d.Fragment,{children:[d.jsx("div",{className:ke.modalOverlay,onClick:e,children:d.jsxs("div",{className:ke.modalContent,onClick:W=>W.stopPropagation(),children:[d.jsxs("div",{className:ke.header,children:[d.jsx("h3",{children:"Aade tu primera direccin"}),d.jsx("button",{onClick:e,className:ke.closeButton,children:""})]}),d.jsx("div",{className:ke.scrollableContent,children:d.jsx("p",{children:"Para continuar, por favor, aade una direccin de entrega."})})]})}),B&&d.jsx(Yu,{isOpen:B,onClose:()=>{D(!1),$(null),e()},onSave:L,address:M,customerId:p?.id,showSaveOption:!1})]});const ne=x?{lat:x.latitude,lng:x.longitude}:null;return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:ke.modalOverlay,onClick:e,children:d.jsxs("div",{className:ke.modalContent,onClick:W=>W.stopPropagation(),children:[d.jsxs("div",{className:ke.header,children:[d.jsx("h3",{children:"Confirmar Pedido"}),d.jsx("button",{onClick:e,className:ke.closeButton,children:""})]}),ne&&d.jsxs("div",{className:ke.mapDisplay,children:[d.jsx(tp,{children:d.jsx(ep,{initialPosition:ne,isDraggable:!1})},`${x?.id}-${x?.latitude}`),d.jsx("div",{className:ke.mapOverlay})]}),d.jsxs("div",{className:ke.scrollableContent,children:[d.jsxs("div",{className:ke.detailsGroup,children:[d.jsxs("div",{className:ke.detailItem,children:[d.jsx(BT,{}),d.jsxs("div",{children:[d.jsx("strong",{children:x?.label}),d.jsx("p",{children:x?.address_reference||"Sin referencia"})]})]}),d.jsxs("div",{className:ke.detailItem,children:[d.jsx(LT,{}),d.jsxs("div",{children:[d.jsx("strong",{children:"Recibe:"}),d.jsx("p",{children:p?.name||"..."})]})]})]}),d.jsxs("div",{className:ke.addressActions,children:[g.length>1&&d.jsx("select",{className:ke.addressSelector,onChange:W=>j(g.find(oe=>oe.id===W.target.value)),value:x?.id||"",children:g.map(W=>d.jsxs("option",{value:W.id,children:[W.label," - ",W.address_reference?W.address_reference.substring(0,20)+"...":""]},W.id))}),d.jsxs("button",{onClick:()=>Y(x),className:ke.editAddressButton,children:[d.jsx(PT,{})," Editar"]}),d.jsx("button",{onClick:()=>Y(null),className:ke.addNewAddressButton,children:"+ Aadir Nueva"})]}),d.jsxs("div",{className:ke.detailsGroup,children:[d.jsx("h4",{children:"Cundo lo quieres recibir?"}),d.jsxs("div",{className:ke.deliveryOptions,children:[d.jsx("button",{className:U?"":ke.activeOption,onClick:()=>F(!1),children:"Lo antes posible"}),d.jsx("button",{className:U?ke.activeOption:"",onClick:()=>F(!0),children:"Programar"})]}),U&&d.jsxs("div",{className:ke.schedulePickerContainer,children:[d.jsx("input",{type:"date",name:"date",className:ke.datePicker,value:E.date,onChange:ee,min:new Date().toISOString().split("T")[0]}),d.jsxs("div",{className:ke.timePickerContainer,children:[d.jsx("select",{name:"hour",value:E.hour,onChange:ee,children:Array.from({length:12},(W,oe)=>oe+1).map(W=>d.jsx("option",{value:String(W).padStart(2,"0"),children:String(W).padStart(2,"0")},W))}),d.jsx("span",{children:":"}),d.jsxs("select",{name:"minute",value:E.minute,onChange:ee,children:[d.jsx("option",{value:"00",children:"00"}),d.jsx("option",{value:"15",children:"15"}),d.jsx("option",{value:"30",children:"30"}),d.jsx("option",{value:"45",children:"45"})]}),d.jsxs("select",{name:"period",value:E.period,onChange:ee,children:[d.jsx("option",{value:"am",children:"AM"}),d.jsx("option",{value:"pm",children:"PM"})]})]})]})]}),d.jsxs("div",{className:ke.summary,children:[d.jsx("h4",{children:"Resumen del pedido"}),d.jsxs("div",{className:ke.summaryLine,children:[d.jsx("span",{children:"Subtotal"})," ",d.jsxs("span",{children:["$",l.toFixed(2)]})]}),u&&d.jsxs("div",{className:`${ke.summaryLine} ${ke.discount}`,children:[d.jsxs("span",{children:["Descuento (",u.code,")"]}),d.jsxs("span",{children:["-$",u.amount.toFixed(2)]})]}),d.jsxs("div",{className:`${ke.summaryLine} ${ke.total}`,children:[d.jsx("strong",{children:"Total"})," ",d.jsxs("strong",{children:["$",o.toFixed(2)]})]})]})]}),d.jsx("div",{className:ke.footer,children:d.jsx("button",{onClick:J,className:ke.confirmButton,disabled:w||!y,children:w?"Procesando...":y?`Confirmar y Pagar $${(o||0).toFixed(2)}`:"Estamos Cerrados"})})]})}),B&&d.jsx(Yu,{isOpen:B,onClose:()=>{D(!1),$(null)},onSave:L,address:M,customerId:p?.id,showSaveOption:!0})]})}const wx=n=>A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"currentColor",viewBox:"0 0 256 256",...n},A.createElement("path",{d:"M230.14,58.87A8,8,0,0,0,224,56H62.68L56.6,22.57A8,8,0,0,0,48.73,16H24a8,8,0,0,0,0,16h18L67.56,172.29a24,24,0,0,0,5.33,11.27,28,28,0,1,0,44.4,8.44h45.42A27.75,27.75,0,0,0,160,204a28,28,0,1,0,28-28H91.17a8,8,0,0,1-7.87-6.57L80.13,152h116a24,24,0,0,0,23.61-19.71l12.16-66.86A8,8,0,0,0,230.14,58.87ZM104,204a12,12,0,1,1-12-12A12,12,0,0,1,104,204Zm96,0a12,12,0,1,1-12-12A12,12,0,0,1,200,204Zm4-74.57A8,8,0,0,1,196.1,136H77.22L65.59,72H214.41Z"})),IT="_image_1pji1_1",UT="_placeholder_1pji1_27",K0={image:IT,placeholder:UT},Vf="https://placehold.co/300x200?text=Imagen+no+disponible";function bs({src:n,alt:e,className:t,...i}){const[a,o]=A.useState(n||Vf),[l,u]=A.useState(!n),[h,m]=A.useState(0);A.useEffect(()=>{o(n||Vf),u(!n),m(0)},[n]);const p=()=>{if(h===0){const g=`${n}?t=${new Date().getTime()}`;o(g),m(_=>_+1)}else u(!0),o(Vf)};return l?d.jsx("div",{className:`${K0.placeholder} ${t}`,...i,children:d.jsx("span",{children:e})}):d.jsx("img",{src:a,alt:e,className:`${K0.image} ${t}`,onError:p,loading:"lazy",...i})}const zT=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("polyline",{points:"3 6 5 6 21 6"}),d.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),d.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),d.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]});function $T(){const{showAlert:n}=ft(),{cartItems:e,updateQuantity:t,removeFromCart:i,subtotal:a,total:o,discount:l,applyDiscount:u,removeDiscount:h,isCartOpen:m,toggleCart:p,cartNotification:g,clearCartNotification:_}=Ja(),{phone:y,setPhoneModalOpen:x}=Hs(),{customer:j}=er(),[w,S]=A.useState(!1),[C,T]=A.useState(""),[B,D]=A.useState(""),[M,$]=A.useState(!1),[R,N]=A.useState(!1);A.useEffect(()=>{if(m){const H=setTimeout(()=>$(!0),10);return()=>clearTimeout(H)}else N(!1)},[m]);const z=A.useCallback(()=>{$(!1),setTimeout(p,600)},[p]),I=async()=>{if(!C.trim())return;const H=await u(C,j?.id);D(H.message),setTimeout(()=>D(""),3e3)},U=()=>{h(),T(""),D("")},q=()=>{if(e.length===0){n("Tu carrito est vaco.");return}if(e.some(H=>!H.quantity||H.quantity<=0)){n("Por favor, revisa que todos los productos tengan una cantidad vlida.");return}if(!y){x(()=>{S(!0)});return}S(!0)};return!m&&!M?null:d.jsxs(d.Fragment,{children:[d.jsx("div",{className:He.overlay,onClick:z}),d.jsxs("div",{className:`${He.cartSidebar} ${m&&M?He.open:""}`,children:[d.jsxs("div",{className:He.cartHeader,children:[d.jsxs("h2",{className:He.cartTitle,children:[d.jsx(wx,{})," Tu Pedido"]}),d.jsx("button",{onClick:z,className:He.closeButton,children:""})]}),g&&d.jsxs("div",{className:He.cartNotification,children:[d.jsx("p",{children:g}),d.jsx("button",{onClick:_,children:""})]}),e.length===0?d.jsx("div",{className:He.cartBody,children:d.jsx("p",{className:He.emptyMessage,children:"Tu carrito est vaco. Aade unas alitas!"})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:He.cartBody,children:d.jsx("div",{className:He.cartItemsList,children:e.map(H=>d.jsxs("div",{className:He.cartItem,children:[d.jsx(bs,{src:H.image_url,alt:H.name}),d.jsxs("div",{className:He.itemInfo,children:[d.jsx("span",{className:He.itemName,children:H.name}),d.jsxs("span",{className:He.itemPrice,children:["$",H.price.toFixed(2)]})]}),d.jsxs("div",{className:He.itemActions,children:[H.quantity===1?d.jsx("button",{onClick:()=>i(H.id),className:`${He.quantityButton} ${He.deleteButton}`,"aria-label":"Eliminar producto",children:d.jsx(zT,{})}):d.jsx("button",{onClick:()=>t(H.id,H.quantity-1),className:He.quantityButton,"aria-label":"Disminuir cantidad",children:"-"}),d.jsx("span",{className:He.quantityDisplay,children:H.quantity}),d.jsx("button",{onClick:()=>t(H.id,H.quantity+1),className:He.quantityButton,"aria-label":"Aumentar cantidad",children:"+"})]})]},H.id))})}),d.jsxs("div",{className:He.cartFooter,children:[d.jsxs("div",{className:He.discountAccordion,children:[!l&&d.jsx("button",{onClick:()=>N(!R),className:He.discountToggleButton,children:"Tienes un codigo? click aqu"}),d.jsx("div",{className:`${He.discountAccordionContent} ${R||l?He.open:""}`,children:!l&&d.jsxs("div",{className:He.discountSection,children:[d.jsx("input",{type:"text",placeholder:"Cdigo de descuento",value:C,onChange:H=>T(H.target.value),className:He.discountInput}),d.jsx("button",{onClick:I,className:He.applyButton,children:"Aplicar"})]})})]}),B&&d.jsx("p",{className:He.discountMessage,children:B}),d.jsxs("div",{className:He.totals,children:[d.jsxs("p",{children:["Subtotal: ",d.jsxs("span",{children:["$",a.toFixed(2)]})]}),l&&d.jsxs("p",{className:He.discountApplied,children:["Descuento (",l.code,"): ",d.jsxs("span",{children:["-$",l.amount.toFixed(2)]}),d.jsx("button",{onClick:U,children:"Quitar"})]}),d.jsxs("h3",{className:He.total,children:["Total: ",d.jsxs("span",{children:["$",o.toFixed(2)]})]})]}),d.jsx("button",{onClick:q,className:He.whatsappButton,children:y?"Continuar con mi Pedido":"Ingresa tu nmero para continuar"})]})]})]}),w&&d.jsx(xx,{phone:y,onClose:()=>S(!1)})]})}const Sx=A.createContext(),HT=()=>A.useContext(Sx),qT=({children:n})=>{const[e,t]=A.useState({}),[i,a]=A.useState(!0);A.useEffect(()=>{(async()=>{const{data:h,error:m}=await ae.from("settings").select("*");if(m)console.error("Error fetching settings:",m);else{const p=h.reduce((g,_)=>(g[_.key]=_.value,g),{});t(p)}a(!1)})()},[]);const l={settings:e,loading:i,getSetting:u=>e[u]||null};return d.jsx(Sx.Provider,{value:l,children:n})},FT="_overlay_1aq8j_1",GT="_modalContent_1aq8j_25",VT="_phoneInput_1aq8j_73",YT="_nameInput_1aq8j_73",WT="_error_1aq8j_95",XT="_buttons_1aq8j_105",KT="_saveButton_1aq8j_109",QT="_laterButton_1aq8j_121",ZT="_terms_1aq8j_135",JT="_newUserSection_1aq8j_149",ek="_newUserMessage_1aq8j_161",Rs={overlay:FT,modalContent:GT,phoneInput:VT,nameInput:YT,error:WT,buttons:XT,saveButton:KT,laterButton:QT,terms:ZT,newUserSection:JT,newUserMessage:ek};function tk(){const{isPhoneModalOpen:n,setPhoneModalOpen:e,checkAndLogin:t,registerNewCustomer:i,acceptTerms:a,customer:o,savePhoneAndContinue:l}=Hs(),{getSetting:u}=HT(),{showAlert:h}=ft(),[m,p]=A.useState(""),[g,_]=A.useState(""),[y,x]=A.useState(!1),[j,w]=A.useState(""),[S,C]=A.useState(!1),[T,B]=A.useState(!1),[D,M]=A.useState("");A.useEffect(()=>{if(n){p(""),_(""),x(!1),w(""),C(!1),B(!1);const I=new URLSearchParams(window.location.search).get("ref");I&&M(I)}},[n]),A.useEffect(()=>{const z=async()=>{if(m.length===10){x(!1),B(!1);const U=await t(m);U.exists?U.accepted?l(m):B(!0):x(!0)}else x(!1),B(!1)},I=setTimeout(()=>{z()},500);return()=>clearTimeout(I)},[m,t,l]);const $=async()=>{if(w(""),!S){w("Debes aceptar los trminos y condiciones para continuar.");return}if(y){if(!g.trim()){w("Parece que eres nuevo, por favor ingresa tu nombre.");return}const z=On.sanitize(g.trim());if(await i(m,z,D)){if(D){const U=u("welcome_reward");if(U&&U.enabled){const q=U.message.replace("{CODE}",U.discount_code);h(q)}}}else w("Hubo un error al registrar tu cuenta. Intntalo de nuevo.")}else T&&(o?await a(o.id)?l(m):w("No se pudo guardar la aceptacin de los trminos."):w("Error: No se encontr la informacin del cliente."))},R=()=>{e(!1)};if(!n)return null;const N=y||T;return d.jsx("div",{className:Rs.overlay,children:d.jsxs("div",{className:Rs.modalContent,children:[d.jsx("h2",{children:"Bienvenido a ENTREALAS!"}),d.jsx("p",{children:"Ingresa tu nmero de WhatsApp para ver tus pedidos y facilitar tus compras."}),d.jsx("input",{type:"tel",value:m,onChange:z=>p(z.target.value.replace(/\D/g,"")),placeholder:"Tu nmero de WhatsApp (10 dgitos)",className:Rs.phoneInput,maxLength:"10"}),y&&d.jsxs("div",{className:Rs.newUserSection,children:[d.jsxs("p",{className:Rs.newUserMessage,children:[D?"Genial! Ests aqu por una invitacin. ":"Qu bueno tenerte por aqu! ","Parece que eres nuevo. Cmo te llamas?"]}),d.jsx("input",{type:"text",value:g,onChange:z=>_(z.target.value),placeholder:"Tu nombre completo",className:Rs.nameInput})]}),N&&d.jsxs("div",{className:Rs.terms,children:[d.jsx("input",{type:"checkbox",id:"terms",checked:S,onChange:z=>C(z.target.checked)}),d.jsxs("label",{htmlFor:"terms",children:["He ledo y acepto los ",d.jsx("a",{href:"/terminos",target:"_blank",rel:"noopener noreferrer",children:"Trminos y Condiciones"}),"."]})]}),j&&d.jsx("p",{className:Rs.error,children:j}),d.jsxs("div",{className:Rs.buttons,children:[N?d.jsx("button",{onClick:$,className:Rs.saveButton,disabled:!S,children:y?"Crear mi cuenta y continuar":"Aceptar y Continuar"}):m.length===10&&d.jsx("p",{children:"Verificando..."}),d.jsx("button",{onClick:R,className:Rs.laterButton,children:"Quizs ms tarde"})]})]})})}function nk(){const{cartItems:n,toggleCart:e}=Ja(),t=ni(),i=n.reduce((o,l)=>o+(l.quantity||0),0);return i>0&&t.pathname==="/"?d.jsx("div",{className:"floating-cart-container",children:d.jsxs("button",{className:"floating-cart-button",onClick:e,children:[d.jsx(wx,{}),d.jsx("span",{children:"Ver Carrito"}),d.jsx("span",{className:"floating-cart-badge",children:i})]})}):null}const sk="_menuContainer_132dc_1",ik="_avatarButton_132dc_9",ak="_dropdown_132dc_47",rk="_links_132dc_85",ok="_dropdownLink_132dc_95",lk="_prompt_132dc_131",ck="_actionButton_132dc_161",wi={menuContainer:sk,avatarButton:ik,dropdown:ak,links:rk,dropdownLink:ok,prompt:lk,actionButton:ck},uk=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),d.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Q0=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),dk=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),d.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),hk=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})});function fk(){const[n,e]=A.useState(!1),{phone:t,setPhoneModalOpen:i,setCheckoutModalOpen:a}=Hs(),{customer:o}=er(),l=A.useRef(null),u=ni(),h=o?.name?o.name.charAt(0).toUpperCase():"",m=()=>e(!n);A.useEffect(()=>{const g=_=>{l.current&&!l.current.contains(_.target)&&e(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[l]);const p=()=>{if(!t)return d.jsxs("div",{className:wi.prompt,children:[d.jsx("h4",{children:"Identifcate"}),d.jsx("p",{children:"Ingresa tu nmero para ver tu perfil y pedidos."}),d.jsx("button",{onClick:()=>{i(!0),e(!1)},className:wi.actionButton,children:"Ingresar Nmero"})]});if(!o)return d.jsxs("div",{className:wi.prompt,children:[d.jsx("h4",{children:"Bienvenido!"}),d.jsx("p",{children:"Parece que eres nuevo. Completa tu perfil para una mejor experiencia."}),d.jsx("button",{onClick:()=>{a(!0,"profile"),e(!1)},className:wi.actionButton,children:"Completar Perfil"})]});const g=[{to:"/mi-perfil",icon:d.jsx(Q0,{}),label:"Mi Perfil",replace:!0},{to:"/mi-actividad",icon:d.jsx(hk,{}),label:"Mi Actividad",replace:!0},{to:"/mis-pedidos",icon:d.jsx(dk,{}),label:"Mis Pedidos",replace:!0}],_=g.some(x=>x.to===u.pathname);let y=g.filter(x=>x.to!==u.pathname);return _&&y.unshift({to:"/",icon:d.jsx(uk,{}),label:"Inicio",replace:!1}),d.jsx("nav",{className:wi.links,children:y.map(x=>d.jsxs(eo,{to:x.to,replace:x.replace,className:wi.dropdownLink,onClick:()=>e(!1),children:[x.icon,d.jsx("span",{children:x.label})]},x.to))})};return d.jsxs("div",{className:wi.menuContainer,ref:l,children:[d.jsx("button",{onClick:m,className:wi.avatarButton,children:h?d.jsx("span",{children:h}):d.jsx(Q0,{})}),n&&d.jsx("div",{className:wi.dropdown,children:p()})]})}const mk=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),d.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),pk=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),gk=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),d.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),_k=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),vk=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"9",cy:"21",r:"1"}),d.jsx("circle",{cx:"20",cy:"21",r:"1"}),d.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]});function yk(){const{toast:n,cartItems:e,toggleCart:t}=Ja(),{notification:i}=Jl(),{isCheckoutModalOpen:a,setCheckoutModalOpen:o,phone:l,checkoutMode:u,isFirstAddressRequired:h,setIsFirstAddressRequired:m}=Hs(),{customer:p,refetch:g}=er(),[_,y]=A.useState(!1),x=e.reduce((w,S)=>w+(S.quantity||0),0);A.useEffect(()=>{h&&p&&(y(!0),m(!1))},[h,p,m]);const j=async w=>{const{error:S}=await ae.from("customer_addresses").insert({...w,customer_id:p.id});S?console.error(S):(g(),y(!1))};return d.jsxs("div",{className:"client-layout",children:[d.jsx(tk,{}),d.jsx(px,{}),i&&d.jsx("div",{className:"update-toast",children:i}),n.message&&d.jsx("div",{className:"toast-notification",children:n.message},n.key),_&&p&&d.jsx(Yu,{isOpen:_,onClose:()=>y(!1),onSave:j,address:null,customerId:p.id}),d.jsx("header",{className:"client-header",children:d.jsxs("div",{className:"header-content-container",children:[d.jsx(qn,{to:"/",className:"logo",children:d.jsx("h1",{children:"ENTREALAS"})}),d.jsxs("nav",{className:"desktop-nav",children:[d.jsxs("button",{onClick:t,className:"desktop-cart-button",children:[d.jsx(vk,{}),d.jsx("span",{children:"Carrito"}),x>0&&d.jsx("span",{className:"desktop-cart-badge",children:x})]}),d.jsx(fk,{})]})]})}),d.jsx($T,{}),a&&d.jsx(xx,{phone:l,onClose:()=>o(!1),mode:u}),d.jsx(nk,{}),d.jsx("main",{className:"client-main",children:d.jsx("div",{className:"client-content-container",children:d.jsx(Vm,{})})}),d.jsxs("footer",{className:"bottom-nav",children:[d.jsxs(eo,{to:"/",end:!0,className:({isActive:w})=>w?"bottom-nav-link active":"bottom-nav-link",children:[d.jsx(mk,{})," ",d.jsx("span",{children:"Inicio"})]}),d.jsxs(eo,{to:"/mi-perfil",replace:!0,className:({isActive:w})=>w?"bottom-nav-link active":"bottom-nav-link",children:[d.jsx(pk,{})," ",d.jsx("span",{children:"Mi Perfil"})]}),d.jsxs(eo,{to:"/mi-actividad",replace:!0,className:({isActive:w})=>w?"bottom-nav-link active":"bottom-nav-link",children:[d.jsx(_k,{})," ",d.jsx("span",{children:"Mi Actividad"})]}),d.jsxs(eo,{to:"/mis-pedidos",replace:!0,className:({isActive:w})=>w?"bottom-nav-link active":"bottom-nav-link",children:[d.jsx(gk,{})," ",d.jsx("span",{children:"Mis Pedidos"})]})]})]})}const bk="_menuContainer_17yur_1",xk="_filters_17yur_23",wk="_categoryButtons_17yur_51",Sk="_active_17yur_103",Ck="_layoutToggle_17yur_115",jk="_productList_17yur_157",Ek="_list_17yur_157",Ak="_grid_17yur_171",Tk="_productCard_17yur_185",kk="_fadeIn_17yur_1",Ok="_imageContainer_17yur_229",Nk="_cardContent_17yur_265",Rk="_cardFooter_17yur_287",Mk="_priceContainer_17yur_323",Dk="_originalPrice_17yur_335",Bk="_specialPrice_17yur_347",Lk="_price_17yur_323",Pk="_flyImage_17yur_371",Ik="_flyToCartAnimation_17yur_1",Uk="_prompt_17yur_499",pn={menuContainer:bk,filters:xk,categoryButtons:wk,active:Sk,layoutToggle:Ck,productList:jk,list:Ek,grid:Ak,productCard:Tk,fadeIn:kk,imageContainer:Ok,cardContent:Nk,cardFooter:Rk,priceContainer:Mk,originalPrice:Dk,specialPrice:Bk,price:Lk,flyImage:Pk,flyToCartAnimation:Ik,prompt:Uk};function Vt(){return d.jsx("div",{className:"spinner-container",children:d.jsx("div",{className:"loading-spinner"})})}const zk="_overlay_xefka_1",$k="_open_xefka_23",Hk="_modalContent_xefka_35",qk="_galleryContainer_xefka_83",Fk="_productImage_xefka_91",Gk="_active_xefka_103",Vk="_navButton_xefka_109",Yk="_prev_xefka_161",Wk="_next_xefka_163",Xk="_closeButton_xefka_167",Kk="_productDetails_xefka_183",Qk="_productDescription_xefka_201",Zk="_header_xefka_207",Jk="_headerInfo_xefka_223",eO="_productName_xefka_233",tO="_favoriteButton_xefka_235",nO="_averageRatingContainer_xefka_249",sO="_stars_xefka_261",iO="_starIcon_xefka_273",aO="_partialStarContainer_xefka_279",rO="_partialStarFill_xefka_289",oO="_ratingText_xefka_307",lO="_noRating_xefka_317",cO="_tabButtons_xefka_329",uO="_tabContent_xefka_351",dO="_tabContentInner_xefka_369",hO="_reviewsSection_xefka_381",fO="_reviewList_xefka_395",mO="_reviewItem_xefka_411",pO="_reviewHeader_xefka_425",gO="_starRating_xefka_437",_O="_star_xefka_261",vO="_footer_xefka_443",yO="_quantitySelector_xefka_459",bO="_addButton_xefka_465",xO="_showReviewFormButton_xefka_465",wO="_actionButtons_xefka_475",SO="_added_xefka_481",CO="_reviewForm_xefka_491",jO="_formActions_xefka_523",EO="_reviewSubmitButton_xefka_535",AO="_cancelButton_xefka_535",TO="_desktopOnly_xefka_569",kO="_mobileOnly_xefka_621",ye={overlay:zk,open:$k,modalContent:Hk,galleryContainer:qk,productImage:Fk,active:Gk,navButton:Vk,prev:Yk,next:Wk,closeButton:Xk,productDetails:Kk,productDescription:Qk,header:Zk,headerInfo:Jk,productName:eO,favoriteButton:tO,averageRatingContainer:nO,stars:sO,starIcon:iO,partialStarContainer:aO,partialStarFill:rO,ratingText:oO,noRating:lO,tabButtons:cO,tabContent:uO,tabContentInner:dO,reviewsSection:hO,reviewList:fO,reviewItem:mO,reviewHeader:pO,starRating:gO,star:_O,footer:vO,quantitySelector:yO,addButton:bO,showReviewFormButton:xO,actionButtons:wO,added:SO,reviewForm:CO,formActions:jO,reviewSubmitButton:EO,cancelButton:AO,desktopOnly:TO,mobileOnly:kO},Z0=({rating:n,onRatingChange:e})=>{const[t,i]=A.useState(0);return d.jsx("div",{className:ye.starRating,children:[1,2,3,4,5].map(a=>d.jsx("span",{className:ye.star,onClick:()=>e&&e(a),onMouseEnter:()=>e&&i(a),onMouseLeave:()=>e&&i(0),children:(t||n)>=a?"":""},a))})},J0=({isFavorite:n})=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:n?"var(--color-primary)":"none",stroke:n?"var(--color-primary)":"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),OO=({reviews:n})=>{if(!n||n.length===0)return d.jsx("p",{className:ye.noRating,children:"An no hay calificaciones. S el primero en calificar!"});const t=n.reduce((l,u)=>l+u.rating,0)/n.length,i=Math.floor(t),a=t%1,o=5-i-(a>.05?1:0);return d.jsxs("div",{className:ye.averageRatingContainer,children:[d.jsxs("div",{className:ye.stars,children:[[...Array(i)].map((l,u)=>d.jsx("span",{className:ye.starIcon,children:""},`full-${u}`)),a>.05&&d.jsxs("span",{className:ye.partialStarContainer,children:[d.jsx("span",{className:ye.starIcon,children:""}),d.jsx("span",{className:ye.partialStarFill,style:{width:`${a*100}%`},children:d.jsx("span",{className:ye.starIcon,children:""})})]}),[...Array(o)].map((l,u)=>d.jsx("span",{className:ye.starIcon,children:""},`empty-${u}`))]}),d.jsxs("span",{className:ye.ratingText,children:[t.toFixed(1)," de 5 estrellas"]})]})};function NO({product:n,onClose:e,onAddToCart:t}){const{showAlert:i}=ft(),[a,o]=A.useState(1),[l,u]=A.useState(0),[h,m]=A.useState(!1),[p,g]=A.useState("details"),{reviews:_,favorites:y,customerId:x,refetch:j}=cx(),[w,S]=A.useState([]),[C,T]=A.useState(!1),[B,D]=A.useState(!1),[M,$]=A.useState(0),[R,N]=A.useState(""),[z,I]=A.useState(!1),{products:U}=Jl(),{phone:q,setPhoneModalOpen:H}=Hs(),[G,E]=A.useState(!1),[O,F]=A.useState(!1),Y=A.useRef(null),L=n?[n.image_url,...n.product_images?.map(fe=>fe.image_url)||[]].filter(Boolean):[];A.useEffect(()=>{if(n){const fe=setTimeout(()=>F(!0),10);return()=>clearTimeout(fe)}},[n]),A.useEffect(()=>{n&&(o(1),u(0),m(!1),g("details"),$(0),N(""),E(!1))},[n?.id]),A.useEffect(()=>{if(n){const fe=_.filter(Te=>Te.products?.id===n.id);S(fe)}},[n?.id,_]),A.useEffect(()=>{n&&x?(T(y.some(fe=>fe.products?.id===n.id)),D(w.some(fe=>fe.customer_id===x))):(T(!1),D(!1))},[n?.id,y,w,x]);const X=A.useCallback(()=>{F(!1),setTimeout(e,600)},[e]),J=A.useCallback(()=>{u(fe=>(fe+1)%L.length)},[L.length]),ee=()=>{u(fe=>(fe-1+L.length)%L.length)},ne=A.useCallback(()=>{W(),L.length>1&&(Y.current=setInterval(J,4e3))},[L.length,J]),W=()=>{Y.current&&clearInterval(Y.current)};if(A.useEffect(()=>(ne(),()=>W()),[ne]),!n)return null;const oe=fe=>{if(!U.some(Ze=>Ze.id===n.id)){i("Lo sentimos, este producto ya no se encuentra disponible."),X();return}t(n,a,fe),m(!0),setTimeout(()=>m(!1),2e3)},_e=async()=>{if(!q||!x){i("Para guardar favoritos, primero necesitas ingresar tu nmero."),H(!0);return}const fe=C;T(!fe);try{fe?await ae.from("customer_favorites").delete().match({product_id:n.id,customer_id:x}):await ae.from("customer_favorites").insert({product_id:n.id,customer_id:x}),j()}catch(Te){console.error("Error toggling favorite:",Te),i("Hubo un error al guardar tu favorito. Por favor, intenta de nuevo."),T(fe)}},he=async fe=>{if(fe.preventDefault(),!q||!x){i("Para dejar una resea, primero necesitas ingresar tu nmero."),H(!0);return}if(M===0){i("Por favor, selecciona una calificacin de estrellas.");return}I(!0);const Te=On.sanitize(R),{error:Ze}=await ae.from("product_reviews").insert({product_id:n.id,customer_id:x,rating:M,comment:Te});Ze?i("Hubo un error al enviar tu resea. Es posible que ya hayas calificado este producto."):($(0),N(""),j(),E(!1)),I(!1)},be=()=>o(fe=>fe+1),Ae=()=>o(fe=>fe>1?fe-1:1);return d.jsx("div",{className:`${ye.overlay} ${O?ye.open:""}`,onClick:X,children:d.jsxs("div",{className:`${ye.modalContent} ${O?ye.open:""}`,onClick:fe=>fe.stopPropagation(),children:[d.jsx("button",{onClick:X,className:`${ye.closeButton} ${ye.desktopOnly}`,children:""}),d.jsxs("div",{className:ye.galleryContainer,onMouseEnter:W,onMouseLeave:ne,children:[L.length>1&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:ee,className:`${ye.navButton} ${ye.prev}`,children:""}),d.jsx("button",{onClick:J,className:`${ye.navButton} ${ye.next}`,children:""})]}),L.map((fe,Te)=>d.jsx(bs,{src:fe||"https://placehold.co/400",alt:`${n.name} ${Te+1}`,className:`${ye.productImage} ${Te===l?ye.active:""}`},Te)),d.jsx("button",{onClick:X,className:`${ye.closeButton} ${ye.mobileOnly}`,children:""})]}),d.jsxs("div",{className:ye.productDetails,children:[d.jsxs("div",{className:ye.header,children:[d.jsxs("div",{className:ye.headerInfo,children:[d.jsx("h2",{className:ye.productName,children:n.name}),d.jsx(OO,{reviews:w})]}),d.jsx("button",{type:"button",onClick:_e,className:`${ye.favoriteButton} ${ye.mobileOnly}`,children:d.jsx(J0,{isFavorite:C})})]}),d.jsxs("div",{className:ye.tabButtons,children:[d.jsx("button",{type:"button",onClick:()=>g("details"),className:p==="details"?ye.active:"",children:"Detalles"}),d.jsxs("button",{type:"button",onClick:()=>g("reviews"),className:p==="reviews"?ye.active:"",children:["Reseas (",w.length,")"]})]}),d.jsxs("div",{className:ye.tabContent,children:[p==="details"&&d.jsx("div",{className:ye.tabContentInner,children:d.jsx("p",{className:ye.productDescription,children:n.description||"Descripcin no disponible."})}),p==="reviews"&&d.jsx("div",{className:ye.tabContentInner,children:d.jsx("div",{className:ye.reviewsSection,children:d.jsx("div",{className:ye.reviewList,children:w.length===0?d.jsx("p",{children:"Todava no hay reseas. S el primero!"}):w.map(fe=>d.jsxs("div",{className:ye.reviewItem,children:[d.jsxs("div",{className:ye.reviewHeader,children:[d.jsx("strong",{children:fe.customers?.name||"Annimo"}),d.jsx(Z0,{rating:fe.rating})]}),d.jsx("p",{children:fe.comment})]},fe.id))})})})]}),p==="details"&&d.jsxs("div",{className:ye.footer,children:[d.jsxs("div",{className:ye.quantitySelector,children:[d.jsx("button",{type:"button",onClick:Ae,children:"-"}),d.jsx("span",{children:a}),d.jsx("button",{type:"button",onClick:be,children:"+"})]}),d.jsxs("div",{className:ye.actionButtons,children:[d.jsx("button",{type:"button",onClick:oe,className:`${ye.addButton} ${h?ye.added:""}`,disabled:h,children:h?"Aadido!":`Aadir por $${(n.price*a).toFixed(2)}`}),d.jsx("button",{type:"button",onClick:_e,className:`${ye.favoriteButton} ${ye.desktopOnly}`,children:d.jsx(J0,{isFavorite:C})})]})]}),p==="reviews"&&d.jsx("div",{className:ye.footer,children:G?d.jsxs("form",{onSubmit:he,className:ye.reviewForm,children:[d.jsx(Z0,{rating:M,onRatingChange:$}),d.jsx("textarea",{rows:"3",placeholder:"Qu te pareci?",value:R,onChange:fe=>N(fe.target.value)}),d.jsxs("div",{className:ye.formActions,children:[d.jsx("button",{type:"button",onClick:()=>E(!1),className:ye.cancelButton,children:"Cancelar"}),d.jsx("button",{type:"submit",className:ye.reviewSubmitButton,disabled:z,children:z?"Publicando...":"Publicar"})]})]}):d.jsx("button",{type:"button",onClick:()=>E(!0),className:ye.showReviewFormButton,disabled:B,children:B?"Ya has dejado una resea":"Escribir una resea"})})]})]})})}var Yf,ey;function RO(){if(ey)return Yf;ey=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",i=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function a(o,l){if(o===l)return!0;if(o&&l&&typeof o=="object"&&typeof l=="object"){if(o.constructor!==l.constructor)return!1;var u,h,m;if(Array.isArray(o)){if(u=o.length,u!=l.length)return!1;for(h=u;h--!==0;)if(!a(o[h],l[h]))return!1;return!0}var p;if(e&&o instanceof Map&&l instanceof Map){if(o.size!==l.size)return!1;for(p=o.entries();!(h=p.next()).done;)if(!l.has(h.value[0]))return!1;for(p=o.entries();!(h=p.next()).done;)if(!a(h.value[1],l.get(h.value[0])))return!1;return!0}if(t&&o instanceof Set&&l instanceof Set){if(o.size!==l.size)return!1;for(p=o.entries();!(h=p.next()).done;)if(!l.has(h.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(l)){if(u=o.length,u!=l.length)return!1;for(h=u;h--!==0;)if(o[h]!==l[h])return!1;return!0}if(o.constructor===RegExp)return o.source===l.source&&o.flags===l.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof l.valueOf=="function")return o.valueOf()===l.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof l.toString=="function")return o.toString()===l.toString();if(m=Object.keys(o),u=m.length,u!==Object.keys(l).length)return!1;for(h=u;h--!==0;)if(!Object.prototype.hasOwnProperty.call(l,m[h]))return!1;if(n&&o instanceof Element)return!1;for(h=u;h--!==0;)if(!((m[h]==="_owner"||m[h]==="__v"||m[h]==="__o")&&o.$$typeof)&&!a(o[m[h]],l[m[h]]))return!1;return!0}return o!==o&&l!==l}return Yf=function(l,u){try{return a(l,u)}catch(h){if((h.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw h}},Yf}var MO=RO();const DO=Wl(MO);var Wf,ty;function BO(){if(ty)return Wf;ty=1;var n=function(e,t,i,a,o,l,u,h){if(!e){var m;if(t===void 0)m=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var p=[i,a,o,l,u,h],g=0;m=new Error(t.replace(/%s/g,function(){return p[g++]})),m.name="Invariant Violation"}throw m.framesToPop=1,m}};return Wf=n,Wf}var LO=BO();const ny=Wl(LO);var Xf,sy;function PO(){return sy||(sy=1,Xf=function(e,t,i,a){var o=i?i.call(a,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var l=Object.keys(e),u=Object.keys(t);if(l.length!==u.length)return!1;for(var h=Object.prototype.hasOwnProperty.bind(t),m=0;m<l.length;m++){var p=l[m];if(!h(p))return!1;var g=e[p],_=t[p];if(o=i?i.call(a,g,_,p):void 0,o===!1||o===void 0&&g!==_)return!1}return!0}),Xf}var IO=PO();const UO=Wl(IO);var Cx=(n=>(n.BASE="base",n.BODY="body",n.HEAD="head",n.HTML="html",n.LINK="link",n.META="meta",n.NOSCRIPT="noscript",n.SCRIPT="script",n.STYLE="style",n.TITLE="title",n.FRAGMENT="Symbol(react.fragment)",n))(Cx||{}),Kf={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},iy=Object.values(Cx),np={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},zO=Object.entries(np).reduce((n,[e,t])=>(n[t]=e,n),{}),Is="data-rh",so={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},io=(n,e)=>{for(let t=n.length-1;t>=0;t-=1){const i=n[t];if(Object.prototype.hasOwnProperty.call(i,e))return i[e]}return null},$O=n=>{let e=io(n,"title");const t=io(n,so.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),t&&e)return t.replace(/%s/g,()=>e);const i=io(n,so.DEFAULT_TITLE);return e||i||void 0},HO=n=>io(n,so.ON_CHANGE_CLIENT_STATE)||(()=>{}),Qf=(n,e)=>e.filter(t=>typeof t[n]<"u").map(t=>t[n]).reduce((t,i)=>({...t,...i}),{}),qO=(n,e)=>e.filter(t=>typeof t.base<"u").map(t=>t.base).reverse().reduce((t,i)=>{if(!t.length){const a=Object.keys(i);for(let o=0;o<a.length;o+=1){const u=a[o].toLowerCase();if(n.indexOf(u)!==-1&&i[u])return t.concat(i)}}return t},[]),FO=n=>console&&typeof console.warn=="function"&&console.warn(n),vl=(n,e,t)=>{const i={};return t.filter(a=>Array.isArray(a[n])?!0:(typeof a[n]<"u"&&FO(`Helmet: ${n} should be of type "Array". Instead found type "${typeof a[n]}"`),!1)).map(a=>a[n]).reverse().reduce((a,o)=>{const l={};o.filter(h=>{let m;const p=Object.keys(h);for(let _=0;_<p.length;_+=1){const y=p[_],x=y.toLowerCase();e.indexOf(x)!==-1&&!(m==="rel"&&h[m].toLowerCase()==="canonical")&&!(x==="rel"&&h[x].toLowerCase()==="stylesheet")&&(m=x),e.indexOf(y)!==-1&&(y==="innerHTML"||y==="cssText"||y==="itemprop")&&(m=y)}if(!m||!h[m])return!1;const g=h[m].toLowerCase();return i[m]||(i[m]={}),l[m]||(l[m]={}),i[m][g]?!1:(l[m][g]=!0,!0)}).reverse().forEach(h=>a.push(h));const u=Object.keys(l);for(let h=0;h<u.length;h+=1){const m=u[h],p={...i[m],...l[m]};i[m]=p}return a},[]).reverse()},GO=(n,e)=>{if(Array.isArray(n)&&n.length){for(let t=0;t<n.length;t+=1)if(n[t][e])return!0}return!1},VO=n=>({baseTag:qO(["href"],n),bodyAttributes:Qf("bodyAttributes",n),defer:io(n,so.DEFER),encode:io(n,so.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Qf("htmlAttributes",n),linkTags:vl("link",["rel","href"],n),metaTags:vl("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:vl("noscript",["innerHTML"],n),onChangeClientState:HO(n),scriptTags:vl("script",["src","innerHTML"],n),styleTags:vl("style",["cssText"],n),title:$O(n),titleAttributes:Qf("titleAttributes",n),prioritizeSeoTags:GO(n,so.PRIORITIZE_SEO_TAGS)}),jx=n=>Array.isArray(n)?n.join(""):n,YO=(n,e)=>{const t=Object.keys(n);for(let i=0;i<t.length;i+=1)if(e[t[i]]&&e[t[i]].includes(n[t[i]]))return!0;return!1},Zf=(n,e)=>Array.isArray(n)?n.reduce((t,i)=>(YO(i,e)?t.priority.push(i):t.default.push(i),t),{priority:[],default:[]}):{default:n,priority:[]},ay=(n,e)=>({...n,[e]:void 0}),WO=["noscript","script","style"],km=(n,e=!0)=>e===!1?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Ex=n=>Object.keys(n).reduce((e,t)=>{const i=typeof n[t]<"u"?`${t}="${n[t]}"`:`${t}`;return e?`${e} ${i}`:i},""),XO=(n,e,t,i)=>{const a=Ex(t),o=jx(e);return a?`<${n} ${Is}="true" ${a}>${km(o,i)}</${n}>`:`<${n} ${Is}="true">${km(o,i)}</${n}>`},KO=(n,e,t=!0)=>e.reduce((i,a)=>{const o=a,l=Object.keys(o).filter(m=>!(m==="innerHTML"||m==="cssText")).reduce((m,p)=>{const g=typeof o[p]>"u"?p:`${p}="${km(o[p],t)}"`;return m?`${m} ${g}`:g},""),u=o.innerHTML||o.cssText||"",h=WO.indexOf(n)===-1;return`${i}<${n} ${Is}="true" ${l}${h?"/>":`>${u}</${n}>`}`},""),Ax=(n,e={})=>Object.keys(n).reduce((t,i)=>{const a=np[i];return t[a||i]=n[i],t},e),QO=(n,e,t)=>{const i={key:e,[Is]:!0},a=Ax(t,i);return[Xe.createElement("title",a,e)]},Uu=(n,e)=>e.map((t,i)=>{const a={key:i,[Is]:!0};return Object.keys(t).forEach(o=>{const u=np[o]||o;if(u==="innerHTML"||u==="cssText"){const h=t.innerHTML||t.cssText;a.dangerouslySetInnerHTML={__html:h}}else a[u]=t[o]}),Xe.createElement(n,a)}),vs=(n,e,t=!0)=>{switch(n){case"title":return{toComponent:()=>QO(n,e.title,e.titleAttributes),toString:()=>XO(n,e.title,e.titleAttributes,t)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Ax(e),toString:()=>Ex(e)};default:return{toComponent:()=>Uu(n,e),toString:()=>KO(n,e,t)}}},ZO=({metaTags:n,linkTags:e,scriptTags:t,encode:i})=>{const a=Zf(n,Kf.meta),o=Zf(e,Kf.link),l=Zf(t,Kf.script);return{priorityMethods:{toComponent:()=>[...Uu("meta",a.priority),...Uu("link",o.priority),...Uu("script",l.priority)],toString:()=>`${vs("meta",a.priority,i)} ${vs("link",o.priority,i)} ${vs("script",l.priority,i)}`},metaTags:a.default,linkTags:o.default,scriptTags:l.default}},JO=n=>{const{baseTag:e,bodyAttributes:t,encode:i=!0,htmlAttributes:a,noscriptTags:o,styleTags:l,title:u="",titleAttributes:h,prioritizeSeoTags:m}=n;let{linkTags:p,metaTags:g,scriptTags:_}=n,y={toComponent:()=>{},toString:()=>""};return m&&({priorityMethods:y,linkTags:p,metaTags:g,scriptTags:_}=ZO(n)),{priority:y,base:vs("base",e,i),bodyAttributes:vs("bodyAttributes",t,i),htmlAttributes:vs("htmlAttributes",a,i),link:vs("link",p,i),meta:vs("meta",g,i),noscript:vs("noscript",o,i),script:vs("script",_,i),style:vs("style",l,i),title:vs("title",{title:u,titleAttributes:h},i)}},Om=JO,bu=[],Tx=!!(typeof window<"u"&&window.document&&window.document.createElement),Nm=class{instances=[];canUseDOM=Tx;context;value={setHelmet:n=>{this.context.helmet=n},helmetInstances:{get:()=>this.canUseDOM?bu:this.instances,add:n=>{(this.canUseDOM?bu:this.instances).push(n)},remove:n=>{const e=(this.canUseDOM?bu:this.instances).indexOf(n);(this.canUseDOM?bu:this.instances).splice(e,1)}}};constructor(n,e){this.context=n,this.canUseDOM=e||!1,e||(n.helmet=Om({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},eN={},kx=Xe.createContext(eN),Ox=class Nx extends A.Component{static canUseDOM=Tx;helmetData;constructor(e){super(e),this.helmetData=new Nm(this.props.context||{},Nx.canUseDOM)}render(){return Xe.createElement(kx.Provider,{value:this.helmetData.value},this.props.children)}},Vr=(n,e)=>{const t=document.head||document.querySelector("head"),i=t.querySelectorAll(`${n}[${Is}]`),a=[].slice.call(i),o=[];let l;return e&&e.length&&e.forEach(u=>{const h=document.createElement(n);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m))if(m==="innerHTML")h.innerHTML=u.innerHTML;else if(m==="cssText")h.styleSheet?h.styleSheet.cssText=u.cssText:h.appendChild(document.createTextNode(u.cssText));else{const p=m,g=typeof u[p]>"u"?"":u[p];h.setAttribute(m,g)}h.setAttribute(Is,"true"),a.some((m,p)=>(l=p,h.isEqualNode(m)))?a.splice(l,1):o.push(h)}),a.forEach(u=>u.parentNode?.removeChild(u)),o.forEach(u=>t.appendChild(u)),{oldTags:a,newTags:o}},Rm=(n,e)=>{const t=document.getElementsByTagName(n)[0];if(!t)return;const i=t.getAttribute(Is),a=i?i.split(","):[],o=[...a],l=Object.keys(e);for(const u of l){const h=e[u]||"";t.getAttribute(u)!==h&&t.setAttribute(u,h),a.indexOf(u)===-1&&a.push(u);const m=o.indexOf(u);m!==-1&&o.splice(m,1)}for(let u=o.length-1;u>=0;u-=1)t.removeAttribute(o[u]);a.length===o.length?t.removeAttribute(Is):t.getAttribute(Is)!==l.join(",")&&t.setAttribute(Is,l.join(","))},tN=(n,e)=>{typeof n<"u"&&document.title!==n&&(document.title=jx(n)),Rm("title",e)},ry=(n,e)=>{const{baseTag:t,bodyAttributes:i,htmlAttributes:a,linkTags:o,metaTags:l,noscriptTags:u,onChangeClientState:h,scriptTags:m,styleTags:p,title:g,titleAttributes:_}=n;Rm("body",i),Rm("html",a),tN(g,_);const y={baseTag:Vr("base",t),linkTags:Vr("link",o),metaTags:Vr("meta",l),noscriptTags:Vr("noscript",u),scriptTags:Vr("script",m),styleTags:Vr("style",p)},x={},j={};Object.keys(y).forEach(w=>{const{newTags:S,oldTags:C}=y[w];S.length&&(x[w]=S),C.length&&(j[w]=y[w].oldTags)}),e&&e(),h(n,x,j)},yl=null,nN=n=>{yl&&cancelAnimationFrame(yl),n.defer?yl=requestAnimationFrame(()=>{ry(n,()=>{yl=null})}):(ry(n),yl=null)},sN=nN,oy=class extends A.Component{rendered=!1;shouldComponentUpdate(n){return!UO(n,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:n}=this.props.context;n.remove(this),this.emitChange()}emitChange(){const{helmetInstances:n,setHelmet:e}=this.props.context;let t=null;const i=VO(n.get().map(a=>{const o={...a.props};return delete o.context,o}));Ox.canUseDOM?sN(i):Om&&(t=Om(i)),e(t)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:n}=this.props.context;n.add(this),this.emitChange()}render(){return this.init(),null}},iN=class extends A.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(n){return!DO(ay(this.props,"helmetData"),ay(n,"helmetData"))}mapNestedChildrenToProps(n,e){if(!e)return null;switch(n.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(n,e,t,i){return{...e,[n.type]:[...e[n.type]||[],{...t,...this.mapNestedChildrenToProps(n,i)}]}}mapObjectTypeChildren(n,e,t,i){switch(n.type){case"title":return{...e,[n.type]:i,titleAttributes:{...t}};case"body":return{...e,bodyAttributes:{...t}};case"html":return{...e,htmlAttributes:{...t}};default:return{...e,[n.type]:{...t}}}}mapArrayTypeChildrenToProps(n,e){let t={...e};return Object.keys(n).forEach(i=>{t={...t,[i]:n[i]}}),t}warnOnInvalidChildren(n,e){return ny(iy.some(t=>n.type===t),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${iy.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`),ny(!e||typeof e=="string"||Array.isArray(e)&&!e.some(t=>typeof t!="string"),`Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(n,e){let t={};return Xe.Children.forEach(n,i=>{if(!i||!i.props)return;const{children:a,...o}=i.props,l=Object.keys(o).reduce((h,m)=>(h[zO[m]||m]=o[m],h),{});let{type:u}=i;switch(typeof u=="symbol"?u=u.toString():this.warnOnInvalidChildren(i,a),u){case"Symbol(react.fragment)":e=this.mapChildrenToProps(a,e);break;case"link":case"meta":case"noscript":case"script":case"style":t=this.flattenArrayTypeChildren(i,t,l,a);break;default:e=this.mapObjectTypeChildren(i,e,l,a);break}}),this.mapArrayTypeChildrenToProps(t,e)}render(){const{children:n,...e}=this.props;let t={...e},{helmetData:i}=e;if(n&&(t=this.mapChildrenToProps(n,t)),i&&!(i instanceof Nm)){const a=i;i=new Nm(a.context,!0),delete t.helmetData}return i?Xe.createElement(oy,{...t,context:i.value}):Xe.createElement(kx.Consumer,null,a=>Xe.createElement(oy,{...t,context:a}))}};const ec=({title:n,description:e,name:t,type:i,schemaMarkup:a})=>d.jsxs(iN,{children:[d.jsx("title",{children:n}),d.jsx("meta",{name:"description",content:e}),d.jsx("meta",{property:"og:type",content:i}),d.jsx("meta",{property:"og:title",content:n}),d.jsx("meta",{property:"og:description",content:e}),d.jsx("meta",{name:"twitter:creator",content:t}),d.jsx("meta",{name:"twitter:card",content:i}),d.jsx("meta",{name:"twitter:title",content:n}),d.jsx("meta",{name:"twitter:description",content:e}),a&&d.jsx("script",{type:"application/ld+json",children:JSON.stringify(a)})]}),aN={"@context":"http://schema.org","@type":"Restaurant",name:"Entre Alas",description:"El mejor lugar para disfrutar alitas. Ofrecemos una variedad de sabores y un trato acogedor para toda la familia.",url:"https://ea-panel.vercel.app ",telephone:"+529631834700",address:{"@type":"PostalAddress",streetAddress:"Ejido 20 de Abril",addressLocality:"La Trinitaria",addressRegion:"Chiapas",postalCode:"30165",addressCountry:"MX"},servesCuisine:"Alitas",priceRange:"$$",openingHoursSpecification:[{"@type":"OpeningHoursSpecification",dayOfWeek:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],opens:"06:00",closes:"22:00"}],hasMenu:{"@type":"Menu",name:"Men Principal",url:"https://ea-panel.vercel.app"}},rN=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),d.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),d.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),d.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),d.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),d.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),oN=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),d.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),d.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),d.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),ly="product-layout-preference";function lN(){const{products:n,categories:e,loading:t,error:i}=Jl(),{addToCart:a,showToast:o}=Ja(),[l,u]=A.useState(null),[h,m]=A.useState(null),[p,g]=A.useState(()=>localStorage.getItem(ly)||"grid"),[_,y]=A.useState([]),{isOpen:x}=mx();A.useEffect(()=>{localStorage.setItem(ly,p)},[p]);const j=(C,T,B)=>{if(!x){o(" Estamos cerrados ahora mismo, no se pueden aadir productos al carrito.");return}if(a(C,T),o(`${T||1} x ${C.name} aadido(s) al carrito!`),B&&B.currentTarget){const M=B.currentTarget.getBoundingClientRect(),$={id:Date.now(),src:C.image_url||"https://placehold.co/150",top:M.top+M.height/2,left:M.left+M.width/2};y(R=>[...R,$]),setTimeout(()=>{y(R=>R.filter(N=>N.id!==$.id))},1e3)}},w=()=>{g(C=>C==="list"?"grid":"list")},S=n.filter(C=>l?C.category_id===l:!0);return t?d.jsx(Vt,{}):i?d.jsxs("p",{className:pn.error,children:["Error: ",i]}):d.jsxs(d.Fragment,{children:[d.jsx(ec,{title:"Men - Entre Alas",description:"Explora nuestro delicioso men de alitas, hamburguesas, y ms. Pide ahora y disfruta del mejor sabor.",name:"Entre Alas",type:"website",schemaMarkup:aN}),d.jsxs("div",{className:pn.menuContainer,children:[_.map(C=>d.jsx("img",{src:C.src,alt:"Producto volando al carrito",className:pn.flyImage,style:{top:`${C.top}px`,left:`${C.left}px`}},C.id)),d.jsxs("div",{className:pn.filters,children:[d.jsxs("div",{className:pn.categoryButtons,children:[d.jsx("button",{onClick:()=>u(null),className:l?"":pn.active,children:"Todos"}),e.map(C=>d.jsx("button",{onClick:()=>u(C.id),className:l===C.id?pn.active:"",children:C.name},C.id))]}),d.jsx("div",{className:pn.layoutToggle,children:d.jsx("button",{onClick:w,title:"Cambiar vista",children:p==="list"?d.jsx(oN,{}):d.jsx(rN,{})})})]}),d.jsx("div",{className:`${pn.productList} ${pn[p]}`,children:S.length>0?S.map(C=>d.jsxs("div",{className:pn.productCard,children:[d.jsxs("div",{onClick:()=>m(C),style:{cursor:"pointer",display:"flex",flexDirection:"column",flexGrow:1},children:[d.jsx("div",{className:pn.imageContainer,children:d.jsx(bs,{src:C.image_url,alt:`Imagen de ${C.name}`})}),d.jsx("div",{className:pn.cardContent,children:d.jsx("h3",{children:C.name})})]}),d.jsxs("div",{className:pn.cardFooter,children:[d.jsx("div",{className:pn.priceContainer,children:C.original_price?d.jsxs(d.Fragment,{children:[d.jsxs("span",{className:pn.originalPrice,children:["$",C.original_price.toFixed(2)]}),d.jsxs("span",{className:pn.specialPrice,children:["$",C.price.toFixed(2)]})]}):d.jsxs("span",{className:pn.price,children:["$",C.price.toFixed(2)]})}),d.jsx("button",{onClick:T=>j(C,1,T),disabled:!x,children:x?"Aadir":"Cerrado"})]})]},C.id)):d.jsx("p",{children:"No se encontraron productos."})}),d.jsx(NO,{product:h,onClose:()=>m(null),onAddToCart:j})]})]})}const cN="_container_awiz1_1",uN="_ordersContainer_awiz1_35",dN="_orderCard_awiz1_61",hN="_open_awiz1_81",fN="_cardHeader_awiz1_91",mN="_headerInfo_awiz1_119",pN="_toggleIcon_awiz1_131",gN="_orderDetails_awiz1_153",_N="_activeOrdersContainer_awiz1_179",vN="_historyContainer_awiz1_181",yN="_status_awiz1_189",bN="_pendiente_awiz1_207",xN="_en_proceso_awiz1_209",wN="_completado_awiz1_211",SN="_cancelado_awiz1_213",CN="_orderFooter_awiz1_245",jN="_actionsContainer_awiz1_263",EN="_editButton_awiz1_277",AN="_cancelButton_awiz1_277",TN="_reorderButton_awiz1_277",kN="_prompt_awiz1_307",ON="_cancellationReason_awiz1_319",NN="_carouselWrapper_awiz1_339",RN="_scrollButton_awiz1_347",MN="_prev_awiz1_411",DN="_next_awiz1_419",Qe={container:cN,ordersContainer:uN,orderCard:dN,open:hN,cardHeader:fN,headerInfo:mN,toggleIcon:pN,orderDetails:gN,activeOrdersContainer:_N,historyContainer:vN,status:yN,pendiente:bN,en_proceso:xN,completado:wN,cancelado:SN,orderFooter:CN,actionsContainer:jN,editButton:EN,cancelButton:AN,reorderButton:TN,prompt:kN,cancellationReason:ON,carouselWrapper:NN,scrollButton:RN,prev:MN,next:DN},BN="_modalOverlay_1g22u_1",LN="_modalContent_1g22u_13",PN="_header_1g22u_43",IN="_closeButton_1g22u_57",UN="_tabs_1g22u_61",zN="_active_1g22u_87",$N="_contentBody_1g22u_97",HN="_itemsList_1g22u_107",qN="_addProductSection_1g22u_115",FN="_addMode_1g22u_125",GN="_emptyMessage_1g22u_139",VN="_cartItem_1g22u_145",YN="_itemInfo_1g22u_159",WN="_itemName_1g22u_161",XN="_itemPrice_1g22u_163",KN="_itemActions_1g22u_167",QN="_quantityDisplay_1g22u_177",ZN="_quantityButton_1g22u_185",JN="_deleteButton_1g22u_201",eR="_searchInput_1g22u_221",tR="_categoryFilters_1g22u_233",nR="_productList_1g22u_261",sR="_productCard_1g22u_271",iR="_productInfo_1g22u_291",aR="_footer_1g22u_307",rR="_totalContainer_1g22u_317",oR="_updateButton_1g22u_331",We={modalOverlay:BN,modalContent:LN,header:PN,closeButton:IN,tabs:UN,active:zN,contentBody:$N,itemsList:HN,addProductSection:qN,addMode:FN,emptyMessage:GN,cartItem:VN,itemInfo:YN,itemName:WN,itemPrice:XN,itemActions:KN,quantityDisplay:QN,quantityButton:ZN,deleteButton:JN,searchInput:eR,categoryFilters:tR,productList:nR,productCard:sR,productInfo:iR,footer:aR,totalContainer:rR,updateButton:oR},lR=()=>d.jsxs("svg",{xmlns:"http://www.ww3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("polyline",{points:"3 6 5 6 21 6"}),d.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),d.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),d.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]});function cR({order:n,onClose:e,onOrderUpdated:t}){const{showAlert:i}=ft(),[a,o]=A.useState([]),[l,u]=A.useState([]),[h,m]=A.useState([]),[p,g]=A.useState(0),[_,y]=A.useState(!0),[x,j]=A.useState(!1),[w,S]=A.useState("current"),[C,T]=A.useState(""),[B,D]=A.useState(null);A.useEffect(()=>{(async()=>{y(!0);try{const{data:q,error:H}=await ae.from("products").select("*").eq("is_active",!0);if(H)throw H;const{data:G,error:E}=await ae.from("categories").select("*").order("name");if(E)throw E;u(q),m(G);const O=n.order_items.map(F=>({...F.products,product_id:F.product_id,quantity:F.quantity,price:F.price}));o(O)}catch(q){console.error("Error fetching data:",q),i("Hubo un error al cargar los datos para la edicin."),e()}finally{y(!1)}})()},[n,e,i]),A.useEffect(()=>{const U=a.reduce((q,H)=>q+H.price*H.quantity,0);g(U)},[a]);const M=(U,q)=>{const H=parseInt(q,10);if(isNaN(H)||H<=0){$(U);return}o(G=>G.map(E=>E.id===U?{...E,quantity:H}:E))},$=U=>{o(q=>q.filter(H=>H.id!==U))},R=U=>{a.find(H=>H.id===U.id)?o(H=>H.map(G=>G.id===U.id?{...G,quantity:G.quantity+1}:G)):(o(H=>[...H,{...U,quantity:1,product_id:U.id}]),i(`${U.name} aadido al pedido.`)),S("current")},N=async()=>{if(a.length===0){i("No puedes dejar el pedido vaco. Si quieres cancelarlo, usa la opcin correspondiente.");return}j(!0);try{await ae.from("order_items").delete().eq("order_id",n.id);const U=a.map(q=>({order_id:n.id,product_id:q.product_id,quantity:q.quantity,price:q.price}));await ae.from("order_items").insert(U),await ae.from("orders").update({total_amount:p}).eq("id",n.id),i("Pedido actualizado con xito!"),t(),e()}catch(U){console.error("Error al actualizar el pedido:",U),i(`Error: ${U.message}`)}finally{j(!1)}},z=A.useMemo(()=>l.filter(U=>!a.some(q=>q.id===U.id)).filter(U=>B?U.category_id===B:!0).filter(U=>U.name.toLowerCase().includes(C.toLowerCase())),[l,a,B,C]),I=A.useMemo(()=>{const U=l.filter(H=>!a.some(G=>G.id===H.id)),q=new Set(U.map(H=>H.category_id));return h.filter(H=>q.has(H.id))},[l,a,h]);return d.jsx("div",{className:We.modalOverlay,children:d.jsxs("div",{className:We.modalContent,children:[d.jsxs("div",{className:We.header,children:[d.jsxs("h2",{children:["Editando Pedido #",n.order_code]}),d.jsx("button",{onClick:e,className:We.closeButton,children:""})]}),_?d.jsx(Vt,{}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:We.tabs,children:[d.jsxs("button",{onClick:()=>S("current"),className:w==="current"?We.active:"",children:["Pedido Actual (",a.length,")"]}),d.jsx("button",{onClick:()=>S("add"),className:w==="add"?We.active:"",children:"Aadir Productos"})]}),d.jsxs("div",{className:`${We.contentBody} ${w==="add"?We.addMode:""}`,children:[d.jsx("div",{className:We.itemsList,children:a.length>0?a.map(U=>d.jsxs("div",{className:We.cartItem,children:[d.jsx(bs,{src:U.image_url||"https://placehold.co/80",alt:U.name}),d.jsxs("div",{className:We.itemInfo,children:[d.jsx("span",{className:We.itemName,children:U.name}),d.jsxs("span",{className:We.itemPrice,children:["$",U.price.toFixed(2)]})]}),d.jsxs("div",{className:We.itemActions,children:[U.quantity===1?d.jsx("button",{onClick:()=>$(U.id),className:`${We.quantityButton} ${We.deleteButton}`,children:d.jsx(lR,{})}):d.jsx("button",{onClick:()=>M(U.id,U.quantity-1),className:We.quantityButton,children:"-"}),d.jsx("span",{className:We.quantityDisplay,children:U.quantity}),d.jsx("button",{onClick:()=>M(U.id,U.quantity+1),className:We.quantityButton,children:"+"})]})]},U.id)):d.jsx("p",{className:We.emptyMessage,children:"Aade productos a tu pedido."})}),d.jsxs("div",{className:We.addProductSection,children:[d.jsx("input",{type:"text",placeholder:"Buscar producto...",value:C,onChange:U=>T(U.target.value),className:We.searchInput}),d.jsxs("div",{className:We.categoryFilters,children:[d.jsx("button",{onClick:()=>D(null),className:B?"":We.active,children:"Todos"}),I.map(U=>d.jsx("button",{onClick:()=>D(U.id),className:B===U.id?We.active:"",children:U.name},U.id))]}),d.jsx("div",{className:We.productList,children:z.map(U=>d.jsxs("div",{className:We.productCard,onClick:()=>R(U),children:[d.jsx(bs,{src:U.image_url||"https://placehold.co/150",alt:U.name}),d.jsxs("div",{className:We.productInfo,children:[d.jsx("span",{children:U.name}),d.jsxs("strong",{children:["$",U.price.toFixed(2)]})]})]},U.id))})]})]}),d.jsxs("div",{className:We.footer,children:[d.jsxs("div",{className:We.totalContainer,children:[d.jsx("span",{children:"Total"}),d.jsxs("strong",{children:["$",p.toFixed(2)]})]}),d.jsx("button",{onClick:N,disabled:x,className:We.updateButton,children:x?"Actualizando...":"Guardar Cambios"})]})]})]})})}const uR="_overlay_q3z73_1",dR="_modalContent_q3z73_39",hR="_buttons_q3z73_99",fR="_cancelButton_q3z73_127",mR="_confirmButton_q3z73_145",bl={overlay:uR,modalContent:dR,buttons:hR,cancelButton:fR,confirmButton:mR};function Di({isOpen:n,onClose:e,onConfirm:t,title:i,children:a}){return n?d.jsx("div",{className:bl.overlay,children:d.jsxs("div",{className:bl.modalContent,children:[d.jsx("h3",{children:i}),d.jsx("p",{children:a}),d.jsxs("div",{className:bl.buttons,children:[d.jsx("button",{onClick:e,className:bl.cancelButton,children:"Cancelar"}),d.jsx("button",{onClick:t,className:bl.confirmButton,children:"Confirmar"})]})]})}):null}const pR="_overlay_1jyhf_1",gR="_modalContent_1jyhf_13",_R="_closeButton_1jyhf_25",vR="_reasonTextarea_1jyhf_37",yR="_sendButton_1jyhf_59",xl={overlay:pR,modalContent:gR,closeButton:_R,reasonTextarea:vR,sendButton:yR};function bR({order:n,onClose:e}){const[t,i]=A.useState(""),a="9633870587",o=()=>{if(!t.trim()){alert("Por favor, escribe el motivo de la cancelacin.");return}const l=`Hola!  Quisiera solicitar la cancelacin de mi pedido *${n.order_code}*.

*Motivo:* ${t}`,u=`https://api.whatsapp.com/send?phone=${a}&text=${encodeURIComponent(l)}`;window.open(u,"_blank"),e()};return d.jsx("div",{className:xl.overlay,children:d.jsxs("div",{className:xl.modalContent,children:[d.jsx("button",{onClick:e,className:xl.closeButton,children:""}),d.jsx("h2",{children:"Solicitar Cancelacin"}),d.jsxs("p",{children:["Tu pedido ya est ",d.jsx("strong",{children:"en proceso"})," y no se puede cancelar automticamente. Para solicitar la cancelacin, por favor describe el motivo y enva un mensaje a nuestro chat."]}),d.jsx("textarea",{rows:"4",value:t,onChange:l=>i(l.target.value),placeholder:"Escribe aqu el motivo de la cancelacin...",className:xl.reasonTextarea}),d.jsx("button",{onClick:o,className:xl.sendButton,children:"Enviar Solicitud por WhatsApp"})]})})}const xR="_prompt_1sd4s_1",wR="_actionButton_1sd4s_43",cy={prompt:xR,actionButton:wR},sp=()=>{const{setPhoneModalOpen:n}=Hs();return d.jsxs("div",{className:cy.prompt,children:[d.jsx("h2",{children:"Para acceder a esta seccin, introduce tu nmero"}),d.jsx("button",{onClick:()=>n(!0),className:cy.actionButton,children:"Ingresar Nmero"})]})};function SR(){const{phone:n,setCheckoutModalOpen:e}=Hs(),{cartItems:t,replaceCart:i,toggleCart:a,showToast:o}=Ja(),l=Kl(),{customer:u,orders:h,loading:m,error:p,refetch:g}=er(),[_,y]=A.useState(null),[x,j]=A.useState(null),[w,S]=A.useState(!1),[C,T]=A.useState(null),[B,D]=A.useState([]);A.useEffect(()=>{window.innerWidth>=768&&h.length>0&&D(h.map(O=>O.id))},[h]);const M=E=>{D(O=>O.includes(E)?O.filter(F=>F!==E):[...O,E])},$=E=>{E.status==="pendiente"?j(E):E.status==="en_proceso"&&(S(!0),j(E))},R=async()=>{if(!x)return;const{error:E}=await ae.from("orders").update({status:"cancelado",cancellation_reason:"Cancelado por el cliente."}).eq("id",x.id);E?o("Error al cancelar el pedido."):(o("Pedido cancelado con xito."),g()),j(null)},N=E=>{!E||!E.order_items||(t.length>0?T(E):z(E))},z=E=>{const O=E.order_items.filter(F=>F.products).map(F=>({...F.products,quantity:F.quantity}));i(O),o("Pedido aadido al carrito!"),l("/"),setTimeout(a,500)},I=()=>{C&&(z(C),T(null))},U=A.useCallback(()=>{g()},[g]),q=A.useCallback(()=>{y(null)},[]),H=(E,O=!1)=>d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Fecha:"})," ",new Date(E.created_at).toLocaleString()]}),d.jsx("ul",{children:E.order_items.map(F=>d.jsxs("li",{children:[F.quantity,"x ",F.products?.name||"Producto no disponible"]},F.id))}),E.status==="cancelado"&&E.cancellation_reason&&d.jsxs("p",{className:Qe.cancellationReason,children:[d.jsx("strong",{children:"Motivo:"})," ",E.cancellation_reason]}),d.jsxs("div",{className:Qe.orderFooter,children:[d.jsxs("strong",{children:["Total: $",E.total_amount.toFixed(2)]}),d.jsxs("div",{className:Qe.actionsContainer,children:[O&&E.status==="pendiente"&&d.jsx("button",{className:Qe.editButton,onClick:()=>y(E),children:"Editar"}),O&&(E.status==="pendiente"||E.status==="en_proceso")&&d.jsx("button",{className:Qe.cancelButton,onClick:()=>$(E),children:"Cancelar Pedido"}),E.status==="completado"&&d.jsx("button",{className:Qe.reorderButton,onClick:()=>N(E),children:"Volver a Pedir"})]})]})]}),G=()=>{if(!n)return d.jsx(sp,{});if(m)return d.jsx(Vt,{});if(p)return d.jsxs("div",{className:Qe.prompt,children:[" ",d.jsx("h2",{children:"Error Inesperado"})," ",d.jsx("p",{children:"No pudimos cargar tus datos. Por favor, intenta de nuevo ms tarde."})," "]});if(!u)return d.jsxs("div",{className:Qe.prompt,children:[d.jsx("h2",{children:"Bienvenido!"}),d.jsx("p",{children:"Parece que eres nuevo por aqu. Completa tu perfil para que podamos registrar tus pedidos."}),d.jsx("button",{onClick:()=>e(!0,"profile"),className:Qe.actionButton,children:"Completar mi perfil"})]});if(u){const E=h.filter(F=>F.status==="pendiente"||F.status==="en_proceso"),O=h.filter(F=>F.status!=="pendiente"&&F.status!=="en_proceso");return d.jsx(d.Fragment,{children:h.length>0?d.jsxs(d.Fragment,{children:[E.length>0&&d.jsxs("div",{className:Qe.activeOrdersContainer,children:[d.jsx("h3",{children:"Pedidos Activos"}),d.jsx("div",{className:Qe.ordersContainer,children:E.map(F=>d.jsxs("div",{className:`${Qe.orderCard} ${B.includes(F.id)?Qe.open:""}`,children:[d.jsxs("button",{className:Qe.cardHeader,onClick:()=>M(F.id),children:[d.jsxs("span",{children:["Pedido #",F.order_code]}),d.jsxs("div",{className:Qe.headerInfo,children:[d.jsx("span",{className:`${Qe.status} ${Qe[F.status]}`,children:F.status.replace("_"," ")}),d.jsx("span",{className:Qe.toggleIcon,children:B.includes(F.id)?"":"+"})]})]}),d.jsx("div",{className:Qe.orderDetails,children:H(F,!0)})]},F.id))})]}),O.length>0&&d.jsxs("div",{className:Qe.historyContainer,children:[d.jsx("h3",{children:"Historial de Pedidos"}),d.jsx("div",{className:Qe.ordersContainer,children:O.map(F=>d.jsxs("div",{className:`${Qe.orderCard} ${B.includes(F.id)?Qe.open:""}`,children:[d.jsxs("button",{className:Qe.cardHeader,onClick:()=>M(F.id),children:[d.jsxs("span",{children:["Pedido #",F.order_code]}),d.jsxs("div",{className:Qe.headerInfo,children:[d.jsx("span",{className:`${Qe.status} ${Qe[F.status]}`,children:F.status.replace("_"," ")}),d.jsx("span",{className:Qe.toggleIcon,children:B.includes(F.id)?"":"+"})]})]}),d.jsx("div",{className:Qe.orderDetails,children:H(F,!1)})]},F.id))})]})]}):d.jsxs("div",{className:Qe.prompt,children:[d.jsx("h2",{children:"No tienes pedidos"}),d.jsx("p",{children:"Parece que an no has realizado ningn pedido con este nmero."})]})})}return null};return d.jsxs(d.Fragment,{children:[d.jsx(ec,{title:"Mis Pedidos - Entre Alas",description:"Consulta el estado de tus pedidos, edtalos o vuelve a pedir tus favoritos en Entre Alas.",name:"Entre Alas",type:"website"}),d.jsxs("div",{className:Qe.container,children:[G(),_&&d.jsx(cR,{order:_,onClose:q,onOrderUpdated:U}),d.jsx(Di,{isOpen:!!x&&!w,onClose:()=>j(null),onConfirm:R,title:"Confirmar Cancelacin?",children:"Ests a punto de cancelar tu pedido. Esta accin no se puede deshacer."}),d.jsx(Di,{isOpen:!!C,onClose:()=>T(null),onConfirm:I,title:"Reemplazar Carrito?",children:"Tu carrito ya tiene productos. Deseas vaciarlo y agregar los productos de este pedido?"}),w&&x&&d.jsx(bR,{order:x,onClose:()=>{S(!1),j(null)}})]})]})}const CR="_container_udh72_3",jR="_card_udh72_25",ER="_form_udh72_45",AR="_actionButton_udh72_81",TR="_formGroup_udh72_109",kR="_themeSelector_udh72_137",OR="_addressHeader_udh72_149",NR="_addButton_udh72_163",RR="_addressCarousel_udh72_183",MR="_addressItem_udh72_217",DR="_defaultAddress_udh72_249",BR="_addressLabelContainer_udh72_257",LR="_defaultBadge_udh72_271",PR="_addressActions_udh72_299",IR="_setDefaultButton_udh72_313",UR="_editButton_udh72_337",zR="_deleteButton_udh72_357",$R="_prompt_udh72_377",HR="_logoutSection_udh72_391",qR="_logoutButton_udh72_401",Ct={container:CR,card:jR,form:ER,actionButton:AR,formGroup:TR,themeSelector:kR,addressHeader:OR,addButton:NR,addressCarousel:RR,addressItem:MR,defaultAddress:DR,addressLabelContainer:BR,defaultBadge:LR,addressActions:PR,setDefaultButton:IR,editButton:UR,deleteButton:zR,prompt:$R,logoutSection:HR,logoutButton:qR};function FR(){const{showAlert:n}=ft(),{phone:e,setPhoneModalOpen:t,clearPhone:i,setCheckoutModalOpen:a}=Hs(),{customer:o,addresses:l,loading:u,error:h,refetch:m}=er(),{theme:p,changeTheme:g}=YE(),[_,y]=A.useState({name:"",phone:""}),[x,j]=A.useState(!1),[w,S]=A.useState(null),[C,T]=A.useState(null),[B,D]=A.useState(!1);A.useEffect(()=>{o&&y({name:o.name,phone:o.phone})},[o]);const M=async q=>{await ae.from("customer_addresses").update({is_default:!1}).eq("customer_id",o.id);const{error:H}=await ae.from("customer_addresses").update({is_default:!0}).eq("id",q);H?n("Error al establecer la direccin predeterminada."):(n("Direccin predeterminada actualizada."),m())},$=async q=>{q.preventDefault();const{error:H}=await ae.from("customers").update({name:On.sanitize(_.name),phone:On.sanitize(_.phone)}).eq("id",o.id);H?n("Error al actualizar la informacin."):(n("Informacin actualizada con xito."),_.phone!==e?window.location.reload():m())},R=async()=>{C&&(await ae.from("customer_addresses").delete().eq("id",C.id),n("Direccin eliminada."),T(null),m())},N=async(q,H,G)=>{let E;const O={...q,customer_id:o.id};if(G?E=await ae.from("customer_addresses").update(O).eq("id",G):E=await ae.from("customer_addresses").insert(O),E.error)throw n(`Error al guardar: ${E.error.message}`),new Error(E.error.message);n(`Direccin ${G?"actualizada":"guardada"} con xito.`),m()},z=(q=null)=>{S(q),j(!0)},I=()=>{i(),D(!1)},U=()=>e?u?d.jsx(Vt,{}):h?d.jsxs("div",{className:Ct.prompt,children:[d.jsx("h2",{children:"Error Inesperado"}),d.jsx("p",{children:"No pudimos cargar tus datos."})]}):o?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:Ct.card,children:[d.jsx("h2",{children:"Mis Datos"}),d.jsxs("form",{onSubmit:$,className:Ct.form,children:[d.jsx("label",{htmlFor:"name",children:"Nombre:"}),d.jsx("input",{id:"name",type:"text",value:_.name,onChange:q=>y({..._,name:q.target.value})}),d.jsx("label",{htmlFor:"phone",children:"Nmero de WhatsApp:"}),d.jsx("input",{id:"phone",type:"tel",value:_.phone,onChange:q=>y({..._,phone:q.target.value})}),d.jsx("button",{type:"submit",className:Ct.actionButton,children:"Guardar Cambios"})]})]}),d.jsxs("div",{className:Ct.card,children:[d.jsx("h2",{children:"Apariencia"}),d.jsxs("div",{className:Ct.formGroup,children:[d.jsx("label",{htmlFor:"theme-select",children:"Tema de la aplicacin"}),d.jsxs("select",{id:"theme-select",value:p,onChange:q=>g(q.target.value),className:Ct.themeSelector,children:[d.jsx("option",{value:"light",children:"Claro"}),d.jsx("option",{value:"dark",children:"Oscuro"}),d.jsx("option",{value:"system",children:"Automtico (definido por el sistema)"})]})]})]}),d.jsxs("div",{className:Ct.card,children:[d.jsxs("div",{className:Ct.addressHeader,children:[d.jsx("h2",{children:"Mis Direcciones"}),d.jsx("button",{onClick:()=>z(),className:Ct.addButton,children:" + Aadir Nueva "})]}),l.length>0?d.jsx("div",{className:Ct.addressCarousel,children:l.map(q=>d.jsxs("div",{className:`${Ct.addressItem} ${q.is_default?Ct.defaultAddress:""}`,children:[d.jsxs("div",{children:[d.jsxs("div",{className:Ct.addressLabelContainer,children:[d.jsx("strong",{children:q.label}),q.is_default&&d.jsx("span",{className:Ct.defaultBadge,children:"Predeterminada"})]}),d.jsx("p",{children:q.address_reference||"Sin referencia"})]}),d.jsxs("div",{className:Ct.addressActions,children:[d.jsx("button",{onClick:()=>z(q),className:Ct.editButton,children:"Editar"}),d.jsx("button",{onClick:()=>T(q),className:Ct.deleteButton,children:"Eliminar"}),!q.is_default&&d.jsx("button",{onClick:()=>M(q.id),className:Ct.setDefaultButton,children:"Hacer Predeterminada"})]})]},q.id))}):d.jsx("p",{children:"No tienes direcciones guardadas."})]}),d.jsx("div",{className:Ct.logoutSection,children:d.jsx("button",{onClick:()=>D(!0),className:Ct.logoutButton,children:"Cerrar Sesin (Cambiar de nmero)"})})]}):d.jsxs("div",{className:Ct.prompt,children:[d.jsx("h2",{children:"Bienvenido!"}),d.jsx("p",{children:"Parece que eres nuevo por aqu. Completa tu perfil para guardar tus datos y direcciones."}),d.jsx("button",{onClick:()=>a(!0,"profile"),className:Ct.actionButton,children:"Completar mi perfil"})]}):d.jsx(sp,{});return d.jsxs(d.Fragment,{children:[d.jsx(ec,{title:"Mi Perfil - Entre Alas",description:"Administra tus datos personales, direcciones de entrega y preferencias de la aplicacin.",name:"Entre Alas",type:"website"}),d.jsxs("div",{className:Ct.container,children:[U(),d.jsx(Yu,{isOpen:x,onClose:()=>j(!1),onSave:N,address:w,customerId:o?.id}),d.jsx(Di,{isOpen:!!C,onClose:()=>T(null),onConfirm:R,title:"Eliminar Direccin?",children:"Ests a punto de eliminar esta direccin. Esta accin no se puede deshacer."}),d.jsx(Di,{isOpen:B,onClose:()=>D(!1),onConfirm:I,title:"Cerrar Sesin?",children:"Tu nmero se eliminar de este dispositivo y tendrs que volver a ingresarlo para ver tu perfil y pedidos."})]})]})}const GR="_container_1qcjw_1",VR="_subtitle_1qcjw_29",YR="_card_1qcjw_45",WR="_cardHeader_1qcjw_57",XR="_grid_1qcjw_87",KR="_gridItem_1qcjw_109",QR="_reviewList_1qcjw_139",ZR="_reviewItem_1qcjw_161",JR="_gridItemActions_1qcjw_219",e3="_addButton_1qcjw_227",t3="_removeButton_1qcjw_243",n3="_reviewProductInfo_1qcjw_269",s3="_reviewComment_1qcjw_301",i3="_reviewActions_1qcjw_315",a3="_actionButton_1qcjw_327",r3="_cancelButton_1qcjw_327",o3="_reviewEditor_1qcjw_365",l3="_prompt_1qcjw_381",c3="_unavailable_1qcjw_397",u3="_unavailableBadge_1qcjw_431",d3="_unavailableText_1qcjw_457",h3="_rewardsProgress_1qcjw_471",f3="_levelInfo_1qcjw_477",m3="_progressBarContainer_1qcjw_491",p3="_progressBar_1qcjw_491",g3="_progressText_1qcjw_517",_3="_rewardsLists_1qcjw_529",v3="_upcomingRewards_1qcjw_573",y3="_referralBox_1qcjw_583",b3="_referralActions_1qcjw_621",x3="_referralStats_1qcjw_671",w3="_unlockedReward_1qcjw_687",S3="_copyCodeButton_1qcjw_699",C3="_claimCodeButton_1qcjw_721",j3="_centeredLayout_1qcjw_745",E3="_accordionHeader_1qcjw_767",A3="_accordionIcon_1qcjw_783",T3="_open_1qcjw_791",k3="_accordionContent_1qcjw_799",we={container:GR,subtitle:VR,card:YR,cardHeader:WR,grid:XR,gridItem:KR,reviewList:QR,reviewItem:ZR,gridItemActions:JR,addButton:e3,removeButton:t3,reviewProductInfo:n3,reviewComment:s3,reviewActions:i3,actionButton:a3,cancelButton:r3,reviewEditor:o3,prompt:l3,unavailable:c3,unavailableBadge:u3,unavailableText:d3,rewardsProgress:h3,levelInfo:f3,progressBarContainer:m3,progressBar:p3,progressText:g3,rewardsLists:_3,upcomingRewards:v3,referralBox:y3,referralActions:b3,referralStats:x3,unlockedReward:w3,copyCodeButton:S3,claimCodeButton:C3,centeredLayout:j3,accordionHeader:E3,accordionIcon:A3,open:T3,accordionContent:k3};var O3=Object.defineProperty,Wu=Object.getOwnPropertySymbols,Rx=Object.prototype.hasOwnProperty,Mx=Object.prototype.propertyIsEnumerable,uy=(n,e,t)=>e in n?O3(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Mm=(n,e)=>{for(var t in e||(e={}))Rx.call(e,t)&&uy(n,t,e[t]);if(Wu)for(var t of Wu(e))Mx.call(e,t)&&uy(n,t,e[t]);return n},Dm=(n,e)=>{var t={};for(var i in n)Rx.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Wu)for(var i of Wu(n))e.indexOf(i)<0&&Mx.call(n,i)&&(t[i]=n[i]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Wa;(n=>{const e=class Ue{constructor(h,m,p,g){if(this.version=h,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],h<Ue.MIN_VERSION||h>Ue.MAX_VERSION)throw new RangeError("Version value out of range");if(g<-1||g>7)throw new RangeError("Mask value out of range");this.size=h*4+17;let _=[];for(let x=0;x<this.size;x++)_.push(!1);for(let x=0;x<this.size;x++)this.modules.push(_.slice()),this.isFunction.push(_.slice());this.drawFunctionPatterns();const y=this.addEccAndInterleave(p);if(this.drawCodewords(y),g==-1){let x=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const w=this.getPenaltyScore();w<x&&(g=j,x=w),this.applyMask(j)}}a(0<=g&&g<=7),this.mask=g,this.applyMask(g),this.drawFormatBits(g),this.isFunction=[]}static encodeText(h,m){const p=n.QrSegment.makeSegments(h);return Ue.encodeSegments(p,m)}static encodeBinary(h,m){const p=n.QrSegment.makeBytes(h);return Ue.encodeSegments([p],m)}static encodeSegments(h,m,p=1,g=40,_=-1,y=!0){if(!(Ue.MIN_VERSION<=p&&p<=g&&g<=Ue.MAX_VERSION)||_<-1||_>7)throw new RangeError("Invalid value");let x,j;for(x=p;;x++){const T=Ue.getNumDataCodewords(x,m)*8,B=l.getTotalBits(h,x);if(B<=T){j=B;break}if(x>=g)throw new RangeError("Data too long")}for(const T of[Ue.Ecc.MEDIUM,Ue.Ecc.QUARTILE,Ue.Ecc.HIGH])y&&j<=Ue.getNumDataCodewords(x,T)*8&&(m=T);let w=[];for(const T of h){t(T.mode.modeBits,4,w),t(T.numChars,T.mode.numCharCountBits(x),w);for(const B of T.getData())w.push(B)}a(w.length==j);const S=Ue.getNumDataCodewords(x,m)*8;a(w.length<=S),t(0,Math.min(4,S-w.length),w),t(0,(8-w.length%8)%8,w),a(w.length%8==0);for(let T=236;w.length<S;T^=253)t(T,8,w);let C=[];for(;C.length*8<w.length;)C.push(0);return w.forEach((T,B)=>C[B>>>3]|=T<<7-(B&7)),new Ue(x,m,C,_)}getModule(h,m){return 0<=h&&h<this.size&&0<=m&&m<this.size&&this.modules[m][h]}getModules(){return this.modules}drawFunctionPatterns(){for(let p=0;p<this.size;p++)this.setFunctionModule(6,p,p%2==0),this.setFunctionModule(p,6,p%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const h=this.getAlignmentPatternPositions(),m=h.length;for(let p=0;p<m;p++)for(let g=0;g<m;g++)p==0&&g==0||p==0&&g==m-1||p==m-1&&g==0||this.drawAlignmentPattern(h[p],h[g]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(h){const m=this.errorCorrectionLevel.formatBits<<3|h;let p=m;for(let _=0;_<10;_++)p=p<<1^(p>>>9)*1335;const g=(m<<10|p)^21522;a(g>>>15==0);for(let _=0;_<=5;_++)this.setFunctionModule(8,_,i(g,_));this.setFunctionModule(8,7,i(g,6)),this.setFunctionModule(8,8,i(g,7)),this.setFunctionModule(7,8,i(g,8));for(let _=9;_<15;_++)this.setFunctionModule(14-_,8,i(g,_));for(let _=0;_<8;_++)this.setFunctionModule(this.size-1-_,8,i(g,_));for(let _=8;_<15;_++)this.setFunctionModule(8,this.size-15+_,i(g,_));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let h=this.version;for(let p=0;p<12;p++)h=h<<1^(h>>>11)*7973;const m=this.version<<12|h;a(m>>>18==0);for(let p=0;p<18;p++){const g=i(m,p),_=this.size-11+p%3,y=Math.floor(p/3);this.setFunctionModule(_,y,g),this.setFunctionModule(y,_,g)}}drawFinderPattern(h,m){for(let p=-4;p<=4;p++)for(let g=-4;g<=4;g++){const _=Math.max(Math.abs(g),Math.abs(p)),y=h+g,x=m+p;0<=y&&y<this.size&&0<=x&&x<this.size&&this.setFunctionModule(y,x,_!=2&&_!=4)}}drawAlignmentPattern(h,m){for(let p=-2;p<=2;p++)for(let g=-2;g<=2;g++)this.setFunctionModule(h+g,m+p,Math.max(Math.abs(g),Math.abs(p))!=1)}setFunctionModule(h,m,p){this.modules[m][h]=p,this.isFunction[m][h]=!0}addEccAndInterleave(h){const m=this.version,p=this.errorCorrectionLevel;if(h.length!=Ue.getNumDataCodewords(m,p))throw new RangeError("Invalid argument");const g=Ue.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][m],_=Ue.ECC_CODEWORDS_PER_BLOCK[p.ordinal][m],y=Math.floor(Ue.getNumRawDataModules(m)/8),x=g-y%g,j=Math.floor(y/g);let w=[];const S=Ue.reedSolomonComputeDivisor(_);for(let T=0,B=0;T<g;T++){let D=h.slice(B,B+j-_+(T<x?0:1));B+=D.length;const M=Ue.reedSolomonComputeRemainder(D,S);T<x&&D.push(0),w.push(D.concat(M))}let C=[];for(let T=0;T<w[0].length;T++)w.forEach((B,D)=>{(T!=j-_||D>=x)&&C.push(B[T])});return a(C.length==y),C}drawCodewords(h){if(h.length!=Math.floor(Ue.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let p=this.size-1;p>=1;p-=2){p==6&&(p=5);for(let g=0;g<this.size;g++)for(let _=0;_<2;_++){const y=p-_,j=(p+1&2)==0?this.size-1-g:g;!this.isFunction[j][y]&&m<h.length*8&&(this.modules[j][y]=i(h[m>>>3],7-(m&7)),m++)}}a(m==h.length*8)}applyMask(h){if(h<0||h>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let p=0;p<this.size;p++){let g;switch(h){case 0:g=(p+m)%2==0;break;case 1:g=m%2==0;break;case 2:g=p%3==0;break;case 3:g=(p+m)%3==0;break;case 4:g=(Math.floor(p/3)+Math.floor(m/2))%2==0;break;case 5:g=p*m%2+p*m%3==0;break;case 6:g=(p*m%2+p*m%3)%2==0;break;case 7:g=((p+m)%2+p*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][p]&&g&&(this.modules[m][p]=!this.modules[m][p])}}getPenaltyScore(){let h=0;for(let _=0;_<this.size;_++){let y=!1,x=0,j=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[_][w]==y?(x++,x==5?h+=Ue.PENALTY_N1:x>5&&h++):(this.finderPenaltyAddHistory(x,j),y||(h+=this.finderPenaltyCountPatterns(j)*Ue.PENALTY_N3),y=this.modules[_][w],x=1);h+=this.finderPenaltyTerminateAndCount(y,x,j)*Ue.PENALTY_N3}for(let _=0;_<this.size;_++){let y=!1,x=0,j=[0,0,0,0,0,0,0];for(let w=0;w<this.size;w++)this.modules[w][_]==y?(x++,x==5?h+=Ue.PENALTY_N1:x>5&&h++):(this.finderPenaltyAddHistory(x,j),y||(h+=this.finderPenaltyCountPatterns(j)*Ue.PENALTY_N3),y=this.modules[w][_],x=1);h+=this.finderPenaltyTerminateAndCount(y,x,j)*Ue.PENALTY_N3}for(let _=0;_<this.size-1;_++)for(let y=0;y<this.size-1;y++){const x=this.modules[_][y];x==this.modules[_][y+1]&&x==this.modules[_+1][y]&&x==this.modules[_+1][y+1]&&(h+=Ue.PENALTY_N2)}let m=0;for(const _ of this.modules)m=_.reduce((y,x)=>y+(x?1:0),m);const p=this.size*this.size,g=Math.ceil(Math.abs(m*20-p*10)/p)-1;return a(0<=g&&g<=9),h+=g*Ue.PENALTY_N4,a(0<=h&&h<=2568888),h}getAlignmentPatternPositions(){if(this.version==1)return[];{const h=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(h*2-2))*2;let p=[6];for(let g=this.size-7;p.length<h;g-=m)p.splice(1,0,g);return p}}static getNumRawDataModules(h){if(h<Ue.MIN_VERSION||h>Ue.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*h+128)*h+64;if(h>=2){const p=Math.floor(h/7)+2;m-=(25*p-10)*p-55,h>=7&&(m-=36)}return a(208<=m&&m<=29648),m}static getNumDataCodewords(h,m){return Math.floor(Ue.getNumRawDataModules(h)/8)-Ue.ECC_CODEWORDS_PER_BLOCK[m.ordinal][h]*Ue.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][h]}static reedSolomonComputeDivisor(h){if(h<1||h>255)throw new RangeError("Degree out of range");let m=[];for(let g=0;g<h-1;g++)m.push(0);m.push(1);let p=1;for(let g=0;g<h;g++){for(let _=0;_<m.length;_++)m[_]=Ue.reedSolomonMultiply(m[_],p),_+1<m.length&&(m[_]^=m[_+1]);p=Ue.reedSolomonMultiply(p,2)}return m}static reedSolomonComputeRemainder(h,m){let p=m.map(g=>0);for(const g of h){const _=g^p.shift();p.push(0),m.forEach((y,x)=>p[x]^=Ue.reedSolomonMultiply(y,_))}return p}static reedSolomonMultiply(h,m){if(h>>>8||m>>>8)throw new RangeError("Byte out of range");let p=0;for(let g=7;g>=0;g--)p=p<<1^(p>>>7)*285,p^=(m>>>g&1)*h;return a(p>>>8==0),p}finderPenaltyCountPatterns(h){const m=h[1];a(m<=this.size*3);const p=m>0&&h[2]==m&&h[3]==m*3&&h[4]==m&&h[5]==m;return(p&&h[0]>=m*4&&h[6]>=m?1:0)+(p&&h[6]>=m*4&&h[0]>=m?1:0)}finderPenaltyTerminateAndCount(h,m,p){return h&&(this.finderPenaltyAddHistory(m,p),m=0),m+=this.size,this.finderPenaltyAddHistory(m,p),this.finderPenaltyCountPatterns(p)}finderPenaltyAddHistory(h,m){m[0]==0&&(h+=this.size),m.pop(),m.unshift(h)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(u,h,m){if(h<0||h>31||u>>>h)throw new RangeError("Value out of range");for(let p=h-1;p>=0;p--)m.push(u>>>p&1)}function i(u,h){return(u>>>h&1)!=0}function a(u){if(!u)throw new Error("Assertion error")}const o=class Bt{constructor(h,m,p){if(this.mode=h,this.numChars=m,this.bitData=p,m<0)throw new RangeError("Invalid argument");this.bitData=p.slice()}static makeBytes(h){let m=[];for(const p of h)t(p,8,m);return new Bt(Bt.Mode.BYTE,h.length,m)}static makeNumeric(h){if(!Bt.isNumeric(h))throw new RangeError("String contains non-numeric characters");let m=[];for(let p=0;p<h.length;){const g=Math.min(h.length-p,3);t(parseInt(h.substring(p,p+g),10),g*3+1,m),p+=g}return new Bt(Bt.Mode.NUMERIC,h.length,m)}static makeAlphanumeric(h){if(!Bt.isAlphanumeric(h))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],p;for(p=0;p+2<=h.length;p+=2){let g=Bt.ALPHANUMERIC_CHARSET.indexOf(h.charAt(p))*45;g+=Bt.ALPHANUMERIC_CHARSET.indexOf(h.charAt(p+1)),t(g,11,m)}return p<h.length&&t(Bt.ALPHANUMERIC_CHARSET.indexOf(h.charAt(p)),6,m),new Bt(Bt.Mode.ALPHANUMERIC,h.length,m)}static makeSegments(h){return h==""?[]:Bt.isNumeric(h)?[Bt.makeNumeric(h)]:Bt.isAlphanumeric(h)?[Bt.makeAlphanumeric(h)]:[Bt.makeBytes(Bt.toUtf8ByteArray(h))]}static makeEci(h){let m=[];if(h<0)throw new RangeError("ECI assignment value out of range");if(h<128)t(h,8,m);else if(h<16384)t(2,2,m),t(h,14,m);else if(h<1e6)t(6,3,m),t(h,21,m);else throw new RangeError("ECI assignment value out of range");return new Bt(Bt.Mode.ECI,0,m)}static isNumeric(h){return Bt.NUMERIC_REGEX.test(h)}static isAlphanumeric(h){return Bt.ALPHANUMERIC_REGEX.test(h)}getData(){return this.bitData.slice()}static getTotalBits(h,m){let p=0;for(const g of h){const _=g.mode.numCharCountBits(m);if(g.numChars>=1<<_)return 1/0;p+=4+_+g.bitData.length}return p}static toUtf8ByteArray(h){h=encodeURI(h);let m=[];for(let p=0;p<h.length;p++)h.charAt(p)!="%"?m.push(h.charCodeAt(p)):(m.push(parseInt(h.substring(p+1,p+3),16)),p+=2);return m}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=o;n.QrSegment=o})(Wa||(Wa={}));(n=>{(e=>{const t=class{constructor(a,o){this.ordinal=a,this.formatBits=o}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Wa||(Wa={}));(n=>{(e=>{const t=class{constructor(a,o){this.modeBits=a,this.numBitsCharCount=o}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Wa||(Wa={}));var to=Wa;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var N3={L:to.QrCode.Ecc.LOW,M:to.QrCode.Ecc.MEDIUM,Q:to.QrCode.Ecc.QUARTILE,H:to.QrCode.Ecc.HIGH},Dx=128,Bx="L",Lx="#FFFFFF",Px="#000000",Ix=!1,Ux=1,R3=4,M3=0,D3=.1;function zx(n,e=0){const t=[];return n.forEach(function(i,a){let o=null;i.forEach(function(l,u){if(!l&&o!==null){t.push(`M${o+e} ${a+e}h${u-o}v1H${o+e}z`),o=null;return}if(u===i.length-1){if(!l)return;o===null?t.push(`M${u+e},${a+e} h1v1H${u+e}z`):t.push(`M${o+e},${a+e} h${u+1-o}v1H${o+e}z`);return}l&&o===null&&(o=u)})}),t.join("")}function $x(n,e){return n.slice().map((t,i)=>i<e.y||i>=e.y+e.h?t:t.map((a,o)=>o<e.x||o>=e.x+e.w?a:!1))}function B3(n,e,t,i){if(i==null)return null;const a=n.length+t*2,o=Math.floor(e*D3),l=a/e,u=(i.width||o)*l,h=(i.height||o)*l,m=i.x==null?n.length/2-u/2:i.x*l,p=i.y==null?n.length/2-h/2:i.y*l,g=i.opacity==null?1:i.opacity;let _=null;if(i.excavate){let x=Math.floor(m),j=Math.floor(p),w=Math.ceil(u+m-x),S=Math.ceil(h+p-j);_={x,y:j,w,h:S}}const y=i.crossOrigin;return{x:m,y:p,h,w:u,excavation:_,opacity:g,crossOrigin:y}}function L3(n,e){return e!=null?Math.max(Math.floor(e),0):n?R3:M3}function Hx({value:n,level:e,minVersion:t,includeMargin:i,marginSize:a,imageSettings:o,size:l,boostLevel:u}){let h=Xe.useMemo(()=>{const x=(Array.isArray(n)?n:[n]).reduce((j,w)=>(j.push(...to.QrSegment.makeSegments(w)),j),[]);return to.QrCode.encodeSegments(x,N3[e],t,void 0,void 0,u)},[n,e,t,u]);const{cells:m,margin:p,numCells:g,calculatedImageSettings:_}=Xe.useMemo(()=>{let y=h.getModules();const x=L3(i,a),j=y.length+x*2,w=B3(y,l,x,o);return{cells:y,margin:x,numCells:j,calculatedImageSettings:w}},[h,l,o,i,a]);return{qrcode:h,margin:p,cells:m,numCells:g,calculatedImageSettings:_}}var P3=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),qx=Xe.forwardRef(function(e,t){const i=e,{value:a,size:o=Dx,level:l=Bx,bgColor:u=Lx,fgColor:h=Px,includeMargin:m=Ix,minVersion:p=Ux,boostLevel:g,marginSize:_,imageSettings:y}=i,j=Dm(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:w}=j,S=Dm(j,["style"]),C=y?.src,T=Xe.useRef(null),B=Xe.useRef(null),D=Xe.useCallback(H=>{T.current=H,typeof t=="function"?t(H):t&&(t.current=H)},[t]),[M,$]=Xe.useState(!1),{margin:R,cells:N,numCells:z,calculatedImageSettings:I}=Hx({value:a,level:l,minVersion:p,boostLevel:g,includeMargin:m,marginSize:_,imageSettings:y,size:o});Xe.useEffect(()=>{if(T.current!=null){const H=T.current,G=H.getContext("2d");if(!G)return;let E=N;const O=B.current,F=I!=null&&O!==null&&O.complete&&O.naturalHeight!==0&&O.naturalWidth!==0;F&&I.excavation!=null&&(E=$x(N,I.excavation));const Y=window.devicePixelRatio||1;H.height=H.width=o*Y;const L=o/z*Y;G.scale(L,L),G.fillStyle=u,G.fillRect(0,0,z,z),G.fillStyle=h,P3?G.fill(new Path2D(zx(E,R))):N.forEach(function(X,J){X.forEach(function(ee,ne){ee&&G.fillRect(ne+R,J+R,1,1)})}),I&&(G.globalAlpha=I.opacity),F&&G.drawImage(O,I.x+R,I.y+R,I.w,I.h)}}),Xe.useEffect(()=>{$(!1)},[C]);const U=Mm({height:o,width:o},w);let q=null;return C!=null&&(q=Xe.createElement("img",{src:C,key:C,style:{display:"none"},onLoad:()=>{$(!0)},ref:B,crossOrigin:I?.crossOrigin})),Xe.createElement(Xe.Fragment,null,Xe.createElement("canvas",Mm({style:U,height:o,width:o,ref:D,role:"img"},S)),q)});qx.displayName="QRCodeCanvas";var I3=Xe.forwardRef(function(e,t){const i=e,{value:a,size:o=Dx,level:l=Bx,bgColor:u=Lx,fgColor:h=Px,includeMargin:m=Ix,minVersion:p=Ux,boostLevel:g,title:_,marginSize:y,imageSettings:x}=i,j=Dm(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:w,cells:S,numCells:C,calculatedImageSettings:T}=Hx({value:a,level:l,minVersion:p,boostLevel:g,includeMargin:m,marginSize:y,imageSettings:x,size:o});let B=S,D=null;x!=null&&T!=null&&(T.excavation!=null&&(B=$x(S,T.excavation)),D=Xe.createElement("image",{href:x.src,height:T.h,width:T.w,x:T.x+w,y:T.y+w,preserveAspectRatio:"none",opacity:T.opacity,crossOrigin:T.crossOrigin}));const M=zx(B,w);return Xe.createElement("svg",Mm({height:o,width:o,viewBox:`0 0 ${C} ${C}`,ref:t,role:"img"},j),!!_&&Xe.createElement("title",null,_),Xe.createElement("path",{fill:u,d:`M0,0 h${C}v${C}H0z`,shapeRendering:"crispEdges"}),Xe.createElement("path",{fill:h,d:M,shapeRendering:"crispEdges"}),D)});I3.displayName="QRCodeSVG";const U3="_overlay_33srq_1",z3="_modalContent_33srq_15",$3="_closeButton_33srq_27",H3="_qrContainer_33srq_43",q3="_shareButton_33srq_59",wl={overlay:U3,modalContent:z3,closeButton:$3,qrContainer:H3,shareButton:q3},F3=({url:n,onClose:e})=>{const{showAlert:t}=ft(),i=A.useRef(null),a=async()=>{i.current&&i.current.querySelector("canvas").toBlob(async l=>{if(navigator.share)try{await navigator.share({title:"Te invito a Entre Alas!",text:"Usa mi enlace de referido para registrarte.",files:[new File([l],"codigo-qr.png",{type:l.type})]})}catch(u){console.error("Error al compartir:",u),t("No se pudo compartir el cdigo QR.")}else t("Tu navegador no soporta la funcin de compartir.")})};return d.jsx("div",{className:wl.overlay,onClick:e,children:d.jsxs("div",{className:wl.modalContent,onClick:o=>o.stopPropagation(),children:[d.jsx("button",{onClick:e,className:wl.closeButton,children:""}),d.jsx("h2",{children:"Comparte tu Cdigo QR"}),d.jsx("p",{children:"Tus amigos pueden escanear este cdigo para usar tu enlace de referido."}),d.jsx("div",{className:wl.qrContainer,ref:i,children:d.jsx(qx,{value:n,size:256,bgColor:"#ffffff",fgColor:"#000000",level:"L",includeMargin:!0})}),d.jsx("button",{onClick:a,className:wl.shareButton,children:"Compartir QR"})]})})},G3=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),V3=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),Fx=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M12 2L9 9h6l-3-7zM9 9H2l3 7h2M15 9h7l-3 7h-2M12 22l-3-3m3 3l3-3"})}),Y3=({customer:n})=>{const{showAlert:e}=ft(),[t,i]=A.useState(!1),a=`${window.location.origin}/?ref=${n.referral_code}`,o=()=>{navigator.clipboard.writeText(a).then(()=>{e("Enlace de referido copiado!")})};return d.jsxs("div",{className:we.card,children:[d.jsxs("div",{className:we.cardHeader,children:[d.jsx(Fx,{}),d.jsx("h2",{children:"Invita y Gana"})]}),d.jsx("p",{children:"Comparte tu enlace de referido con tus amigos. Cuando se registren usando tu enlace, acumulars puntos para subir de nivel y obtener recompensas!"}),d.jsxs("div",{className:we.referralBox,children:[d.jsx("input",{type:"text",readOnly:!0,value:a}),d.jsxs("div",{className:we.referralActions,children:[d.jsx("button",{onClick:o,className:"admin-button-primary",children:"Copiar Enlace"}),d.jsx("button",{onClick:()=>i(!0),className:"admin-button-secondary",children:"Mostrar QR"})]})]}),d.jsx("div",{className:we.referralStats,children:d.jsxs("p",{children:[d.jsx("strong",{children:"Amigos Invitados:"})," ",n.referral_count||0]})}),t&&d.jsx(F3,{url:a,onClose:()=>i(!1)})]})},W3=({customerId:n})=>{const[e,t]=A.useState(null),[i,a]=A.useState(!0),{showAlert:o}=ft(),[l,u]=A.useState(!0),h=A.useCallback(async()=>{if(!n)return;const{data:S,error:C}=await ae.rpc("get_customer_rewards_progress",{p_customer_id:n});C?console.error("Error fetching rewards progress:",C):t(S),a(!1)},[n]);A.useEffect(()=>{h()},[h]),A.useEffect(()=>{if(!n)return;const S=T=>{console.log("Cambio detectado, actualizando recompensas...",T),h()},C=ae.channel(`customer-rewards-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"customers",filter:`id=eq.${n}`},S).on("postgres_changes",{event:"*",schema:"public",table:"referral_levels"},S).on("postgres_changes",{event:"*",schema:"public",table:"rewards"},S).subscribe();return()=>{ae.removeChannel(C)}},[n,h]);const m=async S=>{const{data:C,error:T}=await ae.rpc("generate_personal_reward_code",{p_customer_id:n,p_reward_id:S.id});T?o("Hubo un error al generar tu cdigo. Es posible que ya lo hayas reclamado."):(o("Cdigo personal generado! Cpialo y salo en tu carrito."),h())},p=S=>{navigator.clipboard.writeText(S),o(`Cdigo "${S}" copiado!`)};if(i)return d.jsx(Vt,{});if(!e)return d.jsx("p",{children:"No se pudo cargar tu progreso de recompensas."});const{current_level:g,next_level:_,referral_count:y}=e,x=_?.min_referrals?y/_.min_referrals*100:g?.name?100:0,j=!g?.name&&!_?.name,w=g?.name&&!_?.name;return d.jsxs("div",{className:we.card,children:[d.jsxs("div",{className:we.cardHeader,children:[d.jsx(Fx,{}),d.jsx("h2",{children:"Mis Recompensas"})]}),d.jsxs("div",{className:we.rewardsProgress,children:[d.jsxs("div",{className:we.levelInfo,children:[g?.name&&d.jsxs("span",{children:["Nivel actual: ",d.jsx("strong",{children:g.name})]}),_?.name&&d.jsxs("span",{children:["Siguiente nivel: ",d.jsx("strong",{children:_.name})]})]}),!j&&d.jsx("div",{className:we.progressBarContainer,children:d.jsx("div",{className:we.progressBar,style:{width:`${x}%`}})}),d.jsx("p",{className:we.progressText,children:j?"El sistema de recompensas se est preparando. Vuelve pronto!":w?"Has alcanzado el nivel ms alto! Eres un(a) crack. ":`Necesitas ${_.min_referrals-y} referidos ms para el siguiente nivel.`})]}),!j&&d.jsxs("div",{className:`${we.rewardsLists} ${w?we.centeredLayout:""}`,children:[d.jsxs("div",{children:[d.jsxs("div",{className:we.accordionHeader,onClick:()=>u(!l),children:[d.jsx("h4",{children:"Recompensas Desbloqueadas"}),d.jsx("span",{className:`${we.accordionIcon} ${l?we.open:""}`,children:""})]}),d.jsx("div",{className:`${we.accordionContent} ${l?we.open:""}`,children:d.jsx("ul",{children:e.unlocked_rewards?.length>0?e.unlocked_rewards.map(S=>{const C=e.claimed_rewards?.find(T=>T.reward_id===S.id);return d.jsx("li",{children:d.jsxs("div",{className:we.unlockedReward,children:[d.jsxs("span",{children:[" ",S.description]}),C?d.jsxs("button",{onClick:()=>p(C.generated_code),className:we.copyCodeButton,children:["Copiar: ",d.jsx("strong",{children:C.generated_code})]}):S.reward_code&&d.jsx("button",{onClick:()=>m(S),className:we.claimCodeButton,children:"Reclama tu cdigo nico"})]})},S.id)}):d.jsx("li",{children:"Cuando hayas alcanzado la meta aqui apareceran tus remcompensa"})})})]}),_?.name&&d.jsxs("div",{children:[d.jsx("h4",{children:"Prximas Recompensas"}),d.jsx("ul",{className:we.upcomingRewards,children:e.upcoming_rewards?.length>0?e.upcoming_rewards.map(S=>d.jsxs("li",{children:[" ",S.description]},S.id)):d.jsx("li",{children:"Prximamente..."})})]})]})]})};function X3(){const{phone:n,setCheckoutModalOpen:e}=Hs(),{addToCart:t,showToast:i}=Ja(),{products:a}=Jl(),{customer:o,loading:l,error:u}=er(),{favorites:h,reviews:m,loading:p,refetch:g}=cx(),[_,y]=A.useState(null),[x,j]=A.useState(null),[w,S]=A.useState(null),C=l||p,T=A.useMemo(()=>o?m.filter(N=>N.customer_id===o.id):[],[m,o]),B=async()=>{!w||!o||(await ae.from("customer_favorites").delete().match({customer_id:o.id,product_id:w.products.id}),i(`${w.products.name} eliminado de tus favoritos.`),S(null),g())},D=async()=>{if(!_)return;const{error:N}=await ae.from("product_reviews").update({comment:_.comment,rating:_.rating}).eq("id",_.id);N?i("Error al actualizar la resea."):(i("Resea actualizada con xito."),y(null),g())},M=async()=>{x&&(await ae.from("product_reviews").delete().eq("id",x.id),i("Resea eliminada."),j(null),g())},$=(N,z)=>{N.stopPropagation();const I=a.find(U=>U.id===z.id);if(!I){i("Lo sentimos, este producto ya no est disponible.");return}t(I,1),i(`${I.name} aadido al carrito!`)},R=()=>n?C?d.jsx(Vt,{}):u?d.jsxs("div",{className:we.prompt,children:[d.jsx("h2",{children:"Error Inesperado"}),d.jsx("p",{children:"No pudimos cargar tus datos."})]}):o?d.jsxs(d.Fragment,{children:[d.jsx("p",{className:we.subtitle,children:"Gestiona tus recompensas, productos favoritos y reseas."}),o.referral_code&&d.jsx(Y3,{customer:o}),d.jsx(W3,{customerId:o.id}),d.jsxs("div",{className:we.card,children:[d.jsxs("div",{className:we.cardHeader,children:[d.jsx(G3,{}),d.jsxs("h2",{children:["Mis Favoritos (",h.length,")"]})]}),h.length>0?d.jsx("div",{className:we.grid,children:h.map(N=>N.products&&d.jsxs("div",{className:`${we.gridItem} ${N.products.is_active?"":we.unavailable}`,children:[!N.products.is_active&&d.jsx("div",{className:we.unavailableBadge,children:"No disponible"}),d.jsx(bs,{src:N.products.image_url,alt:N.products.name}),d.jsx("h3",{children:N.products.name}),d.jsxs("div",{className:we.gridItemActions,children:[d.jsx("button",{onClick:z=>$(z,N.products),className:we.addButton,disabled:!N.products.is_active,children:"Aadir"}),d.jsx("button",{onClick:()=>S(N),className:we.removeButton,children:"Quitar"})]})]},N.products.id))}):d.jsx("p",{children:"An no has guardado productos favoritos."})]}),d.jsxs("div",{className:we.card,children:[d.jsxs("div",{className:we.cardHeader,children:[d.jsx(V3,{}),d.jsxs("h2",{children:["Mis Reseas (",T.length,")"]})]}),T.length>0?d.jsx("div",{className:we.reviewList,children:T.map(N=>N.products&&d.jsx("div",{className:we.reviewItem,children:_?.id===N.id?d.jsxs("div",{className:we.reviewEditor,children:[d.jsxs("div",{className:we.reviewProductInfo,children:[d.jsx(bs,{src:N.products.image_url,alt:N.products.name}),d.jsxs("h4",{children:["Editando: ",d.jsx("strong",{children:N.products.name})]})]}),d.jsx("textarea",{rows:"3",value:_.comment,onChange:z=>y({..._,comment:z.target.value})}),d.jsxs("div",{className:we.reviewActions,children:[d.jsx("button",{onClick:()=>y(null),className:we.cancelButton,children:"Cancelar"}),d.jsx("button",{onClick:D,className:we.actionButton,children:"Guardar"})]})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:we.reviewProductInfo,children:[d.jsx(bs,{src:N.products.image_url,alt:N.products.name}),d.jsxs("h4",{children:[N.products.name," ",!N.products.is_active&&d.jsx("span",{className:we.unavailableText,children:"(No disponible)"})]})]}),d.jsxs("p",{className:we.reviewComment,children:['"',N.comment,'"']}),d.jsxs("div",{className:we.reviewActions,children:[d.jsx("button",{onClick:()=>y(N),children:"Editar"}),d.jsx("button",{onClick:()=>j(N),className:we.removeButton,children:"Eliminar"})]})]})},N.id))}):d.jsx("p",{children:"Todava no has escrito ninguna resea."})]})]}):d.jsxs("div",{className:we.prompt,children:[d.jsx("h2",{children:"Bienvenido!"}),d.jsx("p",{children:"Completa tu perfil para guardar tus favoritos y reseas."}),d.jsx("button",{onClick:()=>e(!0,"profile"),className:we.actionButton,children:"Completar mi perfil"})]}):d.jsx(sp,{});return d.jsxs(d.Fragment,{children:[d.jsx(ec,{title:"Mi Actividad y Recompensas - Entre Alas",description:"Revisa tus productos favoritos, gestiona tus reseas y sigue tu progreso en el sistema de recompensas.",name:"Entre Alas",type:"website"}),d.jsxs("div",{className:we.container,children:[R(),d.jsxs(Di,{isOpen:!!w,onClose:()=>S(null),onConfirm:B,title:"Quitar de Favoritos?",children:['Eliminar "',w?.products?.name,'" de tus favoritos?']}),d.jsx(Di,{isOpen:!!x,onClose:()=>j(null),onConfirm:M,title:"Eliminar Resea?",children:"Esta accin es permanente."})]})]})}const K3="_container_1foic_1",Q3="_header_1foic_11",Z3="_title_1foic_17",J3="_subtitle_1foic_27",eM="_statsGrid_1foic_39",tM="_statCard_1foic_53",nM="_statInfo_1foic_85",sM="_statTitle_1foic_95",iM="_statValue_1foic_105",aM="_statEvolution_1foic_115",rM="_iconWrapper_1foic_127",oM="_chartCard_1foic_151",lM="_chartContainer_1foic_183",cM="_mainGrid_1foic_201",uM="_topProducts_1foic_231",dM="_orderStatus_1foic_233",hM="_recentOrders_1foic_235",fM="_recentList_1foic_269",mM="_statusBadge_1foic_315",pM="_pendiente_1foic_331",gM="_en_proceso_1foic_333",_M="_completado_1foic_335",vM="_cancelado_1foic_337",Tt={container:K3,header:Q3,title:Z3,subtitle:J3,statsGrid:eM,statCard:tM,statInfo:nM,statTitle:sM,statValue:iM,statEvolution:aM,iconWrapper:rM,chartCard:oM,chartContainer:lM,mainGrid:cM,topProducts:uM,orderStatus:dM,recentOrders:hM,recentList:fM,statusBadge:mM,pendiente:pM,en_proceso:gM,completado:_M,cancelado:vM};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function tc(n){return n+.5|0}const da=(n,e,t)=>Math.max(Math.min(n,t),e);function Ol(n){return da(tc(n*2.55),0,255)}function fa(n){return da(tc(n*255),0,255)}function Oi(n){return da(tc(n/2.55)/100,0,1)}function dy(n){return da(tc(n*100),0,100)}const _s={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Bm=[..."0123456789ABCDEF"],yM=n=>Bm[n&15],bM=n=>Bm[(n&240)>>4]+Bm[n&15],xu=n=>(n&240)>>4===(n&15),xM=n=>xu(n.r)&&xu(n.g)&&xu(n.b)&&xu(n.a);function wM(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&_s[n[1]]*17,g:255&_s[n[2]]*17,b:255&_s[n[3]]*17,a:e===5?_s[n[4]]*17:255}:(e===7||e===9)&&(t={r:_s[n[1]]<<4|_s[n[2]],g:_s[n[3]]<<4|_s[n[4]],b:_s[n[5]]<<4|_s[n[6]],a:e===9?_s[n[7]]<<4|_s[n[8]]:255})),t}const SM=(n,e)=>n<255?e(n):"";function CM(n){var e=xM(n)?yM:bM;return n?"#"+e(n.r)+e(n.g)+e(n.b)+SM(n.a,e):void 0}const jM=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Gx(n,e,t){const i=e*Math.min(t,1-t),a=(o,l=(o+n/30)%12)=>t-i*Math.max(Math.min(l-3,9-l,1),-1);return[a(0),a(8),a(4)]}function EM(n,e,t){const i=(a,o=(a+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function AM(n,e,t){const i=Gx(n,1,.5);let a;for(e+t>1&&(a=1/(e+t),e*=a,t*=a),a=0;a<3;a++)i[a]*=1-e-t,i[a]+=e;return i}function TM(n,e,t,i,a){return n===a?(e-t)/i+(e<t?6:0):e===a?(t-n)/i+2:(n-e)/i+4}function ip(n){const t=n.r/255,i=n.g/255,a=n.b/255,o=Math.max(t,i,a),l=Math.min(t,i,a),u=(o+l)/2;let h,m,p;return o!==l&&(p=o-l,m=u>.5?p/(2-o-l):p/(o+l),h=TM(t,i,a,p,o),h=h*60+.5),[h|0,m||0,u]}function ap(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(fa)}function rp(n,e,t){return ap(Gx,n,e,t)}function kM(n,e,t){return ap(AM,n,e,t)}function OM(n,e,t){return ap(EM,n,e,t)}function Vx(n){return(n%360+360)%360}function NM(n){const e=jM.exec(n);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Ol(+e[5]):fa(+e[5]));const a=Vx(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?i=kM(a,o,l):e[1]==="hsv"?i=OM(a,o,l):i=rp(a,o,l),{r:i[0],g:i[1],b:i[2],a:t}}function RM(n,e){var t=ip(n);t[0]=Vx(t[0]+e),t=rp(t),n.r=t[0],n.g=t[1],n.b=t[2]}function MM(n){if(!n)return;const e=ip(n),t=e[0],i=dy(e[1]),a=dy(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${a}%, ${Oi(n.a)})`:`hsl(${t}, ${i}%, ${a}%)`}const hy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},fy={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function DM(){const n={},e=Object.keys(fy),t=Object.keys(hy);let i,a,o,l,u;for(i=0;i<e.length;i++){for(l=u=e[i],a=0;a<t.length;a++)o=t[a],u=u.replace(o,hy[o]);o=parseInt(fy[l],16),n[u]=[o>>16&255,o>>8&255,o&255]}return n}let wu;function BM(n){wu||(wu=DM(),wu.transparent=[0,0,0,0]);const e=wu[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const LM=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function PM(n){const e=LM.exec(n);let t=255,i,a,o;if(e){if(e[7]!==i){const l=+e[7];t=e[8]?Ol(l):da(l*255,0,255)}return i=+e[1],a=+e[3],o=+e[5],i=255&(e[2]?Ol(i):da(i,0,255)),a=255&(e[4]?Ol(a):da(a,0,255)),o=255&(e[6]?Ol(o):da(o,0,255)),{r:i,g:a,b:o,a:t}}}function IM(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Oi(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Jf=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Yr=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function UM(n,e,t){const i=Yr(Oi(n.r)),a=Yr(Oi(n.g)),o=Yr(Oi(n.b));return{r:fa(Jf(i+t*(Yr(Oi(e.r))-i))),g:fa(Jf(a+t*(Yr(Oi(e.g))-a))),b:fa(Jf(o+t*(Yr(Oi(e.b))-o))),a:n.a+t*(e.a-n.a)}}function Su(n,e,t){if(n){let i=ip(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=rp(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Yx(n,e){return n&&Object.assign(e||{},n)}function my(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=fa(n[3]))):(e=Yx(n,{r:0,g:0,b:0,a:1}),e.a=fa(e.a)),e}function zM(n){return n.charAt(0)==="r"?PM(n):NM(n)}class ql{constructor(e){if(e instanceof ql)return e;const t=typeof e;let i;t==="object"?i=my(e):t==="string"&&(i=wM(e)||BM(e)||zM(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Yx(this._rgb);return e&&(e.a=Oi(e.a)),e}set rgb(e){this._rgb=my(e)}rgbString(){return this._valid?IM(this._rgb):void 0}hexString(){return this._valid?CM(this._rgb):void 0}hslString(){return this._valid?MM(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,a=e.rgb;let o;const l=t===o?.5:t,u=2*l-1,h=i.a-a.a,m=((u*h===-1?u:(u+h)/(1+u*h))+1)/2;o=1-m,i.r=255&m*i.r+o*a.r+.5,i.g=255&m*i.g+o*a.g+.5,i.b=255&m*i.b+o*a.b+.5,i.a=l*i.a+(1-l)*a.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=UM(this._rgb,e._rgb,t)),this}clone(){return new ql(this.rgb)}alpha(e){return this._rgb.a=fa(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=tc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Su(this._rgb,2,e),this}darken(e){return Su(this._rgb,2,-e),this}saturate(e){return Su(this._rgb,1,e),this}desaturate(e){return Su(this._rgb,1,-e),this}rotate(e){return RM(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Si(){}const $M=(()=>{let n=0;return()=>n++})();function ht(n){return n==null}function cn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ge(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ws(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Xs(n,e){return ws(n)?n:e}function Fe(n,e){return typeof n>"u"?e:n}const HM=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,Wx=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function xt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function tt(n,e,t,i){let a,o,l;if(cn(n))for(o=n.length,a=0;a<o;a++)e.call(t,n[a],a);else if(Ge(n))for(l=Object.keys(n),o=l.length,a=0;a<o;a++)e.call(t,n[l[a]],l[a])}function Xu(n,e){let t,i,a,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(a=n[t],o=e[t],a.datasetIndex!==o.datasetIndex||a.index!==o.index)return!1;return!0}function Ku(n){if(cn(n))return n.map(Ku);if(Ge(n)){const e=Object.create(null),t=Object.keys(n),i=t.length;let a=0;for(;a<i;++a)e[t[a]]=Ku(n[t[a]]);return e}return n}function Xx(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function qM(n,e,t,i){if(!Xx(n))return;const a=e[n],o=t[n];Ge(a)&&Ge(o)?Fl(a,o,i):e[n]=Ku(o)}function Fl(n,e,t){const i=cn(e)?e:[e],a=i.length;if(!Ge(n))return n;t=t||{};const o=t.merger||qM;let l;for(let u=0;u<a;++u){if(l=i[u],!Ge(l))continue;const h=Object.keys(l);for(let m=0,p=h.length;m<p;++m)o(h[m],n,l,t)}return n}function Ll(n,e){return Fl(n,e,{merger:FM})}function FM(n,e,t){if(!Xx(n))return;const i=e[n],a=t[n];Ge(i)&&Ge(a)?Ll(i,a):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Ku(a))}const py={"":n=>n,x:n=>n.x,y:n=>n.y};function GM(n){const e=n.split("."),t=[];let i="";for(const a of e)i+=a,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function VM(n){const e=GM(n);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function Xa(n,e){return(py[e]||(py[e]=VM(e)))(n)}function op(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Gl=n=>typeof n<"u",pa=n=>typeof n=="function",gy=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function YM(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const dt=Math.PI,Zt=2*dt,Qu=Number.POSITIVE_INFINITY,WM=dt/180,un=dt/2,Pa=dt/4,_y=dt*2/3,Kx=Math.log10,ma=Math.sign;function zu(n,e,t){return Math.abs(n-e)<t}function vy(n){const e=Math.round(n);n=zu(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Kx(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function XM(n){const e=[],t=Math.sqrt(n);let i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((a,o)=>a-o).pop(),e}function KM(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Zu(n){return!KM(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function QM(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function ZM(n,e,t){let i,a,o;for(i=0,a=n.length;i<a;i++)o=n[i][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Ni(n){return n*(dt/180)}function JM(n){return n*(180/dt)}function yy(n){if(!ws(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function Qx(n,e){const t=e.x-n.x,i=e.y-n.y,a=Math.sqrt(t*t+i*i);let o=Math.atan2(i,t);return o<-.5*dt&&(o+=Zt),{angle:o,distance:a}}function e4(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Js(n){return(n%Zt+Zt)%Zt}function Ju(n,e,t,i){const a=Js(n),o=Js(e),l=Js(t),u=Js(o-a),h=Js(l-a),m=Js(a-o),p=Js(a-l);return a===o||a===l||i&&o===l||u>h&&m<p}function Vn(n,e,t){return Math.max(e,Math.min(t,n))}function t4(n){return Vn(n,-32768,32767)}function Ga(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function lp(n,e,t){t=t||(l=>n[l]<e);let i=n.length-1,a=0,o;for(;i-a>1;)o=a+i>>1,t(o)?a=o:i=o;return{lo:a,hi:i}}const Lm=(n,e,t,i)=>lp(n,t,i?a=>{const o=n[a][e];return o<t||o===t&&n[a+1][e]===t}:a=>n[a][e]<t),n4=(n,e,t)=>lp(n,t,i=>n[i][e]>=t);function s4(n,e,t){let i=0,a=n.length;for(;i<a&&n[i]<e;)i++;for(;a>i&&n[a-1]>t;)a--;return i>0||a<n.length?n.slice(i,a):n}const Zx=["push","pop","shift","splice","unshift"];function i4(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Zx.forEach(t=>{const i="_onData"+op(t),a=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){const l=a.apply(this,o);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...o)}),l}})})}function by(n,e){const t=n._chartjs;if(!t)return;const i=t.listeners,a=i.indexOf(e);a!==-1&&i.splice(a,1),!(i.length>0)&&(Zx.forEach(o=>{delete n[o]}),delete n._chartjs)}function Jx(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const e1=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function t1(n,e){let t=[],i=!1;return function(...a){t=a,i||(i=!0,e1.call(window,()=>{i=!1,n.apply(e,t)}))}}function a4(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}const cp=n=>n==="start"?"left":n==="end"?"right":"center",Tn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,r4=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e,Cu=n=>n===0||n===1,xy=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Zt/t)),wy=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Zt/t)+1,Pl={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*un)+1,easeOutSine:n=>Math.sin(n*un),easeInOutSine:n=>-.5*(Math.cos(dt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Cu(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Cu(n)?n:xy(n,.075,.3),easeOutElastic:n=>Cu(n)?n:wy(n,.075,.3),easeInOutElastic(n){return Cu(n)?n:n<.5?.5*xy(n*2,.1125,.45):.5+.5*wy(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Pl.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Pl.easeInBounce(n*2)*.5:Pl.easeOutBounce(n*2-1)*.5+.5};function n1(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Sy(n){return n1(n)?n:new ql(n)}function em(n){return n1(n)?n:new ql(n).saturate(.5).darken(.1).hexString()}const o4=["x","y","borderWidth","radius","tension"],l4=["color","borderColor","backgroundColor"];function c4(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:l4},numbers:{type:"number",properties:o4}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function u4(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Cy=new Map;function d4(n,e){e=e||{};const t=n+JSON.stringify(e);let i=Cy.get(t);return i||(i=new Intl.NumberFormat(n,e),Cy.set(t,i)),i}function up(n,e,t){return d4(e,t).format(n)}const h4={values(n){return cn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const i=this.chart.options.locale;let a,o=n;if(t.length>1){const m=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(m<1e-4||m>1e15)&&(a="scientific"),o=f4(n,t)}const l=Kx(Math.abs(o)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:a,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(h,this.options.ticks.format),up(n,i,h)}};function f4(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var s1={formatters:h4};function m4(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:s1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ka=Object.create(null),Pm=Object.create(null);function Il(n,e){if(!e)return n;const t=e.split(".");for(let i=0,a=t.length;i<a;++i){const o=t[i];n=n[o]||(n[o]=Object.create(null))}return n}function tm(n,e,t){return typeof e=="string"?Fl(Il(n,e),t):Fl(Il(n,""),e)}class p4{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,a)=>em(a.backgroundColor),this.hoverBorderColor=(i,a)=>em(a.borderColor),this.hoverColor=(i,a)=>em(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return tm(this,e,t)}get(e){return Il(this,e)}describe(e,t){return tm(Pm,e,t)}override(e,t){return tm(Ka,e,t)}route(e,t,i,a){const o=Il(this,e),l=Il(this,i),u="_"+t;Object.defineProperties(o,{[u]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[u],m=l[a];return Ge(h)?Object.assign({},m,h):Fe(h,m)},set(h){this[u]=h}}})}apply(e){e.forEach(t=>t(this))}}var Gt=new p4({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[c4,u4,m4]);function g4(n){return!n||ht(n.size)||ht(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function jy(n,e,t,i,a){let o=e[a];return o||(o=e[a]=n.measureText(a).width,t.push(a)),o>i&&(i=o),i}function Ia(n,e,t){const i=n.currentDevicePixelRatio,a=t!==0?Math.max(t/2,.5):0;return Math.round((e-a)*i)/i+a}function Ey(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Ay(n,e,t,i){i1(n,e,t,i,null)}function i1(n,e,t,i,a){let o,l,u,h,m,p,g,_;const y=e.pointStyle,x=e.rotation,j=e.radius;let w=(x||0)*WM;if(y&&typeof y=="object"&&(o=y.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(w),n.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),n.restore();return}if(!(isNaN(j)||j<=0)){switch(n.beginPath(),y){default:a?n.ellipse(t,i,a/2,j,0,0,Zt):n.arc(t,i,j,0,Zt),n.closePath();break;case"triangle":p=a?a/2:j,n.moveTo(t+Math.sin(w)*p,i-Math.cos(w)*j),w+=_y,n.lineTo(t+Math.sin(w)*p,i-Math.cos(w)*j),w+=_y,n.lineTo(t+Math.sin(w)*p,i-Math.cos(w)*j),n.closePath();break;case"rectRounded":m=j*.516,h=j-m,l=Math.cos(w+Pa)*h,g=Math.cos(w+Pa)*(a?a/2-m:h),u=Math.sin(w+Pa)*h,_=Math.sin(w+Pa)*(a?a/2-m:h),n.arc(t-g,i-u,m,w-dt,w-un),n.arc(t+_,i-l,m,w-un,w),n.arc(t+g,i+u,m,w,w+un),n.arc(t-_,i+l,m,w+un,w+dt),n.closePath();break;case"rect":if(!x){h=Math.SQRT1_2*j,p=a?a/2:h,n.rect(t-p,i-h,2*p,2*h);break}w+=Pa;case"rectRot":g=Math.cos(w)*(a?a/2:j),l=Math.cos(w)*j,u=Math.sin(w)*j,_=Math.sin(w)*(a?a/2:j),n.moveTo(t-g,i-u),n.lineTo(t+_,i-l),n.lineTo(t+g,i+u),n.lineTo(t-_,i+l),n.closePath();break;case"crossRot":w+=Pa;case"cross":g=Math.cos(w)*(a?a/2:j),l=Math.cos(w)*j,u=Math.sin(w)*j,_=Math.sin(w)*(a?a/2:j),n.moveTo(t-g,i-u),n.lineTo(t+g,i+u),n.moveTo(t+_,i-l),n.lineTo(t-_,i+l);break;case"star":g=Math.cos(w)*(a?a/2:j),l=Math.cos(w)*j,u=Math.sin(w)*j,_=Math.sin(w)*(a?a/2:j),n.moveTo(t-g,i-u),n.lineTo(t+g,i+u),n.moveTo(t+_,i-l),n.lineTo(t-_,i+l),w+=Pa,g=Math.cos(w)*(a?a/2:j),l=Math.cos(w)*j,u=Math.sin(w)*j,_=Math.sin(w)*(a?a/2:j),n.moveTo(t-g,i-u),n.lineTo(t+g,i+u),n.moveTo(t+_,i-l),n.lineTo(t-_,i+l);break;case"line":l=a?a/2:Math.cos(w)*j,u=Math.sin(w)*j,n.moveTo(t-l,i-u),n.lineTo(t+l,i+u);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(w)*(a?a/2:j),i+Math.sin(w)*j);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function a1(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function dp(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function hp(n){n.restore()}function _4(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),ht(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function v4(n,e,t,i,a){if(a.strikethrough||a.underline){const o=n.measureText(i),l=e-o.actualBoundingBoxLeft,u=e+o.actualBoundingBoxRight,h=t-o.actualBoundingBoxAscent,m=t+o.actualBoundingBoxDescent,p=a.strikethrough?(h+m)/2:m;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=a.decorationWidth||2,n.moveTo(l,p),n.lineTo(u,p),n.stroke()}}function y4(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Vl(n,e,t,i,a,o={}){const l=cn(e)?e:[e],u=o.strokeWidth>0&&o.strokeColor!=="";let h,m;for(n.save(),n.font=a.string,_4(n,o),h=0;h<l.length;++h)m=l[h],o.backdrop&&y4(n,o.backdrop),u&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),ht(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(m,t,i,o.maxWidth)),n.fillText(m,t,i,o.maxWidth),v4(n,t,i,m,o),i+=Number(a.lineHeight);n.restore()}function ed(n,e){const{x:t,y:i,w:a,h:o,radius:l}=e;n.arc(t+l.topLeft,i+l.topLeft,l.topLeft,1.5*dt,dt,!0),n.lineTo(t,i+o-l.bottomLeft),n.arc(t+l.bottomLeft,i+o-l.bottomLeft,l.bottomLeft,dt,un,!0),n.lineTo(t+a-l.bottomRight,i+o),n.arc(t+a-l.bottomRight,i+o-l.bottomRight,l.bottomRight,un,0,!0),n.lineTo(t+a,i+l.topRight),n.arc(t+a-l.topRight,i+l.topRight,l.topRight,0,-un,!0),n.lineTo(t+l.topLeft,i)}const b4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,x4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function w4(n,e){const t=(""+n).match(b4);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const S4=n=>+n||0;function fp(n,e){const t={},i=Ge(e),a=i?Object.keys(e):e,o=Ge(n)?i?l=>Fe(n[l],n[e[l]]):l=>n[l]:()=>n;for(const l of a)t[l]=S4(o(l));return t}function r1(n){return fp(n,{top:"y",right:"x",bottom:"y",left:"x"})}function ao(n){return fp(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ss(n){const e=r1(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function kn(n,e){n=n||{},e=e||Gt.font;let t=Fe(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=Fe(n.style,e.style);i&&!(""+i).match(x4)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const a={family:Fe(n.family,e.family),lineHeight:w4(Fe(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:Fe(n.weight,e.weight),string:""};return a.string=g4(a),a}function ju(n,e,t,i){let a,o,l;for(a=0,o=n.length;a<o;++a)if(l=n[a],l!==void 0&&l!==void 0)return l}function C4(n,e,t){const{min:i,max:a}=n,o=Wx(e,(a-i)/2),l=(u,h)=>t&&u===0?0:u+h;return{min:l(i,-Math.abs(o)),max:l(a,o)}}function mo(n,e){return Object.assign(Object.create(n),e)}function mp(n,e=[""],t,i,a=()=>n[0]){const o=t||n;typeof i>"u"&&(i=u1("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:a,override:u=>mp([u,...n],e,o,i)};return new Proxy(l,{deleteProperty(u,h){return delete u[h],delete u._keys,delete n[0][h],!0},get(u,h){return l1(u,h,()=>R4(h,e,n,u))},getOwnPropertyDescriptor(u,h){return Reflect.getOwnPropertyDescriptor(u._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,h){return ky(u).includes(h)},ownKeys(u){return ky(u)},set(u,h,m){const p=u._storage||(u._storage=a());return u[h]=p[h]=m,delete u._keys,!0}})}function lo(n,e,t,i){const a={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:o1(n,i),setContext:o=>lo(n,o,t,i),override:o=>lo(n.override(o),e,t,i)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete n[l],!0},get(o,l,u){return l1(o,l,()=>E4(o,l,u))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(o,l,u){return n[l]=u,delete o[l],!0}})}function o1(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:a=e.allKeys}=n;return{allKeys:a,scriptable:t,indexable:i,isScriptable:pa(t)?t:()=>t,isIndexable:pa(i)?i:()=>i}}const j4=(n,e)=>n?n+op(e):e,pp=(n,e)=>Ge(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function l1(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const i=t();return n[e]=i,i}function E4(n,e,t){const{_proxy:i,_context:a,_subProxy:o,_descriptors:l}=n;let u=i[e];return pa(u)&&l.isScriptable(e)&&(u=A4(e,u,n,t)),cn(u)&&u.length&&(u=T4(e,u,n,l.isIndexable)),pp(e,u)&&(u=lo(u,a,o&&o[e],l)),u}function A4(n,e,t,i){const{_proxy:a,_context:o,_subProxy:l,_stack:u}=t;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let h=e(o,l||i);return u.delete(n),pp(n,h)&&(h=gp(a._scopes,a,n,h)),h}function T4(n,e,t,i){const{_proxy:a,_context:o,_subProxy:l,_descriptors:u}=t;if(typeof o.index<"u"&&i(n))return e[o.index%e.length];if(Ge(e[0])){const h=e,m=a._scopes.filter(p=>p!==h);e=[];for(const p of h){const g=gp(m,a,n,p);e.push(lo(g,o,l&&l[n],u))}}return e}function c1(n,e,t){return pa(n)?n(e,t):n}const k4=(n,e)=>n===!0?e:typeof n=="string"?Xa(e,n):void 0;function O4(n,e,t,i,a){for(const o of e){const l=k4(t,o);if(l){n.add(l);const u=c1(l._fallback,t,a);if(typeof u<"u"&&u!==t&&u!==i)return u}else if(l===!1&&typeof i<"u"&&t!==i)return null}return!1}function gp(n,e,t,i){const a=e._rootScopes,o=c1(e._fallback,t,i),l=[...n,...a],u=new Set;u.add(i);let h=Ty(u,l,t,o||t,i);return h===null||typeof o<"u"&&o!==t&&(h=Ty(u,l,o,h,i),h===null)?!1:mp(Array.from(u),[""],a,o,()=>N4(e,t,i))}function Ty(n,e,t,i,a){for(;t;)t=O4(n,e,t,i,a);return t}function N4(n,e,t){const i=n._getTarget();e in i||(i[e]={});const a=i[e];return cn(a)&&Ge(t)?t:a||{}}function R4(n,e,t,i){let a;for(const o of e)if(a=u1(j4(o,n),t),typeof a<"u")return pp(n,a)?gp(t,i,n,a):a}function u1(n,e){for(const t of e){if(!t)continue;const i=t[n];if(typeof i<"u")return i}}function ky(n){let e=n._keys;return e||(e=n._keys=M4(n._scopes)),e}function M4(n){const e=new Set;for(const t of n)for(const i of Object.keys(t).filter(a=>!a.startsWith("_")))e.add(i);return Array.from(e)}function _p(){return typeof window<"u"&&typeof document<"u"}function vp(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function td(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}const dd=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function D4(n,e){return dd(n).getPropertyValue(e)}const B4=["top","right","bottom","left"];function Ya(n,e,t){const i={};t=t?"-"+t:"";for(let a=0;a<4;a++){const o=B4[a];i[o]=parseFloat(n[e+"-"+o+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const L4=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function P4(n,e){const t=n.touches,i=t&&t.length?t[0]:n,{offsetX:a,offsetY:o}=i;let l=!1,u,h;if(L4(a,o,n.target))u=a,h=o;else{const m=e.getBoundingClientRect();u=i.clientX-m.left,h=i.clientY-m.top,l=!0}return{x:u,y:h,box:l}}function qa(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:i}=e,a=dd(t),o=a.boxSizing==="border-box",l=Ya(a,"padding"),u=Ya(a,"border","width"),{x:h,y:m,box:p}=P4(n,t),g=l.left+(p&&u.left),_=l.top+(p&&u.top);let{width:y,height:x}=e;return o&&(y-=l.width+u.width,x-=l.height+u.height),{x:Math.round((h-g)/y*t.width/i),y:Math.round((m-_)/x*t.height/i)}}function I4(n,e,t){let i,a;if(e===void 0||t===void 0){const o=n&&vp(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{const l=o.getBoundingClientRect(),u=dd(o),h=Ya(u,"border","width"),m=Ya(u,"padding");e=l.width-m.width-h.width,t=l.height-m.height-h.height,i=td(u.maxWidth,o,"clientWidth"),a=td(u.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:i||Qu,maxHeight:a||Qu}}const Eu=n=>Math.round(n*10)/10;function U4(n,e,t,i){const a=dd(n),o=Ya(a,"margin"),l=td(a.maxWidth,n,"clientWidth")||Qu,u=td(a.maxHeight,n,"clientHeight")||Qu,h=I4(n,e,t);let{width:m,height:p}=h;if(a.boxSizing==="content-box"){const _=Ya(a,"border","width"),y=Ya(a,"padding");m-=y.width+_.width,p-=y.height+_.height}return m=Math.max(0,m-o.width),p=Math.max(0,i?m/i:p-o.height),m=Eu(Math.min(m,l,h.maxWidth)),p=Eu(Math.min(p,u,h.maxHeight)),m&&!p&&(p=Eu(m/2)),(e!==void 0||t!==void 0)&&i&&h.height&&p>h.height&&(p=h.height,m=Eu(Math.floor(p*i))),{width:m,height:p}}function Oy(n,e,t){const i=e||1,a=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const l=n.canvas;return l.style&&(t||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||l.height!==a||l.width!==o?(n.currentDevicePixelRatio=i,l.height=a,l.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const z4=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};_p()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function Ny(n,e){const t=D4(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const $4=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},H4=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function ro(n,e,t){return n?$4(e,t):H4()}function d1(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function h1(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function Au(n,e,t){return n.options.clip?n[t]:e[t]}function q4(n,e){const{xScale:t,yScale:i}=n;return t&&i?{left:Au(t,e,"left"),right:Au(t,e,"right"),top:Au(i,e,"top"),bottom:Au(i,e,"bottom")}:e}function F4(n,e){const t=e._clip;if(t.disabled)return!1;const i=q4(e,n.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class G4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,a){const o=t.listeners[a],l=t.duration;o.forEach(u=>u({chart:e,initial:t.initial,numSteps:l,currentStep:Math.min(i-t.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=e1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,a)=>{if(!i.running||!i.items.length)return;const o=i.items;let l=o.length-1,u=!1,h;for(;l>=0;--l)h=o[l],h._active?(h._total>i.duration&&(i.duration=h._total),h.tick(e),u=!0):(o[l]=o[o.length-1],o.pop());u&&(a.draw(),this._notify(a,i,e,"progress")),o.length||(i.running=!1,this._notify(a,i,e,"complete"),i.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,a)=>Math.max(i,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let a=i.length-1;for(;a>=0;--a)i[a].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ai=new G4;const Ry="transparent",V4={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const i=Sy(n||Ry),a=i.valid&&Sy(e||Ry);return a&&a.valid?a.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class Y4{constructor(e,t,i,a){const o=t[i];a=ju([e.to,a,o,e.from]);const l=ju([e.from,o,a]);this._active=!0,this._fn=e.fn||V4[e.type||typeof l],this._easing=Pl[e.easing]||Pl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=l,this._to=a,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const a=this._target[this._prop],o=i-this._start,l=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=ju([e.to,t,a,e.from]),this._from=ju([e.from,a,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,a=this._prop,o=this._from,l=this._loop,u=this._to;let h;if(this._active=o!==u&&(l||t<i),!this._active){this._target[a]=u,this._notify(!0);return}if(t<0){this._target[a]=o;return}h=t/i%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[a]=this._fn(o,u,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let a=0;a<i.length;a++)i[a][t]()}}class f1{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ge(e))return;const t=Object.keys(Gt.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const o=e[a];if(!Ge(o))return;const l={};for(const u of t)l[u]=o[u];(cn(o.properties)&&o.properties||[a]).forEach(u=>{(u===a||!i.has(u))&&i.set(u,l)})})}_animateOptions(e,t){const i=t.options,a=X4(e,i);if(!a)return[];const o=this._createAnimations(a,i);return i.$shared&&W4(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,t){const i=this._properties,a=[],o=e.$animations||(e.$animations={}),l=Object.keys(t),u=Date.now();let h;for(h=l.length-1;h>=0;--h){const m=l[h];if(m.charAt(0)==="$")continue;if(m==="options"){a.push(...this._animateOptions(e,t));continue}const p=t[m];let g=o[m];const _=i.get(m);if(g)if(_&&g.active()){g.update(_,p,u);continue}else g.cancel();if(!_||!_.duration){e[m]=p;continue}o[m]=g=new Y4(_,e,m,p),a.push(g)}return a}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return Ai.add(this._chart,i),!0}}function W4(n,e){const t=[],i=Object.keys(e);for(let a=0;a<i.length;a++){const o=n[i[a]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function X4(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function My(n,e){const t=n&&n.options||{},i=t.reverse,a=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:i?o:a,end:i?a:o}}function K4(n,e,t){if(t===!1)return!1;const i=My(n,t),a=My(e,t);return{top:a.end,right:i.end,bottom:a.start,left:i.start}}function Q4(n){let e,t,i,a;return Ge(n)?(e=n.top,t=n.right,i=n.bottom,a=n.left):e=t=i=a=n,{top:e,right:t,bottom:i,left:a,disabled:n===!1}}function m1(n,e){const t=[],i=n._getSortedDatasetMetas(e);let a,o;for(a=0,o=i.length;a<o;++a)t.push(i[a].index);return t}function Dy(n,e,t,i={}){const a=n.keys,o=i.mode==="single";let l,u,h,m;if(e===null)return;let p=!1;for(l=0,u=a.length;l<u;++l){if(h=+a[l],h===t){if(p=!0,i.all)continue;break}m=n.values[h],ws(m)&&(o||e===0||ma(e)===ma(m))&&(e+=m)}return!p&&!i.all?0:e}function Z4(n,e){const{iScale:t,vScale:i}=e,a=t.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",l=Object.keys(n),u=new Array(l.length);let h,m,p;for(h=0,m=l.length;h<m;++h)p=l[h],u[h]={[a]:p,[o]:n[p]};return u}function nm(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function J4(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function eD(n){const{min:e,max:t,minDefined:i,maxDefined:a}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:a?t:Number.POSITIVE_INFINITY}}function tD(n,e,t){const i=n[e]||(n[e]={});return i[t]||(i[t]={})}function By(n,e,t,i){for(const a of e.getMatchingVisibleMetas(i).reverse()){const o=n[a.index];if(t&&o>0||!t&&o<0)return a.index}return null}function Ly(n,e){const{chart:t,_cachedMeta:i}=n,a=t._stacks||(t._stacks={}),{iScale:o,vScale:l,index:u}=i,h=o.axis,m=l.axis,p=J4(o,l,i),g=e.length;let _;for(let y=0;y<g;++y){const x=e[y],{[h]:j,[m]:w}=x,S=x._stacks||(x._stacks={});_=S[m]=tD(a,p,j),_[u]=w,_._top=By(_,l,!0,i.type),_._bottom=By(_,l,!1,i.type);const C=_._visualValues||(_._visualValues={});C[u]=w}}function sm(n,e){const t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function nD(n,e){return mo(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function sD(n,e,t){return mo(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Sl(n,e){const t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(const a of e){const o=a._stacks;if(!o||o[i]===void 0||o[i][t]===void 0)return;delete o[i][t],o[i]._visualValues!==void 0&&o[i]._visualValues[t]!==void 0&&delete o[i]._visualValues[t]}}}const im=n=>n==="reset"||n==="none",Py=(n,e)=>e?n:Object.assign({},n),iD=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:m1(t,!0),values:null};class yp{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=nm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Sl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),a=(g,_,y,x)=>g==="x"?_:g==="r"?x:y,o=t.xAxisID=Fe(i.xAxisID,sm(e,"x")),l=t.yAxisID=Fe(i.yAxisID,sm(e,"y")),u=t.rAxisID=Fe(i.rAxisID,sm(e,"r")),h=t.indexAxis,m=t.iAxisID=a(h,o,l,u),p=t.vAxisID=a(h,l,o,u);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(l),t.rScale=this.getScaleForId(u),t.iScale=this.getScaleForId(m),t.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&by(this._data,this),e._stacked&&Sl(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(Ge(t)){const a=this._cachedMeta;this._data=Z4(t,a)}else if(i!==t){if(i){by(i,this);const a=this._cachedMeta;Sl(a),a._parsed=[]}t&&Object.isExtensible(t)&&i4(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let a=!1;this._dataCheck();const o=t._stacked;t._stacked=nm(t.vScale,t),t.stack!==i.stack&&(a=!0,Sl(t),t.stack=i.stack),this._resyncElements(e),(a||o!==t._stacked)&&(Ly(this,t._parsed),t._stacked=nm(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:a}=this,{iScale:o,_stacked:l}=i,u=o.axis;let h=e===0&&t===a.length?!0:i._sorted,m=e>0&&i._parsed[e-1],p,g,_;if(this._parsing===!1)i._parsed=a,i._sorted=!0,_=a;else{cn(a[e])?_=this.parseArrayData(i,a,e,t):Ge(a[e])?_=this.parseObjectData(i,a,e,t):_=this.parsePrimitiveData(i,a,e,t);const y=()=>g[u]===null||m&&g[u]<m[u];for(p=0;p<t;++p)i._parsed[p+e]=g=_[p],h&&(y()&&(h=!1),m=g);i._sorted=h}l&&Ly(this,_)}parsePrimitiveData(e,t,i,a){const{iScale:o,vScale:l}=e,u=o.axis,h=l.axis,m=o.getLabels(),p=o===l,g=new Array(a);let _,y,x;for(_=0,y=a;_<y;++_)x=_+i,g[_]={[u]:p||o.parse(m[x],x),[h]:l.parse(t[x],x)};return g}parseArrayData(e,t,i,a){const{xScale:o,yScale:l}=e,u=new Array(a);let h,m,p,g;for(h=0,m=a;h<m;++h)p=h+i,g=t[p],u[h]={x:o.parse(g[0],p),y:l.parse(g[1],p)};return u}parseObjectData(e,t,i,a){const{xScale:o,yScale:l}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,m=new Array(a);let p,g,_,y;for(p=0,g=a;p<g;++p)_=p+i,y=t[_],m[p]={x:o.parse(Xa(y,u),_),y:l.parse(Xa(y,h),_)};return m}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const a=this.chart,o=this._cachedMeta,l=t[e.axis],u={keys:m1(a,!0),values:t._stacks[e.axis]._visualValues};return Dy(u,l,o.index,{mode:i})}updateRangeFromParsed(e,t,i,a){const o=i[t.axis];let l=o===null?NaN:o;const u=a&&i._stacks[t.axis];a&&u&&(a.values=u,l=Dy(a,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,t){const i=this._cachedMeta,a=i._parsed,o=i._sorted&&e===i.iScale,l=a.length,u=this._getOtherScale(e),h=iD(t,i,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:g}=eD(u);let _,y;function x(){y=a[_];const j=y[u.axis];return!ws(y[e.axis])||p>j||g<j}for(_=0;_<l&&!(!x()&&(this.updateRangeFromParsed(m,e,y,h),o));++_);if(o){for(_=l-1;_>=0;--_)if(!x()){this.updateRangeFromParsed(m,e,y,h);break}}return m}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let a,o,l;for(a=0,o=t.length;a<o;++a)l=t[a][e.axis],ws(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,a=t.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:a?""+a.getLabelForValue(o[a.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=Q4(Fe(this.options.clip,K4(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,a=i.data||[],o=t.chartArea,l=[],u=this._drawStart||0,h=this._drawCount||a.length-u,m=this.options.drawActiveElementsOnTop;let p;for(i.dataset&&i.dataset.draw(e,o,u,h),p=u;p<u+h;++p){const g=a[p];g.hidden||(g.active&&m?l.push(g):g.draw(e,o))}for(p=0;p<l.length;++p)l[p].draw(e,o)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const a=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=sD(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=a.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=nD(this.chart.getContext(),this.index)),o.dataset=a,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const a=t==="active",o=this._cachedDataOpts,l=e+"-"+t,u=o[l],h=this.enableOptionSharing&&Gl(i);if(u)return Py(u,h);const m=this.chart.config,p=m.datasetElementScopeKeys(this._type,e),g=a?[`${e}Hover`,"hover",e,""]:[e,""],_=m.getOptionScopes(this.getDataset(),p),y=Object.keys(Gt.elements[e]),x=()=>this.getContext(i,a,t),j=m.resolveNamedOptions(_,y,x,g);return j.$shared&&(j.$shared=h,o[l]=Object.freeze(Py(j,h))),j}_resolveAnimations(e,t,i){const a=this.chart,o=this._cachedDataOpts,l=`animation-${t}`,u=o[l];if(u)return u;let h;if(a.options.animation!==!1){const p=this.chart.config,g=p.datasetAnimationScopeKeys(this._type,t),_=p.getOptionScopes(this.getDataset(),g);h=p.createResolver(_,this.getContext(e,i,t))}const m=new f1(a,h&&h.animations);return h&&h._cacheable&&(o[l]=Object.freeze(m)),m}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||im(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),a=this._sharedOptions,o=this.getSharedOptions(i),l=this.includeOptions(t,o)||o!==a;return this.updateSharedOptions(o,t,i),{sharedOptions:o,includeOptions:l}}updateElement(e,t,i,a){im(a)?Object.assign(e,i):this._resolveAnimations(t,a).update(e,i)}updateSharedOptions(e,t,i){e&&!im(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,a){e.active=a;const o=this.getStyle(t,a);this._resolveAnimations(t,i,a).update(e,{options:!a&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[u,h,m]of this._syncList)this[u](h,m);this._syncList=[];const a=i.length,o=t.length,l=Math.min(o,a);l&&this.parse(0,l),o>a?this._insertElements(a,o-a,e):o<a&&this._removeElements(o,a-o)}_insertElements(e,t,i=!0){const a=this._cachedMeta,o=a.data,l=e+t;let u;const h=m=>{for(m.length+=t,u=m.length-1;u>=l;u--)m[u]=m[u-t]};for(h(o),u=e;u<l;++u)o[u]=new this.dataElementType;this._parsing&&h(a._parsed),this.parse(e,t),i&&this.updateElements(o,e,t,"reset")}updateElements(e,t,i,a){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const a=i._parsed.splice(e,t);i._stacked&&Sl(i,a)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,a]=e;this[t](i,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function aD(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let i=[];for(let a=0,o=t.length;a<o;a++)i=i.concat(t[a].controller.getAllParsedValues(n));n._cache.$bar=Jx(i.sort((a,o)=>a-o))}return n._cache.$bar}function rD(n){const e=n.iScale,t=aD(e,n.type);let i=e._length,a,o,l,u;const h=()=>{l===32767||l===-32768||(Gl(u)&&(i=Math.min(i,Math.abs(l-u)||i)),u=l)};for(a=0,o=t.length;a<o;++a)l=e.getPixelForValue(t[a]),h();for(u=void 0,a=0,o=e.ticks.length;a<o;++a)l=e.getPixelForTick(a),h();return i}function oD(n,e,t,i){const a=t.barThickness;let o,l;return ht(a)?(o=e.min*t.categoryPercentage,l=t.barPercentage):(o=a*i,l=1),{chunk:o/i,ratio:l,start:e.pixels[n]-o/2}}function lD(n,e,t,i){const a=e.pixels,o=a[n];let l=n>0?a[n-1]:null,u=n<a.length-1?a[n+1]:null;const h=t.categoryPercentage;l===null&&(l=o-(u===null?e.end-e.start:u-o)),u===null&&(u=o+o-l);const m=o-(o-Math.min(l,u))/2*h;return{chunk:Math.abs(u-l)/2*h/i,ratio:t.barPercentage,start:m}}function cD(n,e,t,i){const a=t.parse(n[0],i),o=t.parse(n[1],i),l=Math.min(a,o),u=Math.max(a,o);let h=l,m=u;Math.abs(l)>Math.abs(u)&&(h=u,m=l),e[t.axis]=m,e._custom={barStart:h,barEnd:m,start:a,end:o,min:l,max:u}}function p1(n,e,t,i){return cn(n)?cD(n,e,t,i):e[t.axis]=t.parse(n,i),e}function Iy(n,e,t,i){const a=n.iScale,o=n.vScale,l=a.getLabels(),u=a===o,h=[];let m,p,g,_;for(m=t,p=t+i;m<p;++m)_=e[m],g={},g[a.axis]=u||a.parse(l[m],m),h.push(p1(_,g,o,m));return h}function am(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function uD(n,e,t){return n!==0?ma(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function dD(n){let e,t,i,a,o;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(a="end",o="start"):(a="start",o="end"),{start:t,end:i,reverse:e,top:a,bottom:o}}function hD(n,e,t,i){let a=e.borderSkipped;const o={};if(!a){n.borderSkipped=o;return}if(a===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:u,reverse:h,top:m,bottom:p}=dD(n);a==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?a=m:(t._bottom||0)===i?a=p:(o[Uy(p,l,u,h)]=!0,a=m)),o[Uy(a,l,u,h)]=!0,n.borderSkipped=o}function Uy(n,e,t,i){return i?(n=fD(n,e,t),n=zy(n,t,e)):n=zy(n,e,t),n}function fD(n,e,t){return n===e?t:n===t?e:n}function zy(n,e,t){return n==="start"?e:n==="end"?t:n}function mD(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class pD extends yp{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,i,a){return Iy(e,t,i,a)}parseArrayData(e,t,i,a){return Iy(e,t,i,a)}parseObjectData(e,t,i,a){const{iScale:o,vScale:l}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,m=o.axis==="x"?u:h,p=l.axis==="x"?u:h,g=[];let _,y,x,j;for(_=i,y=i+a;_<y;++_)j=t[_],x={},x[o.axis]=o.parse(Xa(j,m),_),g.push(p1(Xa(j,p),x,l,_));return g}updateRangeFromParsed(e,t,i,a){super.updateRangeFromParsed(e,t,i,a);const o=i._custom;o&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:a}=t,o=this.getParsed(e),l=o._custom,u=am(l)?"["+l.start+", "+l.end+"]":""+a.getLabelForValue(o[a.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,a){const o=a==="reset",{index:l,_cachedMeta:{vScale:u}}=this,h=u.getBasePixel(),m=u.isHorizontal(),p=this._getRuler(),{sharedOptions:g,includeOptions:_}=this._getSharedOptions(t,a);for(let y=t;y<t+i;y++){const x=this.getParsed(y),j=o||ht(x[u.axis])?{base:h,head:h}:this._calculateBarValuePixels(y),w=this._calculateBarIndexPixels(y,p),S=(x._stacks||{})[u.axis],C={horizontal:m,base:j.base,enableBorderRadius:!S||am(x._custom)||l===S._top||l===S._bottom,x:m?j.head:w.center,y:m?w.center:j.head,height:m?w.size:Math.abs(j.size),width:m?Math.abs(j.size):w.size};_&&(C.options=g||this.resolveDataElementOptions(y,e[y].active?"active":a));const T=C.options||e[y].options;hD(C,T,S,l),mD(C,T,p.ratio),this.updateElement(e[y],y,C,a)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,a=i.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),o=i.options.stacked,l=[],u=this._cachedMeta.controller.getParsed(t),h=u&&u[i.axis],m=p=>{const g=p._parsed.find(y=>y[i.axis]===h),_=g&&g[p.vScale.axis];if(ht(_)||isNaN(_))return!0};for(const p of a)if(!(t!==void 0&&m(p))&&((o===!1||l.indexOf(p.stack)===-1||o===void 0&&p.stack===void 0)&&l.push(p.stack),p.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[Fe(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){const a=this._getStacks(e,i),o=t!==void 0?a.indexOf(t):-1;return o===-1?a.length-1:o}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,a=[];let o,l;for(o=0,l=t.data.length;o<l;++o)a.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const u=e.barThickness;return{min:u||rD(t),pixels:a,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:a},options:{base:o,minBarLength:l}}=this,u=o||0,h=this.getParsed(e),m=h._custom,p=am(m);let g=h[t.axis],_=0,y=i?this.applyStack(t,h,i):g,x,j;y!==g&&(_=y-g,y=g),p&&(g=m.barStart,y=m.barEnd-m.barStart,g!==0&&ma(g)!==ma(m.barEnd)&&(_=0),_+=g);const w=!ht(o)&&!p?o:_;let S=t.getPixelForValue(w);if(this.chart.getDataVisibility(e)?x=t.getPixelForValue(_+y):x=S,j=x-S,Math.abs(j)<l){j=uD(j,t,u)*l,g===u&&(S-=j/2);const C=t.getPixelForDecimal(0),T=t.getPixelForDecimal(1),B=Math.min(C,T),D=Math.max(C,T);S=Math.max(Math.min(S,D),B),x=S+j,i&&!p&&(h._stacks[t.axis]._visualValues[a]=t.getValueForPixel(x)-t.getValueForPixel(S))}if(S===t.getPixelForValue(u)){const C=ma(j)*t.getLineWidthForValue(u)/2;S+=C,j-=C}return{size:j,base:S,head:x,center:x+j/2}}_calculateBarIndexPixels(e,t){const i=t.scale,a=this.options,o=a.skipNull,l=Fe(a.maxBarThickness,1/0);let u,h;const m=this._getAxisCount();if(t.grouped){const p=o?this._getStackCount(e):t.stackCount,g=a.barThickness==="flex"?lD(e,t,a,p*m):oD(e,t,a,p*m),_=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,y=this._getAxis().indexOf(Fe(_,this.getFirstScaleIdForIndexAxis())),x=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+y;u=g.start+g.chunk*x+g.chunk/2,h=Math.min(l,g.chunk*g.ratio)}else u=i.getPixelForValue(this.getParsed(e)[i.axis],e),h=Math.min(l,t.min*t.ratio);return{base:u-h/2,head:u+h/2,center:u,size:h}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,a=i.length;let o=0;for(;o<a;++o)this.getParsed(o)[t.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}function gD(n,e,t){let i=1,a=1,o=0,l=0;if(e<Zt){const u=n,h=u+e,m=Math.cos(u),p=Math.sin(u),g=Math.cos(h),_=Math.sin(h),y=(T,B,D)=>Ju(T,u,h,!0)?1:Math.max(B,B*t,D,D*t),x=(T,B,D)=>Ju(T,u,h,!0)?-1:Math.min(B,B*t,D,D*t),j=y(0,m,g),w=y(un,p,_),S=x(dt,m,g),C=x(dt+un,p,_);i=(j-S)/2,a=(w-C)/2,o=-(j+S)/2,l=-(w+C)/2}return{ratioX:i,ratioY:a,offsetX:o,offsetY:l}}class _D extends yp{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:a}}=e.legend.options;return t.labels.map((o,l)=>{const h=e.getDatasetMeta(0).controller.getStyle(l);return{text:o,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:a,lineWidth:h.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(l),index:l}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=i;else{let o=h=>+i[h];if(Ge(i[e])){const{key:h="value"}=this._parsing;o=m=>+Xa(i[m],h)}let l,u;for(l=e,u=e+t;l<u;++l)a._parsed[l]=o(l)}}_getRotation(){return Ni(this.options.rotation-90)}_getCircumference(){return Ni(this.options.circumference)}_getRotationExtents(){let e=Zt,t=-Zt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const a=this.chart.getDatasetMeta(i).controller,o=a._getRotation(),l=a._getCircumference();e=Math.min(e,o),t=Math.max(t,o+l)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,a=this._cachedMeta,o=a.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(i.width,i.height)-l)/2,0),h=Math.min(HM(this.options.cutout,u),1),m=this._getRingWeight(this.index),{circumference:p,rotation:g}=this._getRotationExtents(),{ratioX:_,ratioY:y,offsetX:x,offsetY:j}=gD(g,p,h),w=(i.width-l)/_,S=(i.height-l)/y,C=Math.max(Math.min(w,S)/2,0),T=Wx(this.options.radius,C),B=Math.max(T*h,0),D=(T-B)/this._getVisibleDatasetWeightTotal();this.offsetX=x*T,this.offsetY=j*T,a.total=this.calculateTotal(),this.outerRadius=T-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*m,0),this.updateElements(o,0,o.length,e)}_circumference(e,t){const i=this.options,a=this._cachedMeta,o=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*o/Zt)}updateElements(e,t,i,a){const o=a==="reset",l=this.chart,u=l.chartArea,m=l.options.animation,p=(u.left+u.right)/2,g=(u.top+u.bottom)/2,_=o&&m.animateScale,y=_?0:this.innerRadius,x=_?0:this.outerRadius,{sharedOptions:j,includeOptions:w}=this._getSharedOptions(t,a);let S=this._getRotation(),C;for(C=0;C<t;++C)S+=this._circumference(C,o);for(C=t;C<t+i;++C){const T=this._circumference(C,o),B=e[C],D={x:p+this.offsetX,y:g+this.offsetY,startAngle:S,endAngle:S+T,circumference:T,outerRadius:x,innerRadius:y};w&&(D.options=j||this.resolveDataElementOptions(C,B.active?"active":a)),S+=T,this.updateElement(B,C,D,a)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,a;for(a=0;a<t.length;a++){const o=e._parsed[a];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(a)&&!t[a].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Zt*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,a=i.data.labels||[],o=up(t._parsed[e],i.options.locale);return{label:a[e]||"",value:o}}getMaxBorderWidth(e){let t=0;const i=this.chart;let a,o,l,u,h;if(!e){for(a=0,o=i.data.datasets.length;a<o;++a)if(i.isDatasetVisible(a)){l=i.getDatasetMeta(a),e=l.data,u=l.controller;break}}if(!e)return 0;for(a=0,o=e.length;a<o;++a)h=u.resolveDataElementOptions(a),h.borderAlign!=="inner"&&(t=Math.max(t,h.borderWidth||0,h.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,a=e.length;i<a;++i){const o=this.resolveDataElementOptions(i);t=Math.max(t,o.offset||0,o.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(Fe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}function Ua(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class bp{static override(e){Object.assign(bp.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Ua()}parse(){return Ua()}format(){return Ua()}add(){return Ua()}diff(){return Ua()}startOf(){return Ua()}endOf(){return Ua()}}var vD={_date:bp};function yD(n,e,t,i){const{controller:a,data:o,_sorted:l}=n,u=a._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&l&&o.length){const m=u._reversePixels?n4:Lm;if(i){if(a._sharedOptions){const p=o[0],g=typeof p.getRange=="function"&&p.getRange(e);if(g){const _=m(o,e,t-g),y=m(o,e,t+g);return{lo:_.lo,hi:y.hi}}}}else{const p=m(o,e,t);if(h){const{vScale:g}=a._cachedMeta,{_parsed:_}=n,y=_.slice(0,p.lo+1).reverse().findIndex(j=>!ht(j[g.axis]));p.lo-=Math.max(0,y);const x=_.slice(p.hi).findIndex(j=>!ht(j[g.axis]));p.hi+=Math.max(0,x)}return p}}return{lo:0,hi:o.length-1}}function hd(n,e,t,i,a){const o=n.getSortedVisibleDatasetMetas(),l=t[e];for(let u=0,h=o.length;u<h;++u){const{index:m,data:p}=o[u],{lo:g,hi:_}=yD(o[u],e,l,a);for(let y=g;y<=_;++y){const x=p[y];x.skip||i(x,m,y)}}}function bD(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,a){const o=e?Math.abs(i.x-a.x):0,l=t?Math.abs(i.y-a.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function rm(n,e,t,i,a){const o=[];return!a&&!n.isPointInArea(e)||hd(n,t,e,function(u,h,m){!a&&!a1(u,n.chartArea,0)||u.inRange(e.x,e.y,i)&&o.push({element:u,datasetIndex:h,index:m})},!0),o}function xD(n,e,t,i){let a=[];function o(l,u,h){const{startAngle:m,endAngle:p}=l.getProps(["startAngle","endAngle"],i),{angle:g}=Qx(l,{x:e.x,y:e.y});Ju(g,m,p)&&a.push({element:l,datasetIndex:u,index:h})}return hd(n,t,e,o),a}function wD(n,e,t,i,a,o){let l=[];const u=bD(t);let h=Number.POSITIVE_INFINITY;function m(p,g,_){const y=p.inRange(e.x,e.y,a);if(i&&!y)return;const x=p.getCenterPoint(a);if(!(!!o||n.isPointInArea(x))&&!y)return;const w=u(e,x);w<h?(l=[{element:p,datasetIndex:g,index:_}],h=w):w===h&&l.push({element:p,datasetIndex:g,index:_})}return hd(n,t,e,m),l}function om(n,e,t,i,a,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!i?xD(n,e,t,a):wD(n,e,t,i,a,o)}function $y(n,e,t,i,a){const o=[],l=t==="x"?"inXRange":"inYRange";let u=!1;return hd(n,t,e,(h,m,p)=>{h[l]&&h[l](e[t],a)&&(o.push({element:h,datasetIndex:m,index:p}),u=u||h.inRange(e.x,e.y,a))}),i&&!u?[]:o}var SD={modes:{index(n,e,t,i){const a=qa(e,n),o=t.axis||"x",l=t.includeInvisible||!1,u=t.intersect?rm(n,a,o,i,l):om(n,a,o,!1,i,l),h=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(m=>{const p=u[0].index,g=m.data[p];g&&!g.skip&&h.push({element:g,datasetIndex:m.index,index:p})}),h):[]},dataset(n,e,t,i){const a=qa(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;let u=t.intersect?rm(n,a,o,i,l):om(n,a,o,!1,i,l);if(u.length>0){const h=u[0].datasetIndex,m=n.getDatasetMeta(h).data;u=[];for(let p=0;p<m.length;++p)u.push({element:m[p],datasetIndex:h,index:p})}return u},point(n,e,t,i){const a=qa(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return rm(n,a,o,i,l)},nearest(n,e,t,i){const a=qa(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return om(n,a,o,t.intersect,i,l)},x(n,e,t,i){const a=qa(e,n);return $y(n,a,"x",t.intersect,i)},y(n,e,t,i){const a=qa(e,n);return $y(n,a,"y",t.intersect,i)}}};const g1=["left","top","right","bottom"];function Cl(n,e){return n.filter(t=>t.pos===e)}function Hy(n,e){return n.filter(t=>g1.indexOf(t.pos)===-1&&t.box.axis===e)}function jl(n,e){return n.sort((t,i)=>{const a=e?i:t,o=e?t:i;return a.weight===o.weight?a.index-o.index:a.weight-o.weight})}function CD(n){const e=[];let t,i,a,o,l,u;for(t=0,i=(n||[]).length;t<i;++t)a=n[t],{position:o,options:{stack:l,stackWeight:u=1}}=a,e.push({index:t,box:a,pos:o,horizontal:a.isHorizontal(),weight:a.weight,stack:l&&o+l,stackWeight:u});return e}function jD(n){const e={};for(const t of n){const{stack:i,pos:a,stackWeight:o}=t;if(!i||!g1.includes(a))continue;const l=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function ED(n,e){const t=jD(n),{vBoxMaxWidth:i,hBoxMaxHeight:a}=e;let o,l,u;for(o=0,l=n.length;o<l;++o){u=n[o];const{fullSize:h}=u.box,m=t[u.stack],p=m&&u.stackWeight/m.weight;u.horizontal?(u.width=p?p*i:h&&e.availableWidth,u.height=a):(u.width=i,u.height=p?p*a:h&&e.availableHeight)}return t}function AD(n){const e=CD(n),t=jl(e.filter(m=>m.box.fullSize),!0),i=jl(Cl(e,"left"),!0),a=jl(Cl(e,"right")),o=jl(Cl(e,"top"),!0),l=jl(Cl(e,"bottom")),u=Hy(e,"x"),h=Hy(e,"y");return{fullSize:t,leftAndTop:i.concat(o),rightAndBottom:a.concat(h).concat(l).concat(u),chartArea:Cl(e,"chartArea"),vertical:i.concat(a).concat(h),horizontal:o.concat(l).concat(u)}}function qy(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function _1(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function TD(n,e,t,i){const{pos:a,box:o}=t,l=n.maxPadding;if(!Ge(a)){t.size&&(n[a]-=t.size);const g=i[t.stack]||{size:0,count:1};g.size=Math.max(g.size,t.horizontal?o.height:o.width),t.size=g.size/g.count,n[a]+=t.size}o.getPadding&&_1(l,o.getPadding());const u=Math.max(0,e.outerWidth-qy(l,n,"left","right")),h=Math.max(0,e.outerHeight-qy(l,n,"top","bottom")),m=u!==n.w,p=h!==n.h;return n.w=u,n.h=h,t.horizontal?{same:m,other:p}:{same:p,other:m}}function kD(n){const e=n.maxPadding;function t(i){const a=Math.max(e[i]-n[i],0);return n[i]+=a,a}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function OD(n,e){const t=e.maxPadding;function i(a){const o={left:0,top:0,right:0,bottom:0};return a.forEach(l=>{o[l]=Math.max(e[l],t[l])}),o}return i(n?["left","right"]:["top","bottom"])}function Nl(n,e,t,i){const a=[];let o,l,u,h,m,p;for(o=0,l=n.length,m=0;o<l;++o){u=n[o],h=u.box,h.update(u.width||e.w,u.height||e.h,OD(u.horizontal,e));const{same:g,other:_}=TD(e,t,u,i);m|=g&&a.length,p=p||_,h.fullSize||a.push(u)}return m&&Nl(a,e,t,i)||p}function Tu(n,e,t,i,a){n.top=t,n.left=e,n.right=e+i,n.bottom=t+a,n.width=i,n.height=a}function Fy(n,e,t,i){const a=t.padding;let{x:o,y:l}=e;for(const u of n){const h=u.box,m=i[u.stack]||{placed:0,weight:1},p=u.stackWeight/m.weight||1;if(u.horizontal){const g=e.w*p,_=m.size||h.height;Gl(m.start)&&(l=m.start),h.fullSize?Tu(h,a.left,l,t.outerWidth-a.right-a.left,_):Tu(h,e.left+m.placed,l,g,_),m.start=l,m.placed+=g,l=h.bottom}else{const g=e.h*p,_=m.size||h.width;Gl(m.start)&&(o=m.start),h.fullSize?Tu(h,o,a.top,_,t.outerHeight-a.bottom-a.top):Tu(h,o,e.top+m.placed,_,g),m.start=o,m.placed+=g,o=h.right}}e.x=o,e.y=l}var ys={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;const a=Ss(n.options.layout.padding),o=Math.max(e-a.width,0),l=Math.max(t-a.height,0),u=AD(n.boxes),h=u.vertical,m=u.horizontal;tt(n.boxes,j=>{typeof j.beforeLayout=="function"&&j.beforeLayout()});const p=h.reduce((j,w)=>w.box.options&&w.box.options.display===!1?j:j+1,0)||1,g=Object.freeze({outerWidth:e,outerHeight:t,padding:a,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/p,hBoxMaxHeight:l/2}),_=Object.assign({},a);_1(_,Ss(i));const y=Object.assign({maxPadding:_,w:o,h:l,x:a.left,y:a.top},a),x=ED(h.concat(m),g);Nl(u.fullSize,y,g,x),Nl(h,y,g,x),Nl(m,y,g,x)&&Nl(h,y,g,x),kD(y),Fy(u.leftAndTop,y,g,x),y.x+=y.w,y.y+=y.h,Fy(u.rightAndBottom,y,g,x),n.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},tt(u.chartArea,j=>{const w=j.box;Object.assign(w,n.chartArea),w.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class v1{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,a){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,a?Math.floor(t/a):i)}}isAttached(e){return!0}updateConfig(e){}}class ND extends v1{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const $u="$chartjs",RD={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Gy=n=>n===null||n==="";function MD(n,e){const t=n.style,i=n.getAttribute("height"),a=n.getAttribute("width");if(n[$u]={initial:{height:i,width:a,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Gy(a)){const o=Ny(n,"width");o!==void 0&&(n.width=o)}if(Gy(i))if(n.style.height==="")n.height=n.width/(e||2);else{const o=Ny(n,"height");o!==void 0&&(n.height=o)}return n}const y1=z4?{passive:!0}:!1;function DD(n,e,t){n&&n.addEventListener(e,t,y1)}function BD(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,y1)}function LD(n,e){const t=RD[n.type]||n.type,{x:i,y:a}=qa(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:a!==void 0?a:null}}function nd(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function PD(n,e,t){const i=n.canvas,a=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||nd(u.addedNodes,i),l=l&&!nd(u.removedNodes,i);l&&t()});return a.observe(document,{childList:!0,subtree:!0}),a}function ID(n,e,t){const i=n.canvas,a=new MutationObserver(o=>{let l=!1;for(const u of o)l=l||nd(u.removedNodes,i),l=l&&!nd(u.addedNodes,i);l&&t()});return a.observe(document,{childList:!0,subtree:!0}),a}const Yl=new Map;let Vy=0;function b1(){const n=window.devicePixelRatio;n!==Vy&&(Vy=n,Yl.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function UD(n,e){Yl.size||window.addEventListener("resize",b1),Yl.set(n,e)}function zD(n){Yl.delete(n),Yl.size||window.removeEventListener("resize",b1)}function $D(n,e,t){const i=n.canvas,a=i&&vp(i);if(!a)return;const o=t1((u,h)=>{const m=a.clientWidth;t(u,h),m<a.clientWidth&&t()},window),l=new ResizeObserver(u=>{const h=u[0],m=h.contentRect.width,p=h.contentRect.height;m===0&&p===0||o(m,p)});return l.observe(a),UD(n,o),l}function lm(n,e,t){t&&t.disconnect(),e==="resize"&&zD(n)}function HD(n,e,t){const i=n.canvas,a=t1(o=>{n.ctx!==null&&t(LD(o,n))},n);return DD(i,e,a),a}class qD extends v1{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(MD(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[$u])return!1;const i=t[$u].initial;["height","width"].forEach(o=>{const l=i[o];ht(l)?t.removeAttribute(o):t.setAttribute(o,l)});const a=i.style||{};return Object.keys(a).forEach(o=>{t.style[o]=a[o]}),t.width=t.width,delete t[$u],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const a=e.$proxies||(e.$proxies={}),l={attach:PD,detach:ID,resize:$D}[t]||HD;a[t]=l(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),a=i[t];if(!a)return;({attach:lm,detach:lm,resize:lm}[t]||BD)(e,t,a),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,a){return U4(e,t,i,a)}isAttached(e){const t=e&&vp(e);return!!(t&&t.isConnected)}}function FD(n){return!_p()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?ND:qD}let tr=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Zu(this.x)&&Zu(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const a={};return e.forEach(o=>{a[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),a}};function GD(n,e){const t=n.options.ticks,i=VD(n),a=Math.min(t.maxTicksLimit||i,i),o=t.major.enabled?WD(e):[],l=o.length,u=o[0],h=o[l-1],m=[];if(l>a)return XD(e,m,o,l/a),m;const p=YD(o,e,a);if(l>0){let g,_;const y=l>1?Math.round((h-u)/(l-1)):null;for(ku(e,m,p,ht(y)?0:u-y,u),g=0,_=l-1;g<_;g++)ku(e,m,p,o[g],o[g+1]);return ku(e,m,p,h,ht(y)?e.length:h+y),m}return ku(e,m,p),m}function VD(n){const e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),a=n._maxLength/t;return Math.floor(Math.min(i,a))}function YD(n,e,t){const i=KD(n),a=e.length/t;if(!i)return Math.max(a,1);const o=XM(i);for(let l=0,u=o.length-1;l<u;l++){const h=o[l];if(h>a)return h}return Math.max(a,1)}function WD(n){const e=[];let t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function XD(n,e,t,i){let a=0,o=t[0],l;for(i=Math.ceil(i),l=0;l<n.length;l++)l===o&&(e.push(n[l]),a++,o=t[a*i])}function ku(n,e,t,i,a){const o=Fe(i,0),l=Math.min(Fe(a,n.length),n.length);let u=0,h,m,p;for(t=Math.ceil(t),a&&(h=a-i,t=h/Math.floor(h/t)),p=o;p<0;)u++,p=Math.round(o+u*t);for(m=Math.max(o,0);m<l;m++)m===p&&(e.push(n[m]),u++,p=Math.round(o+u*t))}function KD(n){const e=n.length;let t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}const QD=n=>n==="left"?"right":n==="right"?"left":n,Yy=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Wy=(n,e)=>Math.min(e||n,n);function Xy(n,e){const t=[],i=n.length/e,a=n.length;let o=0;for(;o<a;o+=i)t.push(n[Math.floor(o)]);return t}function ZD(n,e,t){const i=n.ticks.length,a=Math.min(e,i-1),o=n._startPixel,l=n._endPixel,u=1e-6;let h=n.getPixelForTick(a),m;if(!(t&&(i===1?m=Math.max(h-o,l-h):e===0?m=(n.getPixelForTick(1)-h)/2:m=(h-n.getPixelForTick(a-1))/2,h+=a<e?m:-m,h<o-u||h>l+u)))return h}function JD(n,e){tt(n,t=>{const i=t.gc,a=i.length/2;let o;if(a>e){for(o=0;o<a;++o)delete t.data[i[o]];i.splice(0,a)}})}function El(n){return n.drawTicks?n.tickLength:0}function Ky(n,e){if(!n.display)return 0;const t=kn(n.font,e),i=Ss(n.padding);return(cn(n.text)?n.text.length:1)*t.lineHeight+i.height}function e5(n,e){return mo(n,{scale:e,type:"scale"})}function t5(n,e,t){return mo(n,{tick:t,index:e,type:"tick"})}function n5(n,e,t){let i=cp(n);return(t&&e!=="right"||!t&&e==="right")&&(i=QD(i)),i}function s5(n,e,t,i){const{top:a,left:o,bottom:l,right:u,chart:h}=n,{chartArea:m,scales:p}=h;let g=0,_,y,x;const j=l-a,w=u-o;if(n.isHorizontal()){if(y=Tn(i,o,u),Ge(t)){const S=Object.keys(t)[0],C=t[S];x=p[S].getPixelForValue(C)+j-e}else t==="center"?x=(m.bottom+m.top)/2+j-e:x=Yy(n,t,e);_=u-o}else{if(Ge(t)){const S=Object.keys(t)[0],C=t[S];y=p[S].getPixelForValue(C)-w+e}else t==="center"?y=(m.left+m.right)/2-w+e:y=Yy(n,t,e);x=Tn(i,l,a),g=t==="left"?-un:un}return{titleX:y,titleY:x,maxWidth:_,rotation:g}}class po extends tr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:a}=this;return e=Xs(e,Number.POSITIVE_INFINITY),t=Xs(t,Number.NEGATIVE_INFINITY),i=Xs(i,Number.POSITIVE_INFINITY),a=Xs(a,Number.NEGATIVE_INFINITY),{min:Xs(e,i),max:Xs(t,a),minDefined:ws(e),maxDefined:ws(t)}}getMinMax(e){let{min:t,max:i,minDefined:a,maxDefined:o}=this.getUserBounds(),l;if(a&&o)return{min:t,max:i};const u=this.getMatchingVisibleMetas();for(let h=0,m=u.length;h<m;++h)l=u[h].controller.getMinMax(this,e),a||(t=Math.min(t,l.min)),o||(i=Math.max(i,l.max));return t=o&&t>i?i:t,i=a&&t>i?t:i,{min:Xs(t,Xs(i,t)),max:Xs(i,Xs(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){xt(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:a,grace:o,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=C4(this,o,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=u<this.ticks.length;this._convertTicksToLabels(h?Xy(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=GD(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){xt(this.options.afterUpdate,[this])}beforeSetDimensions(){xt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){xt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),xt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){xt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,a,o;for(i=0,a=e.length;i<a;i++)o=e[i],o.label=xt(t.callback,[o.value,i,e],this)}afterTickToLabelConversion(){xt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){xt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=Wy(this.ticks.length,e.ticks.maxTicksLimit),a=t.minRotation||0,o=t.maxRotation;let l=a,u,h,m;if(!this._isVisible()||!t.display||a>=o||i<=1||!this.isHorizontal()){this.labelRotation=a;return}const p=this._getLabelSizes(),g=p.widest.width,_=p.highest.height,y=Vn(this.chart.width-g,0,this.maxWidth);u=e.offset?this.maxWidth/i:y/(i-1),g+6>u&&(u=y/(i-(e.offset?.5:1)),h=this.maxHeight-El(e.grid)-t.padding-Ky(e.title,this.chart.options.font),m=Math.sqrt(g*g+_*_),l=JM(Math.min(Math.asin(Vn((p.highest.height+6)/u,-1,1)),Math.asin(Vn(h/m,-1,1))-Math.asin(Vn(_/m,-1,1)))),l=Math.max(a,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){xt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){xt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:a,grid:o}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const h=Ky(a,t.options.font);if(u?(e.width=this.maxWidth,e.height=El(o)+h):(e.height=this.maxHeight,e.width=El(o)+h),i.display&&this.ticks.length){const{first:m,last:p,widest:g,highest:_}=this._getLabelSizes(),y=i.padding*2,x=Ni(this.labelRotation),j=Math.cos(x),w=Math.sin(x);if(u){const S=i.mirror?0:w*g.width+j*_.height;e.height=Math.min(this.maxHeight,e.height+S+y)}else{const S=i.mirror?0:j*g.width+w*_.height;e.width=Math.min(this.maxWidth,e.width+S+y)}this._calculatePadding(m,p,w,j)}}this._handleMargins(),u?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,a){const{ticks:{align:o,padding:l},position:u}=this.options,h=this.labelRotation!==0,m=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let _=0,y=0;h?m?(_=a*e.width,y=i*t.height):(_=i*e.height,y=a*t.width):o==="start"?y=t.width:o==="end"?_=e.width:o!=="inner"&&(_=e.width/2,y=t.width/2),this.paddingLeft=Math.max((_-p+l)*this.width/(this.width-p),0),this.paddingRight=Math.max((y-g+l)*this.width/(this.width-g),0)}else{let p=t.height/2,g=e.height/2;o==="start"?(p=0,g=e.height):o==="end"&&(p=t.height,g=0),this.paddingTop=p+l,this.paddingBottom=g+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){xt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)ht(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=Xy(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:a,_longestTextCache:o}=this,l=[],u=[],h=Math.floor(t/Wy(t,i));let m=0,p=0,g,_,y,x,j,w,S,C,T,B,D;for(g=0;g<t;g+=h){if(x=e[g].label,j=this._resolveTickFontOptions(g),a.font=w=j.string,S=o[w]=o[w]||{data:{},gc:[]},C=j.lineHeight,T=B=0,!ht(x)&&!cn(x))T=jy(a,S.data,S.gc,T,x),B=C;else if(cn(x))for(_=0,y=x.length;_<y;++_)D=x[_],!ht(D)&&!cn(D)&&(T=jy(a,S.data,S.gc,T,D),B+=C);l.push(T),u.push(B),m=Math.max(T,m),p=Math.max(B,p)}JD(o,t);const M=l.indexOf(m),$=u.indexOf(p),R=N=>({width:l[N]||0,height:u[N]||0});return{first:R(0),last:R(t-1),widest:R(M),highest:R($),widths:l,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return t4(this._alignToPixels?Ia(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=t5(this.getContext(),e,i))}return this.$context||(this.$context=e5(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Ni(this.labelRotation),i=Math.abs(Math.cos(t)),a=Math.abs(Math.sin(t)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,u=o?o.widest.width+l:0,h=o?o.highest.height+l:0;return this.isHorizontal()?h*i>u*a?u/i:h/a:h*a<u*i?h/i:u/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,a=this.options,{grid:o,position:l,border:u}=a,h=o.offset,m=this.isHorizontal(),g=this.ticks.length+(h?1:0),_=El(o),y=[],x=u.setContext(this.getContext()),j=x.display?x.width:0,w=j/2,S=function(E){return Ia(i,E,j)};let C,T,B,D,M,$,R,N,z,I,U,q;if(l==="top")C=S(this.bottom),$=this.bottom-_,N=C-w,I=S(e.top)+w,q=e.bottom;else if(l==="bottom")C=S(this.top),I=e.top,q=S(e.bottom)-w,$=C+w,N=this.top+_;else if(l==="left")C=S(this.right),M=this.right-_,R=C-w,z=S(e.left)+w,U=e.right;else if(l==="right")C=S(this.left),z=e.left,U=S(e.right)-w,M=C+w,R=this.left+_;else if(t==="x"){if(l==="center")C=S((e.top+e.bottom)/2+.5);else if(Ge(l)){const E=Object.keys(l)[0],O=l[E];C=S(this.chart.scales[E].getPixelForValue(O))}I=e.top,q=e.bottom,$=C+w,N=$+_}else if(t==="y"){if(l==="center")C=S((e.left+e.right)/2);else if(Ge(l)){const E=Object.keys(l)[0],O=l[E];C=S(this.chart.scales[E].getPixelForValue(O))}M=C-w,R=M-_,z=e.left,U=e.right}const H=Fe(a.ticks.maxTicksLimit,g),G=Math.max(1,Math.ceil(g/H));for(T=0;T<g;T+=G){const E=this.getContext(T),O=o.setContext(E),F=u.setContext(E),Y=O.lineWidth,L=O.color,X=F.dash||[],J=F.dashOffset,ee=O.tickWidth,ne=O.tickColor,W=O.tickBorderDash||[],oe=O.tickBorderDashOffset;B=ZD(this,T,h),B!==void 0&&(D=Ia(i,B,Y),m?M=R=z=U=D:$=N=I=q=D,y.push({tx1:M,ty1:$,tx2:R,ty2:N,x1:z,y1:I,x2:U,y2:q,width:Y,color:L,borderDash:X,borderDashOffset:J,tickWidth:ee,tickColor:ne,tickBorderDash:W,tickBorderDashOffset:oe}))}return this._ticksLength=g,this._borderValue=C,y}_computeLabelItems(e){const t=this.axis,i=this.options,{position:a,ticks:o}=i,l=this.isHorizontal(),u=this.ticks,{align:h,crossAlign:m,padding:p,mirror:g}=o,_=El(i.grid),y=_+p,x=g?-p:y,j=-Ni(this.labelRotation),w=[];let S,C,T,B,D,M,$,R,N,z,I,U,q="middle";if(a==="top")M=this.bottom-x,$=this._getXAxisLabelAlignment();else if(a==="bottom")M=this.top+x,$=this._getXAxisLabelAlignment();else if(a==="left"){const G=this._getYAxisLabelAlignment(_);$=G.textAlign,D=G.x}else if(a==="right"){const G=this._getYAxisLabelAlignment(_);$=G.textAlign,D=G.x}else if(t==="x"){if(a==="center")M=(e.top+e.bottom)/2+y;else if(Ge(a)){const G=Object.keys(a)[0],E=a[G];M=this.chart.scales[G].getPixelForValue(E)+y}$=this._getXAxisLabelAlignment()}else if(t==="y"){if(a==="center")D=(e.left+e.right)/2-y;else if(Ge(a)){const G=Object.keys(a)[0],E=a[G];D=this.chart.scales[G].getPixelForValue(E)}$=this._getYAxisLabelAlignment(_).textAlign}t==="y"&&(h==="start"?q="top":h==="end"&&(q="bottom"));const H=this._getLabelSizes();for(S=0,C=u.length;S<C;++S){T=u[S],B=T.label;const G=o.setContext(this.getContext(S));R=this.getPixelForTick(S)+o.labelOffset,N=this._resolveTickFontOptions(S),z=N.lineHeight,I=cn(B)?B.length:1;const E=I/2,O=G.color,F=G.textStrokeColor,Y=G.textStrokeWidth;let L=$;l?(D=R,$==="inner"&&(S===C-1?L=this.options.reverse?"left":"right":S===0?L=this.options.reverse?"right":"left":L="center"),a==="top"?m==="near"||j!==0?U=-I*z+z/2:m==="center"?U=-H.highest.height/2-E*z+z:U=-H.highest.height+z/2:m==="near"||j!==0?U=z/2:m==="center"?U=H.highest.height/2-E*z:U=H.highest.height-I*z,g&&(U*=-1),j!==0&&!G.showLabelBackdrop&&(D+=z/2*Math.sin(j))):(M=R,U=(1-I)*z/2);let X;if(G.showLabelBackdrop){const J=Ss(G.backdropPadding),ee=H.heights[S],ne=H.widths[S];let W=U-J.top,oe=0-J.left;switch(q){case"middle":W-=ee/2;break;case"bottom":W-=ee;break}switch($){case"center":oe-=ne/2;break;case"right":oe-=ne;break;case"inner":S===C-1?oe-=ne:S>0&&(oe-=ne/2);break}X={left:oe,top:W,width:ne+J.width,height:ee+J.height,color:G.backdropColor}}w.push({label:B,font:N,textOffset:U,options:{rotation:j,color:O,strokeColor:F,strokeWidth:Y,textAlign:L,textBaseline:q,translation:[D,M],backdrop:X}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Ni(this.labelRotation))return e==="top"?"left":"right";let a="center";return t.align==="start"?a="left":t.align==="end"?a="right":t.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:a,padding:o}}=this.options,l=this._getLabelSizes(),u=e+o,h=l.widest.width;let m,p;return t==="left"?a?(p=this.right+o,i==="near"?m="left":i==="center"?(m="center",p+=h/2):(m="right",p+=h)):(p=this.right-u,i==="near"?m="right":i==="center"?(m="center",p-=h/2):(m="left",p=this.left)):t==="right"?a?(p=this.left+o,i==="near"?m="right":i==="center"?(m="center",p-=h/2):(m="left",p-=h)):(p=this.left+u,i==="near"?m="left":i==="center"?(m="center",p+=h/2):(m="right",p=this.right)):m="right",{textAlign:m,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:a,width:o,height:l}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,a,o,l),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const a=this.ticks.findIndex(o=>o.value===e);return a>=0?t.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const u=(h,m,p)=>{!p.width||!p.color||(i.save(),i.lineWidth=p.width,i.strokeStyle=p.color,i.setLineDash(p.borderDash||[]),i.lineDashOffset=p.borderDashOffset,i.beginPath(),i.moveTo(h.x,h.y),i.lineTo(m.x,m.y),i.stroke(),i.restore())};if(t.display)for(o=0,l=a.length;o<l;++o){const h=a[o];t.drawOnChartArea&&u({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&u({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:a}}=this,o=i.setContext(this.getContext()),l=i.display?o.width:0;if(!l)return;const u=a.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let m,p,g,_;this.isHorizontal()?(m=Ia(e,this.left,l)-l/2,p=Ia(e,this.right,u)+u/2,g=_=h):(g=Ia(e,this.top,l)-l/2,_=Ia(e,this.bottom,u)+u/2,m=p=h),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(m,g),t.lineTo(p,_),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,a=this._computeLabelArea();a&&dp(i,a);const o=this.getLabelItems(e);for(const l of o){const u=l.options,h=l.font,m=l.label,p=l.textOffset;Vl(i,m,0,p,h,u)}a&&hp(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:a}}=this;if(!i.display)return;const o=kn(i.font),l=Ss(i.padding),u=i.align;let h=o.lineHeight/2;t==="bottom"||t==="center"||Ge(t)?(h+=l.bottom,cn(i.text)&&(h+=o.lineHeight*(i.text.length-1))):h+=l.top;const{titleX:m,titleY:p,maxWidth:g,rotation:_}=s5(this,h,t,u);Vl(e,i.text,0,0,o,{color:i.color,maxWidth:g,rotation:_,textAlign:n5(u,t,a),textBaseline:"middle",translation:[m,p]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=Fe(e.grid&&e.grid.z,-1),a=Fe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==po.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];let o,l;for(o=0,l=t.length;o<l;++o){const u=t[o];u[i]===this.id&&(!e||u.type===e)&&a.push(u)}return a}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return kn(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ou{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;r5(t)&&(i=this.register(t));const a=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in a||(a[o]=e,i5(e,l,i),this.override&&Gt.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,a=this.scope;i in t&&delete t[i],a&&i in Gt[a]&&(delete Gt[a][i],this.override&&delete Ka[i])}}function i5(n,e,t){const i=Fl(Object.create(null),[t?Gt.get(t):{},Gt.get(e),n.defaults]);Gt.set(e,i),n.defaultRoutes&&a5(e,n.defaultRoutes),n.descriptors&&Gt.describe(e,n.descriptors)}function a5(n,e){Object.keys(e).forEach(t=>{const i=t.split("."),a=i.pop(),o=[n].concat(i).join("."),l=e[t].split("."),u=l.pop(),h=l.join(".");Gt.route(o,a,h,u)})}function r5(n){return"id"in n&&"defaults"in n}class o5{constructor(){this.controllers=new Ou(yp,"datasets",!0),this.elements=new Ou(tr,"elements"),this.plugins=new Ou(Object,"plugins"),this.scales=new Ou(po,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(a=>{const o=i||this._getRegistryForType(a);i||o.isForType(a)||o===this.plugins&&a.id?this._exec(e,o,a):tt(a,l=>{const u=i||this._getRegistryForType(l);this._exec(e,u,l)})})}_exec(e,t,i){const a=op(e);xt(i["before"+a],[],i),t[e](i),xt(i["after"+a],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const a=t.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return a}}var Zs=new o5;class l5{constructor(){this._init=[]}notify(e,t,i,a){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=a?this._descriptors(e).filter(a):this._descriptors(e),l=this._notify(o,e,t,i);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,t,i,a){a=a||{};for(const o of e){const l=o.plugin,u=l[i],h=[t,a,o.options];if(xt(u,h,l)===!1&&a.cancelable)return!1}return!0}invalidate(){ht(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,a=Fe(i.options&&i.options.plugins,{}),o=c5(i);return a===!1&&!t?[]:d5(e,o,a,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,a=(o,l)=>o.filter(u=>!l.some(h=>u.plugin.id===h.plugin.id));this._notify(a(t,i),e,"stop"),this._notify(a(i,t),e,"start")}}function c5(n){const e={},t=[],i=Object.keys(Zs.plugins.items);for(let o=0;o<i.length;o++)t.push(Zs.getPlugin(i[o]));const a=n.plugins||[];for(let o=0;o<a.length;o++){const l=a[o];t.indexOf(l)===-1&&(t.push(l),e[l.id]=!0)}return{plugins:t,localIds:e}}function u5(n,e){return!e&&n===!1?null:n===!0?{}:n}function d5(n,{plugins:e,localIds:t},i,a){const o=[],l=n.getContext();for(const u of e){const h=u.id,m=u5(i[h],a);m!==null&&o.push({plugin:u,options:h5(n.config,{plugin:u,local:t[h]},m,l)})}return o}function h5(n,{plugin:e,local:t},i,a){const o=n.pluginScopeKeys(e),l=n.getOptionScopes(i,o);return t&&e.defaults&&l.push(e.defaults),n.createResolver(l,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Im(n,e){const t=Gt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function f5(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function m5(n,e){return n===e?"_index_":"_value_"}function Qy(n){if(n==="x"||n==="y"||n==="r")return n}function p5(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Um(n,...e){if(Qy(n))return n;for(const t of e){const i=t.axis||p5(t.position)||n.length>1&&Qy(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Zy(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function g5(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return Zy(n,"x",t[0])||Zy(n,"y",t[0])}return{}}function _5(n,e){const t=Ka[n.type]||{scales:{}},i=e.scales||{},a=Im(n.type,e),o=Object.create(null);return Object.keys(i).forEach(l=>{const u=i[l];if(!Ge(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=Um(l,u,g5(l,n),Gt.scales[u.type]),m=m5(h,a),p=t.scales||{};o[l]=Ll(Object.create(null),[{axis:h},u,p[h],p[m]])}),n.data.datasets.forEach(l=>{const u=l.type||n.type,h=l.indexAxis||Im(u,e),p=(Ka[u]||{}).scales||{};Object.keys(p).forEach(g=>{const _=f5(g,h),y=l[_+"AxisID"]||_;o[y]=o[y]||Object.create(null),Ll(o[y],[{axis:_},i[y],p[g]])})}),Object.keys(o).forEach(l=>{const u=o[l];Ll(u,[Gt.scales[u.type],Gt.scale])}),o}function x1(n){const e=n.options||(n.options={});e.plugins=Fe(e.plugins,{}),e.scales=_5(n,e)}function w1(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function v5(n){return n=n||{},n.data=w1(n.data),x1(n),n}const Jy=new Map,S1=new Set;function Nu(n,e){let t=Jy.get(n);return t||(t=e(),Jy.set(n,t),S1.add(t)),t}const Al=(n,e,t)=>{const i=Xa(e,t);i!==void 0&&n.add(i)};class y5{constructor(e){this._config=v5(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=w1(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),x1(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Nu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Nu(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Nu(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return Nu(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let a=i.get(e);return(!a||t)&&(a=new Map,i.set(e,a)),a}getOptionScopes(e,t,i){const{options:a,type:o}=this,l=this._cachedScopes(e,i),u=l.get(t);if(u)return u;const h=new Set;t.forEach(p=>{e&&(h.add(e),p.forEach(g=>Al(h,e,g))),p.forEach(g=>Al(h,a,g)),p.forEach(g=>Al(h,Ka[o]||{},g)),p.forEach(g=>Al(h,Gt,g)),p.forEach(g=>Al(h,Pm,g))});const m=Array.from(h);return m.length===0&&m.push(Object.create(null)),S1.has(t)&&l.set(t,m),m}chartOptionScopes(){const{options:e,type:t}=this;return[e,Ka[t]||{},Gt.datasets[t]||{},{type:t},Gt,Pm]}resolveNamedOptions(e,t,i,a=[""]){const o={$shared:!0},{resolver:l,subPrefixes:u}=eb(this._resolverCache,e,a);let h=l;if(x5(l,t)){o.$shared=!1,i=pa(i)?i():i;const m=this.createResolver(e,i,u);h=lo(l,i,m)}for(const m of t)o[m]=h[m];return o}createResolver(e,t,i=[""],a){const{resolver:o}=eb(this._resolverCache,e,i);return Ge(t)?lo(o,t,void 0,a):o}}function eb(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));const a=t.join();let o=i.get(a);return o||(o={resolver:mp(e,t),subPrefixes:t.filter(u=>!u.toLowerCase().includes("hover"))},i.set(a,o)),o}const b5=n=>Ge(n)&&Object.getOwnPropertyNames(n).some(e=>pa(n[e]));function x5(n,e){const{isScriptable:t,isIndexable:i}=o1(n);for(const a of e){const o=t(a),l=i(a),u=(l||o)&&n[a];if(o&&(pa(u)||b5(u))||l&&cn(u))return!0}return!1}var w5="4.5.0";const S5=["top","bottom","left","right","chartArea"];function tb(n,e){return n==="top"||n==="bottom"||S5.indexOf(n)===-1&&e==="x"}function nb(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function sb(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),xt(t&&t.onComplete,[n],e)}function C5(n){const e=n.chart,t=e.options.animation;xt(t&&t.onProgress,[n],e)}function C1(n){return _p()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Hu={},ib=n=>{const e=C1(n);return Object.values(Hu).filter(t=>t.canvas===e).pop()};function j5(n,e,t){const i=Object.keys(n);for(const a of i){const o=+a;if(o>=e){const l=n[a];delete n[a],(t>0||o>e)&&(n[o+t]=l)}}}function E5(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}let fd=class{static defaults=Gt;static instances=Hu;static overrides=Ka;static registry=Zs;static version=w5;static getChart=ib;static register(...e){Zs.add(...e),ab()}static unregister(...e){Zs.remove(...e),ab()}constructor(e,t){const i=this.config=new y5(t),a=C1(e),o=ib(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||FD(a)),this.platform.updateConfig(i);const u=this.platform.acquireContext(a,l.aspectRatio),h=u&&u.canvas,m=h&&h.height,p=h&&h.width;if(this.id=$M(),this.ctx=u,this.canvas=h,this.width=p,this.height=m,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new l5,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=a4(g=>this.update(g),l.resizeDelay||0),this._dataChanges=[],Hu[this.id]=this,!u||!h){console.error("Failed to create chart: can't acquire context from the given item");return}Ai.listen(this,"complete",sb),Ai.listen(this,"progress",C5),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:a,_aspectRatio:o}=this;return ht(e)?t&&o?o:a?i/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Zs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Oy(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ey(this.canvas,this.ctx),this}stop(){return Ai.stop(this),this}resize(e,t){Ai.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,a=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(a,e,t,o),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,Oy(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),xt(i.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};tt(t,(i,a)=>{i.id=a})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,a=Object.keys(i).reduce((l,u)=>(l[u]=!1,l),{});let o=[];t&&(o=o.concat(Object.keys(t).map(l=>{const u=t[l],h=Um(l,u),m=h==="r",p=h==="x";return{options:u,dposition:m?"chartArea":p?"bottom":"left",dtype:m?"radialLinear":p?"category":"linear"}}))),tt(o,l=>{const u=l.options,h=u.id,m=Um(h,u),p=Fe(u.type,l.dtype);(u.position===void 0||tb(u.position,m)!==tb(l.dposition))&&(u.position=l.dposition),a[h]=!0;let g=null;if(h in i&&i[h].type===p)g=i[h];else{const _=Zs.getScale(p);g=new _({id:h,type:p,ctx:this.ctx,chart:this}),i[g.id]=g}g.init(u,e)}),tt(a,(l,u)=>{l||delete i[u]}),tt(i,l=>{ys.configure(this,l,l.options),ys.addBox(this,l)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((a,o)=>a.index-o.index),i>t){for(let a=t;a<i;++a)this._destroyDatasetMeta(a);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(nb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,a)=>{t.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,a;for(this._removeUnreferencedMetasets(),i=0,a=t.length;i<a;i++){const o=t[i];let l=this.getDatasetMeta(i);const u=o.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=u,l.indexAxis=o.indexAxis||Im(u,this.options),l.order=o.order||0,l.index=i,l.label=""+o.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const h=Zs.getController(u),{datasetElementType:m,dataElementType:p}=Gt.datasets[u];Object.assign(h,{dataElementType:Zs.getElement(p),datasetElementType:m&&Zs.getElement(m)}),l.controller=new h(this,i),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){tt(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let m=0,p=this.data.datasets.length;m<p;m++){const{controller:g}=this.getDatasetMeta(m),_=!a&&o.indexOf(g)===-1;g.buildOrUpdateElements(_),l=Math.max(+g.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),a||tt(o,m=>{m.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(nb("z","_idx"));const{_active:u,_lastEvent:h}=this;h?this._eventHandler(h,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){tt(this.scales,e=>{ys.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!gy(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:a,count:o}of t){const l=i==="_removeElements"?-o:o;j5(e,a,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=o=>new Set(e.filter(l=>l[0]===o).map((l,u)=>u+","+l.splice(1).join(","))),a=i(0);for(let o=1;o<t;o++)if(!gy(a,i(o)))return;return Array.from(a).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ys.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],tt(this.boxes,a=>{i&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,o)=>{a._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,pa(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),a={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(i.controller._update(t),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ai.has(this)?this.attached&&!Ai.running(this)&&Ai.start(this):(this.draw(),sb({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let a,o;for(a=0,o=t.length;a<o;++a){const l=t[a];(!e||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},a=F4(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(a&&dp(t,a),e.controller.draw(),a&&hp(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return a1(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,a){const o=SD.modes[t];return typeof o=="function"?o(this,e,i,a):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let a=i.filter(o=>o&&o._dataset===t).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(a)),a}getContext(){return this.$context||(this.$context=mo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const a=i?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,a);Gl(t)?(o.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),l.update(o,{visible:i}),this.update(u=>u.datasetIndex===e?a:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Ai.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ey(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Hu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(o,l)=>{t.addEventListener(this,o,l),e[o]=l},a=(o,l,u)=>{o.offsetX=l,o.offsetY=u,this._eventHandler(o)};tt(this.options.events,o=>i(o,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(h,m)=>{t.addEventListener(this,h,m),e[h]=m},a=(h,m)=>{e[h]&&(t.removeEventListener(this,h,m),delete e[h])},o=(h,m)=>{this.canvas&&this.resize(h,m)};let l;const u=()=>{a("attach",u),this.attached=!0,this.resize(),i("resize",o),i("detach",l)};l=()=>{this.attached=!1,a("resize",o),this._stop(),this._resize(0,0),i("attach",u)},t.isAttached(this.canvas)?u():l()}unbindEvents(){tt(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},tt(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const a=i?"set":"remove";let o,l,u,h;for(t==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+a+"DatasetHoverStyle"]()),u=0,h=e.length;u<h;++u){l=e[u];const m=l&&this.getDatasetMeta(l.datasetIndex).controller;m&&m[a+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:o,index:l})=>{const u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[l],index:l}});!Xu(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const a=this.options.hover,o=(h,m)=>h.filter(p=>!m.some(g=>p.datasetIndex===g.datasetIndex&&p.index===g.index)),l=o(t,e),u=i?e:o(e,t);l.length&&this.updateHoverStyle(l,a.mode,!1),u.length&&a.mode&&this.updateHoverStyle(u,a.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},a=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,a)===!1)return;const o=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,a),(o||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:a=[],options:o}=this,l=t,u=this._getActiveElements(e,a,i,l),h=YM(e),m=E5(e,this._lastEvent,i,h);i&&(this._lastEvent=null,xt(o.onHover,[e,u,this],this),h&&xt(o.onClick,[e,u,this],this));const p=!Xu(u,a);return(p||t)&&(this._active=u,this._updateHoverStyles(u,a,t)),this._lastEvent=m,p}_getActiveElements(e,t,i,a){if(e.type==="mouseout")return[];if(!i)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,a)}};function ab(){return tt(fd.instances,n=>n._plugins.invalidate())}function A5(n,e,t){const{startAngle:i,x:a,y:o,outerRadius:l,innerRadius:u,options:h}=e,{borderWidth:m,borderJoinStyle:p}=h,g=Math.min(m/l,Js(i-t));if(n.beginPath(),n.arc(a,o,l-m/2,i+g/2,t-g/2),u>0){const _=Math.min(m/u,Js(i-t));n.arc(a,o,u+m/2,t-_/2,i+_/2,!0)}else{const _=Math.min(m/2,l*Js(i-t));if(p==="round")n.arc(a,o,_,t-dt/2,i+dt/2,!0);else if(p==="bevel"){const y=2*_*_,x=-y*Math.cos(t+dt/2)+a,j=-y*Math.sin(t+dt/2)+o,w=y*Math.cos(i+dt/2)+a,S=y*Math.sin(i+dt/2)+o;n.lineTo(x,j),n.lineTo(w,S)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function T5(n,e,t){const{startAngle:i,pixelMargin:a,x:o,y:l,outerRadius:u,innerRadius:h}=e;let m=a/u;n.beginPath(),n.arc(o,l,u,i-m,t+m),h>a?(m=a/h,n.arc(o,l,h,t+m,i-m,!0)):n.arc(o,l,a,t+un,i-un),n.closePath(),n.clip()}function k5(n){return fp(n,["outerStart","outerEnd","innerStart","innerEnd"])}function O5(n,e,t,i){const a=k5(n.options.borderRadius),o=(t-e)/2,l=Math.min(o,i*e/2),u=h=>{const m=(t-Math.min(o,h))*i/2;return Vn(h,0,Math.min(o,m))};return{outerStart:u(a.outerStart),outerEnd:u(a.outerEnd),innerStart:Vn(a.innerStart,0,l),innerEnd:Vn(a.innerEnd,0,l)}}function Wr(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function sd(n,e,t,i,a,o){const{x:l,y:u,startAngle:h,pixelMargin:m,innerRadius:p}=e,g=Math.max(e.outerRadius+i+t-m,0),_=p>0?p+i+t+m:0;let y=0;const x=a-h;if(i){const G=p>0?p-i:0,E=g>0?g-i:0,O=(G+E)/2,F=O!==0?x*O/(O+i):x;y=(x-F)/2}const j=Math.max(.001,x*g-t/dt)/g,w=(x-j)/2,S=h+w+y,C=a-w-y,{outerStart:T,outerEnd:B,innerStart:D,innerEnd:M}=O5(e,_,g,C-S),$=g-T,R=g-B,N=S+T/$,z=C-B/R,I=_+D,U=_+M,q=S+D/I,H=C-M/U;if(n.beginPath(),o){const G=(N+z)/2;if(n.arc(l,u,g,N,G),n.arc(l,u,g,G,z),B>0){const Y=Wr(R,z,l,u);n.arc(Y.x,Y.y,B,z,C+un)}const E=Wr(U,C,l,u);if(n.lineTo(E.x,E.y),M>0){const Y=Wr(U,H,l,u);n.arc(Y.x,Y.y,M,C+un,H+Math.PI)}const O=(C-M/_+(S+D/_))/2;if(n.arc(l,u,_,C-M/_,O,!0),n.arc(l,u,_,O,S+D/_,!0),D>0){const Y=Wr(I,q,l,u);n.arc(Y.x,Y.y,D,q+Math.PI,S-un)}const F=Wr($,S,l,u);if(n.lineTo(F.x,F.y),T>0){const Y=Wr($,N,l,u);n.arc(Y.x,Y.y,T,S-un,N)}}else{n.moveTo(l,u);const G=Math.cos(N)*g+l,E=Math.sin(N)*g+u;n.lineTo(G,E);const O=Math.cos(z)*g+l,F=Math.sin(z)*g+u;n.lineTo(O,F)}n.closePath()}function N5(n,e,t,i,a){const{fullCircles:o,startAngle:l,circumference:u}=e;let h=e.endAngle;if(o){sd(n,e,t,i,h,a);for(let m=0;m<o;++m)n.fill();isNaN(u)||(h=l+(u%Zt||Zt))}return sd(n,e,t,i,h,a),n.fill(),h}function R5(n,e,t,i,a){const{fullCircles:o,startAngle:l,circumference:u,options:h}=e,{borderWidth:m,borderJoinStyle:p,borderDash:g,borderDashOffset:_,borderRadius:y}=h,x=h.borderAlign==="inner";if(!m)return;n.setLineDash(g||[]),n.lineDashOffset=_,x?(n.lineWidth=m*2,n.lineJoin=p||"round"):(n.lineWidth=m,n.lineJoin=p||"bevel");let j=e.endAngle;if(o){sd(n,e,t,i,j,a);for(let w=0;w<o;++w)n.stroke();isNaN(u)||(j=l+(u%Zt||Zt))}x&&T5(n,e,j),h.selfJoin&&j-l>=dt&&y===0&&p!=="miter"&&A5(n,e,j),o||(sd(n,e,t,i,j,a),n.stroke())}class M5 extends tr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){const a=this.getProps(["x","y"],i),{angle:o,distance:l}=Qx(a,{x:e,y:t}),{startAngle:u,endAngle:h,innerRadius:m,outerRadius:p,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),_=(this.options.spacing+this.options.borderWidth)/2,y=Fe(g,h-u),x=Ju(o,u,h)&&u!==h,j=y>=Zt||x,w=Ga(l,m+_,p+_);return j&&w}getCenterPoint(e){const{x:t,y:i,startAngle:a,endAngle:o,innerRadius:l,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:m}=this.options,p=(a+o)/2,g=(l+u+m+h)/2;return{x:t+Math.cos(p)*g,y:i+Math.sin(p)*g}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:i}=this,a=(t.offset||0)/4,o=(t.spacing||0)/2,l=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>Zt?Math.floor(i/Zt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*a,Math.sin(u)*a);const h=1-Math.sin(Math.min(dt,i||0)),m=a*h;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,N5(e,this,m,o,l),R5(e,this,m,o,l),e.restore()}}function j1(n,e){const{x:t,y:i,base:a,width:o,height:l}=n.getProps(["x","y","base","width","height"],e);let u,h,m,p,g;return n.horizontal?(g=l/2,u=Math.min(t,a),h=Math.max(t,a),m=i-g,p=i+g):(g=o/2,u=t-g,h=t+g,m=Math.min(i,a),p=Math.max(i,a)),{left:u,top:m,right:h,bottom:p}}function ha(n,e,t,i){return n?0:Vn(e,t,i)}function D5(n,e,t){const i=n.options.borderWidth,a=n.borderSkipped,o=r1(i);return{t:ha(a.top,o.top,0,t),r:ha(a.right,o.right,0,e),b:ha(a.bottom,o.bottom,0,t),l:ha(a.left,o.left,0,e)}}function B5(n,e,t){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),a=n.options.borderRadius,o=ao(a),l=Math.min(e,t),u=n.borderSkipped,h=i||Ge(a);return{topLeft:ha(!h||u.top||u.left,o.topLeft,0,l),topRight:ha(!h||u.top||u.right,o.topRight,0,l),bottomLeft:ha(!h||u.bottom||u.left,o.bottomLeft,0,l),bottomRight:ha(!h||u.bottom||u.right,o.bottomRight,0,l)}}function L5(n){const e=j1(n),t=e.right-e.left,i=e.bottom-e.top,a=D5(n,t/2,i/2),o=B5(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:o},inner:{x:e.left+a.l,y:e.top+a.t,w:t-a.l-a.r,h:i-a.t-a.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,o.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(a.b,a.r))}}}}function cm(n,e,t,i){const a=e===null,o=t===null,u=n&&!(a&&o)&&j1(n,i);return u&&(a||Ga(e,u.left,u.right))&&(o||Ga(t,u.top,u.bottom))}function P5(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function I5(n,e){n.rect(e.x,e.y,e.w,e.h)}function um(n,e,t={}){const i=n.x!==t.x?-e:0,a=n.y!==t.y?-e:0,o=(n.x+n.w!==t.x+t.w?e:0)-i,l=(n.y+n.h!==t.y+t.h?e:0)-a;return{x:n.x+i,y:n.y+a,w:n.w+o,h:n.h+l,radius:n.radius}}class U5 extends tr{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:a}}=this,{inner:o,outer:l}=L5(this),u=P5(l.radius)?ed:I5;e.save(),(l.w!==o.w||l.h!==o.h)&&(e.beginPath(),u(e,um(l,t,o)),e.clip(),u(e,um(o,-t,l)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),u(e,um(o,t)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,t,i){return cm(this,e,t,i)}inXRange(e,t){return cm(this,e,null,t)}inYRange(e,t){return cm(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:a,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+a)/2:t,y:o?i:(i+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const rb=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},z5=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class ob extends tr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=xt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,a)=>e.sort(i,a,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,a=kn(i.font),o=a.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:h}=rb(i,o);let m,p;t.font=a.string,this.isHorizontal()?(m=this.maxWidth,p=this._fitRows(l,o,u,h)+10):(p=this.maxHeight,m=this._fitCols(l,a,u,h)+10),this.width=Math.min(m,e.maxWidth||this.maxWidth),this.height=Math.min(p,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,a){const{ctx:o,maxWidth:l,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],m=this.lineWidths=[0],p=a+u;let g=e;o.textAlign="left",o.textBaseline="middle";let _=-1,y=-p;return this.legendItems.forEach((x,j)=>{const w=i+t/2+o.measureText(x.text).width;(j===0||m[m.length-1]+w+2*u>l)&&(g+=p,m[m.length-(j>0?0:1)]=0,y+=p,_++),h[j]={left:0,top:y,row:_,width:w,height:a},m[m.length-1]+=w+u}),g}_fitCols(e,t,i,a){const{ctx:o,maxHeight:l,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],m=this.columnSizes=[],p=l-e;let g=u,_=0,y=0,x=0,j=0;return this.legendItems.forEach((w,S)=>{const{itemWidth:C,itemHeight:T}=$5(i,t,o,w,a);S>0&&y+T+2*u>p&&(g+=_+u,m.push({width:_,height:y}),x+=_+u,j++,_=y=0),h[S]={left:x,top:y,col:j,width:C,height:T},_=Math.max(_,C),y+=T+u}),g+=_,m.push({width:_,height:y}),g}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:a},rtl:o}}=this,l=ro(o,this.left,this.width);if(this.isHorizontal()){let u=0,h=Tn(i,this.left+a,this.right-this.lineWidths[u]);for(const m of t)u!==m.row&&(u=m.row,h=Tn(i,this.left+a,this.right-this.lineWidths[u])),m.top+=this.top+e+a,m.left=l.leftForLtr(l.x(h),m.width),h+=m.width+a}else{let u=0,h=Tn(i,this.top+e+a,this.bottom-this.columnSizes[u].height);for(const m of t)m.col!==u&&(u=m.col,h=Tn(i,this.top+e+a,this.bottom-this.columnSizes[u].height)),m.top=h,m.left+=this.left+a,m.left=l.leftForLtr(l.x(m.left),m.width),h+=m.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;dp(e,this),this._draw(),hp(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:a}=this,{align:o,labels:l}=e,u=Gt.color,h=ro(e.rtl,this.left,this.width),m=kn(l.font),{padding:p}=l,g=m.size,_=g/2;let y;this.drawTitle(),a.textAlign=h.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=m.string;const{boxWidth:x,boxHeight:j,itemHeight:w}=rb(l,g),S=function(M,$,R){if(isNaN(x)||x<=0||isNaN(j)||j<0)return;a.save();const N=Fe(R.lineWidth,1);if(a.fillStyle=Fe(R.fillStyle,u),a.lineCap=Fe(R.lineCap,"butt"),a.lineDashOffset=Fe(R.lineDashOffset,0),a.lineJoin=Fe(R.lineJoin,"miter"),a.lineWidth=N,a.strokeStyle=Fe(R.strokeStyle,u),a.setLineDash(Fe(R.lineDash,[])),l.usePointStyle){const z={radius:j*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:N},I=h.xPlus(M,x/2),U=$+_;i1(a,z,I,U,l.pointStyleWidth&&x)}else{const z=$+Math.max((g-j)/2,0),I=h.leftForLtr(M,x),U=ao(R.borderRadius);a.beginPath(),Object.values(U).some(q=>q!==0)?ed(a,{x:I,y:z,w:x,h:j,radius:U}):a.rect(I,z,x,j),a.fill(),N!==0&&a.stroke()}a.restore()},C=function(M,$,R){Vl(a,R.text,M,$+w/2,m,{strikethrough:R.hidden,textAlign:h.textAlign(R.textAlign)})},T=this.isHorizontal(),B=this._computeTitleHeight();T?y={x:Tn(o,this.left+p,this.right-i[0]),y:this.top+p+B,line:0}:y={x:this.left+p,y:Tn(o,this.top+B+p,this.bottom-t[0].height),line:0},d1(this.ctx,e.textDirection);const D=w+p;this.legendItems.forEach((M,$)=>{a.strokeStyle=M.fontColor,a.fillStyle=M.fontColor;const R=a.measureText(M.text).width,N=h.textAlign(M.textAlign||(M.textAlign=l.textAlign)),z=x+_+R;let I=y.x,U=y.y;h.setWidth(this.width),T?$>0&&I+z+p>this.right&&(U=y.y+=D,y.line++,I=y.x=Tn(o,this.left+p,this.right-i[y.line])):$>0&&U+D>this.bottom&&(I=y.x=I+t[y.line].width+p,y.line++,U=y.y=Tn(o,this.top+B+p,this.bottom-t[y.line].height));const q=h.x(I);if(S(q,U,M),I=r4(N,I+x+_,T?I+z:this.right,e.rtl),C(h.x(I),U,M),T)y.x+=z+p;else if(typeof M.text!="string"){const H=m.lineHeight;y.y+=E1(M,H)+p}else y.y+=D}),h1(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=kn(t.font),a=Ss(t.padding);if(!t.display)return;const o=ro(e.rtl,this.left,this.width),l=this.ctx,u=t.position,h=i.size/2,m=a.top+h;let p,g=this.left,_=this.width;if(this.isHorizontal())_=Math.max(...this.lineWidths),p=this.top+m,g=Tn(e.align,g,this.right-_);else{const x=this.columnSizes.reduce((j,w)=>Math.max(j,w.height),0);p=m+Tn(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const y=Tn(u,g,g+_);l.textAlign=o.textAlign(cp(u)),l.textBaseline="middle",l.strokeStyle=t.color,l.fillStyle=t.color,l.font=i.string,Vl(l,t.text,y,p,i)}_computeTitleHeight(){const e=this.options.title,t=kn(e.font),i=Ss(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,a,o;if(Ga(e,this.left,this.right)&&Ga(t,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(a=o[i],Ga(e,a.left,a.left+a.width)&&Ga(t,a.top,a.top+a.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!F5(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,o=z5(a,i);a&&!o&&xt(t.onLeave,[e,a,this],this),this._hoveredItem=i,i&&!o&&xt(t.onHover,[e,i,this],this)}else i&&xt(t.onClick,[e,i,this],this)}}function $5(n,e,t,i,a){const o=H5(i,n,e,t),l=q5(a,i,e.lineHeight);return{itemWidth:o,itemHeight:l}}function H5(n,e,t,i){let a=n.text;return a&&typeof a!="string"&&(a=a.reduce((o,l)=>o.length>l.length?o:l)),e+t.size/2+i.measureText(a).width}function q5(n,e,t){let i=n;return typeof e.text!="string"&&(i=E1(e,t)),i}function E1(n,e){const t=n.text?n.text.length:0;return e*t}function F5(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var G5={id:"legend",_element:ob,start(n,e,t){const i=n.legend=new ob({ctx:n.ctx,options:t,chart:n});ys.configure(n,i,t),ys.addBox(n,i)},stop(n){ys.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const i=n.legend;ys.configure(n,i,t),i.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const i=e.datasetIndex,a=t.chart;a.isDatasetVisible(i)?(a.hide(i),e.hidden=!0):(a.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:a,color:o,useBorderRadius:l,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const m=h.controller.getStyle(t?0:void 0),p=Ss(m.borderWidth);return{text:e[h.index].label,fillStyle:m.backgroundColor,fontColor:o,hidden:!h.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:m.borderColor,pointStyle:i||m.pointStyle,rotation:m.rotation,textAlign:a||m.textAlign,borderRadius:l&&(u||m.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class A1 extends tr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const a=cn(i.text)?i.text.length:1;this._padding=Ss(i.padding);const o=a*kn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:a,right:o,options:l}=this,u=l.align;let h=0,m,p,g;return this.isHorizontal()?(p=Tn(u,i,o),g=t+e,m=o-i):(l.position==="left"?(p=i+e,g=Tn(u,a,t),h=dt*-.5):(p=o-e,g=Tn(u,t,a),h=dt*.5),m=a-t),{titleX:p,titleY:g,maxWidth:m,rotation:h}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=kn(t.font),o=i.lineHeight/2+this._padding.top,{titleX:l,titleY:u,maxWidth:h,rotation:m}=this._drawArgs(o);Vl(e,t.text,0,0,i,{color:t.color,maxWidth:h,rotation:m,textAlign:cp(t.align),textBaseline:"middle",translation:[l,u]})}}function V5(n,e){const t=new A1({ctx:n.ctx,options:e,chart:n});ys.configure(n,t,e),ys.addBox(n,t),n.titleBlock=t}var Y5={id:"title",_element:A1,start(n,e,t){V5(n,t)},stop(n){const e=n.titleBlock;ys.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const i=n.titleBlock;ys.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Rl={average(n){if(!n.length)return!1;let e,t,i=new Set,a=0,o=0;for(e=0,t=n.length;e<t;++e){const u=n[e].element;if(u&&u.hasValue()){const h=u.tooltipPosition();i.add(h.x),a+=h.y,++o}}return o===0||i.size===0?!1:{x:[...i].reduce((u,h)=>u+h)/i.size,y:a/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,a=Number.POSITIVE_INFINITY,o,l,u;for(o=0,l=n.length;o<l;++o){const h=n[o].element;if(h&&h.hasValue()){const m=h.getCenterPoint(),p=e4(e,m);p<a&&(a=p,u=h)}}if(u){const h=u.tooltipPosition();t=h.x,i=h.y}return{x:t,y:i}}};function Ks(n,e){return e&&(cn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Ti(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function W5(n,e){const{element:t,datasetIndex:i,index:a}=e,o=n.getDatasetMeta(i).controller,{label:l,value:u}=o.getLabelAndValue(a);return{chart:n,label:l,parsed:o.getParsed(a),raw:n.data.datasets[i].data[a],formattedValue:u,dataset:o.getDataset(),dataIndex:a,datasetIndex:i,element:t}}function lb(n,e){const t=n.chart.ctx,{body:i,footer:a,title:o}=n,{boxWidth:l,boxHeight:u}=e,h=kn(e.bodyFont),m=kn(e.titleFont),p=kn(e.footerFont),g=o.length,_=a.length,y=i.length,x=Ss(e.padding);let j=x.height,w=0,S=i.reduce((B,D)=>B+D.before.length+D.lines.length+D.after.length,0);if(S+=n.beforeBody.length+n.afterBody.length,g&&(j+=g*m.lineHeight+(g-1)*e.titleSpacing+e.titleMarginBottom),S){const B=e.displayColors?Math.max(u,h.lineHeight):h.lineHeight;j+=y*B+(S-y)*h.lineHeight+(S-1)*e.bodySpacing}_&&(j+=e.footerMarginTop+_*p.lineHeight+(_-1)*e.footerSpacing);let C=0;const T=function(B){w=Math.max(w,t.measureText(B).width+C)};return t.save(),t.font=m.string,tt(n.title,T),t.font=h.string,tt(n.beforeBody.concat(n.afterBody),T),C=e.displayColors?l+2+e.boxPadding:0,tt(i,B=>{tt(B.before,T),tt(B.lines,T),tt(B.after,T)}),C=0,t.font=p.string,tt(n.footer,T),t.restore(),w+=x.width,{width:w,height:j}}function X5(n,e){const{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function K5(n,e,t,i){const{x:a,width:o}=i,l=t.caretSize+t.caretPadding;if(n==="left"&&a+o+l>e.width||n==="right"&&a-o-l<0)return!0}function Q5(n,e,t,i){const{x:a,width:o}=t,{width:l,chartArea:{left:u,right:h}}=n;let m="center";return i==="center"?m=a<=(u+h)/2?"left":"right":a<=o/2?m="left":a>=l-o/2&&(m="right"),K5(m,n,e,t)&&(m="center"),m}function cb(n,e,t){const i=t.yAlign||e.yAlign||X5(n,t);return{xAlign:t.xAlign||e.xAlign||Q5(n,e,t,i),yAlign:i}}function Z5(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function J5(n,e,t){let{y:i,height:a}=n;return e==="top"?i+=t:e==="bottom"?i-=a+t:i-=a/2,i}function ub(n,e,t,i){const{caretSize:a,caretPadding:o,cornerRadius:l}=n,{xAlign:u,yAlign:h}=t,m=a+o,{topLeft:p,topRight:g,bottomLeft:_,bottomRight:y}=ao(l);let x=Z5(e,u);const j=J5(e,h,m);return h==="center"?u==="left"?x+=m:u==="right"&&(x-=m):u==="left"?x-=Math.max(p,_)+a:u==="right"&&(x+=Math.max(g,y)+a),{x:Vn(x,0,i.width-e.width),y:Vn(j,0,i.height-e.height)}}function Ru(n,e,t){const i=Ss(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function db(n){return Ks([],Ti(n))}function eB(n,e,t){return mo(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function hb(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const T1={beforeTitle:Si,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Si,beforeBody:Si,beforeLabel:Si,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return ht(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Si,afterBody:Si,beforeFooter:Si,footer:Si,afterFooter:Si};function Hn(n,e,t,i){const a=n[e].call(t,i);return typeof a>"u"?T1[e].call(t,i):a}class fb extends tr{static positioners=Rl;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),a=i.enabled&&t.options.animation&&i.animations,o=new f1(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=eB(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,a=Hn(i,"beforeTitle",this,e),o=Hn(i,"title",this,e),l=Hn(i,"afterTitle",this,e);let u=[];return u=Ks(u,Ti(a)),u=Ks(u,Ti(o)),u=Ks(u,Ti(l)),u}getBeforeBody(e,t){return db(Hn(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,a=[];return tt(e,o=>{const l={before:[],lines:[],after:[]},u=hb(i,o);Ks(l.before,Ti(Hn(u,"beforeLabel",this,o))),Ks(l.lines,Hn(u,"label",this,o)),Ks(l.after,Ti(Hn(u,"afterLabel",this,o))),a.push(l)}),a}getAfterBody(e,t){return db(Hn(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,a=Hn(i,"beforeFooter",this,e),o=Hn(i,"footer",this,e),l=Hn(i,"afterFooter",this,e);let u=[];return u=Ks(u,Ti(a)),u=Ks(u,Ti(o)),u=Ks(u,Ti(l)),u}_createItems(e){const t=this._active,i=this.chart.data,a=[],o=[],l=[];let u=[],h,m;for(h=0,m=t.length;h<m;++h)u.push(W5(this.chart,t[h]));return e.filter&&(u=u.filter((p,g,_)=>e.filter(p,g,_,i))),e.itemSort&&(u=u.sort((p,g)=>e.itemSort(p,g,i))),tt(u,p=>{const g=hb(e.callbacks,p);a.push(Hn(g,"labelColor",this,p)),o.push(Hn(g,"labelPointStyle",this,p)),l.push(Hn(g,"labelTextColor",this,p))}),this.labelColors=a,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(e,t){const i=this.options.setContext(this.getContext()),a=this._active;let o,l=[];if(!a.length)this.opacity!==0&&(o={opacity:0});else{const u=Rl[i.position].call(this,a,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const h=this._size=lb(this,i),m=Object.assign({},u,h),p=cb(this.chart,i,m),g=ub(i,m,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,o={opacity:1,x:g.x,y:g.y,width:h.width,height:h.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,a){const o=this.getCaretPosition(e,i,a);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,i){const{xAlign:a,yAlign:o}=this,{caretSize:l,cornerRadius:u}=i,{topLeft:h,topRight:m,bottomLeft:p,bottomRight:g}=ao(u),{x:_,y}=e,{width:x,height:j}=t;let w,S,C,T,B,D;return o==="center"?(B=y+j/2,a==="left"?(w=_,S=w-l,T=B+l,D=B-l):(w=_+x,S=w+l,T=B-l,D=B+l),C=w):(a==="left"?S=_+Math.max(h,p)+l:a==="right"?S=_+x-Math.max(m,g)-l:S=this.caretX,o==="top"?(T=y,B=T-l,w=S-l,C=S+l):(T=y+j,B=T+l,w=S+l,C=S-l),D=T),{x1:w,x2:S,x3:C,y1:T,y2:B,y3:D}}drawTitle(e,t,i){const a=this.title,o=a.length;let l,u,h;if(o){const m=ro(i.rtl,this.x,this.width);for(e.x=Ru(this,i.titleAlign,i),t.textAlign=m.textAlign(i.titleAlign),t.textBaseline="middle",l=kn(i.titleFont),u=i.titleSpacing,t.fillStyle=i.titleColor,t.font=l.string,h=0;h<o;++h)t.fillText(a[h],m.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+u,h+1===o&&(e.y+=i.titleMarginBottom-u)}}_drawColorBox(e,t,i,a,o){const l=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:h,boxWidth:m}=o,p=kn(o.bodyFont),g=Ru(this,"left",o),_=a.x(g),y=h<p.lineHeight?(p.lineHeight-h)/2:0,x=t.y+y;if(o.usePointStyle){const j={radius:Math.min(m,h)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},w=a.leftForLtr(_,m)+m/2,S=x+h/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Ay(e,j,w,S),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,Ay(e,j,w,S)}else{e.lineWidth=Ge(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const j=a.leftForLtr(_,m),w=a.leftForLtr(a.xPlus(_,1),m-2),S=ao(l.borderRadius);Object.values(S).some(C=>C!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,ed(e,{x:j,y:x,w:m,h,radius:S}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),ed(e,{x:w,y:x+1,w:m-2,h:h-2,radius:S}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(j,x,m,h),e.strokeRect(j,x,m,h),e.fillStyle=l.backgroundColor,e.fillRect(w,x+1,m-2,h-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:a}=this,{bodySpacing:o,bodyAlign:l,displayColors:u,boxHeight:h,boxWidth:m,boxPadding:p}=i,g=kn(i.bodyFont);let _=g.lineHeight,y=0;const x=ro(i.rtl,this.x,this.width),j=function(R){t.fillText(R,x.x(e.x+y),e.y+_/2),e.y+=_+o},w=x.textAlign(l);let S,C,T,B,D,M,$;for(t.textAlign=l,t.textBaseline="middle",t.font=g.string,e.x=Ru(this,w,i),t.fillStyle=i.bodyColor,tt(this.beforeBody,j),y=u&&w!=="right"?l==="center"?m/2+p:m+2+p:0,B=0,M=a.length;B<M;++B){for(S=a[B],C=this.labelTextColors[B],t.fillStyle=C,tt(S.before,j),T=S.lines,u&&T.length&&(this._drawColorBox(t,e,B,x,i),_=Math.max(g.lineHeight,h)),D=0,$=T.length;D<$;++D)j(T[D]),_=g.lineHeight;tt(S.after,j)}y=0,_=g.lineHeight,tt(this.afterBody,j),e.y-=o}drawFooter(e,t,i){const a=this.footer,o=a.length;let l,u;if(o){const h=ro(i.rtl,this.x,this.width);for(e.x=Ru(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=h.textAlign(i.footerAlign),t.textBaseline="middle",l=kn(i.footerFont),t.fillStyle=i.footerColor,t.font=l.string,u=0;u<o;++u)t.fillText(a[u],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+i.footerSpacing}}drawBackground(e,t,i,a){const{xAlign:o,yAlign:l}=this,{x:u,y:h}=e,{width:m,height:p}=i,{topLeft:g,topRight:_,bottomLeft:y,bottomRight:x}=ao(a.cornerRadius);t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,t.lineWidth=a.borderWidth,t.beginPath(),t.moveTo(u+g,h),l==="top"&&this.drawCaret(e,t,i,a),t.lineTo(u+m-_,h),t.quadraticCurveTo(u+m,h,u+m,h+_),l==="center"&&o==="right"&&this.drawCaret(e,t,i,a),t.lineTo(u+m,h+p-x),t.quadraticCurveTo(u+m,h+p,u+m-x,h+p),l==="bottom"&&this.drawCaret(e,t,i,a),t.lineTo(u+y,h+p),t.quadraticCurveTo(u,h+p,u,h+p-y),l==="center"&&o==="left"&&this.drawCaret(e,t,i,a),t.lineTo(u,h+g),t.quadraticCurveTo(u,h,u+g,h),t.closePath(),t.fill(),a.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,a=i&&i.x,o=i&&i.y;if(a||o){const l=Rl[e.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=lb(this,e),h=Object.assign({},l,this._size),m=cb(t,e,h),p=ub(e,h,m,t);(a._to!==p.x||o._to!==p.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const a={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=Ss(t.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&u&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,a,t),d1(e,t.textDirection),o.y+=l.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),h1(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,a=e.map(({datasetIndex:u,index:h})=>{const m=this.chart.getDatasetMeta(u);if(!m)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:m.data[h],index:h}}),o=!Xu(i,a),l=this._positionChanged(a,t);(o||l)&&(this._active=a,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,o=this._active||[],l=this._getActiveElements(e,o,t,i),u=this._positionChanged(l,e),h=t||!Xu(l,o)||u;return h&&(this._active=l,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,i,a){const o=this.options;if(e.type==="mouseout")return[];if(!a)return t.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&l.reverse(),l}_positionChanged(e,t){const{caretX:i,caretY:a,options:o}=this,l=Rl[o.position].call(this,e,t);return l!==!1&&(i!==l.x||a!==l.y)}}var tB={id:"tooltip",_element:fb,positioners:Rl,afterInit(n,e,t){t&&(n.tooltip=new fb({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:T1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const nB=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function sB(n,e,t,i){const a=n.indexOf(e);if(a===-1)return nB(n,e,t,i);const o=n.lastIndexOf(e);return a!==o?t:a}const iB=(n,e)=>n===null?null:Vn(Math.round(n),0,e);function mb(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class aB extends po{static id="category";static defaults={ticks:{callback:mb}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:a,label:o}of t)i[a]===o&&i.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(ht(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:sB(i,e,Fe(t,e),this._addedLabels),iB(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(a=this.getLabels().length-1)),this.min=i,this.max=a}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,a=[];let o=this.getLabels();o=e===0&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=e;l<=t;l++)a.push({value:l});return a}getLabelForValue(e){return mb.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function rB(n,e){const t=[],{bounds:a,step:o,min:l,max:u,precision:h,count:m,maxTicks:p,maxDigits:g,includeBounds:_}=n,y=o||1,x=p-1,{min:j,max:w}=e,S=!ht(l),C=!ht(u),T=!ht(m),B=(w-j)/(g+1);let D=vy((w-j)/x/y)*y,M,$,R,N;if(D<1e-14&&!S&&!C)return[{value:j},{value:w}];N=Math.ceil(w/D)-Math.floor(j/D),N>x&&(D=vy(N*D/x/y)*y),ht(h)||(M=Math.pow(10,h),D=Math.ceil(D*M)/M),a==="ticks"?($=Math.floor(j/D)*D,R=Math.ceil(w/D)*D):($=j,R=w),S&&C&&o&&QM((u-l)/o,D/1e3)?(N=Math.round(Math.min((u-l)/D,p)),D=(u-l)/N,$=l,R=u):T?($=S?l:$,R=C?u:R,N=m-1,D=(R-$)/N):(N=(R-$)/D,zu(N,Math.round(N),D/1e3)?N=Math.round(N):N=Math.ceil(N));const z=Math.max(yy(D),yy($));M=Math.pow(10,ht(h)?z:h),$=Math.round($*M)/M,R=Math.round(R*M)/M;let I=0;for(S&&(_&&$!==l?(t.push({value:l}),$<l&&I++,zu(Math.round(($+I*D)*M)/M,l,pb(l,B,n))&&I++):$<l&&I++);I<N;++I){const U=Math.round(($+I*D)*M)/M;if(C&&U>u)break;t.push({value:U})}return C&&_&&R!==u?t.length&&zu(t[t.length-1].value,u,pb(u,B,n))?t[t.length-1].value=u:t.push({value:u}):(!C||R===u)&&t.push({value:R}),t}function pb(n,e,{horizontal:t,minRotation:i}){const a=Ni(i),o=(t?Math.sin(a):Math.cos(a))||.001,l=.75*e*(""+n).length;return Math.min(e/o,l)}class oB extends po{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ht(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:a,max:o}=this;const l=h=>a=t?a:h,u=h=>o=i?o:h;if(e){const h=ma(a),m=ma(o);h<0&&m<0?u(0):h>0&&m>0&&l(0)}if(a===o){let h=o===0?1:Math.abs(o*.05);u(o+h),e||l(a-h)}this.min=a,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,a;return i?(a=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),t=t||11),t&&(a=Math.min(t,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const a={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,l=rB(a,o);return e.bounds==="ticks"&&ZM(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const a=(i-t)/Math.max(e.length-1,1)/2;t-=a,i+=a}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return up(e,this.chart.options.locale,this.options.ticks.format)}}class lB extends oB{static id="linear";static defaults={ticks:{callback:s1.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ws(e)?e:0,this.max=ws(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=Ni(this.options.ticks.minRotation),a=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const md={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Gn=Object.keys(md);function gb(n,e){return n-e}function _b(n,e){if(ht(e))return null;const t=n._adapter,{parser:i,round:a,isoWeekday:o}=n._parseOpts;let l=e;return typeof i=="function"&&(l=i(l)),ws(l)||(l=typeof i=="string"?t.parse(l,i):t.parse(l)),l===null?null:(a&&(l=a==="week"&&(Zu(o)||o===!0)?t.startOf(l,"isoWeek",o):t.startOf(l,a)),+l)}function vb(n,e,t,i){const a=Gn.length;for(let o=Gn.indexOf(n);o<a-1;++o){const l=md[Gn[o]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((t-e)/(u*l.size))<=i)return Gn[o]}return Gn[a-1]}function cB(n,e,t,i,a){for(let o=Gn.length-1;o>=Gn.indexOf(t);o--){const l=Gn[o];if(md[l].common&&n._adapter.diff(a,i,l)>=e-1)return l}return Gn[t?Gn.indexOf(t):0]}function uB(n){for(let e=Gn.indexOf(n)+1,t=Gn.length;e<t;++e)if(md[Gn[e]].common)return Gn[e]}function yb(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:i,hi:a}=lp(t,e),o=t[i]>=e?t[i]:t[a];n[o]=!0}}function dB(n,e,t,i){const a=n._adapter,o=+a.startOf(e[0].value,i),l=e[e.length-1].value;let u,h;for(u=o;u<=l;u=+a.add(u,1,i))h=t[u],h>=0&&(e[h].major=!0);return e}function bb(n,e,t){const i=[],a={},o=e.length;let l,u;for(l=0;l<o;++l)u=e[l],a[u]=l,i.push({value:u,major:!1});return o===0||!t?i:dB(n,i,a,t)}class xb extends po{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),a=this._adapter=new vD._date(e.adapters.date);a.init(t),Ll(i.displayFormats,a.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:_b(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:a,max:o,minDefined:l,maxDefined:u}=this.getUserBounds();function h(m){!l&&!isNaN(m.min)&&(a=Math.min(a,m.min)),!u&&!isNaN(m.max)&&(o=Math.max(o,m.max))}(!l||!u)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),a=ws(a)&&!isNaN(a)?a:+t.startOf(Date.now(),i),o=ws(o)&&!isNaN(o)?o:+t.endOf(Date.now(),i)+1,this.min=Math.min(a,o-1),this.max=Math.max(a+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,a=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const o=this.min,l=this.max,u=s4(a,o,l);return this._unit=t.unit||(i.autoSkip?vb(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):cB(this,u.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:uB(this._unit),this.initOffsets(a),e.reverse&&u.reverse(),bb(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,a,o;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?t=1-a:t=(this.getDecimalForValue(e[1])-a)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?i=o:i=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;t=Vn(t,0,l),i=Vn(i,0,l),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,a=this.options,o=a.time,l=o.unit||vb(o.minUnit,t,i,this._getLabelCapacity(t)),u=Fe(a.ticks.stepSize,1),h=l==="week"?o.isoWeekday:!1,m=Zu(h)||h===!0,p={};let g=t,_,y;if(m&&(g=+e.startOf(g,"isoWeek",h)),g=+e.startOf(g,m?"day":l),e.diff(i,t,l)>1e5*u)throw new Error(t+" and "+i+" are too far apart with stepSize of "+u+" "+l);const x=a.ticks.source==="data"&&this.getDataTimestamps();for(_=g,y=0;_<i;_=+e.add(_,u,l),y++)yb(p,_,x);return(_===i||a.bounds==="ticks"||y===1)&&yb(p,_,x),Object.keys(p).sort(gb).map(j=>+j)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const a=this.options.time.displayFormats,o=this._unit,l=t||a[o];return this._adapter.format(e,l)}_tickFormatFunction(e,t,i,a){const o=this.options,l=o.ticks.callback;if(l)return xt(l,[e,t,i],this);const u=o.time.displayFormats,h=this._unit,m=this._majorUnit,p=h&&u[h],g=m&&u[m],_=i[t],y=m&&g&&_&&_.major;return this._adapter.format(e,a||(y?g:p))}generateTickLabels(e){let t,i,a;for(t=0,i=e.length;t<i;++t)a=e[t],a.label=this._tickFormatFunction(a.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,a=Ni(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(a),l=Math.sin(a),u=this._resolveTickFontOptions(0).size;return{w:i*o+u*l,h:i*l+u*o}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,a=i[t.unit]||i.millisecond,o=this._tickFormatFunction(e,0,bb(this,[e],this._majorUnit),a),l=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(t=0,i=a.length;t<i;++t)e=e.concat(a[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const a=this.getLabels();for(t=0,i=a.length;t<i;++t)e.push(_b(this,a[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Jx(e.sort(gb))}}function Mu(n,e,t){let i=0,a=n.length-1,o,l,u,h;t?(e>=n[i].pos&&e<=n[a].pos&&({lo:i,hi:a}=Lm(n,"pos",e)),{pos:o,time:u}=n[i],{pos:l,time:h}=n[a]):(e>=n[i].time&&e<=n[a].time&&({lo:i,hi:a}=Lm(n,"time",e)),{time:o,pos:u}=n[i],{time:l,pos:h}=n[a]);const m=l-o;return m?u+(h-u)*(e-o)/m:u}class TI extends xb{static id="timeseries";static defaults=xb.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Mu(t,this.min),this._tableRange=Mu(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,a=[],o=[];let l,u,h,m,p;for(l=0,u=e.length;l<u;++l)m=e[l],m>=t&&m<=i&&a.push(m);if(a.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(l=0,u=a.length;l<u;++l)p=a[l+1],h=a[l-1],m=a[l],Math.round((p+h)/2)!==m&&o.push({time:m,pos:l/(u-1)});return o}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((a,o)=>a-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Mu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Mu(this._table,i*this._tableRange+this._minPos,!0)}}const k1="label";function wb(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function hB(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function O1(n,e){n.labels=e}function N1(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:k1;const i=[];n.datasets=e.map(a=>{const o=n.datasets.find(l=>l[t]===a[t]);return!o||!a.data||i.includes(o)?{...a}:(i.push(o),Object.assign(o,a),o)})}function fB(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:k1;const t={labels:[],datasets:[]};return O1(t,n.labels),N1(t,n.datasets,e),t}function mB(n,e){const{height:t=150,width:i=300,redraw:a=!1,datasetIdKey:o,type:l,data:u,options:h,plugins:m=[],fallbackContent:p,updateMode:g,..._}=n,y=A.useRef(null),x=A.useRef(null),j=()=>{y.current&&(x.current=new fd(y.current,{type:l,data:fB(u,o),options:h&&{...h},plugins:m}),wb(e,x.current))},w=()=>{wb(e,null),x.current&&(x.current.destroy(),x.current=null)};return A.useEffect(()=>{!a&&x.current&&h&&hB(x.current,h)},[a,h]),A.useEffect(()=>{!a&&x.current&&O1(x.current.config.data,u.labels)},[a,u.labels]),A.useEffect(()=>{!a&&x.current&&u.datasets&&N1(x.current.config.data,u.datasets,o)},[a,u.datasets]),A.useEffect(()=>{x.current&&(a?(w(),setTimeout(j)):x.current.update(g))},[a,h,u.labels,u.datasets,g]),A.useEffect(()=>{x.current&&(w(),setTimeout(j))},[l]),A.useEffect(()=>(j(),()=>w()),[]),Xe.createElement("canvas",{ref:y,role:"img",height:t,width:i,..._},p)}const pB=A.forwardRef(mB);function R1(n,e){return fd.register(e),A.forwardRef((t,i)=>Xe.createElement(pB,{...t,ref:i,type:n}))}const gB=R1("bar",pD),_B=R1("doughnut",_D);fd.register(aB,lB,U5,Y5,tB,G5,M5);const Du=({title:n,value:e,icon:t,color:i,evolution:a})=>d.jsxs("div",{className:Tt.statCard,children:[d.jsxs("div",{className:Tt.statInfo,children:[d.jsx("span",{className:Tt.statTitle,children:n}),d.jsx("span",{className:Tt.statValue,children:e}),a&&d.jsx("span",{className:Tt.statEvolution,children:a})]}),d.jsx("div",{className:Tt.iconWrapper,style:{backgroundColor:i},children:t})]}),vB=({orders:n})=>{const e=n.reduce((a,o)=>(a[o.status]=(a[o.status]||0)+1,a),{}),t={labels:Object.keys(e),datasets:[{data:Object.values(e),backgroundColor:["#f1c40f","#3498db","#2ecc71","#e74c3c"],borderColor:"var(--bg-secondary)",borderWidth:4}]},i={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}};return d.jsx(_B,{data:t,options:i})},yB=({items:n})=>{const[e,t]=A.useState(window.innerWidth<768);A.useEffect(()=>{const h=()=>t(window.innerWidth<768);return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const i=n.reduce((h,m)=>{const p=m.products?.name||"Producto Desconocido";return h[p]=(h[p]||0)+m.quantity,h},{}),a=Object.entries(i).sort(([,h],[,m])=>m-h).slice(0,5),l={labels:a.map(([h])=>e&&h.length>15?h.substring(0,12)+"...":h),datasets:[{label:"Cantidad Vendida",data:a.map(([,h])=>h),backgroundColor:"rgba(229, 115, 115, 0.6)",borderColor:"rgba(229, 115, 115, 1)",borderWidth:1}]},u={indexAxis:e?"x":"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{title:h=>{if(e){const m=h[0].dataIndex;return a[m][0]}return h[0].label}}}},scales:{x:{ticks:{maxRotation:e?25:0,minRotation:e?25:0}},y:{ticks:{stepSize:1}}}};return d.jsx(gB,{data:l,options:u})};function bB(){const[n,e]=A.useState({totalOrders:0,totalRevenue:0,pendingOrders:0,totalCustomers:0}),[t,i]=A.useState([]),[a,o]=A.useState([]),[l,u]=A.useState(!0),h=A.useCallback(async()=>{const{data:m,error:p}=await ae.from("orders").select("status, total_amount, created_at, customers (name)").order("created_at",{ascending:!1}),{count:g,error:_}=await ae.from("customers").select("*",{count:"exact"}),{data:y,error:x}=await ae.from("order_items").select("quantity, products(name)");if(p||_||x)console.error(p||_||x);else{const j=m.reduce((S,C)=>C.status==="completado"?S+C.total_amount:S,0),w=m.filter(S=>S.status==="pendiente").length;e({totalOrders:m.length,totalRevenue:j.toFixed(2),pendingOrders:w,totalCustomers:g}),i(m),o(y)}u(!1)},[]);return A.useEffect(()=>{h();const m=ae.channel("public:orders:dashboard").on("postgres_changes",{event:"*",schema:"public",table:"orders"},p=>{console.log("Nuevo cambio en pedidos detectado!",p),h()}).subscribe();return()=>{ae.removeChannel(m)}},[h]),l?d.jsx(Vt,{}):d.jsxs("div",{className:Tt.container,children:[d.jsxs("div",{className:Tt.header,children:[d.jsx("h1",{className:Tt.title,children:"Dashboard"}),d.jsx("p",{className:Tt.subtitle,children:"Bienvenido, aqu tienes un resumen de tu negocio."})]}),d.jsxs("div",{className:Tt.statsGrid,children:[d.jsx(Du,{title:"Ingresos Totales (Completados)",value:`$${n.totalRevenue}`,color:"#2ecc71",icon:""}),d.jsx(Du,{title:"Pedidos Totales",value:n.totalOrders,color:"#3498db",icon:""}),d.jsx(Du,{title:"Pedidos Pendientes",value:n.pendingOrders,color:"#f1c40f",icon:""}),d.jsx(Du,{title:"Clientes Registrados",value:n.totalCustomers,color:"#e74c3c",icon:""})]}),d.jsxs("div",{className:Tt.mainGrid,children:[d.jsxs("div",{className:`${Tt.chartCard} ${Tt.topProducts}`,children:[d.jsx("h3",{children:" Top 5 Productos Vendidos"}),d.jsx("div",{className:Tt.chartContainer,children:d.jsx(yB,{items:a})})]}),d.jsxs("div",{className:`${Tt.chartCard} ${Tt.orderStatus}`,children:[d.jsx("h3",{children:" Estado de Pedidos"}),d.jsx("div",{className:Tt.chartContainer,children:d.jsx(vB,{orders:t})})]}),d.jsxs("div",{className:`${Tt.chartCard} ${Tt.recentOrders}`,children:[d.jsx("h3",{children:" Pedidos Recientes"}),d.jsx("ul",{className:Tt.recentList,children:t.slice(0,5).map((m,p)=>d.jsxs("li",{children:[d.jsx("span",{children:m.customers?.name||"Cliente"}),d.jsx("span",{className:`${Tt.statusBadge} ${Tt[m.status]}`,children:m.status.replace("_"," ")})]},`${m.created_at}-${p}`))})]})]})]})}const xB="_container_d9vp4_1",wB="_header_d9vp4_9",SB="_filters_d9vp4_35",CB="_searchInput_d9vp4_57",jB="_statusFilter_d9vp4_67",EB="_orderGrid_d9vp4_75",AB="_orderCard_d9vp4_87",TB="_cardHeader_d9vp4_121",kB="_statusBadge_d9vp4_147",OB="_pendiente_d9vp4_165",NB="_en_proceso_d9vp4_167",RB="_completado_d9vp4_169",MB="_cancelado_d9vp4_171",DB="_cardBody_d9vp4_175",BB="_infoSection_d9vp4_191",LB="_customerInfo_d9vp4_207",PB="_productsList_d9vp4_221",IB="_productName_d9vp4_259",UB="_productQuantity_d9vp4_265",zB="_scheduledTime_d9vp4_273",$B="_cardFooter_d9vp4_293",HB="_totalAmount_d9vp4_311",qB="_actionButtons_d9vp4_323",FB="_deliveryButton_d9vp4_357",GB="_processButton_d9vp4_365",VB="_completeButton_d9vp4_373",YB="_cancelButton_d9vp4_381",_t={container:xB,header:wB,filters:SB,searchInput:CB,statusFilter:jB,orderGrid:EB,orderCard:AB,cardHeader:TB,statusBadge:kB,pendiente:OB,en_proceso:NB,completado:RB,cancelado:MB,cardBody:DB,infoSection:BB,customerInfo:LB,productsList:PB,productName:IB,productQuantity:UB,scheduledTime:zB,cardFooter:$B,totalAmount:HB,actionButtons:qB,deliveryButton:FB,processButton:GB,completeButton:VB,cancelButton:YB},WB="_overlay_174mj_1",XB="_modalContent_174mj_15",KB="_header_174mj_39",QB="_closeButton_174mj_55",ZB="_body_174mj_65",JB="_customerDetails_174mj_81",eL="_addressDetails_174mj_81",tL="_mapContainer_174mj_115",nL="_noMap_174mj_131",Ci={overlay:WB,modalContent:XB,header:KB,closeButton:QB,body:ZB,customerDetails:JB,addressDetails:eL,mapContainer:tL,noMap:nL},sL=({isOpen:n,onClose:e,deliveryInfo:t})=>{if(!n||!t)return null;const{customer:i,address:a}=t,o=a?{lat:a.latitude,lng:a.longitude}:null;return d.jsx("div",{className:Ci.overlay,onClick:e,children:d.jsxs("div",{className:Ci.modalContent,onClick:l=>l.stopPropagation(),children:[d.jsxs("div",{className:Ci.header,children:[d.jsx("h3",{children:"Detalles de Entrega"}),d.jsx("button",{onClick:e,className:Ci.closeButton,children:""})]}),d.jsxs("div",{className:Ci.body,children:[d.jsxs("div",{className:Ci.customerDetails,children:[d.jsx("h4",{children:"Cliente"}),d.jsxs("p",{children:[d.jsx("strong",{children:"Nombre:"})," ",i?.name||"N/A"]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Telfono:"})," ",i?.phone||"N/A"]})]}),d.jsxs("div",{className:Ci.addressDetails,children:[d.jsx("h4",{children:"Direccin"}),a?d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Etiqueta:"})," ",a.label]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Referencia:"})," ",a.address_reference||"Sin referencia"]})]}):d.jsx("p",{children:"El cliente no tiene una direccin predeterminada guardada."})]}),d.jsx("div",{className:Ci.mapContainer,children:o?d.jsx(tp,{children:d.jsx(ep,{initialPosition:o,isDraggable:!1})}):d.jsx("div",{className:Ci.noMap,children:d.jsx("p",{children:"No hay ubicacin para mostrar."})})})]})]})})},iL=({order:n,onUpdateStatus:e,onShowDeliveryInfo:t})=>{const[i,a]=A.useState([]),[o,l]=A.useState(!1),u=async m=>{l(!0);const{data:p,error:g}=await ae.from("order_items").select("quantity, price, products(name)").eq("order_id",m);g?console.error(g):a(p),l(!1)},{hasPermission:h}=si();return A.useEffect(()=>{u(n.id)},[n.id]),d.jsxs("div",{className:_t.orderCard,children:[d.jsxs("div",{className:_t.cardHeader,children:[d.jsxs("h3",{children:["Pedido #",n.order_code]}),d.jsx("span",{className:`${_t.statusBadge} ${_t[n.status]}`,children:n.status.replace("_"," ")})]}),d.jsxs("div",{className:_t.cardBody,children:[d.jsxs("div",{className:_t.infoSection,children:[d.jsx("h4",{children:"Cliente"}),d.jsxs("p",{className:_t.customerInfo,children:[d.jsx("span",{children:n.customers?.name||"N/A"})," (",n.customers?.phone||"N/A",")"]})]}),n.scheduled_for&&d.jsx("div",{className:_t.infoSection,children:d.jsxs("p",{className:_t.scheduledTime,children:["Programado para: ",new Date(n.scheduled_for).toLocaleString()]})}),d.jsxs("div",{className:_t.infoSection,children:[d.jsx("h4",{children:"Productos"}),o?d.jsx("p",{children:"Cargando..."}):d.jsx("ul",{className:_t.productsList,children:i.map((m,p)=>d.jsxs("li",{children:[d.jsx("span",{className:_t.productName,children:m.products.name}),d.jsxs("span",{className:_t.productQuantity,children:[m.quantity," x $",m.price]})]},p))})]})]}),d.jsxs("div",{className:_t.cardFooter,children:[d.jsxs("span",{className:_t.totalAmount,children:["$",n.total_amount.toFixed(2)]}),d.jsxs("div",{className:_t.actionButtons,children:[d.jsx("button",{onClick:()=>t(n),className:_t.deliveryButton,children:"Ver Envo"}),h("pedidos.edit")&&n.status==="pendiente"&&d.jsx("button",{onClick:()=>e(n.id,"en_proceso"),className:_t.processButton,children:"Procesar"}),h("pedidos.edit")&&n.status==="en_proceso"&&d.jsx("button",{onClick:()=>e(n.id,"completado"),className:_t.completeButton,children:"Completar"}),h("pedidos.edit")&&n.status!=="completado"&&n.status!=="cancelado"&&d.jsx("button",{onClick:()=>e(n.id,"cancelado"),className:_t.cancelButton,children:"Cancelar"})]})]})]})};function aL(){const[n,e]=A.useState([]),[t,i]=A.useState(!0),[a,o]=A.useState(""),[l,u]=A.useState("activos"),[h,m]=A.useState(!1),[p,g]=A.useState(null),_=A.useCallback(async()=>{const{data:w,error:S}=await ae.from("orders").select("*, customers(name, phone)").order("created_at",{ascending:!1});S?console.error(S):e(w),i(!1)},[]);A.useEffect(()=>{_();const w=ae.channel("public:orders:admin").on("postgres_changes",{event:"*",schema:"public",table:"orders"},()=>_()).subscribe();return()=>ae.removeChannel(w)},[_]);const y=async(w,S)=>{let C={status:S};if(S==="cancelado"){const T=prompt("Motivo de la cancelacin (opcional):");if(T===null)return;C.cancellation_reason=T||"Cancelado por administrador."}await ae.from("orders").update(C).eq("id",w)},x=A.useMemo(()=>n.filter(w=>{const S=w.order_code.toLowerCase().includes(a.toLowerCase())||w.customers?.name.toLowerCase().includes(a.toLowerCase());return l==="todos"?S:l==="activos"?(w.status==="pendiente"||w.status==="en_proceso")&&S:w.status===l&&S}),[n,a,l]),j=async w=>{const{data:S,error:C}=await ae.from("customer_addresses").select("*").eq("customer_id",w.customer_id).eq("is_default",!0).maybeSingle();if(C){console.error("Error fetching address:",C);return}g({customer:w.customers,address:S}),m(!0)};return t?d.jsx(Vt,{}):d.jsxs("div",{className:_t.container,children:[d.jsx("div",{className:_t.header,children:d.jsx("h1",{children:"Gestin de Pedidos"})}),d.jsxs("div",{className:_t.filters,children:[d.jsx("input",{type:"text",placeholder:"Buscar por cdigo o cliente...",className:_t.searchInput,value:a,onChange:w=>o(w.target.value)}),d.jsxs("select",{className:_t.statusFilter,value:l,onChange:w=>u(w.target.value),children:[d.jsx("option",{value:"activos",children:"Pedidos Activos"}),d.jsx("option",{value:"pendiente",children:"Pendientes"}),d.jsx("option",{value:"en_proceso",children:"En Proceso"}),d.jsx("option",{value:"completado",children:"Completados"}),d.jsx("option",{value:"cancelado",children:"Cancelados"}),d.jsx("option",{value:"todos",children:"Todos los Pedidos"})]})]}),d.jsx("div",{className:_t.orderGrid,children:x.map(w=>d.jsx(iL,{order:w,onUpdateStatus:y,onShowDeliveryInfo:j},w.id))}),x.length===0&&d.jsx("p",{children:"No se encontraron pedidos con los filtros actuales."}),d.jsx(sL,{isOpen:h,onClose:()=>m(!1),deliveryInfo:p})]})}const rL="_container_l8hw8_1",oL="_header_l8hw8_9",lL="_headerActions_l8hw8_29",cL="_addButton_l8hw8_41",uL="_manageButton_l8hw8_41",dL="_filters_l8hw8_101",hL="_searchInput_l8hw8_113",fL="_categorySelect_l8hw8_113",mL="_statusSelect_l8hw8_113",pL="_productGrid_l8hw8_123",gL="_productCard_l8hw8_135",_L="_inactive_l8hw8_165",vL="_imageContainer_l8hw8_171",yL="_imageCount_l8hw8_203",bL="_cardContent_l8hw8_225",xL="_categoryTag_l8hw8_239",wL="_productName_l8hw8_259",SL="_productStats_l8hw8_269",CL="_statItem_l8hw8_287",jL="_iconStat_l8hw8_315",EL="_priceInfo_l8hw8_335",AL="_price_l8hw8_335",TL="_cardActions_l8hw8_361",kL="_toggleButton_l8hw8_383",OL="_editButton_l8hw8_389",NL="_modalOverlay_l8hw8_443",RL="_modalContent_l8hw8_455",ML="_productForm_l8hw8_473",DL="_formGroup_l8hw8_483",BL="_formGrid_l8hw8_503",LL="_imagePreview_l8hw8_513",PL="_modalActions_l8hw8_529",IL="_cancelButton_l8hw8_543",UL="_saveButton_l8hw8_575",je={container:rL,header:oL,headerActions:lL,addButton:cL,manageButton:uL,filters:dL,searchInput:hL,categorySelect:fL,statusSelect:mL,productGrid:pL,productCard:gL,inactive:_L,imageContainer:vL,imageCount:yL,cardContent:bL,categoryTag:xL,productName:wL,productStats:SL,statItem:CL,iconStat:jL,priceInfo:EL,price:AL,cardActions:TL,toggleButton:kL,editButton:OL,modalOverlay:NL,modalContent:RL,productForm:ML,formGroup:DL,formGrid:BL,imagePreview:LL,modalActions:PL,cancelButton:IL,saveButton:UL},zL="_overlay_styr5_1",$L="_modalContent_styr5_11",HL="_closeButton_styr5_21",qL="_addImageForm_styr5_33",FL="_imageList_styr5_77",GL="_imageItem_styr5_89",VL="_deleteButton_styr5_125",za={overlay:zL,modalContent:$L,closeButton:HL,addImageForm:qL,imageList:FL,imageItem:GL,deleteButton:VL};function YL(n,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(i){if(i!=="default"&&!(i in n)){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})}}))})),Object.freeze(n)}function M1(n,e){return new Promise((function(t,i){let a;return WL(n).then((function(o){try{return a=o,t(new Blob([e.slice(0,2),a,e.slice(2)],{type:"image/jpeg"}))}catch(l){return i(l)}}),i)}))}const WL=n=>new Promise(((e,t)=>{const i=new FileReader;i.addEventListener("load",(({target:{result:a}})=>{const o=new DataView(a);let l=0;if(o.getUint16(l)!==65496)return t("not a valid JPEG");for(l+=2;;){const u=o.getUint16(l);if(u===65498)break;const h=o.getUint16(l+2);if(u===65505&&o.getUint32(l+4)===1165519206){const m=l+10;let p;switch(o.getUint16(m)){case 18761:p=!0;break;case 19789:p=!1;break;default:return t("TIFF header contains invalid endian")}if(o.getUint16(m+2,p)!==42)return t("TIFF header contains invalid version");const g=o.getUint32(m+4,p),_=m+g+2+12*o.getUint16(m+g,p);for(let y=m+g+2;y<_;y+=12)if(o.getUint16(y,p)==274){if(o.getUint16(y+2,p)!==3)return t("Orientation data type is invalid");if(o.getUint32(y+4,p)!==1)return t("Orientation data count is invalid");o.setUint16(y+8,1,p);break}return e(a.slice(l,l+2+h))}l+=2+h}return e(new Blob)})),i.readAsArrayBuffer(n)}));var id={},XL={get exports(){return id},set exports(n){id=n}};(function(n){var e,t,i={};XL.exports=i,i.parse=function(a,o){for(var l=i.bin.readUshort,u=i.bin.readUint,h=0,m={},p=new Uint8Array(a),g=p.length-4;u(p,g)!=101010256;)g--;h=g,h+=4;var _=l(p,h+=4);l(p,h+=2);var y=u(p,h+=2),x=u(p,h+=4);h+=4,h=x;for(var j=0;j<_;j++){u(p,h),h+=4,h+=4,h+=4,u(p,h+=4),y=u(p,h+=4);var w=u(p,h+=4),S=l(p,h+=4),C=l(p,h+2),T=l(p,h+4);h+=6;var B=u(p,h+=8);h+=4,h+=S+C+T,i._readLocal(p,B,m,y,w,o)}return m},i._readLocal=function(a,o,l,u,h,m){var p=i.bin.readUshort,g=i.bin.readUint;g(a,o),p(a,o+=4),p(a,o+=2);var _=p(a,o+=2);g(a,o+=2),g(a,o+=4),o+=4;var y=p(a,o+=8),x=p(a,o+=2);o+=2;var j=i.bin.readUTF8(a,o,y);if(o+=y,o+=x,m)l[j]={size:h,csize:u};else{var w=new Uint8Array(a.buffer,o);if(_==0)l[j]=new Uint8Array(w.buffer.slice(o,o+u));else{if(_!=8)throw"unknown compression method: "+_;var S=new Uint8Array(h);i.inflateRaw(w,S),l[j]=S}}},i.inflateRaw=function(a,o){return i.F.inflate(a,o)},i.inflate=function(a,o){return a[0],a[1],i.inflateRaw(new Uint8Array(a.buffer,a.byteOffset+2,a.length-6),o)},i.deflate=function(a,o){o==null&&(o={level:6});var l=0,u=new Uint8Array(50+Math.floor(1.1*a.length));u[l]=120,u[l+1]=156,l+=2,l=i.F.deflateRaw(a,u,l,o.level);var h=i.adler(a,0,a.length);return u[l+0]=h>>>24&255,u[l+1]=h>>>16&255,u[l+2]=h>>>8&255,u[l+3]=h>>>0&255,new Uint8Array(u.buffer,0,l+4)},i.deflateRaw=function(a,o){o==null&&(o={level:6});var l=new Uint8Array(50+Math.floor(1.1*a.length)),u=i.F.deflateRaw(a,l,u,o.level);return new Uint8Array(l.buffer,0,u)},i.encode=function(a,o){o==null&&(o=!1);var l=0,u=i.bin.writeUint,h=i.bin.writeUshort,m={};for(var p in a){var g=!i._noNeed(p)&&!o,_=a[p],y=i.crc.crc(_,0,_.length);m[p]={cpr:g,usize:_.length,crc:y,file:g?i.deflateRaw(_):_}}for(var p in m)l+=m[p].file.length+30+46+2*i.bin.sizeUTF8(p);l+=22;var x=new Uint8Array(l),j=0,w=[];for(var p in m){var S=m[p];w.push(j),j=i._writeHeader(x,j,p,S,0)}var C=0,T=j;for(var p in m)S=m[p],w.push(j),j=i._writeHeader(x,j,p,S,1,w[C++]);var B=j-T;return u(x,j,101010256),j+=4,h(x,j+=4,C),h(x,j+=2,C),u(x,j+=2,B),u(x,j+=4,T),j+=4,j+=2,x.buffer},i._noNeed=function(a){var o=a.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},i._writeHeader=function(a,o,l,u,h,m){var p=i.bin.writeUint,g=i.bin.writeUshort,_=u.file;return p(a,o,h==0?67324752:33639248),o+=4,h==1&&(o+=2),g(a,o,20),g(a,o+=2,0),g(a,o+=2,u.cpr?8:0),p(a,o+=2,0),p(a,o+=4,u.crc),p(a,o+=4,_.length),p(a,o+=4,u.usize),g(a,o+=4,i.bin.sizeUTF8(l)),g(a,o+=2,0),o+=2,h==1&&(o+=2,o+=2,p(a,o+=6,m),o+=4),o+=i.bin.writeUTF8(a,o,l),h==0&&(a.set(_,o),o+=_.length),o},i.crc={table:(function(){for(var a=new Uint32Array(256),o=0;o<256;o++){for(var l=o,u=0;u<8;u++)1&l?l=3988292384^l>>>1:l>>>=1;a[o]=l}return a})(),update:function(a,o,l,u){for(var h=0;h<u;h++)a=i.crc.table[255&(a^o[l+h])]^a>>>8;return a},crc:function(a,o,l){return 4294967295^i.crc.update(4294967295,a,o,l)}},i.adler=function(a,o,l){for(var u=1,h=0,m=o,p=o+l;m<p;){for(var g=Math.min(m+5552,p);m<g;)h+=u+=a[m++];u%=65521,h%=65521}return h<<16|u},i.bin={readUshort:function(a,o){return a[o]|a[o+1]<<8},writeUshort:function(a,o,l){a[o]=255&l,a[o+1]=l>>8&255},readUint:function(a,o){return 16777216*a[o+3]+(a[o+2]<<16|a[o+1]<<8|a[o])},writeUint:function(a,o,l){a[o]=255&l,a[o+1]=l>>8&255,a[o+2]=l>>16&255,a[o+3]=l>>24&255},readASCII:function(a,o,l){for(var u="",h=0;h<l;h++)u+=String.fromCharCode(a[o+h]);return u},writeASCII:function(a,o,l){for(var u=0;u<l.length;u++)a[o+u]=l.charCodeAt(u)},pad:function(a){return a.length<2?"0"+a:a},readUTF8:function(a,o,l){for(var u,h="",m=0;m<l;m++)h+="%"+i.bin.pad(a[o+m].toString(16));try{u=decodeURIComponent(h)}catch{return i.bin.readASCII(a,o,l)}return u},writeUTF8:function(a,o,l){for(var u=l.length,h=0,m=0;m<u;m++){var p=l.charCodeAt(m);if((4294967168&p)==0)a[o+h]=p,h++;else if((4294965248&p)==0)a[o+h]=192|p>>6,a[o+h+1]=128|p>>0&63,h+=2;else if((4294901760&p)==0)a[o+h]=224|p>>12,a[o+h+1]=128|p>>6&63,a[o+h+2]=128|p>>0&63,h+=3;else{if((4292870144&p)!=0)throw"e";a[o+h]=240|p>>18,a[o+h+1]=128|p>>12&63,a[o+h+2]=128|p>>6&63,a[o+h+3]=128|p>>0&63,h+=4}}return h},sizeUTF8:function(a){for(var o=a.length,l=0,u=0;u<o;u++){var h=a.charCodeAt(u);if((4294967168&h)==0)l++;else if((4294965248&h)==0)l+=2;else if((4294901760&h)==0)l+=3;else{if((4292870144&h)!=0)throw"e";l+=4}}return l}},i.F={},i.F.deflateRaw=function(a,o,l,u){var h=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],m=i.F.U,p=i.F._goodIndex;i.F._hash;var g=i.F._putsE,_=0,y=l<<3,x=0,j=a.length;if(u==0){for(;_<j;)g(o,y,_+(I=Math.min(65535,j-_))==j?1:0),y=i.F._copyExact(a,_,I,o,y+8),_+=I;return y>>>3}var w=m.lits,S=m.strt,C=m.prev,T=0,B=0,D=0,M=0,$=0,R=0;for(j>2&&(S[R=i.F._hash(a,0)]=0),_=0;_<j;_++){if($=R,_+1<j-2){R=i.F._hash(a,_+1);var N=_+1&32767;C[N]=S[R],S[R]=N}if(x<=_){(T>14e3||B>26697)&&j-_>100&&(x<_&&(w[T]=_-x,T+=2,x=_),y=i.F._writeBlock(_==j-1||x==j?1:0,w,T,M,a,D,_-D,o,y),T=B=M=0,D=_);var z=0;_<j-2&&(z=i.F._bestMatch(a,_,C,$,Math.min(h[2],j-_),h[3]));var I=z>>>16,U=65535&z;if(z!=0){U=65535&z;var q=p(I=z>>>16,m.of0);m.lhst[257+q]++;var H=p(U,m.df0);m.dhst[H]++,M+=m.exb[q]+m.dxb[H],w[T]=I<<23|_-x,w[T+1]=U<<16|q<<8|H,T+=2,x=_+I}else m.lhst[a[_]]++;B++}}for(D==_&&a.length!=0||(x<_&&(w[T]=_-x,T+=2,x=_),y=i.F._writeBlock(1,w,T,M,a,D,_-D,o,y),T=0,B=0,T=B=M=0,D=_);(7&y)!=0;)y++;return y>>>3},i.F._bestMatch=function(a,o,l,u,h,m){var p=32767&o,g=l[p],_=p-g+32768&32767;if(g==p||u!=i.F._hash(a,o-_))return 0;for(var y=0,x=0,j=Math.min(32767,o);_<=j&&--m!=0&&g!=p;){if(y==0||a[o+y]==a[o+y-_]){var w=i.F._howLong(a,o,_);if(w>y){if(x=_,(y=w)>=h)break;_+2<w&&(w=_+2);for(var S=0,C=0;C<w-2;C++){var T=o-_+C+32768&32767,B=T-l[T]+32768&32767;B>S&&(S=B,g=T)}}}_+=(p=g)-(g=l[p])+32768&32767}return y<<16|x},i.F._howLong=function(a,o,l){if(a[o]!=a[o-l]||a[o+1]!=a[o+1-l]||a[o+2]!=a[o+2-l])return 0;var u=o,h=Math.min(a.length,o+258);for(o+=3;o<h&&a[o]==a[o-l];)o++;return o-u},i.F._hash=function(a,o){return(a[o]<<8|a[o+1])+(a[o+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(a,o,l,u,h,m,p,g,_){var y,x,j,w,S,C,T,B,D,M=i.F.U,$=i.F._putsF,R=i.F._putsE;M.lhst[256]++,x=(y=i.F.getTrees())[0],j=y[1],w=y[2],S=y[3],C=y[4],T=y[5],B=y[6],D=y[7];var N=32+((_+3&7)==0?0:8-(_+3&7))+(p<<3),z=u+i.F.contSize(M.fltree,M.lhst)+i.F.contSize(M.fdtree,M.dhst),I=u+i.F.contSize(M.ltree,M.lhst)+i.F.contSize(M.dtree,M.dhst);I+=14+3*T+i.F.contSize(M.itree,M.ihst)+(2*M.ihst[16]+3*M.ihst[17]+7*M.ihst[18]);for(var U=0;U<286;U++)M.lhst[U]=0;for(U=0;U<30;U++)M.dhst[U]=0;for(U=0;U<19;U++)M.ihst[U]=0;var q=N<z&&N<I?0:z<I?1:2;if($(g,_,a),$(g,_+1,q),_+=3,q==0){for(;(7&_)!=0;)_++;_=i.F._copyExact(h,m,p,g,_)}else{var H,G;if(q==1&&(H=M.fltree,G=M.fdtree),q==2){i.F.makeCodes(M.ltree,x),i.F.revCodes(M.ltree,x),i.F.makeCodes(M.dtree,j),i.F.revCodes(M.dtree,j),i.F.makeCodes(M.itree,w),i.F.revCodes(M.itree,w),H=M.ltree,G=M.dtree,R(g,_,S-257),R(g,_+=5,C-1),R(g,_+=5,T-4),_+=4;for(var E=0;E<T;E++)R(g,_+3*E,M.itree[1+(M.ordr[E]<<1)]);_+=3*T,_=i.F._codeTiny(B,M.itree,g,_),_=i.F._codeTiny(D,M.itree,g,_)}for(var O=m,F=0;F<l;F+=2){for(var Y=o[F],L=Y>>>23,X=O+(8388607&Y);O<X;)_=i.F._writeLit(h[O++],H,g,_);if(L!=0){var J=o[F+1],ee=J>>16,ne=J>>8&255,W=255&J;R(g,_=i.F._writeLit(257+ne,H,g,_),L-M.of0[ne]),_+=M.exb[ne],$(g,_=i.F._writeLit(W,G,g,_),ee-M.df0[W]),_+=M.dxb[W],O+=L}}_=i.F._writeLit(256,H,g,_)}return _},i.F._copyExact=function(a,o,l,u,h){var m=h>>>3;return u[m]=l,u[m+1]=l>>>8,u[m+2]=255-u[m],u[m+3]=255-u[m+1],m+=4,u.set(new Uint8Array(a.buffer,o,l),m),h+(l+4<<3)},i.F.getTrees=function(){for(var a=i.F.U,o=i.F._hufTree(a.lhst,a.ltree,15),l=i.F._hufTree(a.dhst,a.dtree,15),u=[],h=i.F._lenCodes(a.ltree,u),m=[],p=i.F._lenCodes(a.dtree,m),g=0;g<u.length;g+=2)a.ihst[u[g]]++;for(g=0;g<m.length;g+=2)a.ihst[m[g]]++;for(var _=i.F._hufTree(a.ihst,a.itree,7),y=19;y>4&&a.itree[1+(a.ordr[y-1]<<1)]==0;)y--;return[o,l,_,h,p,y,u,m]},i.F.getSecond=function(a){for(var o=[],l=0;l<a.length;l+=2)o.push(a[l+1]);return o},i.F.nonZero=function(a){for(var o="",l=0;l<a.length;l+=2)a[l+1]!=0&&(o+=(l>>1)+",");return o},i.F.contSize=function(a,o){for(var l=0,u=0;u<o.length;u++)l+=o[u]*a[1+(u<<1)];return l},i.F._codeTiny=function(a,o,l,u){for(var h=0;h<a.length;h+=2){var m=a[h],p=a[h+1];u=i.F._writeLit(m,o,l,u);var g=m==16?2:m==17?3:7;m>15&&(i.F._putsE(l,u,p,g),u+=g)}return u},i.F._lenCodes=function(a,o){for(var l=a.length;l!=2&&a[l-1]==0;)l-=2;for(var u=0;u<l;u+=2){var h=a[u+1],m=u+3<l?a[u+3]:-1,p=u+5<l?a[u+5]:-1,g=u==0?-1:a[u-1];if(h==0&&m==h&&p==h){for(var _=u+5;_+2<l&&a[_+2]==h;)_+=2;(y=Math.min(_+1-u>>>1,138))<11?o.push(17,y-3):o.push(18,y-11),u+=2*y-2}else if(h==g&&m==h&&p==h){for(_=u+5;_+2<l&&a[_+2]==h;)_+=2;var y=Math.min(_+1-u>>>1,6);o.push(16,y-3),u+=2*y-2}else o.push(h,0)}return l>>>1},i.F._hufTree=function(a,o,l){var u=[],h=a.length,m=o.length,p=0;for(p=0;p<m;p+=2)o[p]=0,o[p+1]=0;for(p=0;p<h;p++)a[p]!=0&&u.push({lit:p,f:a[p]});var g=u.length,_=u.slice(0);if(g==0)return 0;if(g==1){var y=u[0].lit;return _=y==0?1:0,o[1+(y<<1)]=1,o[1+(_<<1)]=1,1}u.sort((function(B,D){return B.f-D.f}));var x=u[0],j=u[1],w=0,S=1,C=2;for(u[0]={lit:-1,f:x.f+j.f,l:x,r:j,d:0};S!=g-1;)x=w!=S&&(C==g||u[w].f<u[C].f)?u[w++]:u[C++],j=w!=S&&(C==g||u[w].f<u[C].f)?u[w++]:u[C++],u[S++]={lit:-1,f:x.f+j.f,l:x,r:j};var T=i.F.setDepth(u[S-1],0);for(T>l&&(i.F.restrictDepth(_,l,T),T=l),p=0;p<g;p++)o[1+(_[p].lit<<1)]=_[p].d;return T},i.F.setDepth=function(a,o){return a.lit!=-1?(a.d=o,o):Math.max(i.F.setDepth(a.l,o+1),i.F.setDepth(a.r,o+1))},i.F.restrictDepth=function(a,o,l){var u=0,h=1<<l-o,m=0;for(a.sort((function(g,_){return _.d==g.d?g.f-_.f:_.d-g.d})),u=0;u<a.length&&a[u].d>o;u++){var p=a[u].d;a[u].d=o,m+=h-(1<<l-p)}for(m>>>=l-o;m>0;)(p=a[u].d)<o?(a[u].d++,m-=1<<o-p-1):u++;for(;u>=0;u--)a[u].d==o&&m<0&&(a[u].d--,m++);m!=0&&console.log("debt left")},i.F._goodIndex=function(a,o){var l=0;return o[16|l]<=a&&(l|=16),o[8|l]<=a&&(l|=8),o[4|l]<=a&&(l|=4),o[2|l]<=a&&(l|=2),o[1|l]<=a&&(l|=1),l},i.F._writeLit=function(a,o,l,u){return i.F._putsF(l,u,o[a<<1]),u+o[1+(a<<1)]},i.F.inflate=function(a,o){var l=Uint8Array;if(a[0]==3&&a[1]==0)return o||new l(0);var u=i.F,h=u._bitsF,m=u._bitsE,p=u._decodeTiny,g=u.makeCodes,_=u.codes2map,y=u._get17,x=u.U,j=o==null;j&&(o=new l(a.length>>>2<<3));for(var w,S,C=0,T=0,B=0,D=0,M=0,$=0,R=0,N=0,z=0;C==0;)if(C=h(a,z,1),T=h(a,z+1,2),z+=3,T!=0){if(j&&(o=i.F._check(o,N+(1<<17))),T==1&&(w=x.flmap,S=x.fdmap,$=511,R=31),T==2){B=m(a,z,5)+257,D=m(a,z+5,5)+1,M=m(a,z+10,4)+4,z+=14;for(var I=0;I<38;I+=2)x.itree[I]=0,x.itree[I+1]=0;var U=1;for(I=0;I<M;I++){var q=m(a,z+3*I,3);x.itree[1+(x.ordr[I]<<1)]=q,q>U&&(U=q)}z+=3*M,g(x.itree,U),_(x.itree,U,x.imap),w=x.lmap,S=x.dmap,z=p(x.imap,(1<<U)-1,B+D,a,z,x.ttree);var H=u._copyOut(x.ttree,0,B,x.ltree);$=(1<<H)-1;var G=u._copyOut(x.ttree,B,D,x.dtree);R=(1<<G)-1,g(x.ltree,H),_(x.ltree,H,w),g(x.dtree,G),_(x.dtree,G,S)}for(;;){var E=w[y(a,z)&$];z+=15&E;var O=E>>>4;if(!(O>>>8))o[N++]=O;else{if(O==256)break;var F=N+O-254;if(O>264){var Y=x.ldef[O-257];F=N+(Y>>>3)+m(a,z,7&Y),z+=7&Y}var L=S[y(a,z)&R];z+=15&L;var X=L>>>4,J=x.ddef[X],ee=(J>>>4)+h(a,z,15&J);for(z+=15&J,j&&(o=i.F._check(o,N+(1<<17)));N<F;)o[N]=o[N++-ee],o[N]=o[N++-ee],o[N]=o[N++-ee],o[N]=o[N++-ee];N=F}}}else{(7&z)!=0&&(z+=8-(7&z));var ne=4+(z>>>3),W=a[ne-4]|a[ne-3]<<8;j&&(o=i.F._check(o,N+W)),o.set(new l(a.buffer,a.byteOffset+ne,W),N),z=ne+W<<3,N+=W}return o.length==N?o:o.slice(0,N)},i.F._check=function(a,o){var l=a.length;if(o<=l)return a;var u=new Uint8Array(Math.max(l<<1,o));return u.set(a,0),u},i.F._decodeTiny=function(a,o,l,u,h,m){for(var p=i.F._bitsE,g=i.F._get17,_=0;_<l;){var y=a[g(u,h)&o];h+=15&y;var x=y>>>4;if(x<=15)m[_]=x,_++;else{var j=0,w=0;x==16?(w=3+p(u,h,2),h+=2,j=m[_-1]):x==17?(w=3+p(u,h,3),h+=3):x==18&&(w=11+p(u,h,7),h+=7);for(var S=_+w;_<S;)m[_]=j,_++}}return h},i.F._copyOut=function(a,o,l,u){for(var h=0,m=0,p=u.length>>>1;m<l;){var g=a[m+o];u[m<<1]=0,u[1+(m<<1)]=g,g>h&&(h=g),m++}for(;m<p;)u[m<<1]=0,u[1+(m<<1)]=0,m++;return h},i.F.makeCodes=function(a,o){for(var l,u,h,m,p=i.F.U,g=a.length,_=p.bl_count,y=0;y<=o;y++)_[y]=0;for(y=1;y<g;y+=2)_[a[y]]++;var x=p.next_code;for(l=0,_[0]=0,u=1;u<=o;u++)l=l+_[u-1]<<1,x[u]=l;for(h=0;h<g;h+=2)(m=a[h+1])!=0&&(a[h]=x[m],x[m]++)},i.F.codes2map=function(a,o,l){for(var u=a.length,h=i.F.U.rev15,m=0;m<u;m+=2)if(a[m+1]!=0)for(var p=m>>1,g=a[m+1],_=p<<4|g,y=o-g,x=a[m]<<y,j=x+(1<<y);x!=j;)l[h[x]>>>15-o]=_,x++},i.F.revCodes=function(a,o){for(var l=i.F.U.rev15,u=15-o,h=0;h<a.length;h+=2){var m=a[h]<<o-a[h+1];a[h]=l[m]>>>u}},i.F._putsE=function(a,o,l){l<<=7&o;var u=o>>>3;a[u]|=l,a[u+1]|=l>>>8},i.F._putsF=function(a,o,l){l<<=7&o;var u=o>>>3;a[u]|=l,a[u+1]|=l>>>8,a[u+2]|=l>>>16},i.F._bitsE=function(a,o,l){return(a[o>>>3]|a[1+(o>>>3)]<<8)>>>(7&o)&(1<<l)-1},i.F._bitsF=function(a,o,l){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16)>>>(7&o)&(1<<l)-1},i.F._get17=function(a,o){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16)>>>(7&o)},i.F._get25=function(a,o){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16|a[3+(o>>>3)]<<24)>>>(7&o)},i.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var a=i.F.U,o=0;o<32768;o++){var l=o;l=(4278255360&(l=(4042322160&(l=(3435973836&(l=(2863311530&l)>>>1|(1431655765&l)<<1))>>>2|(858993459&l)<<2))>>>4|(252645135&l)<<4))>>>8|(16711935&l)<<8,a.rev15[o]=(l>>>16|l<<16)>>>17}function u(h,m,p){for(;m--!=0;)h.push(0,p)}for(o=0;o<32;o++)a.ldef[o]=a.of0[o]<<3|a.exb[o],a.ddef[o]=a.df0[o]<<4|a.dxb[o];u(a.fltree,144,8),u(a.fltree,112,9),u(a.fltree,24,7),u(a.fltree,8,8),i.F.makeCodes(a.fltree,9),i.F.codes2map(a.fltree,9,a.flmap),i.F.revCodes(a.fltree,9),u(a.fdtree,32,5),i.F.makeCodes(a.fdtree,5),i.F.codes2map(a.fdtree,5,a.fdmap),i.F.revCodes(a.fdtree,5),u(a.itree,19,0),u(a.ltree,286,0),u(a.dtree,30,0),u(a.ttree,320,0)})()})();var KL=YL({__proto__:null,default:id},[id]);const Bs=(function(){var n={nextZero(p,g){for(;p[g]!=0;)g++;return g},readUshort:(p,g)=>p[g]<<8|p[g+1],writeUshort(p,g,_){p[g]=_>>8&255,p[g+1]=255&_},readUint:(p,g)=>16777216*p[g]+(p[g+1]<<16|p[g+2]<<8|p[g+3]),writeUint(p,g,_){p[g]=_>>24&255,p[g+1]=_>>16&255,p[g+2]=_>>8&255,p[g+3]=255&_},readASCII(p,g,_){let y="";for(let x=0;x<_;x++)y+=String.fromCharCode(p[g+x]);return y},writeASCII(p,g,_){for(let y=0;y<_.length;y++)p[g+y]=_.charCodeAt(y)},readBytes(p,g,_){const y=[];for(let x=0;x<_;x++)y.push(p[g+x]);return y},pad:p=>p.length<2?`0${p}`:p,readUTF8(p,g,_){let y,x="";for(let j=0;j<_;j++)x+=`%${n.pad(p[g+j].toString(16))}`;try{y=decodeURIComponent(x)}catch{return n.readASCII(p,g,_)}return y}};function e(p,g,_,y){const x=g*_,j=o(y),w=Math.ceil(g*j/8),S=new Uint8Array(4*x),C=new Uint32Array(S.buffer),{ctype:T}=y,{depth:B}=y,D=n.readUshort;if(T==6){const Y=x<<2;if(B==8)for(var M=0;M<Y;M+=4)S[M]=p[M],S[M+1]=p[M+1],S[M+2]=p[M+2],S[M+3]=p[M+3];if(B==16)for(M=0;M<Y;M++)S[M]=p[M<<1]}else if(T==2){const Y=y.tabs.tRNS;if(Y==null){if(B==8)for(M=0;M<x;M++){var $=3*M;C[M]=255<<24|p[$+2]<<16|p[$+1]<<8|p[$]}if(B==16)for(M=0;M<x;M++)$=6*M,C[M]=255<<24|p[$+4]<<16|p[$+2]<<8|p[$]}else{var R=Y[0];const L=Y[1],X=Y[2];if(B==8)for(M=0;M<x;M++){var N=M<<2;$=3*M,C[M]=255<<24|p[$+2]<<16|p[$+1]<<8|p[$],p[$]==R&&p[$+1]==L&&p[$+2]==X&&(S[N+3]=0)}if(B==16)for(M=0;M<x;M++)N=M<<2,$=6*M,C[M]=255<<24|p[$+4]<<16|p[$+2]<<8|p[$],D(p,$)==R&&D(p,$+2)==L&&D(p,$+4)==X&&(S[N+3]=0)}}else if(T==3){const Y=y.tabs.PLTE,L=y.tabs.tRNS,X=L?L.length:0;if(B==1)for(var z=0;z<_;z++){var I=z*w,U=z*g;for(M=0;M<g;M++){N=U+M<<2;var q=3*(H=p[I+(M>>3)]>>7-((7&M)<<0)&1);S[N]=Y[q],S[N+1]=Y[q+1],S[N+2]=Y[q+2],S[N+3]=H<X?L[H]:255}}if(B==2)for(z=0;z<_;z++)for(I=z*w,U=z*g,M=0;M<g;M++)N=U+M<<2,q=3*(H=p[I+(M>>2)]>>6-((3&M)<<1)&3),S[N]=Y[q],S[N+1]=Y[q+1],S[N+2]=Y[q+2],S[N+3]=H<X?L[H]:255;if(B==4)for(z=0;z<_;z++)for(I=z*w,U=z*g,M=0;M<g;M++)N=U+M<<2,q=3*(H=p[I+(M>>1)]>>4-((1&M)<<2)&15),S[N]=Y[q],S[N+1]=Y[q+1],S[N+2]=Y[q+2],S[N+3]=H<X?L[H]:255;if(B==8)for(M=0;M<x;M++){var H;N=M<<2,q=3*(H=p[M]),S[N]=Y[q],S[N+1]=Y[q+1],S[N+2]=Y[q+2],S[N+3]=H<X?L[H]:255}}else if(T==4){if(B==8)for(M=0;M<x;M++){N=M<<2;var G=p[E=M<<1];S[N]=G,S[N+1]=G,S[N+2]=G,S[N+3]=p[E+1]}if(B==16)for(M=0;M<x;M++){var E;N=M<<2,G=p[E=M<<2],S[N]=G,S[N+1]=G,S[N+2]=G,S[N+3]=p[E+2]}}else if(T==0)for(R=y.tabs.tRNS?y.tabs.tRNS:-1,z=0;z<_;z++){const Y=z*w,L=z*g;if(B==1)for(var O=0;O<g;O++){var F=(G=255*(p[Y+(O>>>3)]>>>7-(7&O)&1))==255*R?0:255;C[L+O]=F<<24|G<<16|G<<8|G}else if(B==2)for(O=0;O<g;O++)F=(G=85*(p[Y+(O>>>2)]>>>6-((3&O)<<1)&3))==85*R?0:255,C[L+O]=F<<24|G<<16|G<<8|G;else if(B==4)for(O=0;O<g;O++)F=(G=17*(p[Y+(O>>>1)]>>>4-((1&O)<<2)&15))==17*R?0:255,C[L+O]=F<<24|G<<16|G<<8|G;else if(B==8)for(O=0;O<g;O++)F=(G=p[Y+O])==R?0:255,C[L+O]=F<<24|G<<16|G<<8|G;else if(B==16)for(O=0;O<g;O++)G=p[Y+(O<<1)],F=D(p,Y+(O<<1))==R?0:255,C[L+O]=F<<24|G<<16|G<<8|G}return S}function t(p,g,_,y){const x=o(p),j=Math.ceil(_*x/8),w=new Uint8Array((j+1+p.interlace)*y);return g=p.tabs.CgBI?a(g,w):i(g,w),p.interlace==0?g=l(g,p,0,_,y):p.interlace==1&&(g=(function(C,T){const B=T.width,D=T.height,M=o(T),$=M>>3,R=Math.ceil(B*M/8),N=new Uint8Array(D*R);let z=0;const I=[0,0,4,0,2,0,1],U=[0,4,0,2,0,1,0],q=[8,8,8,4,4,2,2],H=[8,8,4,4,2,2,1];let G=0;for(;G<7;){const O=q[G],F=H[G];let Y=0,L=0,X=I[G];for(;X<D;)X+=O,L++;let J=U[G];for(;J<B;)J+=F,Y++;const ee=Math.ceil(Y*M/8);l(C,T,z,Y,L);let ne=0,W=I[G];for(;W<D;){let oe=U[G],_e=z+ne*ee<<3;for(;oe<B;){var E;if(M==1&&(E=(E=C[_e>>3])>>7-(7&_e)&1,N[W*R+(oe>>3)]|=E<<7-((7&oe)<<0)),M==2&&(E=(E=C[_e>>3])>>6-(7&_e)&3,N[W*R+(oe>>2)]|=E<<6-((3&oe)<<1)),M==4&&(E=(E=C[_e>>3])>>4-(7&_e)&15,N[W*R+(oe>>1)]|=E<<4-((1&oe)<<2)),M>=8){const he=W*R+oe*$;for(let be=0;be<$;be++)N[he+be]=C[(_e>>3)+be]}_e+=M,oe+=F}ne++,W+=O}Y*L!=0&&(z+=L*(1+ee)),G+=1}return N})(g,p)),g}function i(p,g){return a(new Uint8Array(p.buffer,2,p.length-6),g)}var a=(function(){const p={H:{}};return p.H.N=function(g,_){const y=Uint8Array;let x,j,w=0,S=0,C=0,T=0,B=0,D=0,M=0,$=0,R=0;if(g[0]==3&&g[1]==0)return _||new y(0);const N=p.H,z=N.b,I=N.e,U=N.R,q=N.n,H=N.A,G=N.Z,E=N.m,O=_==null;for(O&&(_=new y(g.length>>>2<<5));w==0;)if(w=z(g,R,1),S=z(g,R+1,2),R+=3,S!=0){if(O&&(_=p.H.W(_,$+(1<<17))),S==1&&(x=E.J,j=E.h,D=511,M=31),S==2){C=I(g,R,5)+257,T=I(g,R+5,5)+1,B=I(g,R+10,4)+4,R+=14;let Y=1;for(var F=0;F<38;F+=2)E.Q[F]=0,E.Q[F+1]=0;for(F=0;F<B;F++){const J=I(g,R+3*F,3);E.Q[1+(E.X[F]<<1)]=J,J>Y&&(Y=J)}R+=3*B,q(E.Q,Y),H(E.Q,Y,E.u),x=E.w,j=E.d,R=U(E.u,(1<<Y)-1,C+T,g,R,E.v);const L=N.V(E.v,0,C,E.C);D=(1<<L)-1;const X=N.V(E.v,C,T,E.D);M=(1<<X)-1,q(E.C,L),H(E.C,L,x),q(E.D,X),H(E.D,X,j)}for(;;){const Y=x[G(g,R)&D];R+=15&Y;const L=Y>>>4;if(!(L>>>8))_[$++]=L;else{if(L==256)break;{let X=$+L-254;if(L>264){const oe=E.q[L-257];X=$+(oe>>>3)+I(g,R,7&oe),R+=7&oe}const J=j[G(g,R)&M];R+=15&J;const ee=J>>>4,ne=E.c[ee],W=(ne>>>4)+z(g,R,15&ne);for(R+=15&ne;$<X;)_[$]=_[$++-W],_[$]=_[$++-W],_[$]=_[$++-W],_[$]=_[$++-W];$=X}}}}else{(7&R)!=0&&(R+=8-(7&R));const Y=4+(R>>>3),L=g[Y-4]|g[Y-3]<<8;O&&(_=p.H.W(_,$+L)),_.set(new y(g.buffer,g.byteOffset+Y,L),$),R=Y+L<<3,$+=L}return _.length==$?_:_.slice(0,$)},p.H.W=function(g,_){const y=g.length;if(_<=y)return g;const x=new Uint8Array(y<<1);return x.set(g,0),x},p.H.R=function(g,_,y,x,j,w){const S=p.H.e,C=p.H.Z;let T=0;for(;T<y;){const B=g[C(x,j)&_];j+=15&B;const D=B>>>4;if(D<=15)w[T]=D,T++;else{let M=0,$=0;D==16?($=3+S(x,j,2),j+=2,M=w[T-1]):D==17?($=3+S(x,j,3),j+=3):D==18&&($=11+S(x,j,7),j+=7);const R=T+$;for(;T<R;)w[T]=M,T++}}return j},p.H.V=function(g,_,y,x){let j=0,w=0;const S=x.length>>>1;for(;w<y;){const C=g[w+_];x[w<<1]=0,x[1+(w<<1)]=C,C>j&&(j=C),w++}for(;w<S;)x[w<<1]=0,x[1+(w<<1)]=0,w++;return j},p.H.n=function(g,_){const y=p.H.m,x=g.length;let j,w,S,C;const T=y.j;for(var B=0;B<=_;B++)T[B]=0;for(B=1;B<x;B+=2)T[g[B]]++;const D=y.K;for(j=0,T[0]=0,w=1;w<=_;w++)j=j+T[w-1]<<1,D[w]=j;for(S=0;S<x;S+=2)C=g[S+1],C!=0&&(g[S]=D[C],D[C]++)},p.H.A=function(g,_,y){const x=g.length,j=p.H.m.r;for(let w=0;w<x;w+=2)if(g[w+1]!=0){const S=w>>1,C=g[w+1],T=S<<4|C,B=_-C;let D=g[w]<<B;const M=D+(1<<B);for(;D!=M;)y[j[D]>>>15-_]=T,D++}},p.H.l=function(g,_){const y=p.H.m.r,x=15-_;for(let j=0;j<g.length;j+=2){const w=g[j]<<_-g[j+1];g[j]=y[w]>>>x}},p.H.M=function(g,_,y){y<<=7&_;const x=_>>>3;g[x]|=y,g[x+1]|=y>>>8},p.H.I=function(g,_,y){y<<=7&_;const x=_>>>3;g[x]|=y,g[x+1]|=y>>>8,g[x+2]|=y>>>16},p.H.e=function(g,_,y){return(g[_>>>3]|g[1+(_>>>3)]<<8)>>>(7&_)&(1<<y)-1},p.H.b=function(g,_,y){return(g[_>>>3]|g[1+(_>>>3)]<<8|g[2+(_>>>3)]<<16)>>>(7&_)&(1<<y)-1},p.H.Z=function(g,_){return(g[_>>>3]|g[1+(_>>>3)]<<8|g[2+(_>>>3)]<<16)>>>(7&_)},p.H.i=function(g,_){return(g[_>>>3]|g[1+(_>>>3)]<<8|g[2+(_>>>3)]<<16|g[3+(_>>>3)]<<24)>>>(7&_)},p.H.m=(function(){const g=Uint16Array,_=Uint32Array;return{K:new g(16),j:new g(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new g(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new _(32),J:new g(512),_:[],h:new g(32),$:[],w:new g(32768),C:[],v:[],d:new g(32768),D:[],u:new g(512),Q:[],r:new g(32768),s:new _(286),Y:new _(30),a:new _(19),t:new _(15e3),k:new g(65536),g:new g(32768)}})(),(function(){const g=p.H.m;for(var _=0;_<32768;_++){let x=_;x=(2863311530&x)>>>1|(1431655765&x)<<1,x=(3435973836&x)>>>2|(858993459&x)<<2,x=(4042322160&x)>>>4|(252645135&x)<<4,x=(4278255360&x)>>>8|(16711935&x)<<8,g.r[_]=(x>>>16|x<<16)>>>17}function y(x,j,w){for(;j--!=0;)x.push(0,w)}for(_=0;_<32;_++)g.q[_]=g.S[_]<<3|g.T[_],g.c[_]=g.p[_]<<4|g.z[_];y(g._,144,8),y(g._,112,9),y(g._,24,7),y(g._,8,8),p.H.n(g._,9),p.H.A(g._,9,g.J),p.H.l(g._,9),y(g.$,32,5),p.H.n(g.$,5),p.H.A(g.$,5,g.h),p.H.l(g.$,5),y(g.Q,19,0),y(g.C,286,0),y(g.D,30,0),y(g.v,320,0)})(),p.H.N})();function o(p){return[1,null,3,1,2,null,4][p.ctype]*p.depth}function l(p,g,_,y,x){let j=o(g);const w=Math.ceil(y*j/8);let S,C;j=Math.ceil(j/8);let T=p[_],B=0;if(T>1&&(p[_]=[0,0,1][T-2]),T==3)for(B=j;B<w;B++)p[B+1]=p[B+1]+(p[B+1-j]>>>1)&255;for(let D=0;D<x;D++)if(S=_+D*w,C=S+D+1,T=p[C-1],B=0,T==0)for(;B<w;B++)p[S+B]=p[C+B];else if(T==1){for(;B<j;B++)p[S+B]=p[C+B];for(;B<w;B++)p[S+B]=p[C+B]+p[S+B-j]}else if(T==2)for(;B<w;B++)p[S+B]=p[C+B]+p[S+B-w];else if(T==3){for(;B<j;B++)p[S+B]=p[C+B]+(p[S+B-w]>>>1);for(;B<w;B++)p[S+B]=p[C+B]+(p[S+B-w]+p[S+B-j]>>>1)}else{for(;B<j;B++)p[S+B]=p[C+B]+u(0,p[S+B-w],0);for(;B<w;B++)p[S+B]=p[C+B]+u(p[S+B-j],p[S+B-w],p[S+B-j-w])}return p}function u(p,g,_){const y=p+g-_,x=y-p,j=y-g,w=y-_;return x*x<=j*j&&x*x<=w*w?p:j*j<=w*w?g:_}function h(p,g,_){_.width=n.readUint(p,g),g+=4,_.height=n.readUint(p,g),g+=4,_.depth=p[g],g++,_.ctype=p[g],g++,_.compress=p[g],g++,_.filter=p[g],g++,_.interlace=p[g],g++}function m(p,g,_,y,x,j,w,S,C){const T=Math.min(g,x),B=Math.min(_,j);let D=0,M=0;for(let G=0;G<B;G++)for(let E=0;E<T;E++)if(w>=0&&S>=0?(D=G*g+E<<2,M=(S+G)*x+w+E<<2):(D=(-S+G)*g-w+E<<2,M=G*x+E<<2),C==0)y[M]=p[D],y[M+1]=p[D+1],y[M+2]=p[D+2],y[M+3]=p[D+3];else if(C==1){var $=p[D+3]*.00392156862745098,R=p[D]*$,N=p[D+1]*$,z=p[D+2]*$,I=y[M+3]*(1/255),U=y[M]*I,q=y[M+1]*I,H=y[M+2]*I;const O=1-$,F=$+I*O,Y=F==0?0:1/F;y[M+3]=255*F,y[M+0]=(R+U*O)*Y,y[M+1]=(N+q*O)*Y,y[M+2]=(z+H*O)*Y}else if(C==2)$=p[D+3],R=p[D],N=p[D+1],z=p[D+2],I=y[M+3],U=y[M],q=y[M+1],H=y[M+2],$==I&&R==U&&N==q&&z==H?(y[M]=0,y[M+1]=0,y[M+2]=0,y[M+3]=0):(y[M]=R,y[M+1]=N,y[M+2]=z,y[M+3]=$);else if(C==3){if($=p[D+3],R=p[D],N=p[D+1],z=p[D+2],I=y[M+3],U=y[M],q=y[M+1],H=y[M+2],$==I&&R==U&&N==q&&z==H)continue;if($<220&&I>20)return!1}return!0}return{decode:function(g){const _=new Uint8Array(g);let y=8;const x=n,j=x.readUshort,w=x.readUint,S={tabs:{},frames:[]},C=new Uint8Array(_.length);let T,B=0,D=0;const M=[137,80,78,71,13,10,26,10];for(var $=0;$<8;$++)if(_[$]!=M[$])throw"The input is not a PNG file!";for(;y<_.length;){const G=x.readUint(_,y);y+=4;const E=x.readASCII(_,y,4);if(y+=4,E=="IHDR")h(_,y,S);else if(E=="iCCP"){for(var R=y;_[R]!=0;)R++;x.readASCII(_,y,R-y),_[R+1];const O=_.slice(R+2,y+G);let F=null;try{F=i(O)}catch{F=a(O)}S.tabs[E]=F}else if(E=="CgBI")S.tabs[E]=_.slice(y,y+4);else if(E=="IDAT"){for($=0;$<G;$++)C[B+$]=_[y+$];B+=G}else if(E=="acTL")S.tabs[E]={num_frames:w(_,y),num_plays:w(_,y+4)},T=new Uint8Array(_.length);else if(E=="fcTL"){D!=0&&((H=S.frames[S.frames.length-1]).data=t(S,T.slice(0,D),H.rect.width,H.rect.height),D=0);const O={x:w(_,y+12),y:w(_,y+16),width:w(_,y+4),height:w(_,y+8)};let F=j(_,y+22);F=j(_,y+20)/(F==0?100:F);const Y={rect:O,delay:Math.round(1e3*F),dispose:_[y+24],blend:_[y+25]};S.frames.push(Y)}else if(E=="fdAT"){for($=0;$<G-4;$++)T[D+$]=_[y+$+4];D+=G-4}else if(E=="pHYs")S.tabs[E]=[x.readUint(_,y),x.readUint(_,y+4),_[y+8]];else if(E=="cHRM")for(S.tabs[E]=[],$=0;$<8;$++)S.tabs[E].push(x.readUint(_,y+4*$));else if(E=="tEXt"||E=="zTXt"){S.tabs[E]==null&&(S.tabs[E]={});var N=x.nextZero(_,y),z=x.readASCII(_,y,N-y),I=y+G-N-1;if(E=="tEXt")q=x.readASCII(_,N+1,I);else{var U=i(_.slice(N+2,N+2+I));q=x.readUTF8(U,0,U.length)}S.tabs[E][z]=q}else if(E=="iTXt"){S.tabs[E]==null&&(S.tabs[E]={}),N=0,R=y,N=x.nextZero(_,R),z=x.readASCII(_,R,N-R);const O=_[R=N+1];var q;_[R+1],R+=2,N=x.nextZero(_,R),x.readASCII(_,R,N-R),R=N+1,N=x.nextZero(_,R),x.readUTF8(_,R,N-R),I=G-((R=N+1)-y),O==0?q=x.readUTF8(_,R,I):(U=i(_.slice(R,R+I)),q=x.readUTF8(U,0,U.length)),S.tabs[E][z]=q}else if(E=="PLTE")S.tabs[E]=x.readBytes(_,y,G);else if(E=="hIST"){const O=S.tabs.PLTE.length/3;for(S.tabs[E]=[],$=0;$<O;$++)S.tabs[E].push(j(_,y+2*$))}else if(E=="tRNS")S.ctype==3?S.tabs[E]=x.readBytes(_,y,G):S.ctype==0?S.tabs[E]=j(_,y):S.ctype==2&&(S.tabs[E]=[j(_,y),j(_,y+2),j(_,y+4)]);else if(E=="gAMA")S.tabs[E]=x.readUint(_,y)/1e5;else if(E=="sRGB")S.tabs[E]=_[y];else if(E=="bKGD")S.ctype==0||S.ctype==4?S.tabs[E]=[j(_,y)]:S.ctype==2||S.ctype==6?S.tabs[E]=[j(_,y),j(_,y+2),j(_,y+4)]:S.ctype==3&&(S.tabs[E]=_[y]);else if(E=="IEND")break;y+=G,x.readUint(_,y),y+=4}var H;return D!=0&&((H=S.frames[S.frames.length-1]).data=t(S,T.slice(0,D),H.rect.width,H.rect.height)),S.data=t(S,C,S.width,S.height),delete S.compress,delete S.interlace,delete S.filter,S},toRGBA8:function(g){const _=g.width,y=g.height;if(g.tabs.acTL==null)return[e(g.data,_,y,g).buffer];const x=[];g.frames[0].data==null&&(g.frames[0].data=g.data);const j=_*y*4,w=new Uint8Array(j),S=new Uint8Array(j),C=new Uint8Array(j);for(let B=0;B<g.frames.length;B++){const D=g.frames[B],M=D.rect.x,$=D.rect.y,R=D.rect.width,N=D.rect.height,z=e(D.data,R,N,g);if(B!=0)for(var T=0;T<j;T++)C[T]=w[T];if(D.blend==0?m(z,R,N,w,_,y,M,$,0):D.blend==1&&m(z,R,N,w,_,y,M,$,1),x.push(w.buffer.slice(0)),D.dispose!=0){if(D.dispose==1)m(S,R,N,w,_,y,M,$,0);else if(D.dispose==2)for(T=0;T<j;T++)w[T]=C[T]}}return x},_paeth:u,_copyTile:m,_bin:n}})();(function(){const{_copyTile:n}=Bs,{_bin:e}=Bs,t=Bs._paeth;var i={table:(function(){const R=new Uint32Array(256);for(let N=0;N<256;N++){let z=N;for(let I=0;I<8;I++)1&z?z=3988292384^z>>>1:z>>>=1;R[N]=z}return R})(),update(R,N,z,I){for(let U=0;U<I;U++)R=i.table[255&(R^N[z+U])]^R>>>8;return R},crc:(R,N,z)=>4294967295^i.update(4294967295,R,N,z)};function a(R,N,z,I){N[z]+=R[0]*I>>4,N[z+1]+=R[1]*I>>4,N[z+2]+=R[2]*I>>4,N[z+3]+=R[3]*I>>4}function o(R){return Math.max(0,Math.min(255,R))}function l(R,N){const z=R[0]-N[0],I=R[1]-N[1],U=R[2]-N[2],q=R[3]-N[3];return z*z+I*I+U*U+q*q}function u(R,N,z,I,U,q,H){H==null&&(H=1);const G=I.length,E=[];for(var O=0;O<G;O++){const W=I[O];E.push([W>>>0&255,W>>>8&255,W>>>16&255,W>>>24&255])}for(O=0;O<G;O++){let W=4294967295;for(var F=0,Y=0;Y<G;Y++){var L=l(E[O],E[Y]);Y!=O&&L<W&&(W=L,F=Y)}}const X=new Uint32Array(U.buffer),J=new Int16Array(N*z*4),ee=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(O=0;O<ee.length;O++)ee[O]=255*((ee[O]+.5)/16-.5);for(let W=0;W<z;W++)for(let oe=0;oe<N;oe++){var ne;O=4*(W*N+oe),H!=2?ne=[o(R[O]+J[O]),o(R[O+1]+J[O+1]),o(R[O+2]+J[O+2]),o(R[O+3]+J[O+3])]:(L=ee[4*(3&W)+(3&oe)],ne=[o(R[O]+L),o(R[O+1]+L),o(R[O+2]+L),o(R[O+3]+L)]),F=0;let _e=16777215;for(Y=0;Y<G;Y++){const Ae=l(ne,E[Y]);Ae<_e&&(_e=Ae,F=Y)}const he=E[F],be=[ne[0]-he[0],ne[1]-he[1],ne[2]-he[2],ne[3]-he[3]];H==1&&(oe!=N-1&&a(be,J,O+4,7),W!=z-1&&(oe!=0&&a(be,J,O+4*N-4,3),a(be,J,O+4*N,5),oe!=N-1&&a(be,J,O+4*N+4,1))),q[O>>2]=F,X[O>>2]=I[F]}}function h(R,N,z,I,U){U==null&&(U={});const{crc:q}=i,H=e.writeUint,G=e.writeUshort,E=e.writeASCII;let O=8;const F=R.frames.length>1;let Y,L=!1,X=33+(F?20:0);if(U.sRGB!=null&&(X+=13),U.pHYs!=null&&(X+=21),U.iCCP!=null&&(Y=pako.deflate(U.iCCP),X+=21+Y.length+4),R.ctype==3){for(var J=R.plte.length,ee=0;ee<J;ee++)R.plte[ee]>>>24!=255&&(L=!0);X+=8+3*J+4+(L?8+1*J+4:0)}for(var ne=0;ne<R.frames.length;ne++)F&&(X+=38),X+=(he=R.frames[ne]).cimg.length+12,ne!=0&&(X+=4);X+=12;const W=new Uint8Array(X),oe=[137,80,78,71,13,10,26,10];for(ee=0;ee<8;ee++)W[ee]=oe[ee];if(H(W,O,13),O+=4,E(W,O,"IHDR"),O+=4,H(W,O,N),O+=4,H(W,O,z),O+=4,W[O]=R.depth,O++,W[O]=R.ctype,O++,W[O]=0,O++,W[O]=0,O++,W[O]=0,O++,H(W,O,q(W,O-17,17)),O+=4,U.sRGB!=null&&(H(W,O,1),O+=4,E(W,O,"sRGB"),O+=4,W[O]=U.sRGB,O++,H(W,O,q(W,O-5,5)),O+=4),U.iCCP!=null){const be=13+Y.length;H(W,O,be),O+=4,E(W,O,"iCCP"),O+=4,E(W,O,"ICC profile"),O+=11,O+=2,W.set(Y,O),O+=Y.length,H(W,O,q(W,O-(be+4),be+4)),O+=4}if(U.pHYs!=null&&(H(W,O,9),O+=4,E(W,O,"pHYs"),O+=4,H(W,O,U.pHYs[0]),O+=4,H(W,O,U.pHYs[1]),O+=4,W[O]=U.pHYs[2],O++,H(W,O,q(W,O-13,13)),O+=4),F&&(H(W,O,8),O+=4,E(W,O,"acTL"),O+=4,H(W,O,R.frames.length),O+=4,H(W,O,U.loop!=null?U.loop:0),O+=4,H(W,O,q(W,O-12,12)),O+=4),R.ctype==3){for(H(W,O,3*(J=R.plte.length)),O+=4,E(W,O,"PLTE"),O+=4,ee=0;ee<J;ee++){const be=3*ee,Ae=R.plte[ee],fe=255&Ae,Te=Ae>>>8&255,Ze=Ae>>>16&255;W[O+be+0]=fe,W[O+be+1]=Te,W[O+be+2]=Ze}if(O+=3*J,H(W,O,q(W,O-3*J-4,3*J+4)),O+=4,L){for(H(W,O,J),O+=4,E(W,O,"tRNS"),O+=4,ee=0;ee<J;ee++)W[O+ee]=R.plte[ee]>>>24&255;O+=J,H(W,O,q(W,O-J-4,J+4)),O+=4}}let _e=0;for(ne=0;ne<R.frames.length;ne++){var he=R.frames[ne];F&&(H(W,O,26),O+=4,E(W,O,"fcTL"),O+=4,H(W,O,_e++),O+=4,H(W,O,he.rect.width),O+=4,H(W,O,he.rect.height),O+=4,H(W,O,he.rect.x),O+=4,H(W,O,he.rect.y),O+=4,G(W,O,I[ne]),O+=2,G(W,O,1e3),O+=2,W[O]=he.dispose,O++,W[O]=he.blend,O++,H(W,O,q(W,O-30,30)),O+=4);const be=he.cimg;H(W,O,(J=be.length)+(ne==0?0:4)),O+=4;const Ae=O;E(W,O,ne==0?"IDAT":"fdAT"),O+=4,ne!=0&&(H(W,O,_e++),O+=4),W.set(be,O),O+=J,H(W,O,q(W,Ae,O-Ae)),O+=4}return H(W,O,0),O+=4,E(W,O,"IEND"),O+=4,H(W,O,q(W,O-4,4)),O+=4,W.buffer}function m(R,N,z){for(let I=0;I<R.frames.length;I++){const U=R.frames[I];U.rect.width;const q=U.rect.height,H=new Uint8Array(q*U.bpl+q);U.cimg=y(U.img,q,U.bpp,U.bpl,H,N,z)}}function p(R,N,z,I,U){const q=U[0],H=U[1],G=U[2],E=U[3],O=U[4],F=U[5];let Y=6,L=8,X=255;for(var J=0;J<R.length;J++){const Ot=new Uint8Array(R[J]);for(var ee=Ot.length,ne=0;ne<ee;ne+=4)X&=Ot[ne+3]}const W=X!=255,oe=(function(Oe,Ve,vt,Lt,st,gn){const lt=[];for(var qe=0;qe<Oe.length;qe++){const Ut=new Uint8Array(Oe[qe]),Sn=new Uint32Array(Ut.buffer);var Nt;let Jt=0,en=0,yt=Ve,Rt=vt,rs=Lt?1:0;if(qe!=0){const Cs=gn||Lt||qe==1||lt[qe-2].dispose!=0?1:2;let _a=0,qs=1e9;for(let Yn=0;Yn<Cs;Yn++){var Pt=new Uint8Array(Oe[qe-1-Yn]);const va=new Uint32Array(Oe[qe-1-Yn]);let Yt=Ve,os=vt,js=-1,ct=-1;for(let Xn=0;Xn<vt;Xn++)for(let Kn=0;Kn<Ve;Kn++)Sn[it=Xn*Ve+Kn]!=va[it]&&(Kn<Yt&&(Yt=Kn),Kn>js&&(js=Kn),Xn<os&&(os=Xn),Xn>ct&&(ct=Xn));js==-1&&(Yt=os=js=ct=0),st&&((1&Yt)==1&&Yt--,(1&os)==1&&os--);const Wn=(js-Yt+1)*(ct-os+1);Wn<qs&&(qs=Wn,_a=Yn,Jt=Yt,en=os,yt=js-Yt+1,Rt=ct-os+1)}Pt=new Uint8Array(Oe[qe-1-_a]),_a==1&&(lt[qe-1].dispose=2),Nt=new Uint8Array(yt*Rt*4),n(Pt,Ve,vt,Nt,yt,Rt,-Jt,-en,0),rs=n(Ut,Ve,vt,Nt,yt,Rt,-Jt,-en,3)?1:0,rs==1?_(Ut,Ve,vt,Nt,{x:Jt,y:en,width:yt,height:Rt}):n(Ut,Ve,vt,Nt,yt,Rt,-Jt,-en,0)}else Nt=Ut.slice(0);lt.push({rect:{x:Jt,y:en,width:yt,height:Rt},img:Nt,blend:rs,dispose:0})}if(Lt)for(qe=0;qe<lt.length;qe++){if((wt=lt[qe]).blend==1)continue;const Ut=wt.rect,Sn=lt[qe-1].rect,Jt=Math.min(Ut.x,Sn.x),en=Math.min(Ut.y,Sn.y),yt={x:Jt,y:en,width:Math.max(Ut.x+Ut.width,Sn.x+Sn.width)-Jt,height:Math.max(Ut.y+Ut.height,Sn.y+Sn.height)-en};lt[qe-1].dispose=1,qe-1!=0&&g(Oe,Ve,vt,lt,qe-1,yt,st),g(Oe,Ve,vt,lt,qe,yt,st)}let It=0;if(Oe.length!=1)for(var it=0;it<lt.length;it++){var wt;It+=(wt=lt[it]).rect.width*wt.rect.height}return lt})(R,N,z,q,H,G),_e={},he=[],be=[];if(I!=0){const Ot=[];for(ne=0;ne<oe.length;ne++)Ot.push(oe[ne].img.buffer);const Oe=(function(st){let gn=0;for(var lt=0;lt<st.length;lt++)gn+=st[lt].byteLength;const qe=new Uint8Array(gn);let Nt=0;for(lt=0;lt<st.length;lt++){const Pt=new Uint8Array(st[lt]),It=Pt.length;for(let it=0;it<It;it+=4){let wt=Pt[it],Ut=Pt[it+1],Sn=Pt[it+2];const Jt=Pt[it+3];Jt==0&&(wt=Ut=Sn=0),qe[Nt+it]=wt,qe[Nt+it+1]=Ut,qe[Nt+it+2]=Sn,qe[Nt+it+3]=Jt}Nt+=It}return qe.buffer})(Ot),Ve=j(Oe,I);for(ne=0;ne<Ve.plte.length;ne++)he.push(Ve.plte[ne].est.rgba);let vt=0;for(ne=0;ne<oe.length;ne++){const Lt=(fe=oe[ne]).img.length;var Ae=new Uint8Array(Ve.inds.buffer,vt>>2,Lt>>2);be.push(Ae);const st=new Uint8Array(Ve.abuf,vt,Lt);F&&u(fe.img,fe.rect.width,fe.rect.height,he,st,Ae),fe.img.set(st),vt+=Lt}}else for(J=0;J<oe.length;J++){var fe=oe[J];const Ot=new Uint32Array(fe.img.buffer);var Te=fe.rect.width;for(ee=Ot.length,Ae=new Uint8Array(ee),be.push(Ae),ne=0;ne<ee;ne++){const Oe=Ot[ne];if(ne!=0&&Oe==Ot[ne-1])Ae[ne]=Ae[ne-1];else if(ne>Te&&Oe==Ot[ne-Te])Ae[ne]=Ae[ne-Te];else{let Ve=_e[Oe];if(Ve==null&&(_e[Oe]=Ve=he.length,he.push(Oe),he.length>=300))break;Ae[ne]=Ve}}}const Ze=he.length;for(Ze<=256&&O==0&&(L=Ze<=2?1:Ze<=4?2:Ze<=16?4:8,L=Math.max(L,E)),J=0;J<oe.length;J++){(fe=oe[J]).rect.x,fe.rect.y,Te=fe.rect.width;const Ot=fe.rect.height;let Oe=fe.img;new Uint32Array(Oe.buffer);let Ve=4*Te,vt=4;if(Ze<=256&&O==0){Ve=Math.ceil(L*Te/8);var kt=new Uint8Array(Ve*Ot);const Lt=be[J];for(let st=0;st<Ot;st++){ne=st*Ve;const gn=st*Te;if(L==8)for(var nt=0;nt<Te;nt++)kt[ne+nt]=Lt[gn+nt];else if(L==4)for(nt=0;nt<Te;nt++)kt[ne+(nt>>1)]|=Lt[gn+nt]<<4-4*(1&nt);else if(L==2)for(nt=0;nt<Te;nt++)kt[ne+(nt>>2)]|=Lt[gn+nt]<<6-2*(3&nt);else if(L==1)for(nt=0;nt<Te;nt++)kt[ne+(nt>>3)]|=Lt[gn+nt]<<7-1*(7&nt)}Oe=kt,Y=3,vt=1}else if(W==0&&oe.length==1){kt=new Uint8Array(Te*Ot*3);const Lt=Te*Ot;for(ne=0;ne<Lt;ne++){const st=3*ne,gn=4*ne;kt[st]=Oe[gn],kt[st+1]=Oe[gn+1],kt[st+2]=Oe[gn+2]}Oe=kt,Y=2,vt=3,Ve=3*Te}fe.img=Oe,fe.bpl=Ve,fe.bpp=vt}return{ctype:Y,depth:L,plte:he,frames:oe}}function g(R,N,z,I,U,q,H){const G=Uint8Array,E=Uint32Array,O=new G(R[U-1]),F=new E(R[U-1]),Y=U+1<R.length?new G(R[U+1]):null,L=new G(R[U]),X=new E(L.buffer);let J=N,ee=z,ne=-1,W=-1;for(let _e=0;_e<q.height;_e++)for(let he=0;he<q.width;he++){const be=q.x+he,Ae=q.y+_e,fe=Ae*N+be,Te=X[fe];Te==0||I[U-1].dispose==0&&F[fe]==Te&&(Y==null||Y[4*fe+3]!=0)||(be<J&&(J=be),be>ne&&(ne=be),Ae<ee&&(ee=Ae),Ae>W&&(W=Ae))}ne==-1&&(J=ee=ne=W=0),H&&((1&J)==1&&J--,(1&ee)==1&&ee--),q={x:J,y:ee,width:ne-J+1,height:W-ee+1};const oe=I[U];oe.rect=q,oe.blend=1,oe.img=new Uint8Array(q.width*q.height*4),I[U-1].dispose==0?(n(O,N,z,oe.img,q.width,q.height,-q.x,-q.y,0),_(L,N,z,oe.img,q)):n(L,N,z,oe.img,q.width,q.height,-q.x,-q.y,0)}function _(R,N,z,I,U){n(R,N,z,I,U.width,U.height,-U.x,-U.y,2)}function y(R,N,z,I,U,q,H){const G=[];let E,O=[0,1,2,3,4];q!=-1?O=[q]:(N*I>5e5||z==1)&&(O=[0]),H&&(E={level:0});const F=KL;for(var Y=0;Y<O.length;Y++){for(let J=0;J<N;J++)x(U,R,J,I,z,O[Y]);G.push(F.deflate(U,E))}let L,X=1e9;for(Y=0;Y<G.length;Y++)G[Y].length<X&&(L=Y,X=G[Y].length);return G[L]}function x(R,N,z,I,U,q){const H=z*I;let G=H+z;if(R[G]=q,G++,q==0)if(I<500)for(var E=0;E<I;E++)R[G+E]=N[H+E];else R.set(new Uint8Array(N.buffer,H,I),G);else if(q==1){for(E=0;E<U;E++)R[G+E]=N[H+E];for(E=U;E<I;E++)R[G+E]=N[H+E]-N[H+E-U]+256&255}else if(z==0){for(E=0;E<U;E++)R[G+E]=N[H+E];if(q==2)for(E=U;E<I;E++)R[G+E]=N[H+E];if(q==3)for(E=U;E<I;E++)R[G+E]=N[H+E]-(N[H+E-U]>>1)+256&255;if(q==4)for(E=U;E<I;E++)R[G+E]=N[H+E]-t(N[H+E-U],0,0)+256&255}else{if(q==2)for(E=0;E<I;E++)R[G+E]=N[H+E]+256-N[H+E-I]&255;if(q==3){for(E=0;E<U;E++)R[G+E]=N[H+E]+256-(N[H+E-I]>>1)&255;for(E=U;E<I;E++)R[G+E]=N[H+E]+256-(N[H+E-I]+N[H+E-U]>>1)&255}if(q==4){for(E=0;E<U;E++)R[G+E]=N[H+E]+256-t(0,N[H+E-I],0)&255;for(E=U;E<I;E++)R[G+E]=N[H+E]+256-t(N[H+E-U],N[H+E-I],N[H+E-U-I])&255}}}function j(R,N){const z=new Uint8Array(R),I=z.slice(0),U=new Uint32Array(I.buffer),q=w(I,N),H=q[0],G=q[1],E=z.length,O=new Uint8Array(E>>2);let F;if(z.length<2e7)for(var Y=0;Y<E;Y+=4)F=S(H,L=z[Y]*(1/255),X=z[Y+1]*(1/255),J=z[Y+2]*(1/255),ee=z[Y+3]*(1/255)),O[Y>>2]=F.ind,U[Y>>2]=F.est.rgba;else for(Y=0;Y<E;Y+=4){var L=z[Y]*.00392156862745098,X=z[Y+1]*(1/255),J=z[Y+2]*(1/255),ee=z[Y+3]*(1/255);for(F=H;F.left;)F=C(F.est,L,X,J,ee)<=0?F.left:F.right;O[Y>>2]=F.ind,U[Y>>2]=F.est.rgba}return{abuf:I.buffer,inds:O,plte:G}}function w(R,N,z){z==null&&(z=1e-4);const I=new Uint32Array(R.buffer),U={i0:0,i1:R.length,bst:null,est:null,tdst:0,left:null,right:null};U.bst=D(R,U.i0,U.i1),U.est=M(U.bst);const q=[U];for(;q.length<N;){let G=0,E=0;for(var H=0;H<q.length;H++)q[H].est.L>G&&(G=q[H].est.L,E=H);if(G<z)break;const O=q[E],F=T(R,I,O.i0,O.i1,O.est.e,O.est.eMq255);if(O.i0>=F||O.i1<=F){O.est.L=0;continue}const Y={i0:O.i0,i1:F,bst:null,est:null,tdst:0,left:null,right:null};Y.bst=D(R,Y.i0,Y.i1),Y.est=M(Y.bst);const L={i0:F,i1:O.i1,bst:null,est:null,tdst:0,left:null,right:null};for(L.bst={R:[],m:[],N:O.bst.N-Y.bst.N},H=0;H<16;H++)L.bst.R[H]=O.bst.R[H]-Y.bst.R[H];for(H=0;H<4;H++)L.bst.m[H]=O.bst.m[H]-Y.bst.m[H];L.est=M(L.bst),O.left=Y,O.right=L,q[E]=Y,q.push(L)}for(q.sort(((G,E)=>E.bst.N-G.bst.N)),H=0;H<q.length;H++)q[H].ind=H;return[U,q]}function S(R,N,z,I,U){if(R.left==null)return R.tdst=(function(Y,L,X,J,ee){const ne=L-Y[0],W=X-Y[1],oe=J-Y[2],_e=ee-Y[3];return ne*ne+W*W+oe*oe+_e*_e})(R.est.q,N,z,I,U),R;const q=C(R.est,N,z,I,U);let H=R.left,G=R.right;q>0&&(H=R.right,G=R.left);const E=S(H,N,z,I,U);if(E.tdst<=q*q)return E;const O=S(G,N,z,I,U);return O.tdst<E.tdst?O:E}function C(R,N,z,I,U){const{e:q}=R;return q[0]*N+q[1]*z+q[2]*I+q[3]*U-R.eMq}function T(R,N,z,I,U,q){for(I-=4;z<I;){for(;B(R,z,U)<=q;)z+=4;for(;B(R,I,U)>q;)I-=4;if(z>=I)break;const H=N[z>>2];N[z>>2]=N[I>>2],N[I>>2]=H,z+=4,I-=4}for(;B(R,z,U)>q;)z-=4;return z+4}function B(R,N,z){return R[N]*z[0]+R[N+1]*z[1]+R[N+2]*z[2]+R[N+3]*z[3]}function D(R,N,z){const I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],U=[0,0,0,0],q=z-N>>2;for(let H=N;H<z;H+=4){const G=R[H]*.00392156862745098,E=R[H+1]*(1/255),O=R[H+2]*(1/255),F=R[H+3]*(1/255);U[0]+=G,U[1]+=E,U[2]+=O,U[3]+=F,I[0]+=G*G,I[1]+=G*E,I[2]+=G*O,I[3]+=G*F,I[5]+=E*E,I[6]+=E*O,I[7]+=E*F,I[10]+=O*O,I[11]+=O*F,I[15]+=F*F}return I[4]=I[1],I[8]=I[2],I[9]=I[6],I[12]=I[3],I[13]=I[7],I[14]=I[11],{R:I,m:U,N:q}}function M(R){const{R:N}=R,{m:z}=R,{N:I}=R,U=z[0],q=z[1],H=z[2],G=z[3],E=I==0?0:1/I,O=[N[0]-U*U*E,N[1]-U*q*E,N[2]-U*H*E,N[3]-U*G*E,N[4]-q*U*E,N[5]-q*q*E,N[6]-q*H*E,N[7]-q*G*E,N[8]-H*U*E,N[9]-H*q*E,N[10]-H*H*E,N[11]-H*G*E,N[12]-G*U*E,N[13]-G*q*E,N[14]-G*H*E,N[15]-G*G*E],F=O,Y=$;let L=[Math.random(),Math.random(),Math.random(),Math.random()],X=0,J=0;if(I!=0)for(let ne=0;ne<16&&(L=Y.multVec(F,L),J=Math.sqrt(Y.dot(L,L)),L=Y.sml(1/J,L),!(ne!=0&&Math.abs(J-X)<1e-9));ne++)X=J;const ee=[U*E,q*E,H*E,G*E];return{Cov:O,q:ee,e:L,L:X,eMq255:Y.dot(Y.sml(255,ee),L),eMq:Y.dot(L,ee),rgba:(Math.round(255*ee[3])<<24|Math.round(255*ee[2])<<16|Math.round(255*ee[1])<<8|Math.round(255*ee[0])<<0)>>>0}}var $={multVec:(R,N)=>[R[0]*N[0]+R[1]*N[1]+R[2]*N[2]+R[3]*N[3],R[4]*N[0]+R[5]*N[1]+R[6]*N[2]+R[7]*N[3],R[8]*N[0]+R[9]*N[1]+R[10]*N[2]+R[11]*N[3],R[12]*N[0]+R[13]*N[1]+R[14]*N[2]+R[15]*N[3]],dot:(R,N)=>R[0]*N[0]+R[1]*N[1]+R[2]*N[2]+R[3]*N[3],sml:(R,N)=>[R*N[0],R*N[1],R*N[2],R*N[3]]};Bs.encode=function(N,z,I,U,q,H,G){U==null&&(U=0),G==null&&(G=!1);const E=p(N,z,I,U,[!1,!1,!1,0,G,!1]);return m(E,-1),h(E,z,I,q,H)},Bs.encodeLL=function(N,z,I,U,q,H,G,E){const O={ctype:0+(U==1?0:2)+(q==0?0:4),depth:H,frames:[]},F=(U+q)*H,Y=F*z;for(let L=0;L<N.length;L++)O.frames.push({rect:{x:0,y:0,width:z,height:I},img:new Uint8Array(N[L]),blend:0,dispose:1,bpp:Math.ceil(F/8),bpl:Math.ceil(Y/8)});return m(O,0,!0),h(O,z,I,G,E)},Bs.encode.compress=p,Bs.encode.dither=u,Bs.quantize=j,Bs.quantize.getKDtree=w,Bs.quantize.getNearest=S})();const D1={toArrayBuffer(n,e){const t=n.width,i=n.height,a=t<<2,o=n.getContext("2d").getImageData(0,0,t,i),l=new Uint32Array(o.data.buffer),u=(32*t+31)/32<<2,h=u*i,m=122+h,p=new ArrayBuffer(m),g=new DataView(p),_=1<<20;let y,x,j,w,S=_,C=0,T=0,B=0;function D(R){g.setUint16(T,R,!0),T+=2}function M(R){g.setUint32(T,R,!0),T+=4}function $(R){T+=R}D(19778),M(m),$(4),M(122),M(108),M(t),M(-i>>>0),D(1),D(32),M(3),M(h),M(2835),M(2835),$(8),M(16711680),M(65280),M(255),M(4278190080),M(1466527264),(function R(){for(;C<i&&S>0;){for(w=122+C*u,y=0;y<a;)S--,x=l[B++],j=x>>>24,g.setUint32(w+y,x<<8|j),y+=4;C++}B<l.length?(S=_,setTimeout(R,D1._dly)):e(p)})()},toBlob(n,e){this.toArrayBuffer(n,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var Fn={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},QL={[Fn.CHROME]:16384,[Fn.FIREFOX]:11180,[Fn.DESKTOP_SAFARI]:16384,[Fn.IE]:8192,[Fn.IOS]:4096,[Fn.ETC]:8192};const xp=typeof window<"u",B1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,ad=xp&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),ZL=(xp||B1)&&(ad&&ad.getOriginalSymbol(window,"File")||typeof File<"u"&&File),L1=(xp||B1)&&(ad&&ad.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function wp(n,e,t=Date.now()){return new Promise((i=>{const a=n.split(","),o=a[0].match(/:(.*?);/)[1],l=globalThis.atob(a[1]);let u=l.length;const h=new Uint8Array(u);for(;u--;)h[u]=l.charCodeAt(u);const m=new Blob([h],{type:o});m.name=e,m.lastModified=t,i(m)}))}function P1(n){return new Promise(((e,t)=>{const i=new L1;i.onload=()=>e(i.result),i.onerror=a=>t(a),i.readAsDataURL(n)}))}function I1(n){return new Promise(((e,t)=>{const i=new Image;i.onload=()=>e(i),i.onerror=a=>t(a),i.src=n}))}function Va(){if(Va.cachedResult!==void 0)return Va.cachedResult;let n=Fn.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=Fn.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=Fn.IOS:/Safari/i.test(e)?n=Fn.DESKTOP_SAFARI:/Firefox/i.test(e)?n=Fn.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=Fn.IE),Va.cachedResult=n,Va.cachedResult}function U1(n,e){const t=Va(),i=QL[t];let a=n,o=e,l=a*o;const u=a>o?o/a:a/o;for(;l>i*i;){const h=(i+a)/2,m=(i+o)/2;h<m?(o=m,a=m*u):(o=h*u,a=h),l=a*o}return{width:a,height:o}}function pd(n,e){let t,i;try{if(t=new OffscreenCanvas(n,e),i=t.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),i=t.getContext("2d")}return t.width=n,t.height=e,[t,i]}function z1(n,e){const{width:t,height:i}=U1(n.width,n.height),[a,o]=pd(t,i);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,a.width,a.height)),o.drawImage(n,0,0,a.width,a.height),a}function qu(){return qu.cachedResult!==void 0||(qu.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),qu.cachedResult}function rd(n,e={}){return new Promise((function(t,i){let a,o;var l=function(){try{return o=z1(a,e.fileType||n.type),t([a,o])}catch(h){return i(h)}},u=function(h){try{var m=function(p){try{throw p}catch(g){return i(g)}};try{let p;return P1(n).then((function(g){try{return p=g,I1(p).then((function(_){try{return a=_,(function(){try{return l()}catch(y){return i(y)}})()}catch(y){return m(y)}}),m)}catch(_){return m(_)}}),m)}catch(p){m(p)}}catch(p){return i(p)}};try{if(qu()||[Fn.DESKTOP_SAFARI,Fn.MOBILE_SAFARI].includes(Va()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then((function(h){try{return a=h,l()}catch{return u()}}),u)}catch{u()}}))}function od(n,e,t,i,a=1){return new Promise((function(o,l){let u;if(e==="image/png"){let m,p,g;return m=n.getContext("2d"),{data:p}=m.getImageData(0,0,n.width,n.height),g=Bs.encode([p.buffer],n.width,n.height,4096*a),u=new Blob([g],{type:e}),u.name=t,u.lastModified=i,h.call(this)}{let m=function(){return h.call(this)};if(e==="image/bmp")return new Promise((p=>D1.toBlob(n,p))).then((function(p){try{return u=p,u.name=t,u.lastModified=i,m.call(this)}catch(g){return l(g)}}).bind(this),l);{let p=function(){return m.call(this)};if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:a}).then((function(g){try{return u=g,u.name=t,u.lastModified=i,p.call(this)}catch(_){return l(_)}}).bind(this),l);{let g;return g=n.toDataURL(e,a),wp(g,t,i).then((function(_){try{return u=_,p.call(this)}catch(y){return l(y)}}).bind(this),l)}}}function h(){return o(u)}}))}function ei(n){n.width=0,n.height=0}function no(){return new Promise((function(n,e){let t,i,a,o;return no.cachedResult!==void 0?n(no.cachedResult):wp("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(l){try{return t=l,rd(t).then((function(u){try{return i=u[1],od(i,t.type,t.name,t.lastModified).then((function(h){try{return a=h,ei(i),rd(a).then((function(m){try{return o=m[0],no.cachedResult=o.width===1&&o.height===2,n(no.cachedResult)}catch(p){return e(p)}}),e)}catch(m){return e(m)}}),e)}catch(h){return e(h)}}),e)}catch(u){return e(u)}}),e)}))}function $1(n){return new Promise(((e,t)=>{const i=new L1;i.onload=a=>{const o=new DataView(a.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const l=o.byteLength;let u=2;for(;u<l;){if(o.getUint16(u+2,!1)<=8)return e(-1);const h=o.getUint16(u,!1);if(u+=2,h==65505){if(o.getUint32(u+=2,!1)!=1165519206)return e(-1);const m=o.getUint16(u+=6,!1)==18761;u+=o.getUint32(u+4,m);const p=o.getUint16(u,m);u+=2;for(let g=0;g<p;g++)if(o.getUint16(u+12*g,m)==274)return e(o.getUint16(u+12*g+8,m))}else{if((65280&h)!=65280)break;u+=o.getUint16(u,!1)}}return e(-1)},i.onerror=a=>t(a),i.readAsArrayBuffer(n)}))}function H1(n,e){const{width:t}=n,{height:i}=n,{maxWidthOrHeight:a}=e;let o,l=n;return isFinite(a)&&(t>a||i>a)&&([l,o]=pd(t,i),t>i?(l.width=a,l.height=i/t*a):(l.width=t/i*a,l.height=a),o.drawImage(n,0,0,l.width,l.height),ei(n)),l}function q1(n,e){const{width:t}=n,{height:i}=n,[a,o]=pd(t,i);switch(e>4&&e<9?(a.width=i,a.height=t):(a.width=t,a.height=i),e){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,i);break;case 4:o.transform(1,0,0,-1,0,i);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,i,0);break;case 7:o.transform(0,-1,-1,0,i,t);break;case 8:o.transform(0,-1,1,0,0,t)}return o.drawImage(n,0,0,t,i),ei(n),a}function Sb(n,e,t=0){return new Promise((function(i,a){let o,l,u,h,m,p,g,_,y,x,j,w,S,C,T,B,D,M,$,R;function N(I=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=I,e.onProgress(Math.min(o,100))}function z(I){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(I,o),100),e.onProgress(o)}return o=t,l=e.maxIteration||10,u=1024*e.maxSizeMB*1024,N(),rd(n,e).then((function(I){try{return[,h]=I,N(),m=H1(h,e),N(),new Promise((function(U,q){var H;if(!(H=e.exifOrientation))return $1(n).then((function(E){try{return H=E,G.call(this)}catch(O){return q(O)}}).bind(this),q);function G(){return U(H)}return G.call(this)})).then((function(U){try{return p=U,N(),no().then((function(q){try{return g=q?m:q1(m,p),N(),_=e.initialQuality||1,y=e.fileType||n.type,od(g,y,n.name,n.lastModified,_).then((function(H){try{{let E=function(){if(l--&&(T>u||T>S)){let F,Y;return F=R?.95*$.width:$.width,Y=R?.95*$.height:$.height,[D,M]=pd(F,Y),M.drawImage($,0,0,F,Y),_*=y==="image/png"?.85:.95,od(D,y,n.name,n.lastModified,_).then((function(L){try{return B=L,ei($),$=D,T=B.size,z(Math.min(99,Math.floor((C-T)/(C-u)*100))),E}catch(X){return a(X)}}),a)}return[1]},O=function(){return ei($),ei(D),ei(m),ei(g),ei(h),z(100),i(B)};if(x=H,N(),j=x.size>u,w=x.size>n.size,!j&&!w)return z(100),i(x);var G;return S=n.size,C=x.size,T=C,$=g,R=!e.alwaysKeepResolution&&j,(G=(function(F){for(;F;){if(F.then)return void F.then(G,a);try{if(F.pop){if(F.length)return F.pop()?O.call(this):F;F=E}else F=F.call(this)}catch(Y){return a(Y)}}}).bind(this))(E)}}catch(E){return a(E)}}).bind(this),a)}catch(H){return a(H)}}).bind(this),a)}catch(q){return a(q)}}).bind(this),a)}catch(U){return a(U)}}).bind(this),a)}))}const JL=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let dm;function e8(n,e){return new Promise(((t,i)=>{dm||(dm=(function(l){const u=[];return u.push(l),URL.createObjectURL(new Blob(u))})(JL));const a=new Worker(dm);a.addEventListener("message",(function(l){if(e.signal&&e.signal.aborted)a.terminate();else if(l.data.progress===void 0){if(l.data.error)return i(new Error(l.data.error)),void a.terminate();t(l.data.file),a.terminate()}else e.onProgress(l.data.progress)})),a.addEventListener("error",i),e.signal&&e.signal.addEventListener("abort",(()=>{i(e.signal.reason),a.terminate()})),a.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function wn(n,e){return new Promise((function(t,i){let a,o,l,u,h,m;if(a={...e},l=0,{onProgress:u}=a,a.maxSizeMB=a.maxSizeMB||Number.POSITIVE_INFINITY,h=typeof a.useWebWorker!="boolean"||a.useWebWorker,delete a.useWebWorker,a.onProgress=y=>{l=y,typeof u=="function"&&u(l)},!(n instanceof Blob||n instanceof ZL))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return i(new Error("The file given is not an image"));if(m=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!h||typeof Worker!="function"||m)return Sb(n,a).then((function(y){try{return o=y,_.call(this)}catch(x){return i(x)}}).bind(this),i);var p=(function(){try{return _.call(this)}catch(y){return i(y)}}).bind(this),g=function(y){try{return Sb(n,a).then((function(x){try{return o=x,p()}catch(j){return i(j)}}),i)}catch(x){return i(x)}};try{return a.libURL=a.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",e8(n,a).then((function(y){try{return o=y,p()}catch{return g()}}),g)}catch{g()}function _(){try{o.name=n.name,o.lastModified=n.lastModified}catch{}try{a.preserveExif&&n.type==="image/jpeg"&&(!a.fileType||a.fileType&&a.fileType===n.type)&&(o=M1(n,o))}catch{}return t(o)}}))}wn.getDataUrlFromFile=P1,wn.getFilefromDataUrl=wp,wn.loadImage=I1,wn.drawImageInCanvas=z1,wn.drawFileInCanvas=rd,wn.canvasToFile=od,wn.getExifOrientation=$1,wn.handleMaxWidthOrHeight=H1,wn.followExifOrientation=q1,wn.cleanupCanvasMemory=ei,wn.isAutoOrientationInBrowser=no,wn.approximateBelowMaximumCanvasSizeOfBrowser=U1,wn.copyExifWithoutOrientation=M1,wn.getBrowserName=Va,wn.version="2.0.2";function t8({product:n,isOpen:e,onClose:t,onImagesUpdate:i}){const{showAlert:a}=ft(),[o,l]=A.useState([]),[u,h]=A.useState(null),[m,p]=A.useState(!1);if(A.useEffect(()=>{if(n){const x=[{id:"main",image_url:n.image_url,is_main:!0},...(n.product_images||[]).map(j=>({...j,is_main:!1}))].filter(j=>j.image_url);l(x)}},[n,e]),!e)return null;const g=x=>{x.target.files&&x.target.files[0]&&h(x.target.files[0])},_=async()=>{if(!u){a("Por favor, selecciona un archivo de imagen.");return}p(!0);try{const x={maxSizeMB:.5,maxWidthOrHeight:1024,useWebWorker:!0,fileType:"image/webp",initialQuality:.8};a("Comprimiendo y convirtiendo imagen...");const j=await wn(u,x),w=u.name.split(".").pop(),C=`products/${`${n.id}-${Date.now()}.webp`}`,{error:T}=await ae.storage.from("images").upload(C,j,{contentType:"image/webp"});if(T)throw T;const{data:{publicUrl:B}}=ae.storage.from("images").getPublicUrl(C),{error:D}=await ae.from("product_images").insert({product_id:n.id,image_url:B});if(D)throw D;h(null),document.getElementById("image-upload-input")&&(document.getElementById("image-upload-input").value=""),i(),a("Imagen aadida con xito.")}catch(x){a(`Error al aadir la imagen: ${x.message}`)}finally{p(!1)}},y=async(x,j)=>{if(j){a("No puedes eliminar la imagen principal desde aqu. Puedes cambiarla editando el producto.");return}if(!window.confirm("Ests seguro de que quieres eliminar esta imagen?"))return;p(!0);const{error:w}=await ae.from("product_images").delete().eq("id",x);w?a(`Error al eliminar la imagen: ${w.message}`):(i(),a("Imagen eliminada.")),p(!1)};return d.jsx("div",{className:za.overlay,onClick:t,children:d.jsxs("div",{className:za.modalContent,onClick:x=>x.stopPropagation(),children:[d.jsx("button",{onClick:t,className:za.closeButton,children:""}),d.jsxs("h2",{children:["Gestionar Imgenes de: ",n.name]}),d.jsxs("div",{className:za.addImageForm,children:[d.jsx("input",{id:"image-upload-input",type:"file",onChange:g,accept:"image/*"}),d.jsx("button",{onClick:_,disabled:m,children:m?"Subiendo...":"Aadir Imagen"})]}),d.jsxs("div",{className:za.imageList,children:[o.map(x=>d.jsxs("div",{className:za.imageItem,children:[d.jsx(bs,{src:x.image_url,alt:"Vista previa del producto"}),d.jsx("span",{children:x.is_main?"Principal":"Secundaria"}),!x.is_main&&d.jsx("button",{onClick:()=>y(x.id,x.is_main),disabled:m,className:za.deleteButton,children:"Eliminar"})]},x.id)),o.length===0&&d.jsx("p",{children:"Este producto an no tiene imgenes."})]})]})})}const n8="_overlay_a3iu6_1",s8="_modalContent_a3iu6_17",i8="_closeButton_a3iu6_43",a8="_mainLayout_a3iu6_63",r8="_formSection_a3iu6_79",o8="_categoryListSection_a3iu6_79",l8="_categoryList_a3iu6_79",c8="_categoryItem_a3iu6_119",u8="_categoryName_a3iu6_141",d8="_categoryActions_a3iu6_151",h8="_saveButton_a3iu6_163",f8="_cancelButton_a3iu6_163",m8="_editButton_a3iu6_163",p8="_deleteButton_a3iu6_163",g8="_formGroup_a3iu6_197",_8="_formActions_a3iu6_199",xn={overlay:n8,modalContent:s8,closeButton:i8,mainLayout:a8,formSection:r8,categoryListSection:o8,categoryList:l8,categoryItem:c8,categoryName:u8,categoryActions:d8,saveButton:h8,cancelButton:f8,editButton:m8,deleteButton:p8,formGroup:g8,formActions:_8},v8="_overlay_qqmix_1",y8="_modalContent_qqmix_27",b8="_formGroup_qqmix_63",x8="_buttons_qqmix_93",w8="_cancelButton_qqmix_107",S8="_confirmButton_qqmix_115",Xr={overlay:v8,modalContent:y8,formGroup:b8,buttons:x8,cancelButton:w8,confirmButton:S8};function C8({isOpen:n,onClose:e,onConfirm:t,categoryToDelete:i,otherCategories:a,productsCount:o}){const[l,u]=A.useState(a[0]?.id||"");if(!n)return null;const h=()=>{if(!l){alert("Por favor, selecciona una categora para reasignar los productos.");return}t(l)};return d.jsx("div",{className:Xr.overlay,children:d.jsxs("div",{className:Xr.modalContent,children:[d.jsx("h3",{children:"Accin Requerida"}),d.jsxs("p",{children:["No se puede eliminar la categora ",d.jsxs("strong",{children:['"',i?.name,'"']})," porque tiene ",d.jsx("strong",{children:o})," producto(s) asociado(s)."]}),d.jsx("p",{children:"Para continuar, por favor, reasigna estos productos a una nueva categora."}),d.jsxs("div",{className:Xr.formGroup,children:[d.jsx("label",{htmlFor:"reassign-category",children:"Reasignar a:"}),d.jsx("select",{id:"reassign-category",value:l,onChange:m=>u(m.target.value),children:a.map(m=>d.jsx("option",{value:m.id,children:m.name},m.id))})]}),d.jsxs("div",{className:Xr.buttons,children:[d.jsx("button",{onClick:e,className:Xr.cancelButton,children:"Cancelar"}),d.jsx("button",{onClick:h,className:Xr.confirmButton,children:"Reasignar y Eliminar"})]})]})})}function j8({isOpen:n,onClose:e,onCategoriesUpdate:t}){const{showAlert:i}=ft(),[a,o]=A.useState([]),[l,u]=A.useState(!0),[h,m]=A.useState(!1),[p,g]=A.useState({id:null,name:"",description:""}),[_,y]=A.useState(null),[x,j]=A.useState(!1),[w,S]=A.useState(0);A.useEffect(()=>{n&&C()},[n]);const C=async()=>{u(!0);const{data:z,error:I}=await ae.from("categories").select("*").order("name");I?i("Error al cargar las categoras."):o(z),u(!1)},T=z=>{g({id:z.id,name:z.name,description:z.description||""})},B=async z=>{const{count:I,error:U}=await ae.from("products").select("id",{count:"exact"}).eq("category_id",z.id);if(U){i("No se pudo verificar los productos de la categora.");return}y(z),I>0?(S(I),j(!0)):j(!1)},D=async()=>{if(!_)return;const{error:z}=await ae.from("categories").delete().eq("id",_.id);i(z?`Error al eliminar: ${z.message}`:"Categora eliminada con xito."),y(null),C(),t()},M=async z=>{if(!_)return;const{error:I}=await ae.from("products").update({category_id:z}).eq("category_id",_.id);if(I){i(`Error al reasignar productos: ${I.message}`);return}const{error:U}=await ae.from("categories").delete().eq("id",_.id);i(U?`Productos reasignados, pero hubo un error al eliminar la categora: ${U.message}`:"Productos reasignados y categora eliminada con xito."),j(!1),y(null),C(),t()},$=()=>{g({id:null,name:"",description:""})},R=async z=>{if(z.preventDefault(),!p.name.trim()){i("El nombre de la categora es obligatorio.");return}m(!0);const I={name:On.sanitize(p.name),description:On.sanitize(p.description)};let U;p.id?{error:U}=await ae.from("categories").update(I).eq("id",p.id):{error:U}=await ae.from("categories").insert(I),U?i(`Error al guardar: ${U.message}`):(i(`Categora ${p.id?"actualizada":"creada"} con xito.`),$(),C(),t()),m(!1)};if(!n)return null;const N=a.filter(z=>z.id!==_?.id);return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:xn.overlay,onClick:e,children:d.jsxs("div",{className:xn.modalContent,onClick:z=>z.stopPropagation(),children:[d.jsx("button",{onClick:e,className:xn.closeButton,children:""}),d.jsx("h2",{children:"Administrar Categoras"}),d.jsxs("div",{className:xn.mainLayout,children:[d.jsxs("div",{className:xn.formSection,children:[d.jsx("h3",{children:p.id?"Editar Categora":"Crear Nueva"}),d.jsxs("form",{onSubmit:R,children:[d.jsxs("div",{className:xn.formGroup,children:[d.jsx("label",{htmlFor:"category-name",children:"Nombre"}),d.jsx("input",{id:"category-name",type:"text",value:p.name,onChange:z=>g({...p,name:z.target.value}),placeholder:"Ej: Bebidas",required:!0})]}),d.jsxs("div",{className:xn.formGroup,children:[d.jsx("label",{htmlFor:"category-desc",children:"Descripcin (Opcional)"}),d.jsx("textarea",{id:"category-desc",rows:"3",value:p.description,onChange:z=>g({...p,description:z.target.value}),placeholder:"Ej: Bebidas fras y calientes"})]}),d.jsxs("div",{className:xn.formActions,children:[p.id&&d.jsx("button",{type:"button",onClick:$,className:xn.cancelButton,children:"Cancelar Edicin"}),d.jsx("button",{type:"submit",disabled:h,className:xn.saveButton,children:h?"Guardando...":p.id?"Actualizar":"Crear"})]})]})]}),d.jsxs("div",{className:xn.categoryListSection,children:[d.jsx("h3",{children:"Categoras Existentes"}),l?d.jsx(Vt,{}):d.jsx("div",{className:xn.categoryList,children:a.map(z=>d.jsxs("div",{className:xn.categoryItem,children:[d.jsx("span",{className:xn.categoryName,children:z.name}),d.jsxs("div",{className:xn.categoryActions,children:[d.jsx("button",{onClick:()=>T(z),className:xn.editButton,children:"Editar"}),d.jsx("button",{onClick:()=>B(z),className:xn.deleteButton,children:"Eliminar"})]})]},z.id))})]})]})]})}),d.jsxs(Di,{isOpen:!!_&&!x,onClose:()=>y(null),onConfirm:D,title:"Eliminar Categora?",children:['Ests a punto de eliminar la categora "',_?.name,'". Esta accin no se puede deshacer.']}),d.jsx(C8,{isOpen:x,onClose:()=>j(!1),onConfirm:M,categoryToDelete:_,otherCategories:N,productsCount:w})]})}const E8=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"#ffc107",stroke:"#ffc107",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),A8=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"#e74c3c",stroke:"#e74c3c",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),T8=({product:n,categoryName:e,onToggle:t,onEdit:i,onManageImages:a})=>{const{hasPermission:o}=si();return d.jsxs("div",{className:`${je.productCard} ${n.is_active?"":je.inactive}`,children:[d.jsxs("div",{className:je.imageContainer,children:[d.jsx(bs,{src:n.image_url||"https://placehold.co/300x200",alt:n.name}),d.jsxs("span",{className:je.imageCount,children:[1+(n.product_images?.length||0)," "]})]}),d.jsxs("div",{className:je.cardContent,children:[d.jsx("span",{className:je.categoryTag,children:e}),d.jsx("h3",{className:je.productName,children:n.name}),d.jsxs("div",{className:je.productStats,children:[d.jsxs("div",{className:je.statItem,children:[d.jsx("strong",{children:n.total_sold||0}),d.jsx("span",{children:"Vendidos"})]}),d.jsxs("div",{className:je.statItem,children:[d.jsxs("strong",{children:["$",(n.total_revenue||0).toFixed(2)]}),d.jsx("span",{children:"Ingresos"})]}),d.jsxs("div",{className:je.statItem,children:[d.jsxs("div",{className:je.iconStat,children:[d.jsx(E8,{}),d.jsx("strong",{children:n.avg_rating?.toFixed(1)||"N/A"})]}),d.jsxs("span",{children:["(",n.reviews_count||0," reseas)"]})]}),d.jsxs("div",{className:je.statItem,children:[d.jsxs("div",{className:je.iconStat,children:[d.jsx(A8,{}),d.jsx("strong",{children:n.favorites_count||0})]}),d.jsx("span",{children:"Favoritos"})]})]}),d.jsxs("div",{className:je.priceInfo,children:[d.jsxs("span",{className:je.price,children:["Precio: $",n.price.toFixed(2)]}),d.jsxs("span",{className:je.cost,children:["Costo: $",n.cost.toFixed(2)]})]})]}),d.jsxs("div",{className:je.cardActions,children:[o("productos.edit")&&d.jsx("button",{onClick:()=>i(n),className:je.editButton,children:"Editar"}),o("productos.edit")&&d.jsx("button",{onClick:()=>a(n),className:je.manageButton,children:"Imgenes"}),o("productos.edit")&&d.jsx("button",{onClick:()=>t(n.id,n.is_active),className:je.toggleButton,children:n.is_active?"Desactivar":"Activar"})]})]})},k8=({isOpen:n,onClose:e,onSave:t,categories:i,product:a})=>{const{showAlert:o}=ft(),[l,u]=A.useState({name:"",description:"",price:"",cost:"",category_id:""}),[h,m]=A.useState(null),[p,g]=A.useState(!1);if(A.useEffect(()=>{if(a){const{product_images:w,...S}=a;u(S)}else u({name:"",description:"",price:"",cost:"",category_id:"",image_url:""});m(null)},[a,n]),!n)return null;const _=w=>{const{name:S,value:C}=w.target;u(T=>({...T,[S]:C}))},y=async w=>{const S=w.target.files[0];if(!S)return;const C={maxSizeMB:1,maxWidthOrHeight:1024,useWebWorker:!0,fileType:"image/webp",initialQuality:.8};try{o("Comprimiendo imagen, por favor espera...");const T=await wn(S,C);m(T),o("Imagen lista para subir!")}catch(T){console.error(T),o("Hubo un error al comprimir la imagen. Intenta con otra."),m(null)}},x=async w=>{w.name.split(".").pop();const C=`products/${`${Date.now()}.webp`}`,{error:T}=await ae.storage.from("images").upload(C,w,{contentType:"image/webp"});if(T)throw T;const{data:{publicUrl:B}}=ae.storage.from("images").getPublicUrl(C);return B},j=async w=>{w.preventDefault(),g(!0);try{let S=l.image_url;h&&(S=await x(h));const C={...l,name:On.sanitize(l.name),description:On.sanitize(l.description),image_url:S};await t(C)}catch(S){o(`Error al subir la imagen: ${S.message}`)}finally{g(!1)}};return d.jsx("div",{className:je.modalOverlay,children:d.jsxs("div",{className:je.modalContent,children:[d.jsxs("h2",{children:[a?"Editar":"Crear"," Producto"]}),d.jsxs("form",{onSubmit:j,className:je.productForm,children:[d.jsxs("div",{className:je.formGroup,children:[d.jsx("label",{htmlFor:"name",children:"Nombre del Producto"}),d.jsx("input",{id:"name",name:"name",value:l.name,onChange:_,required:!0})]}),d.jsxs("div",{className:je.formGroup,children:[d.jsx("label",{htmlFor:"description",children:"Descripcin"}),d.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:_})]}),d.jsxs("div",{className:je.formGrid,children:[d.jsxs("div",{className:je.formGroup,children:[d.jsx("label",{htmlFor:"price",children:"Precio"}),d.jsx("input",{id:"price",name:"price",type:"number",step:"0.01",value:l.price,onChange:_,required:!0})]}),d.jsxs("div",{className:je.formGroup,children:[d.jsx("label",{htmlFor:"cost",children:"Costo"}),d.jsx("input",{id:"cost",name:"cost",type:"number",step:"0.01",value:l.cost,onChange:_,required:!0})]})]}),d.jsxs("div",{className:je.formGroup,children:[d.jsx("label",{htmlFor:"category_id",children:"Categora"}),d.jsxs("select",{id:"category_id",name:"category_id",value:l.category_id,onChange:_,required:!0,children:[d.jsx("option",{value:"",children:"Selecciona una Categora"}),i.map(w=>d.jsx("option",{value:w.id,children:w.name},w.id))]})]}),d.jsxs("div",{className:je.formGroup,children:[d.jsx("label",{htmlFor:"imageFile",children:"Imagen Principal"}),d.jsx("input",{id:"imageFile",name:"imageFile",type:"file",onChange:y,accept:"image/*"}),l.image_url&&!h&&d.jsx(bs,{src:l.image_url,alt:"preview",className:je.imagePreview})]}),d.jsxs("div",{className:je.modalActions,children:[d.jsx("button",{type:"button",onClick:e,className:je.cancelButton,children:"Cancelar"}),d.jsx("button",{type:"submit",className:je.saveButton,disabled:p,children:p?"Guardando...":"Guardar"})]})]})]})})};function O8(){const{showAlert:n}=ft(),[e,t]=A.useState([]),[i,a]=A.useState([]),[o,l]=A.useState(!0),[u,h]=A.useState(!1),[m,p]=A.useState(!1),[g,_]=A.useState(!1),[y,x]=A.useState(null),[j,w]=A.useState(""),[S,C]=A.useState("all"),[T,B]=A.useState("all"),{hasPermission:D}=si(),M=A.useCallback(async()=>{const{data:q,error:H}=await ae.rpc("get_product_stats"),{data:G,error:E}=await ae.from("categories").select("*");H||E?(console.error(H||E),n("Error al cargar los datos de los productos.")):(t(q),a(G)),l(!1)},[n]);A.useEffect(()=>{M();const q=ae.channel("public:products_admin").on("postgres_changes",{event:"*",schema:"public",table:"products"},M).on("postgres_changes",{event:"*",schema:"public",table:"product_images"},M).on("postgres_changes",{event:"*",schema:"public",table:"order_items"},M).on("postgres_changes",{event:"*",schema:"public",table:"product_reviews"},M).on("postgres_changes",{event:"*",schema:"public",table:"customer_favorites"},M).subscribe();return()=>ae.removeChannel(q)},[M]);const $=async q=>{const{total_sold:H,total_revenue:G,avg_rating:E,reviews_count:O,favorites_count:F,product_images:Y,...L}=q,{error:X}=await ae.from("products").upsert(L.id?L:[L]).select();X?n(`Error: ${X.message}`):(n(`Producto ${L.id?"actualizado":"creado"} con xito.`),M(),h(!1),x(null))},R=async(q,H)=>{const{error:G}=await ae.from("products").update({is_active:!H}).eq("id",q);G?n(`Error: ${G.message}`):M()},N=(q=null)=>{x(q),h(!0)},z=q=>{x(q),p(!0)},I=A.useMemo(()=>e.filter(q=>{const H=S==="all"||q.category_id===S,G=q.name.toLowerCase().includes(j.toLowerCase()),E=T==="all"||(T==="active"?q.is_active:!q.is_active);return H&&G&&E}),[e,j,S,T]),U=A.useMemo(()=>i.reduce((q,H)=>({...q,[H.id]:H.name}),{}),[i]);return o?d.jsx(Vt,{}):d.jsxs("div",{className:je.container,children:[d.jsxs("div",{className:je.header,children:[d.jsx("h1",{children:"Catlogo de Productos"}),d.jsxs("div",{className:je.headerActions,children:[D("productos.edit")&&d.jsx("button",{onClick:()=>_(!0),className:je.manageButton,children:"Administrar Categoras"}),D("productos.edit")&&d.jsx("button",{onClick:()=>N(null),className:je.addButton,children:"+ Aadir Producto"})]})]}),d.jsxs("div",{className:je.filters,children:[d.jsx("input",{type:"text",placeholder:"Buscar producto...",onChange:q=>w(q.target.value),className:je.searchInput}),d.jsxs("select",{onChange:q=>C(q.target.value),className:je.categorySelect,children:[d.jsx("option",{value:"all",children:"Todas las categoras"}),i.map(q=>d.jsx("option",{value:q.id,children:q.name},q.id))]}),d.jsxs("select",{onChange:q=>B(q.target.value),className:je.statusSelect,children:[d.jsx("option",{value:"all",children:"Todos los estados"}),d.jsx("option",{value:"active",children:"Activos"}),d.jsx("option",{value:"inactive",children:"Inactivos"})]})]}),d.jsx("div",{className:je.productGrid,children:I.map(q=>d.jsx(T8,{product:q,categoryName:U[q.category_id]||"N/A",onToggle:R,onEdit:N,onManageImages:z},q.id))}),d.jsx(k8,{isOpen:u,onClose:()=>{h(!1),x(null)},onSave:$,categories:i,product:y}),y&&d.jsx(t8,{product:y,isOpen:m,onClose:()=>{p(!1),x(null)},onImagesUpdate:M}),d.jsx(j8,{isOpen:g,onClose:()=>_(!1),onCategoriesUpdate:M})]})}const N8="_container_1ufe7_1",R8="_header_1ufe7_9",M8="_addButton_1ufe7_41",D8="_searchContainer_1ufe7_75",B8="_searchInput_1ufe7_81",L8="_customerGrid_1ufe7_93",P8="_customerCard_1ufe7_105",I8="_open_1ufe7_123",U8="_cardHeader_1ufe7_133",z8="_customerName_1ufe7_149",$8="_customerPhone_1ufe7_159",H8="_toggleButton_1ufe7_169",q8="_detailsContent_1ufe7_211",F8="_statsSection_1ufe7_241",G8="_statItem_1ufe7_259",V8="_infoSection_1ufe7_291",Y8="_orderHistoryContainer_1ufe7_365",W8="_orderFilter_1ufe7_375",X8="_activeFilter_1ufe7_407",K8="_orderAccordion_1ufe7_419",Q8="_orderItem_1ufe7_431",Z8="_orderHeader_1ufe7_445",J8="_orderHeaderInfo_1ufe7_459",e6="_orderToggle_1ufe7_471",t6="_orderDetails_1ufe7_487",n6="_orderTotal_1ufe7_543",s6="_cancellationReason_1ufe7_557",i6="_status_1ufe7_589",a6="_pendiente_1ufe7_609",r6="_en_proceso_1ufe7_611",o6="_completado_1ufe7_613",l6="_cancelado_1ufe7_615",c6="_noResults_1ufe7_619",u6="_modalOverlay_1ufe7_635",d6="_modalContent_1ufe7_647",h6="_formGroup_1ufe7_675",f6="_modalActions_1ufe7_693",m6="_cancelButton_1ufe7_705",p6="_saveButton_1ufe7_721",Ee={container:N8,header:R8,addButton:M8,searchContainer:D8,searchInput:B8,customerGrid:L8,customerCard:P8,open:I8,cardHeader:U8,customerName:z8,customerPhone:$8,toggleButton:H8,detailsContent:q8,statsSection:F8,statItem:G8,infoSection:V8,orderHistoryContainer:Y8,orderFilter:W8,activeFilter:X8,orderAccordion:K8,orderItem:Q8,orderHeader:Z8,orderHeaderInfo:J8,orderToggle:e6,orderDetails:t6,orderTotal:n6,cancellationReason:s6,status:i6,pendiente:a6,en_proceso:r6,completado:o6,cancelado:l6,noResults:c6,modalOverlay:u6,modalContent:d6,formGroup:h6,modalActions:f6,cancelButton:m6,saveButton:p6},g6=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),_6=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),d.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),v6=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),d.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),y6=({orders:n})=>{const[e,t]=A.useState("activos"),[i,a]=A.useState(null),[o,l]=A.useState({}),[u,h]=A.useState(!1),m=A.useMemo(()=>e==="activos"?n.filter(g=>g.status==="pendiente"||g.status==="en_proceso"):e==="completados"?n.filter(g=>g.status==="completado"):n,[n,e]),p=async g=>{const _=i===g?null:g;if(a(_),_&&!o[_]){h(!0);const{data:y,error:x}=await ae.from("order_items").select("*, products(name)").eq("order_id",_);x?console.error("Error fetching order items:",x):l(j=>({...j,[_]:y})),h(!1)}};return n.length===0?d.jsx("p",{children:"Este cliente no ha realizado ningn pedido."}):d.jsxs("div",{className:Ee.orderHistoryContainer,children:[d.jsxs("div",{className:Ee.orderFilter,children:[d.jsx("button",{onClick:()=>t("activos"),className:e==="activos"?Ee.activeFilter:"",children:"Activos"}),d.jsx("button",{onClick:()=>t("completados"),className:e==="completados"?Ee.activeFilter:"",children:"Completados"}),d.jsx("button",{onClick:()=>t("todos"),className:e==="todos"?Ee.activeFilter:"",children:"Todos"})]}),d.jsx("div",{className:Ee.orderAccordion,children:m.length>0?m.map(g=>d.jsxs("div",{className:`${Ee.orderItem} ${i===g.id?Ee.open:""}`,children:[d.jsxs("div",{className:Ee.orderHeader,onClick:()=>p(g.id),children:[d.jsxs("span",{children:["#",g.order_code," - ",new Date(g.created_at).toLocaleDateString()]}),d.jsxs("div",{className:Ee.orderHeaderInfo,children:[d.jsx("span",{className:`${Ee.status} ${Ee[g.status]}`,children:g.status.replace("_"," ")}),d.jsx("span",{className:Ee.orderToggle,children:"+"})]})]}),d.jsx("div",{className:Ee.orderDetails,children:u&&i===g.id?d.jsx(Vt,{}):d.jsxs(d.Fragment,{children:[d.jsxs("ul",{children:[o[g.id]?.map(_=>d.jsxs("li",{children:[d.jsxs("span",{children:[_.quantity,"x ",_.products?.name||"Producto no disponible"]}),d.jsxs("span",{children:["$",(_.price*_.quantity).toFixed(2)]})]},_.id)),d.jsxs("li",{className:Ee.orderTotal,children:[d.jsx("strong",{children:"Total:"}),d.jsxs("strong",{children:["$",g.total_amount.toFixed(2)]})]})]}),g.status==="cancelado"&&g.cancellation_reason&&d.jsxs("p",{className:Ee.cancellationReason,children:[d.jsx("strong",{children:"Motivo:"})," ",g.cancellation_reason]})]})})]},g.id)):d.jsx("p",{className:Ee.noResults,children:"No hay pedidos que coincidan con el filtro."})})]})},b6=({isOpen:n,onClose:e,onSave:t})=>{const[i,a]=A.useState(""),[o,l]=A.useState(""),[u,h]=A.useState(!1),m=async p=>{p.preventDefault(),h(!0),await t({name:On.sanitize(i),phone:On.sanitize(o)}),h(!1),a(""),l(""),e()};return n?d.jsx("div",{className:Ee.modalOverlay,children:d.jsxs("div",{className:Ee.modalContent,children:[d.jsx("h2",{children:"Crear Nuevo Cliente"}),d.jsxs("form",{onSubmit:m,children:[d.jsxs("div",{className:Ee.formGroup,children:[d.jsx("label",{htmlFor:"name",children:"Nombre Completo"}),d.jsx("input",{id:"name",type:"text",value:i,onChange:p=>a(p.target.value),required:!0})]}),d.jsxs("div",{className:Ee.formGroup,children:[d.jsx("label",{htmlFor:"phone",children:"Telfono (10 dgitos)"}),d.jsx("input",{id:"phone",type:"tel",value:o,onChange:p=>l(p.target.value.replace(/\D/g,"")),maxLength:"10",required:!0})]}),d.jsxs("div",{className:Ee.modalActions,children:[d.jsx("button",{type:"button",onClick:e,className:Ee.cancelButton,children:"Cancelar"}),d.jsx("button",{type:"submit",className:Ee.saveButton,disabled:u,children:u?"Guardando...":"Guardar Cliente"})]})]})]})}):null};function x6(){const[n,e]=A.useState([]),[t,i]=A.useState(!0),[a,o]=A.useState(null),[l,u]=A.useState(""),[h,m]=A.useState(!1),{showAlert:p}=ft(),{hasPermission:g}=si(),_=A.useCallback(async()=>{const{data:S,error:C}=await ae.from("customers").select(`
        *,
        addresses:customer_addresses ( id, label, address_reference, is_default ),
        favorites:customer_favorites ( product_id ),
        orders ( id, order_code, total_amount, status, created_at, cancellation_reason )
      `).order("created_at",{ascending:!1}).order("created_at",{foreignTable:"orders",ascending:!1});C?(console.error("Error fetching customers:",C),p(`Error al cargar clientes: ${C.message}`)):e(S),i(!1)},[p]);A.useEffect(()=>{_();const S=ae.channel("public:customers_admin").on("postgres_changes",{event:"*",schema:"public",table:"customers"},_).on("postgres_changes",{event:"*",schema:"public",table:"customer_addresses"},_).on("postgres_changes",{event:"*",schema:"public",table:"orders"},_).subscribe();return()=>{ae.removeChannel(S)}},[_]);const y=async S=>{if(!S.name||!S.phone){p("El nombre y el telfono son obligatorios.");return}if(S.phone.length!==10){p("El nmero de telfono debe tener 10 dgitos.");return}const{error:C}=await ae.from("customers").insert(S);C?p(`Error al crear cliente: ${C.message}`):(p("Cliente creado con xito!"),_())},x=S=>{o(C=>C===S?null:S)},j=n.filter(S=>S.name.toLowerCase().includes(l.toLowerCase())||S.phone.includes(l)),w=A.useMemo(()=>{const S={};if(a){const C=n.find(T=>T.id===a);C&&(S.lifetimeValue=C.orders.filter(T=>T.status==="completado").reduce((T,B)=>T+B.total_amount,0),S.lastOrderDate=C.orders.length>0?new Date(C.orders[0].created_at).toLocaleDateString():"N/A")}return S},[a,n]);return t?d.jsx(Vt,{}):d.jsxs("div",{className:Ee.container,children:[d.jsxs("div",{className:Ee.header,children:[d.jsxs("h1",{children:[d.jsx(g6,{})," Clientes (",j.length,")"]}),g("clientes.edit")&&d.jsx("button",{onClick:()=>m(!0),className:Ee.addButton,children:"+ Aadir Cliente"})]}),d.jsx("div",{className:Ee.searchContainer,children:d.jsx("input",{type:"text",placeholder:"Buscar cliente por nombre o telfono...",value:l,onChange:S=>u(S.target.value),className:Ee.searchInput})}),j.length>0?d.jsx("div",{className:Ee.customerGrid,children:j.map(S=>d.jsxs("div",{className:`${Ee.customerCard} ${a===S.id?Ee.open:""}`,children:[d.jsxs("div",{className:Ee.cardHeader,onClick:()=>x(S.id),children:[d.jsxs("div",{children:[d.jsx("h3",{className:Ee.customerName,children:S.name}),d.jsx("span",{className:Ee.customerPhone,children:S.phone})]}),d.jsx("button",{className:Ee.toggleButton,children:a===S.id?"":"+"})]}),d.jsxs("div",{className:Ee.detailsContent,children:[d.jsxs("div",{className:Ee.statsSection,children:[d.jsxs("div",{className:Ee.statItem,children:[d.jsx("span",{children:"Valor Total"}),d.jsxs("strong",{children:["$",w.lifetimeValue?.toFixed(2)||"0.00"]})]}),d.jsxs("div",{className:Ee.statItem,children:[d.jsx("span",{children:"Total Pedidos"}),d.jsx("strong",{children:S.orders.length})]}),d.jsxs("div",{className:Ee.statItem,children:[d.jsx("span",{children:"ltimo Pedido"}),d.jsx("strong",{children:w.lastOrderDate||"N/A"})]}),d.jsxs("div",{className:Ee.statItem,children:[d.jsx("span",{children:"Favoritos"}),d.jsx("strong",{children:S.favorites.length})]})]}),d.jsxs("div",{className:Ee.infoSection,children:[d.jsxs("h4",{children:[d.jsx(_6,{})," Direcciones (",S.addresses.length,")"]}),S.addresses.length>0?d.jsx("ul",{children:S.addresses.map(C=>d.jsxs("li",{children:[C.label," ",C.is_default&&d.jsx("span",{children:"(Predeterminada)"}),d.jsx("p",{children:C.address_reference||"Sin referencia"})]},C.id))}):d.jsx("p",{children:"No hay direcciones guardadas."})]}),d.jsxs("div",{className:Ee.infoSection,children:[d.jsxs("h4",{children:[d.jsx(v6,{})," Historial de Pedidos (",S.orders.length,")"]}),d.jsx(y6,{orders:S.orders})]})]})]},S.id))}):d.jsx("p",{className:Ee.noResults,children:"No se encontraron clientes que coincidan con la bsqueda."}),d.jsx(b6,{isOpen:h,onClose:()=>m(!1),onSave:y})]})}const w6="_container_s7zti_1",S6="_formGrid_s7zti_15",C6="_formGroup_s7zti_29",j6="_addButton_s7zti_53",E6="_toggleButton_s7zti_91",A6="_active_s7zti_125",T6="_inactive_s7zti_137",k6="_statusBadge_s7zti_149",O6="_statusActive_s7zti_171",N6="_statusInactive_s7zti_179",R6="_typeBadge_s7zti_187",M6="_fullWidth_s7zti_213",D6="_checkboxLabel_s7zti_219",Qt={container:w6,formGrid:S6,formGroup:C6,addButton:j6,toggleButton:E6,active:A6,inactive:T6,statusBadge:k6,statusActive:O6,statusInactive:N6,typeBadge:R6,fullWidth:M6,checkboxLabel:D6};function B6(){const{showAlert:n}=ft(),{hasPermission:e}=si(),[t,i]=A.useState([]),[a,o]=A.useState([]),[l,u]=A.useState([]),[h,m]=A.useState(!0),[p,g]=A.useState({code:"",type:"global",value:"",target_id:null,start_date:"",end_date:"",is_active:!0,is_single_use:!1}),_=e("descuentos.edit"),y=A.useCallback(async()=>{m(!0);try{const C=ae.from("discounts").select("*").order("created_at",{ascending:!1}),T=ae.from("categories").select("*"),B=ae.from("products").select("id, name"),[D,M,$]=await Promise.all([C,T,B]);if(D.error)throw D.error;if(M.error)throw M.error;if($.error)throw $.error;i(D.data),o(M.data),u($.data)}catch(C){n(`Error al cargar datos: ${C.message}`)}finally{m(!1)}},[n]);A.useEffect(()=>{y();const C=ae.channel("public:discounts").on("postgres_changes",{event:"*",schema:"public",table:"discounts"},T=>{console.log("Change detected in discounts!",T),y()}).subscribe();return()=>{ae.removeChannel(C)}},[y]);const x=()=>!p.code||!p.value?(n("El cdigo y el valor en % son obligatorios."),!1):p.type!=="global"&&!p.target_id?(n("Debe seleccionar un producto o categora para este tipo de descuento."),!1):p.start_date&&p.end_date&&p.end_date<p.start_date?(n("La fecha final no puede ser anterior a la inicial."),!1):!0,j=async()=>{if(!_||!x())return;const C={...p,target_id:p.target_id||null,start_date:p.start_date||null,end_date:p.end_date||null},{error:T}=await ae.from("discounts").insert([C]);T?n(`Error al crear el descuento: ${T.message}`):(n("Descuento creado con xito!"),g({code:"",type:"global",value:"",target_id:null,start_date:"",end_date:"",is_active:!0,is_single_use:!1}),y())},w=async(C,T)=>{if(!_)return;const{error:B}=await ae.from("discounts").update({is_active:!T}).eq("id",C);B?n(`Error al actualizar: ${B.message}`):(n("Estado del descuento actualizado."),y())},S=C=>C.type==="global"?"Toda la tienda":C.type==="category"?a.find(T=>T.id===C.target_id)?.name||"Categora no encontrada":C.type==="product"?l.find(T=>T.id===C.target_id)?.name||"Producto no encontrado":"N/A";return h?d.jsx(Vt,{}):d.jsxs("div",{className:Qt.container,children:[d.jsx("h1",{children:"Gestin de Descuentos"}),_&&d.jsxs("div",{className:"form-container",children:[d.jsx("h3",{children:"Crear Nuevo Descuento"}),d.jsxs("div",{className:Qt.formGrid,children:[d.jsxs("div",{className:Qt.formGroup,children:[d.jsx("label",{htmlFor:"code",children:"Cdigo"}),d.jsx("input",{id:"code",type:"text",placeholder:"Ej: BIENVENIDO10",value:p.code,onChange:C=>g({...p,code:C.target.value.toUpperCase()})})]}),d.jsxs("div",{className:Qt.formGroup,children:[d.jsx("label",{htmlFor:"value",children:"Valor (%)"}),d.jsx("input",{id:"value",type:"number",placeholder:"Ej: 15",value:p.value,onChange:C=>g({...p,value:C.target.value})})]}),d.jsxs("div",{className:Qt.formGroup,children:[d.jsx("label",{htmlFor:"type",children:"Tipo de Descuento"}),d.jsxs("select",{id:"type",value:p.type,onChange:C=>g({...p,type:C.target.value,target_id:""}),children:[d.jsx("option",{value:"global",children:"Global"}),d.jsx("option",{value:"category",children:"Por Categora"}),d.jsx("option",{value:"product",children:"Por Producto"})]})]}),p.type!=="global"&&d.jsxs("div",{className:Qt.formGroup,children:[d.jsx("label",{htmlFor:"target_id",children:p.type==="category"?"Categora":"Producto"}),d.jsxs("select",{id:"target_id",value:p.target_id,onChange:C=>g({...p,target_id:C.target.value}),children:[d.jsx("option",{value:"",children:"Selecciona una opcin"}),(p.type==="category"?a:l).map(C=>d.jsx("option",{value:C.id,children:C.name},C.id))]})]}),d.jsxs("div",{className:Qt.formGroup,children:[d.jsx("label",{htmlFor:"start_date",children:"Fecha de Inicio (Opcional)"}),d.jsx("input",{id:"start_date",type:"date",value:p.start_date,onChange:C=>g({...p,start_date:C.target.value})})]}),d.jsxs("div",{className:Qt.formGroup,children:[d.jsx("label",{htmlFor:"end_date",children:"Fecha de Fin (Opcional)"}),d.jsx("input",{id:"end_date",type:"date",value:p.end_date,onChange:C=>g({...p,end_date:C.target.value})})]}),d.jsx("div",{className:`${Qt.formGroup} ${Qt.fullWidth}`,children:d.jsxs("label",{className:Qt.checkboxLabel,children:[d.jsx("input",{type:"checkbox",checked:p.is_single_use,onChange:C=>g({...p,is_single_use:C.target.checked})}),"Es un cdigo de un solo uso por cliente"]})}),d.jsx("button",{onClick:j,className:Qt.addButton,children:"Crear Descuento"})]})]}),d.jsx("div",{className:"table-wrapper",children:d.jsxs("table",{className:"products-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Cdigo"}),d.jsx("th",{children:"Valor"}),d.jsx("th",{children:"Tipo"}),d.jsx("th",{children:"Objetivo"}),d.jsx("th",{children:"Fechas de validez"}),d.jsx("th",{children:"Estado"}),_&&d.jsx("th",{children:"Acciones"})]})}),d.jsx("tbody",{children:t.map(C=>d.jsxs("tr",{children:[d.jsx("td",{children:d.jsx("strong",{children:C.code})}),d.jsxs("td",{children:[C.value,"%"]}),d.jsx("td",{children:d.jsx("span",{className:`${Qt.statusBadge} ${Qt.typeBadge}`,children:C.type})}),d.jsx("td",{children:S(C)}),d.jsxs("td",{children:[C.start_date||"N/A"," - ",C.end_date||"N/A"]}),d.jsx("td",{children:C.is_single_use?"nico":"Mltiple"}),d.jsx("td",{children:d.jsx("span",{className:`${Qt.statusBadge} ${C.is_active?Qt.statusActive:Qt.statusInactive}`,children:C.is_active?"Activo":"Inactivo"})}),_&&d.jsx("td",{children:d.jsx("button",{onClick:()=>w(C.id,C.is_active),className:`${Qt.toggleButton} ${C.is_active?Qt.inactive:Qt.active}`,children:C.is_active?"Desactivar":"Activar"})})]},C.id))})]})})]})}const L6="_container_1m638_1",P6="_addButton_1m638_9",I6="_deleteButton_1m638_9",U6="_modalOverlay_1m638_51",z6="_modalContent_1m638_63",$6="_modalActions_1m638_111",Kr={container:L6,addButton:P6,deleteButton:I6,modalOverlay:U6,modalContent:z6,modalActions:$6};function H6(){const{showAlert:n}=ft(),{hasPermission:e}=si(),[t,i]=A.useState([]),[a,o]=A.useState(!0),[l,u]=A.useState(null),[h,m]=A.useState(!1),[p,g]=A.useState(null),_=e("terminos.edit"),y=e("terminos.delete"),x=async()=>{o(!0);const{data:C,error:T}=await ae.from("terms_and_conditions").select("*").order("version",{ascending:!1});T?(console.error("Error fetching terms:",T),n(T.message)):i(C),o(!1)};A.useEffect(()=>{x()},[]);const j=async()=>{if(_){if(!l?.content||!l?.version){n("La versin y el contenido no pueden estar vacos.");return}if(l.id){const{error:C}=await ae.from("terms_and_conditions").update({version:l.version,content:l.content}).eq("id",l.id);C&&n("Error al actualizar la versin: "+C.message)}else{const{error:C}=await ae.from("terms_and_conditions").insert({version:l.version,content:l.content});C&&n("Error al crear la nueva versin: "+C.message)}m(!1),u(null),x()}},w=(C=null)=>{if(_){if(C)u(C);else{const T=t.length>0?t[0].version:0;u({id:null,version:T+1,content:""})}m(!0)}},S=async()=>{if(!y||!p)return;const{error:C}=await ae.from("terms_and_conditions").delete().eq("id",p.id);C&&n("Error al eliminar: "+C.message),g(null),x()};return a?d.jsx(Vt,{}):d.jsxs("div",{className:Kr.container,children:[d.jsx("h1",{children:"Gestionar Trminos y Condiciones"}),_&&d.jsx("button",{onClick:()=>w(),className:Kr.addButton,children:"+ Crear Nueva Versin"}),d.jsxs("table",{className:"products-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Versin"}),d.jsx("th",{children:"Publicado el"}),(_||y)&&d.jsx("th",{children:"Acciones"})]})}),d.jsx("tbody",{children:t.map(C=>d.jsxs("tr",{children:[d.jsx("td",{children:C.version}),d.jsx("td",{children:new Date(C.published_at).toLocaleString()}),(_||y)&&d.jsxs("td",{children:[_&&d.jsx("button",{onClick:()=>w(C),children:"Editar"}),y&&d.jsx("button",{onClick:()=>g(C),className:Kr.deleteButton,children:"Eliminar"})]})]},C.id))})]}),h&&d.jsx("div",{className:Kr.modalOverlay,children:d.jsxs("div",{className:Kr.modalContent,children:[d.jsxs("h2",{children:[l.id?"Editar":"Nueva"," Versin"]}),d.jsx("label",{children:"Versin (nmero):"}),d.jsx("input",{type:"number",value:l.version,onChange:C=>u({...l,version:parseInt(C.target.value,10)})}),d.jsx("label",{children:"Contenido (Texto completo):"}),d.jsx("textarea",{rows:"15",value:l.content,onChange:C=>u({...l,content:C.target.value})}),d.jsxs("div",{className:Kr.modalActions,children:[d.jsx("button",{onClick:()=>m(!1),children:"Cancelar"}),d.jsx("button",{onClick:j,children:"Guardar"})]})]})}),d.jsxs(Di,{isOpen:!!p,onClose:()=>g(null),onConfirm:S,title:"Confirmar Eliminacin?",children:["Ests a punto de eliminar la versin ",p?.version,". Esta accin no se puede deshacer."]})]})}const q6="_meta_1gwkm_25",F6="_content_1gwkm_39",hm={meta:q6,content:F6};function G6(){const[n,e]=A.useState(null),[t,i]=A.useState(!0);if(A.useEffect(()=>{(async()=>{const{data:l,error:u}=await ae.from("terms_and_conditions").select("content, published_at").order("version",{ascending:!1}).limit(1).single();u?console.error(u):e(l),i(!1)})()},[]),t)return d.jsx(Vt,{});const a=n?On.sanitize(n.content.replace(/\n/g,"<br />")):"";return d.jsxs(d.Fragment,{children:[d.jsx(ec,{title:"Trminos y Condiciones - Entre Alas",description:"Lee los trminos y condiciones de servicio y uso de la plataforma de Entre Alas.",name:"Entre Alas",type:"website"}),d.jsxs("div",{className:hm.container,children:[d.jsx("h1",{children:"Trminos y Condiciones"}),n?d.jsxs(d.Fragment,{children:[d.jsxs("p",{className:hm.meta,children:["ltima actualizacin: ",new Date(n.published_at).toLocaleDateString()]}),d.jsx("div",{className:hm.content,dangerouslySetInnerHTML:{__html:a}})]}):d.jsx("p",{children:"No se pudieron cargar los trminos y condiciones."})]})]})}const V6="_container_kt34h_1",Y6="_formCard_kt34h_15",W6="_listCard_kt34h_15",X6="_cardTitle_kt34h_31",K6="_formGrid_kt34h_47",Q6="_formGroup_kt34h_59",Z6="_fullWidth_kt34h_83",J6="_permissionsTitle_kt34h_91",eP="_createButton_kt34h_105",tP="_permissionsTable_kt34h_143",nP="_modalOverlay_kt34h_195",sP="_modalContent_kt34h_209",iP="_modalBody_kt34h_229",aP="_modalActions_kt34h_239",rP="_cancelButton_kt34h_251",oP="_saveButton_kt34h_283",Ft={container:V6,formCard:Y6,listCard:W6,cardTitle:X6,formGrid:K6,formGroup:Q6,fullWidth:Z6,permissionsTitle:J6,createButton:eP,permissionsTable:tP,modalOverlay:nP,modalContent:sP,modalBody:iP,modalActions:aP,cancelButton:rP,saveButton:oP},lP=[{key:"dashboard",label:"Dashboard"},{key:"crear-pedido",label:"Crear Pedido"},{key:"pedidos",label:"Pedidos"},{key:"productos",label:"Productos"},{key:"clientes",label:"Clientes"},{key:"referidos",label:"Referidos"},{key:"horarios",label:"Horarios"},{key:"descuentos",label:"Descuentos"},{key:"terminos",label:"Trminos y Cond."},{key:"registrar-admin",label:"Gestionar Admins"},{key:"special-prices",label:"Precios Especiales"}],cP=["view","edit","delete"],F1=({permissions:n,setPermissions:e})=>{const t=(i,a)=>{e(o=>({...o,[i]:{...o[i],[a]:!o[i]?.[a]}}))};return d.jsx("div",{className:"table-wrapper",children:d.jsxs("table",{className:Ft.permissionsTable,children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Seccin"}),d.jsx("th",{children:"Ver"}),d.jsx("th",{children:"Editar/Crear"}),d.jsx("th",{children:"Eliminar"})]})}),d.jsx("tbody",{children:lP.map(i=>d.jsxs("tr",{children:[d.jsx("td",{children:i.label}),cP.map(a=>d.jsx("td",{children:d.jsx("input",{type:"checkbox",checked:!!n[i.key]?.[a],onChange:()=>t(i.key,a)})},a))]},i.key))})]})})},uP=({admin:n,onClose:e,onSave:t})=>{const[i,a]=A.useState(n.permissions||{}),o=()=>{t(n.id,i)};return d.jsx("div",{className:Ft.modalOverlay,children:d.jsxs("div",{className:Ft.modalContent,children:[d.jsxs("h2",{children:["Editando permisos de ",n.name]}),d.jsx("div",{className:Ft.modalBody,children:d.jsx(F1,{permissions:i,setPermissions:a})}),d.jsxs("div",{className:Ft.modalActions,children:[d.jsx("button",{onClick:e,className:Ft.cancelButton,children:"Cancelar"}),d.jsx("button",{onClick:o,className:Ft.saveButton,children:"Guardar Cambios"})]})]})})};function dP(){const{showAlert:n}=ft(),[e,t]=A.useState(""),[i,a]=A.useState(""),[o,l]=A.useState(""),[u,h]=A.useState("staff"),[m,p]=A.useState(!1),g={dashboard:{view:!0},pedidos:{view:!0}},[_,y]=A.useState(g),[x,j]=A.useState([]),[w,S]=A.useState(!0),[C,T]=A.useState(null),B=A.useCallback(async()=>{S(!0);const{data:$,error:R}=await ae.from("admins").select("*");R?n(`Error al cargar administradores: ${R.message}`):j($),S(!1)},[n]);A.useEffect(()=>{B();const $=ae.channel("public:admins").on("postgres_changes",{event:"*",schema:"public",table:"admins"},R=>{console.log("Admin list changed:",R),B()}).subscribe();return()=>{ae.removeChannel($)}},[B]);const D=async $=>{$.preventDefault(),p(!0);const R=On.sanitize(e),{data:N,error:z}=await ae.auth.signUp({email:i,password:o,options:{data:{role:u,name:R,permissions:_}}});z?n(`Error: ${z.message}`):(n(`Usuario ${N.user.email} creado! Revisa el correo para confirmar la cuenta.`),t(""),a(""),l(""),y(g),B()),p(!1)},M=async($,R)=>{const{error:N}=await ae.from("admins").update({permissions:R}).eq("id",$);N?n(`Error al actualizar permisos: ${N.message}`):(n("Permisos actualizados con xito."),T(null),B())};return d.jsxs("div",{className:Ft.container,children:[d.jsx("h1",{children:"Gestin de Administradores"}),d.jsxs("div",{className:Ft.formCard,children:[d.jsx("h2",{className:Ft.cardTitle,children:"Crear Nuevo Administrador"}),d.jsxs("form",{onSubmit:D,children:[d.jsxs("div",{className:Ft.formGrid,children:[d.jsxs("div",{className:Ft.formGroup,children:[d.jsx("label",{htmlFor:"name",children:"Nombre completo"}),d.jsx("input",{id:"name",type:"text",value:e,onChange:$=>t($.target.value),required:!0})]}),d.jsxs("div",{className:Ft.formGroup,children:[d.jsx("label",{htmlFor:"email",children:"Email"}),d.jsx("input",{id:"email",type:"email",value:i,onChange:$=>a($.target.value),required:!0})]}),d.jsxs("div",{className:Ft.formGroup,children:[d.jsx("label",{htmlFor:"password",children:"Contrasea"}),d.jsx("input",{id:"password",type:"password",value:o,onChange:$=>l($.target.value),required:!0})]}),d.jsxs("div",{className:Ft.formGroup,children:[d.jsx("label",{htmlFor:"role",children:"Rol principal"}),d.jsxs("select",{id:"role",value:u,onChange:$=>h($.target.value),children:[d.jsx("option",{value:"staff",children:"Staff (Permisos limitados)"}),d.jsx("option",{value:"admin",children:"Admin (Acceso total)"})]})]})]}),d.jsxs("div",{className:`${Ft.formGroup} ${Ft.fullWidth}`,children:[d.jsx("h3",{className:Ft.permissionsTitle,children:"Permisos Especficos (para rol Staff)"}),d.jsx(F1,{permissions:_,setPermissions:y})]}),d.jsx("button",{type:"submit",disabled:m,className:Ft.createButton,children:m?"Creando...":"Crear Administrador"})]})]}),d.jsxs("div",{className:Ft.listCard,children:[d.jsx("h2",{className:Ft.cardTitle,children:"Administradores Actuales"}),w?d.jsx(Vt,{}):d.jsx("div",{className:"table-wrapper",children:d.jsxs("table",{className:"products-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Nombre"}),d.jsx("th",{children:"Email"}),d.jsx("th",{children:"Rol"}),d.jsx("th",{children:"Acciones"})]})}),d.jsx("tbody",{children:x.map($=>d.jsxs("tr",{children:[d.jsx("td",{children:$.name}),d.jsx("td",{children:$.email}),d.jsx("td",{children:$.role}),d.jsx("td",{children:d.jsx("button",{onClick:()=>T($),className:"admin-button-secondary",children:"Editar Permisos"})})]},$.id))})]})})]}),C&&d.jsx(uP,{admin:C,onClose:()=>T(null),onSave:M})]})}const hP="_form_1dmyg_1",fP="_formGroup_1dmyg_8",mP="_submitButton_1dmyg_20",oa={form:hP,formGroup:fP,submitButton:mP},pP=({products:n,categories:e,onSubmit:t,initialData:i})=>{const{showAlert:a}=ft(),[o,l]=A.useState("product"),[u,h]=A.useState(""),[m,p]=A.useState(""),[g,_]=A.useState(""),[y,x]=A.useState(""),[j,w]=A.useState(""),[S,C]=A.useState(!1);A.useEffect(()=>{if(i){const D=i.product_id?"product":"category";l(D),h(i.product_id||i.category_id),p(i.override_price),_(i.start_date),x(i.end_date),w(i.reason)}else l("product"),h(""),p(""),_(""),x(""),w("")},[i]);const T=async D=>{if(D.preventDefault(),new Date(y)<new Date(g)){a("La fecha de fin no puede ser anterior a la de inicio.");return}C(!0);const M={product_id:o==="product"?u:null,category_id:o==="category"?u:null,override_price:m,start_date:g,end_date:y,reason:j};try{let $;if(i?.id?$=await ae.from("special_prices").update(M).eq("id",i.id):$=await ae.from("special_prices").insert([M]),$.error)throw $.error;a(`Promocin ${i?"actualizada":"creada"} con xito.`),t()}catch($){a(`Error al guardar la promocin: ${$.message}`)}finally{C(!1)}},B=o==="product"?n:e;return d.jsxs("form",{onSubmit:T,className:oa.form,children:[d.jsxs("div",{className:oa.formGroup,children:[d.jsx("label",{children:"Aplicar a:"}),d.jsxs("select",{value:o,onChange:D=>{l(D.target.value),h("")},children:[d.jsx("option",{value:"product",children:"Producto Especfico"}),d.jsx("option",{value:"category",children:"Categora Completa"})]})]}),d.jsxs("div",{className:oa.formGroup,children:[d.jsxs("label",{children:[o==="product"?"Producto":"Categora",":"]}),d.jsxs("select",{value:u,onChange:D=>h(D.target.value),required:!0,children:[d.jsx("option",{value:"",children:"Selecciona una opcin"}),B.map(D=>d.jsx("option",{value:D.id,children:D.name},D.id))]})]}),d.jsxs("div",{className:oa.formGroup,children:[d.jsx("label",{children:"Nuevo Precio (Ej: 99.99)"}),d.jsx("input",{type:"number",step:"0.01",value:m,onChange:D=>p(D.target.value),required:!0})]}),d.jsxs("div",{className:oa.formGroup,children:[d.jsx("label",{children:"Motivo (Ej: Oferta de Aniversario)"}),d.jsx("input",{type:"text",value:j,onChange:D=>w(D.target.value),placeholder:"Ej: Aniversario"})]}),d.jsxs("div",{className:oa.formGroup,children:[d.jsx("label",{children:"Fecha de Inicio:"}),d.jsx("input",{type:"date",value:g,onChange:D=>_(D.target.value),required:!0})]}),d.jsxs("div",{className:oa.formGroup,children:[d.jsx("label",{children:"Fecha de Fin:"}),d.jsx("input",{type:"date",value:y,onChange:D=>x(D.target.value),required:!0})]}),d.jsx("button",{type:"submit",disabled:S,className:oa.submitButton,children:S?"Guardando...":i?"Actualizar Promocin":"Crear Promocin"})]})},gP="_container_t7m4i_1",_P="_actionsContainer_t7m4i_15",vP="_table_t7m4i_25",Bu={container:gP,actionsContainer:_P,table:vP},yP=()=>{const{showAlert:n}=ft(),{hasPermission:e}=si(),[t,i]=A.useState([]),[a,o]=A.useState([]),[l,u]=A.useState([]),[h,m]=A.useState(!0),[p,g]=A.useState(null),[_,y]=A.useState(!1),[x,j]=A.useState(null),w=e("special-prices.edit"),S=e("special-prices.delete"),C=A.useCallback(async()=>{try{const{data:I,error:U}=await ae.from("special_prices").select("*, products (name), categories (name)").order("end_date",{ascending:!1});if(U)throw U;i(I);const{data:q,error:H}=await ae.from("products").select("id, name");if(H)throw H;o(q);const{data:G,error:E}=await ae.from("categories").select("id, name");if(E)throw E;u(G)}catch(I){n(`Error al cargar datos: ${I.message}`)}finally{m(!1)}},[n]);A.useEffect(()=>{C();const I=ae.channel("public:special_prices").on("postgres_changes",{event:"*",schema:"public",table:"special_prices"},U=>{console.log("Change detected in special prices!",U),C()}).subscribe();return()=>{ae.removeChannel(I)}},[C]);const T=()=>{C(),y(!1),g(null)},B=I=>{w&&(g(I),y(!0))},D=I=>{S&&j(I)},M=async()=>{if(x)try{const{error:I}=await ae.from("special_prices").delete().eq("id",x.id);if(I)throw I;n("Promocin eliminada con xito."),C()}catch(I){n(`Error al eliminar: ${I.message}`)}finally{j(null)}},$=I=>I.product_id?`Producto: ${I.products?.name||"N/A"}`:I.category_id?`Categora: ${I.categories?.name||"N/A"}`:"N/A",R=new Date().toISOString().split("T")[0],N=t.filter(I=>I.end_date>=R),z=t.filter(I=>I.end_date<R);return h?d.jsx(Vt,{}):d.jsxs("div",{className:Bu.container,children:[d.jsx("h1",{children:"Gestin de Precios Especiales"}),w&&d.jsxs("div",{className:"form-container",children:[d.jsx("h3",{children:_&&p?"Editando Promocin":"Crear Nueva Promocin"}),!_&&d.jsx("button",{className:"admin-button-primary",onClick:()=>y(!0),children:"+ Aadir Promocin"}),_&&d.jsxs(d.Fragment,{children:[d.jsx(pP,{products:a,categories:l,onSubmit:T,initialData:p}),d.jsx("button",{className:"admin-button-secondary",onClick:()=>{y(!1),g(null)},children:"Cancelar"})]})]}),d.jsxs("div",{className:Bu.table,children:[d.jsx("h3",{children:"Promociones Activas y Prximas"}),d.jsx("div",{className:"table-wrapper",children:d.jsxs("table",{className:"products-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Objetivo"}),d.jsx("th",{children:"Precio Especial"}),d.jsx("th",{children:"Vigencia"}),d.jsx("th",{children:"Motivo"}),(w||S)&&d.jsx("th",{children:"Acciones"})]})}),d.jsx("tbody",{children:N.map(I=>d.jsxs("tr",{children:[d.jsx("td",{children:$(I)}),d.jsxs("td",{children:["$",I.override_price]}),d.jsxs("td",{children:[I.start_date," al ",I.end_date]}),d.jsx("td",{children:I.reason}),(w||S)&&d.jsx("td",{children:d.jsxs("div",{className:Bu.actionsContainer,children:[w&&d.jsx("button",{onClick:()=>B(I),className:"admin-button-secondary",children:"Editar"}),S&&d.jsx("button",{onClick:()=>D(I),className:"admin-button-danger",children:"Eliminar"})]})})]},I.id))})]})})]}),d.jsxs("div",{className:Bu.table,children:[d.jsx("h3",{children:"Promociones Pasadas"}),d.jsx("div",{className:"table-wrapper",children:d.jsxs("table",{className:"products-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Objetivo"}),d.jsx("th",{children:"Precio Especial"}),d.jsx("th",{children:"Vigencia"}),d.jsx("th",{children:"Motivo"})]})}),d.jsx("tbody",{children:z.map(I=>d.jsxs("tr",{children:[d.jsx("td",{children:$(I)}),d.jsxs("td",{children:["$",I.override_price]}),d.jsxs("td",{children:[I.start_date," al ",I.end_date]}),d.jsx("td",{children:I.reason})]},I.id))})]})})]}),d.jsxs(Di,{isOpen:!!x,onClose:()=>j(null),onConfirm:M,title:"Confirmar Eliminacin?",children:['Ests seguro de que deseas eliminar la promocin para "',x&&$(x),'"?']})]})};function bP(){const[n,e]=A.useState(""),[t,i]=A.useState(""),[a,o]=A.useState(!1),[l,u]=A.useState(""),h=Kl();A.useEffect(()=>{(async()=>{const{data:{session:g}}=await ae.auth.getSession();g&&h("/admin")})()},[h]);const m=async p=>{p.preventDefault(),u(""),o(!0);const{data:g,error:_}=await ae.auth.signInWithPassword({email:n,password:t});_?(console.error(" Error devuelto por Supabase:",_),u(`Error: ${_.message}`)):(console.log(" Login exitoso! Datos recibidos:",g),h("/admin")),o(!1)};return d.jsxs("div",{style:{maxWidth:"400px",margin:"5rem auto",padding:"2rem",border:"1px solid #ccc",borderRadius:"8px"},children:[d.jsx("h1",{children:"Admin Login"}),d.jsxs("form",{onSubmit:m,children:[d.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:p=>e(p.target.value),style:{width:"100%",padding:"10px",marginBottom:"10px",boxSizing:"border-box"}}),d.jsx("input",{type:"password",placeholder:"Contrasea",value:t,onChange:p=>i(p.target.value),style:{width:"100%",padding:"10px",marginBottom:"20px",boxSizing:"border-box"}}),d.jsx("button",{type:"submit",disabled:a,style:{width:"100%",padding:"12px",cursor:"pointer"},children:a?"Entrando...":"Entrar"}),l&&d.jsx("p",{style:{color:"red",marginTop:"15px"},children:l})]})]})}function xP(){const[n,e]=A.useState(null),[t,i]=A.useState(!0);return A.useEffect(()=>{(async()=>{const{data:{session:l}}=await ae.auth.getSession();e(l),i(!1)})();const{data:{subscription:o}}=ae.auth.onAuthStateChange((l,u)=>{e(u)});return()=>o.unsubscribe()},[]),t?d.jsx("p",{children:"Cargando..."}):n?d.jsx(Vm,{}):d.jsx(mm,{to:"/login"})}const wP="_container_1isso_1",SP="_card_1isso_15",CP="_hoursGrid_1isso_59",jP="_dayRow_1isso_73",EP="_closed_1isso_101",AP="_timeInputs_1isso_119",TP="_slider_1isso_171",kP="_actions_1isso_231",OP="_saveButton_1isso_245",NP="_editButton_1isso_245",RP="_cancelButton_1isso_245",MP="_deleteButton_1isso_245",DP="_addButton_1isso_245",BP="_exceptionForm_1isso_327",LP="_formGroup_1isso_347",rn={container:wP,card:SP,hoursGrid:CP,dayRow:jP,closed:EP,timeInputs:AP,switch:"_switch_1isso_147",slider:TP,actions:kP,saveButton:OP,editButton:NP,cancelButton:RP,deleteButton:MP,addButton:DP,exceptionForm:BP,formGroup:LP},Cb=[{id:0,name:"Domingo"},{id:1,name:"Lunes"},{id:2,name:"Martes"},{id:3,name:"Mircoles"},{id:4,name:"Jueves"},{id:5,name:"Viernes"},{id:6,name:"Sbado"}];function PP(){const{showAlert:n}=ft(),{hasPermission:e}=si(),[t,i]=A.useState([]),[a,o]=A.useState([]),[l,u]=A.useState(!0),[h,m]=A.useState(!1),[p,g]=A.useState({date:"",is_closed:!0,open_time:"",close_time:"",reason:""}),_=e("horarios.edit"),y=A.useCallback(async()=>{u(!0);try{const{data:C,error:T}=await ae.from("business_hours").select("*").order("day_of_week",{ascending:!0});if(T)throw T;const B=Cb.map($=>C.find(N=>N.day_of_week===$.id)||{day_of_week:$.id,open_time:"09:00",close_time:"17:00",is_closed:!0});i(B);const{data:D,error:M}=await ae.from("business_exceptions").select("*").order("date",{ascending:!1});if(M)throw M;o(D)}catch(C){n(`Error al cargar los datos: ${C.message}`)}finally{u(!1)}},[n]);A.useEffect(()=>{y()},[y]);const x=(C,T,B)=>{i(D=>D.map(M=>M.day_of_week===C?{...M,[T]:B}:M))},j=async()=>{if(_){m(!1);try{const{error:C}=await ae.from("business_hours").upsert(t,{onConflict:"day_of_week"});if(C)throw C;n("Horarios guardados con xito.")}catch(C){n(`Error al guardar los horarios: ${C.message}`)}}},w=async()=>{if(_){if(!p.date){n("Por favor, selecciona una fecha para la excepcin.");return}try{const{error:C}=await ae.from("business_exceptions").insert(p);if(C)throw C;n("Excepcin aadida correctamente."),g({date:"",is_closed:!0,open_time:"",close_time:"",reason:""}),y()}catch(C){n(`Error al aadir la excepcin: ${C.message}`)}}},S=async C=>{if(e("horarios.delete")&&window.confirm("Ests seguro de que quieres eliminar esta excepcin?"))try{const{error:T}=await ae.from("business_exceptions").delete().eq("id",C);if(T)throw T;n("Excepcin eliminada."),y()}catch(T){n(`Error al eliminar: ${T.message}`)}};return l?d.jsx(Vt,{}):d.jsxs("div",{className:rn.container,children:[d.jsx("h1",{children:"Gestin de Horarios"}),d.jsxs("div",{className:rn.card,children:[d.jsx("h2",{children:"Horario Semanal"}),h?d.jsx("p",{children:'Modifica los horarios y haz clic en "Guardar Cambios".'}):d.jsx("p",{children:"Estos son los horarios de apertura y cierre para cada da de la semana."}),d.jsx("div",{className:rn.hoursGrid,children:t.map(C=>d.jsxs("div",{className:`${rn.dayRow} ${C.is_closed?rn.closed:""}`,children:[d.jsx("strong",{children:Cb.find(T=>T.id===C.day_of_week)?.name}),h&&_?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:rn.timeInputs,children:[d.jsx("input",{type:"time",value:C.open_time,onChange:T=>x(C.day_of_week,"open_time",T.target.value),disabled:C.is_closed}),d.jsx("span",{children:"-"}),d.jsx("input",{type:"time",value:C.close_time,onChange:T=>x(C.day_of_week,"close_time",T.target.value),disabled:C.is_closed})]}),d.jsxs("label",{className:rn.switch,children:[d.jsx("input",{type:"checkbox",checked:!C.is_closed,onChange:T=>x(C.day_of_week,"is_closed",!T.target.checked)}),d.jsx("span",{className:rn.slider})]})]}):d.jsx("span",{children:C.is_closed?"Cerrado":`${C.open_time} - ${C.close_time}`})]},C.day_of_week))}),_&&(h?d.jsxs("div",{className:rn.actions,children:[d.jsx("button",{onClick:()=>{m(!1),y()},className:rn.cancelButton,children:"Cancelar"}),d.jsx("button",{onClick:j,className:rn.saveButton,children:"Guardar Cambios"})]}):d.jsx("div",{className:rn.actions,children:d.jsx("button",{onClick:()=>m(!0),className:rn.editButton,children:"Editar Horarios"})}))]}),_&&d.jsxs("div",{className:rn.card,children:[d.jsx("h2",{children:"Excepciones (Feriados o Das Especiales)"}),d.jsxs("div",{className:rn.exceptionForm,children:[d.jsxs("div",{className:rn.formGroup,children:[d.jsx("label",{children:"Fecha"}),d.jsx("input",{type:"date",value:p.date,onChange:C=>g({...p,date:C.target.value})})]}),d.jsxs("div",{className:rn.formGroup,children:[d.jsx("label",{children:"Motivo (Opcional)"}),d.jsx("input",{type:"text",placeholder:"Ej. Aniversario",value:p.reason,onChange:C=>g({...p,reason:C.target.value})})]}),d.jsx("button",{onClick:w,className:rn.addButton,children:"Aadir"})]}),d.jsx("div",{className:"table-wrapper",children:d.jsxs("table",{className:"products-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Fecha"}),d.jsx("th",{children:"Estado"}),d.jsx("th",{children:"Motivo"}),d.jsx("th",{children:"Acciones"})]})}),d.jsx("tbody",{children:a.map(C=>d.jsxs("tr",{children:[d.jsx("td",{children:new Date(C.date).toLocaleDateString()}),d.jsx("td",{children:C.is_closed?"Cerrado":`${C.open_time} - ${C.close_time}`}),d.jsx("td",{children:C.reason||"N/A"}),d.jsx("td",{children:e("horarios.delete")&&d.jsx("button",{onClick:()=>S(C.id),className:rn.deleteButton,children:"Eliminar"})})]},C.id))})]})})]})]})}const IP="_container_14b2a_1",UP="_mainGrid_14b2a_9",zP="_workflowColumn_14b2a_23",$P="_stepCard_14b2a_35",HP="_active_14b2a_53",qP="_stepHeader_14b2a_65",FP="_stepNumber_14b2a_83",GP="_selectedCustomer_14b2a_109",VP="_changeButton_14b2a_125",YP="_searchInput_14b2a_139",WP="_customerResults_14b2a_167",XP="_orText_14b2a_203",KP="_createCustomerButton_14b2a_215",QP="_productFilters_14b2a_233",ZP="_productList_14b2a_243",JP="_productItem_14b2a_257",e7="_disabledText_14b2a_293",t7="_summaryColumn_14b2a_305",n7="_summaryCard_14b2a_313",s7="_emptyCart_14b2a_335",i7="_cartList_14b2a_345",a7="_cartItemInfo_14b2a_373",r7="_quantityControl_14b2a_381",o7="_total_14b2a_411",l7="_placeOrderButton_14b2a_429",c7="_modalOverlay_14b2a_443",u7="_modalContent_14b2a_453",d7="_formGroup_14b2a_463",h7="_modalActions_14b2a_465",Ie={container:IP,mainGrid:UP,workflowColumn:zP,stepCard:$P,active:HP,stepHeader:qP,stepNumber:FP,selectedCustomer:GP,changeButton:VP,searchInput:YP,customerResults:WP,orText:XP,createCustomerButton:KP,productFilters:QP,productList:ZP,productItem:JP,disabledText:e7,summaryColumn:t7,summaryCard:n7,emptyCart:s7,cartList:i7,cartItemInfo:a7,quantityControl:r7,total:o7,placeOrderButton:l7,modalOverlay:c7,modalContent:u7,formGroup:d7,modalActions:h7},f7=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),d.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),d.jsx("line",{x1:"17",y1:"11",x2:"23",y2:"11"})]}),jb=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("circle",{cx:"11",cy:"11",r:"8"}),d.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]});function m7(){const{showAlert:n}=ft(),[e,t]=A.useState(1),[i,a]=A.useState([]),[o,l]=A.useState(null),[u,h]=A.useState(""),[m,p]=A.useState(!1),[g,_]=A.useState({name:"",phone:""}),[y,x]=A.useState([]),[j,w]=A.useState([]),[S,C]=A.useState(""),[T,B]=A.useState("all"),[D,M]=A.useState([]),[$,R]=A.useState(!0),[N,z]=A.useState(!1);A.useEffect(()=>{(async()=>{R(!0);try{const{data:Y,error:L}=await ae.from("customers").select("*");if(L)throw L;a(Y);const{data:X,error:J}=await ae.from("products").select("*").eq("is_active",!0);if(J)throw J;x(X);const{data:ee,error:ne}=await ae.from("categories").select("*");if(ne)throw ne;w(ee)}catch(Y){n(`Error al cargar datos: ${Y.message}`)}R(!1)})()},[n]);const I=A.useMemo(()=>u?i.filter(F=>F.name.toLowerCase().includes(u.toLowerCase())||F.phone.includes(u)).slice(0,5):[],[i,u]),U=A.useMemo(()=>y.filter(F=>{const Y=T==="all"||F.category_id===T,L=F.name.toLowerCase().includes(S.toLowerCase());return Y&&L}),[y,S,T]),q=async()=>{if(!g.name||!g.phone){n("El nombre y el telfono son obligatorios.");return}z(!0);const{data:F,error:Y}=await ae.from("customers").insert(g).select().single();Y?n(`Error al crear cliente: ${Y.message}`):(n("Cliente creado con xito."),a(L=>[...L,F]),l(F),t(2),p(!1)),z(!1)},H=F=>{M(Y=>Y.find(X=>X.id===F.id)?Y.map(X=>X.id===F.id?{...X,quantity:X.quantity+1}:X):[...Y,{...F,quantity:1}])},G=(F,Y)=>{Y<=0?M(L=>L.filter(X=>X.id!==F)):M(L=>L.map(X=>X.id===F?{...X,quantity:Y}:X))},E=A.useMemo(()=>D.reduce((F,Y)=>F+Y.price*Y.quantity,0),[D]),O=async()=>{if(!o||D.length===0){n("Debes seleccionar un cliente y aadir al menos un producto.");return}z(!0);try{const{data:F,error:Y}=await ae.from("orders").insert({customer_id:o.id,total_amount:E,status:"completado"}).select().single();if(Y)throw Y;const L=D.map(J=>({order_id:F.id,product_id:J.id,quantity:J.quantity,price:J.price})),{error:X}=await ae.from("order_items").insert(L);if(X)throw X;n(`Pedido #${F.order_code} creado con xito.`),t(1),l(null),M([]),h("")}catch(F){n(`Error al crear el pedido: ${F.message}`)}finally{z(!1)}};return $?d.jsx(Vt,{}):d.jsxs("div",{className:Ie.container,children:[d.jsx("h1",{children:"Crear Nuevo Pedido"}),d.jsxs("div",{className:Ie.mainGrid,children:[d.jsxs("div",{className:Ie.workflowColumn,children:[d.jsxs("div",{className:`${Ie.stepCard} ${e===1?Ie.active:""}`,children:[d.jsxs("div",{className:Ie.stepHeader,children:[d.jsx("span",{className:Ie.stepNumber,children:"1"}),d.jsx("h2",{children:"Seleccionar Cliente"})]}),o?d.jsxs("div",{className:Ie.selectedCustomer,children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Cliente:"})," ",o.name]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Telfono:"})," ",o.phone]}),d.jsx("button",{onClick:()=>{l(null),t(1)},className:Ie.changeButton,children:"Cambiar"})]}):d.jsxs("div",{className:Ie.customerSearch,children:[d.jsxs("div",{className:Ie.searchInput,children:[d.jsx(jb,{}),d.jsx("input",{type:"text",placeholder:"Buscar por nombre o telfono...",value:u,onChange:F=>h(F.target.value)})]}),I.length>0&&d.jsx("ul",{className:Ie.customerResults,children:I.map(F=>d.jsxs("li",{onClick:()=>{l(F),t(2)},children:[F.name," - ",F.phone]},F.id))}),d.jsx("p",{className:Ie.orText,children:"o"}),d.jsxs("button",{onClick:()=>p(!0),className:Ie.createCustomerButton,children:[d.jsx(f7,{})," Crear Nuevo Cliente"]})]})]}),d.jsxs("div",{className:`${Ie.stepCard} ${e===2?Ie.active:""}`,children:[d.jsxs("div",{className:Ie.stepHeader,children:[d.jsx("span",{className:Ie.stepNumber,children:"2"}),d.jsx("h2",{children:"Aadir Productos"})]}),d.jsxs("div",{className:Ie.productFilters,children:[d.jsxs("div",{className:Ie.searchInput,children:[d.jsx(jb,{}),d.jsx("input",{type:"text",placeholder:"Buscar producto...",value:S,onChange:F=>C(F.target.value),disabled:!o})]}),d.jsxs("select",{onChange:F=>B(F.target.value),disabled:!o,children:[d.jsx("option",{value:"all",children:"Todas las categoras"}),j.map(F=>d.jsx("option",{value:F.id,children:F.name},F.id))]})]}),d.jsx("div",{className:Ie.productList,children:o?U.map(F=>d.jsxs("div",{className:Ie.productItem,onClick:()=>H(F),children:[d.jsx(bs,{src:F.image_url||"https://placehold.co/100",alt:F.name}),d.jsxs("div",{className:Ie.productInfo,children:[d.jsx("strong",{children:F.name}),d.jsxs("span",{children:["$",F.price.toFixed(2)]})]})]},F.id)):d.jsx("p",{className:Ie.disabledText,children:"Selecciona un cliente para aadir productos."})})]})]}),d.jsx("div",{className:Ie.summaryColumn,children:d.jsxs("div",{className:Ie.summaryCard,children:[d.jsx("h3",{children:"Resumen del Pedido"}),D.length===0?d.jsx("p",{className:Ie.emptyCart,children:"El carrito est vaco."}):d.jsxs(d.Fragment,{children:[d.jsx("ul",{className:Ie.cartList,children:D.map(F=>d.jsxs("li",{children:[d.jsxs("div",{className:Ie.cartItemInfo,children:[d.jsx("span",{children:F.name}),d.jsxs("small",{children:["$",F.price.toFixed(2)]})]}),d.jsxs("div",{className:Ie.quantityControl,children:[d.jsx("button",{onClick:()=>G(F.id,F.quantity-1),children:"-"}),d.jsx("input",{type:"number",value:F.quantity,onChange:Y=>G(F.id,parseInt(Y.target.value)||0)}),d.jsx("button",{onClick:()=>G(F.id,F.quantity+1),children:"+"})]}),d.jsxs("strong",{children:["$",(F.price*F.quantity).toFixed(2)]})]},F.id))}),d.jsxs("div",{className:Ie.total,children:[d.jsx("span",{children:"Total"}),d.jsxs("strong",{children:["$",E.toFixed(2)]})]})]}),d.jsx("button",{className:Ie.placeOrderButton,onClick:O,disabled:N||D.length===0||!o,children:N?"Creando...":"Crear Pedido"})]})})]}),m&&d.jsx("div",{className:Ie.modalOverlay,children:d.jsxs("div",{className:Ie.modalContent,children:[d.jsx("h2",{children:"Crear Nuevo Cliente"}),d.jsxs("div",{className:Ie.formGroup,children:[d.jsx("label",{children:"Nombre Completo"}),d.jsx("input",{type:"text",value:g.name,onChange:F=>_({...g,name:F.target.value})})]}),d.jsxs("div",{className:Ie.formGroup,children:[d.jsx("label",{children:"Nmero de Telfono"}),d.jsx("input",{type:"tel",value:g.phone,onChange:F=>_({...g,phone:F.target.value})})]}),d.jsxs("div",{className:Ie.modalActions,children:[d.jsx("button",{onClick:()=>p(!1),className:"admin-button-secondary",children:"Cancelar"}),d.jsx("button",{onClick:q,className:"admin-button-primary",disabled:N,children:N?"Guardando...":"Guardar Cliente"})]})]})})]})}const p7="_container_sykv2_5",g7="_mainGrid_sykv2_31",_7="_sideColumn_sykv2_45",v7="_mainColumn_sykv2_53",y7="_card_sykv2_97",b7="_levelsContainer_sykv2_147",x7="_levelCard_sykv2_157",w7="_topList_sykv2_189",S7="_rank_sykv2_213",C7="_customerInfo_sykv2_223",j7="_refCount_sykv2_235",E7="_searchInput_sykv2_243",A7="_detailsRow_sykv2_253",T7="_detailsContent_sykv2_261",k7="_cardHeader_sykv2_297",O7="_actionsCell_sykv2_309",N7="_editButton_sykv2_321",R7="_viewButton_sykv2_321",M7="_editorContainer_sykv2_357",D7="_formGroup_sykv2_369",B7="_customerTable_sykv2_405",bt={container:p7,mainGrid:g7,sideColumn:_7,mainColumn:v7,card:y7,levelsContainer:b7,levelCard:x7,topList:w7,rank:S7,customerInfo:C7,refCount:j7,searchInput:E7,detailsRow:A7,detailsContent:T7,cardHeader:k7,actionsCell:O7,editButton:N7,viewButton:R7,editorContainer:M7,formGroup:D7,customerTable:B7},L7="_overlay_1bp39_1",P7="_modalContent_1bp39_11",I7="_closeButton_1bp39_21",U7="_formSection_1bp39_33",z7="_formGrid_1bp39_35",$7="_listSection_1bp39_37",H7="_levelItem_1bp39_41",q7="_levelHeader_1bp39_43",F7="_rewardsList_1bp39_45",G7="_rewardItem_1bp39_47",V7="_addRewardForm_1bp39_51",Y7="_addButton_1bp39_59",W7="_deleteButton_1bp39_61",X7="_deleteRewardButton_1bp39_63",K7="_rewardInfo_1bp39_69",Dn={overlay:L7,modalContent:P7,closeButton:I7,formSection:U7,formGrid:z7,listSection:$7,levelItem:H7,levelHeader:q7,rewardsList:F7,rewardItem:G7,addRewardForm:V7,addButton:Y7,deleteButton:W7,deleteRewardButton:X7,rewardInfo:K7},Q7=({reward:n,onDelete:e})=>d.jsxs("div",{className:Dn.rewardItem,children:[d.jsxs("div",{className:Dn.rewardInfo,children:[d.jsxs("span",{children:[" ",n.description]}),n.reward_code&&d.jsxs("small",{children:["Cdigo: ",d.jsx("code",{children:n.reward_code})]})]}),d.jsx("button",{onClick:()=>e(n.id),className:Dn.deleteRewardButton,children:""})]}),Z7=({level:n,rewards:e,onDeleteLevel:t,onUpdate:i})=>{const{showAlert:a}=ft(),[o,l]=A.useState(""),[u,h]=A.useState(""),m=async()=>{if(!o.trim()){a("La descripcin de la recompensa no puede estar vaca.");return}const{error:g}=await ae.from("rewards").insert({level_id:n.id,description:On.sanitize(o),reward_code:On.sanitize(u.toUpperCase())||null});g?a(`Error al aadir recompensa: ${g.message}`):(l(""),h(""),i())},p=async g=>{const{error:_}=await ae.from("rewards").delete().eq("id",g);_?a(`Error al eliminar recompensa: ${_.message}`):i()};return d.jsxs("div",{className:Dn.levelItem,children:[d.jsxs("div",{className:Dn.levelHeader,children:[d.jsxs("span",{children:[d.jsx("strong",{children:n.name})," (desde ",n.min_referrals," referidos)"]}),d.jsx("button",{onClick:()=>t(n.id),className:Dn.deleteButton,children:"Eliminar Nivel"})]}),d.jsx("div",{className:Dn.rewardsList,children:e.map(g=>d.jsx(Q7,{reward:g,onDelete:p},g.id))}),d.jsxs("div",{className:Dn.addRewardForm,children:[d.jsx("input",{type:"text",placeholder:"Descripcin pblica (ej: 10% Descuento)",value:o,onChange:g=>l(g.target.value)}),d.jsx("input",{type:"text",placeholder:"Cdigo (ej: PROMO10)",value:u,onChange:g=>h(g.target.value)}),d.jsx("button",{onClick:m,children:"Aadir"})]})]})};function J7({levels:n,rewards:e,isOpen:t,onClose:i,onUpdate:a}){const{showAlert:o}=ft(),[l,u]=A.useState(""),[h,m]=A.useState(0),p=async()=>{if(!l||h<0){o("El nombre y un nmero de referidos vlido son necesarios.");return}const{error:_}=await ae.from("referral_levels").insert({name:l,min_referrals:h});_?o(`Error: ${_.message}`):(o("Nivel creado con xito."),u(""),m(0),a())},g=async _=>{if(!window.confirm("Seguro que quieres eliminar este nivel y todas sus recompensas asociadas?"))return;const{error:y}=await ae.rpc("delete_referral_level",{level_id_to_delete:_});y?o(`Error: ${y.message}`):(o("Nivel eliminado."),a())};return t?d.jsx("div",{className:Dn.overlay,onClick:i,children:d.jsxs("div",{className:Dn.modalContent,onClick:_=>_.stopPropagation(),children:[d.jsx("button",{onClick:i,className:Dn.closeButton,children:""}),d.jsx("h2",{children:"Gestionar Niveles y Recompensas"}),d.jsxs("div",{className:Dn.formSection,children:[d.jsx("h3",{children:"Crear Nuevo Nivel"}),d.jsxs("div",{className:Dn.formGrid,children:[d.jsx("input",{type:"text",placeholder:"Nombre del nivel (Ej: Experto)",value:l,onChange:_=>u(_.target.value)}),d.jsx("input",{type:"number",placeholder:"Referidos necesarios",value:h,onChange:_=>m(parseInt(_.target.value)||0)}),d.jsx("button",{onClick:p,className:Dn.addButton,children:"Aadir Nivel"})]})]}),d.jsxs("div",{className:Dn.listSection,children:[d.jsx("h3",{children:"Niveles Actuales"}),n.length>0?n.map(_=>d.jsx(Z7,{level:_,rewards:e.filter(y=>y.level_id===_.id),onDeleteLevel:g,onUpdate:a},_.id)):d.jsx("p",{children:"An no hay niveles creados."})]})]})}):null}const eI="_overlay_712wg_1",tI="_modalContent_712wg_11",nI="_closeButton_712wg_21",sI="_formGroup_712wg_33",iI="_actions_712wg_37",Tl={overlay:eI,modalContent:tI,closeButton:nI,formGroup:sI,actions:iI};function aI({customer:n,isOpen:e,onClose:t,onUpdate:i}){const{showAlert:a}=ft(),[o,l]=A.useState(n?.referral_count||0),u=async()=>{const{error:h}=await ae.rpc("set_customer_referral_count",{customer_id_to_update:n.customer_id,new_count:o});h?a(`Error al actualizar: ${h.message}`):(a("Contador de referidos actualizado."),i(),t())};return e?d.jsx("div",{className:Tl.overlay,onClick:t,children:d.jsxs("div",{className:Tl.modalContent,onClick:h=>h.stopPropagation(),children:[d.jsx("button",{onClick:t,className:Tl.closeButton,children:""}),d.jsx("h3",{children:"Editando Referidos de:"}),d.jsx("h2",{children:n.customer_name}),d.jsxs("div",{className:Tl.formGroup,children:[d.jsx("label",{htmlFor:"ref-count",children:"Nuevo total de referidos:"}),d.jsx("input",{id:"ref-count",type:"number",value:o,onChange:h=>l(parseInt(h.target.value)||0)})]}),d.jsxs("div",{className:Tl.actions,children:[d.jsx("button",{onClick:t,className:"admin-button-secondary",children:"Cancelar"}),d.jsx("button",{onClick:u,className:"admin-button-primary",children:"Guardar"})]})]})}):null}const rI=()=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M12 2L9 9h6l-3-7zM9 9H2l3 7h2M15 9h7l-3 7h-2M12 22l-3-3m3 3l3-3"})}),oI=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),d.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),d.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),d.jsx("line",{x1:"17",y1:"11",x2:"23",y2:"11"})]}),lI=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("polyline",{points:"20 12 20 22 4 22 4 12"}),d.jsx("rect",{x:"2",y:"7",width:"20",height:"5"}),d.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"7"}),d.jsx("path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}),d.jsx("path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"})]}),cI=({showAlert:n,onUpdate:e})=>{const[t,i]=A.useState({enabled:!0,message:"",discount_code:""}),[a,o]=A.useState(!0);A.useEffect(()=>{(async()=>{const{data:h,error:m}=await ae.from("settings").select("value").eq("key","welcome_reward").single();h&&i(h.value),o(!1)})()},[]);const l=async()=>{try{const{data:u,error:h}=await ae.from("discounts").select("id").eq("code",t.discount_code).single();if(h){n(`Error: El cdigo de descuento "${t.discount_code}" no existe. Por favor, cralo primero en la seccin de Descuentos.`);return}const{error:m}=await ae.from("discounts").update({requires_referred_status:!0,is_single_use:!0}).eq("id",u.id);if(m)throw m;const{error:p}=await ae.from("settings").update({value:t}).eq("key","welcome_reward");if(p)throw p;n("Recompensa de bienvenida actualizada. El cdigo ahora es de un solo uso y solo para referidos."),e()}catch(u){n(`Error al guardar: ${u.message}`)}};return a?d.jsx("p",{children:"Cargando editor..."}):d.jsxs("div",{className:bt.editorContainer,children:[d.jsxs("div",{className:bt.formGroup,children:[d.jsx("label",{children:"Mensaje para el nuevo invitado:"}),d.jsx("textarea",{rows:"4",value:t.message,onChange:u=>i({...t,message:u.target.value}),placeholder:"Ej: Bienvenido! Usa el cdigo {CODE} para un descuento."}),d.jsx("small",{children:"Usa `{CODE}` donde quieras que aparezca el cdigo."})]}),d.jsxs("div",{className:bt.formGroup,children:[d.jsx("label",{children:"Cdigo de descuento a aplicar:"}),d.jsx("input",{type:"text",value:t.discount_code,onChange:u=>i({...t,discount_code:u.target.value.toUpperCase()})}),d.jsx("small",{children:'Este cdigo debe existir en la seccin "Descuentos" y ser de un solo uso.'})]}),d.jsx("button",{onClick:l,className:"admin-button-primary",children:"Guardar y Aplicar Reglas"})]})};function uI(){const{showAlert:n}=ft(),[e,t]=A.useState(!0),[i,a]=A.useState([]),[o,l]=A.useState([]),[u,h]=A.useState([]),[m,p]=A.useState(""),[g,_]=A.useState(null),[y,x]=A.useState(!1),[j,w]=A.useState(null),S=A.useCallback(async()=>{try{const{data:D,error:M}=await ae.rpc("get_detailed_referral_info");if(M)throw M;const{data:$,error:R}=await ae.from("referral_levels").select("*").order("min_referrals");if(R)throw R;const{data:N,error:z}=await ae.from("rewards").select("*");if(z)throw z;a(D),l($),h(N)}catch(D){n(`Error al cargar los datos: ${D.message}`)}t(!1)},[n]);A.useEffect(()=>{S()},[S]);const C=A.useMemo(()=>i.filter(D=>D.referral_count>0).slice(0,5),[i]),T=A.useMemo(()=>m?i.filter(D=>D.customer_name.toLowerCase().includes(m.toLowerCase())||D.referral_code.toLowerCase().includes(m.toLowerCase())):i,[i,m]),B=D=>_(M=>M===D?null:D);return e?d.jsx(Vt,{}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:bt.container,children:[d.jsxs("h1",{children:[d.jsx(oI,{})," Sistema de Referidos"]}),d.jsxs("div",{className:bt.mainGrid,children:[d.jsxs("div",{className:bt.sideColumn,children:[d.jsxs("div",{className:bt.card,children:[d.jsxs("div",{className:bt.cardHeader,children:[d.jsxs("h3",{children:[d.jsx(rI,{})," Niveles y Recompensas"]}),d.jsx("button",{onClick:()=>x(!0),className:"admin-button-secondary",children:"Gestionar"})]}),d.jsx("div",{className:bt.levelsContainer,children:o.length>0?o.map(D=>d.jsx("div",{className:bt.levelCard,children:d.jsxs("h4",{children:[D.name," (",D.min_referrals,"+ refs)"]})},D.id)):d.jsx("p",{children:"Crea tu primer nivel."})})]}),d.jsxs("div",{className:bt.card,children:[d.jsxs("h3",{children:[d.jsx(lI,{})," Recompensa de Bienvenida"]}),d.jsx(cI,{showAlert:n,onUpdate:S})]}),d.jsxs("div",{className:bt.card,children:[d.jsx("h3",{children:" Top 5 Referidores"}),d.jsx("ul",{className:bt.topList,children:C.length>0?C.map((D,M)=>d.jsxs("li",{children:[d.jsx("span",{className:bt.rank,children:M+1}),d.jsxs("div",{className:bt.customerInfo,children:[d.jsx("span",{children:D.customer_name}),d.jsx("small",{children:D.level_name||"Novato"})]}),d.jsxs("span",{className:bt.refCount,children:[D.referral_count," refs"]})]},D.customer_id)):d.jsx("p",{children:"Nadie ha referido an."})})]})]}),d.jsx("div",{className:bt.mainColumn,children:d.jsxs("div",{className:bt.card,children:[d.jsx("h3",{children:"Todos los Clientes"}),d.jsx("input",{type:"text",placeholder:"Buscar por nombre o cdigo...",className:bt.searchInput,value:m,onChange:D=>p(D.target.value)}),d.jsx("div",{className:"table-wrapper",children:d.jsxs("table",{className:`products-table ${bt.customerTable}`,children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Cliente"}),d.jsx("th",{children:"Cdigo"}),d.jsx("th",{children:"Referidos"}),d.jsx("th",{children:"Nivel"}),d.jsx("th",{children:"Acciones"})]})}),d.jsx("tbody",{children:T.map(D=>d.jsxs(Xe.Fragment,{children:[d.jsxs("tr",{children:[d.jsx("td",{children:D.customer_name}),d.jsx("td",{children:D.referral_code}),d.jsx("td",{children:D.referral_count}),d.jsx("td",{children:D.level_name||"Novato"}),d.jsx("td",{children:d.jsxs("div",{className:bt.actionsCell,children:[d.jsx("button",{onClick:()=>w(D),className:bt.editButton,children:"Editar"}),d.jsx("button",{onClick:()=>B(D.customer_id),disabled:!D.referred_customers,className:bt.viewButton,children:g===D.customer_id?"Ocultar":"Ver"})]})})]}),g===D.customer_id&&d.jsx("tr",{className:bt.detailsRow,children:d.jsx("td",{colSpan:"5",children:d.jsxs("div",{className:bt.detailsContent,children:[d.jsxs("h4",{children:["Clientes referidos por ",D.customer_name,":"]}),D.referred_customers?.length>0?d.jsx("ul",{children:D.referred_customers.map(M=>d.jsxs("li",{children:[d.jsxs("span",{children:[M.name," (",M.phone,")"]}),d.jsxs("small",{children:["Registrado: ",new Date(M.registered_at).toLocaleDateString()]})]},M.phone))}):d.jsx("p",{children:"Sin referidos an."})]})})})]},D.customer_id))})]})})]})})]})]}),d.jsx(J7,{isOpen:y,onClose:()=>x(!1),onUpdate:S,levels:o,rewards:u}),d.jsx(aI,{isOpen:!!j,onClose:()=>w(null),onUpdate:S,customer:j})]})}function dI(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:a,onRegisteredSW:o,onRegisterError:l}=n;let u,h;const m=async(g=!0)=>{await h};async function p(){if("serviceWorker"in navigator){if(u=await Qa(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/sw.js",{scope:"/",type:"classic"})).catch(g=>{l?.(g)}),!u)return;u.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),u.addEventListener("installed",g=>{g.isUpdate||i?.()}),u.register({immediate:e}).then(g=>{o?o("/sw.js",g):a?.(g)}).catch(g=>{l?.(g)})}}return h=p(),m}function hI(n={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:i,onRegistered:a,onRegisteredSW:o,onRegisterError:l}=n,[u,h]=A.useState(!1),[m,p]=A.useState(!1),[g]=A.useState(()=>dI({immediate:e,onOfflineReady(){p(!0),i?.()},onNeedRefresh(){h(!0),t?.()},onRegistered:a,onRegisteredSW:o,onRegisterError:l}));return{needRefresh:[u,h],offlineReady:[m,p],updateServiceWorker:g}}const fI="_toast_1ux8a_3",mI="_message_1ux8a_39",pI="_actionButton_1ux8a_47",gI="_closeButton_1ux8a_65",$a={toast:fI,message:mI,actionButton:pI,closeButton:gI};function _I(){const{offlineReady:[n,e],needRefresh:[t,i],updateServiceWorker:a}=hI({onRegistered(l){console.log("SW Registered: "+l)},onRegisterError(l){console.log("SW registration error",l)}}),o=()=>{e(!1),i(!1)};return n?d.jsxs("div",{className:$a.toast,children:[d.jsx("div",{className:$a.message,children:d.jsx("span",{children:"Aplicacin lista para funcionar!"})}),d.jsx("button",{className:$a.closeButton,onClick:()=>o(),children:"Cerrar"})]}):t?d.jsxs("div",{className:$a.toast,children:[d.jsx("div",{className:$a.message,children:d.jsx("span",{children:"Hay una nueva versin disponible, recarga para actualizar!"})}),d.jsx("button",{className:$a.actionButton,onClick:()=>a(!0),children:"Recargar"}),d.jsx("button",{className:$a.closeButton,onClick:()=>o(),children:"Cerrar"})]}):null}const Ms=({permissionKey:n,element:e,isIndex:t=!1})=>{const{hasPermission:i,loading:a}=si();return a?d.jsx(Vt,{}):i(n)?e:t?d.jsx(mm,{to:"/login",replace:!0}):d.jsx(mm,{to:"/admin",replace:!0})};function vI(){return A.useEffect(()=>{IE()},[]),d.jsxs(d.Fragment,{children:[d.jsx(_I,{}),d.jsxs(JS,{children:[d.jsxs(qt,{path:"/",element:d.jsx(WE,{children:d.jsx(z0,{children:d.jsx(XE,{children:d.jsx(qE,{children:d.jsx(FE,{children:d.jsx(zE,{children:d.jsx(qT,{children:d.jsx(GE,{children:d.jsx($E,{children:d.jsx(yk,{})})})})})})})})})}),children:[d.jsx(qt,{index:!0,element:d.jsx(lN,{})}),d.jsx(qt,{path:"mis-pedidos",element:d.jsx(SR,{})}),d.jsx(qt,{path:"mi-perfil",element:d.jsx(FR,{})}),d.jsx(qt,{path:"mi-actividad",element:d.jsx(X3,{})}),d.jsx(qt,{path:"/terminos",element:d.jsx(G6,{})})]}),d.jsx(qt,{path:"/login",element:d.jsx(bP,{})}),d.jsx(qt,{element:d.jsx(xP,{}),children:d.jsxs(qt,{path:"/admin",element:d.jsx(z0,{children:d.jsx(A.Suspense,{children:d.jsx(VE,{children:d.jsx(aA,{})})})}),children:[d.jsx(qt,{index:!0,element:d.jsx(Ms,{permissionKey:"dashboard.view",element:d.jsx(bB,{}),isIndex:!0})}),d.jsx(qt,{path:"pedidos",element:d.jsx(Ms,{permissionKey:"pedidos.view",element:d.jsx(aL,{})})}),d.jsx(qt,{path:"crear-pedido",element:d.jsx(Ms,{permissionKey:"crear-pedido.view",element:d.jsx(m7,{})})}),d.jsx(qt,{path:"productos",element:d.jsx(Ms,{permissionKey:"productos.view",element:d.jsx(O8,{})})}),d.jsx(qt,{path:"clientes",element:d.jsx(Ms,{permissionKey:"clientes.view",element:d.jsx(x6,{})})}),d.jsx(qt,{path:"referidos",element:d.jsx(Ms,{permissionKey:"referidos.view",element:d.jsx(uI,{})})}),d.jsx(qt,{path:"descuentos",element:d.jsx(Ms,{permissionKey:"descuentos.view",element:d.jsx(B6,{})})}),d.jsx(qt,{path:"terminos",element:d.jsx(Ms,{permissionKey:"terminos.view",element:d.jsx(H6,{})})}),d.jsx(qt,{path:"registrar-admin",element:d.jsx(Ms,{permissionKey:"registrar-admin.view",element:d.jsx(dP,{})})}),d.jsx(qt,{path:"special-prices",element:d.jsx(Ms,{permissionKey:"special-prices.view",element:d.jsx(yP,{})})}),d.jsx(qt,{path:"horarios",element:d.jsx(Ms,{permissionKey:"horarios.view",element:d.jsx(PP,{})})})]})})]})]})}oS.createRoot(document.getElementById("root")).render(d.jsx(A.StrictMode,{children:d.jsx(Ox,{children:d.jsx(wC,{children:d.jsx(vI,{})})})}));export{A as a,d as j,iS as r,ft as u};
